<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:06:38 IST 2017 -->
<title>InListMultiProbeTest.QueryStrategy (Apache Derby V10.13 Test Javadoc)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="InListMultiProbeTest.QueryStrategy (Apache Derby V10.13 Test Javadoc)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":10,"i3":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/lang/InListMultiProbeTest.MixedIdsStrategy.html" title="class in org.apache.derbyTesting.functionTests.tests.lang"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/lang/InPredicateTest.html" title="class in org.apache.derbyTesting.functionTests.tests.lang"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/derbyTesting/functionTests/tests/lang/InListMultiProbeTest.QueryStrategy.html" target="_top">Frames</a></li>
<li><a href="InListMultiProbeTest.QueryStrategy.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derbyTesting.functionTests.tests.lang</div>
<h2 title="Class InListMultiProbeTest.QueryStrategy" class="title">Class InListMultiProbeTest.QueryStrategy</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.derbyTesting.functionTests.tests.lang.InListMultiProbeTest.QueryStrategy</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/lang/InListMultiProbeTest.LiteralsStrategy.html" title="class in org.apache.derbyTesting.functionTests.tests.lang">InListMultiProbeTest.LiteralsStrategy</a>, <a href="../../../../../../org/apache/derbyTesting/functionTests/tests/lang/InListMultiProbeTest.MarkersStrategy.html" title="class in org.apache.derbyTesting.functionTests.tests.lang">InListMultiProbeTest.MarkersStrategy</a>, <a href="../../../../../../org/apache/derbyTesting/functionTests/tests/lang/InListMultiProbeTest.MixedIdsStrategy.html" title="class in org.apache.derbyTesting.functionTests.tests.lang">InListMultiProbeTest.MixedIdsStrategy</a></dd>
</dl>
<dl>
<dt>Enclosing class:</dt>
<dd><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/lang/InListMultiProbeTest.html" title="class in org.apache.derbyTesting.functionTests.tests.lang">InListMultiProbeTest</a></dd>
</dl>
<hr>
<br>
<pre>abstract class <span class="typeNameLabel">InListMultiProbeTest.QueryStrategy</span>
extends java.lang.Object</pre>
<div class="block">Helper class.  An instance of QueryStrategy represents some specific
 form of an IN-list query.  Each strategy is responsible for building
 its own IN-list query, executing it, and then making the necessary
 calls to validate the results.

 This class is not static because it references non-static variables
 in the parent class (InListMultiProbeTest).</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.sql.Connection</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/lang/InListMultiProbeTest.QueryStrategy.html#conn">conn</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.Random</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/lang/InListMultiProbeTest.QueryStrategy.html#random">random</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) java.util.Comparator&lt;java.lang.String[]&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/lang/InListMultiProbeTest.QueryStrategy.html#rowComparator">rowComparator</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/lang/InListMultiProbeTest.QueryStrategy.html#QueryStrategy-java.sql.Connection-java.util.Random-">QueryStrategy</a></span>(java.sql.Connection&nbsp;conn,
             java.util.Random&nbsp;random)</code>
<div class="block">Constructor: just take the received objects and save them
 locally.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected abstract int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/lang/InListMultiProbeTest.QueryStrategy.html#fetchDataRows-java.lang.String:A-">fetchDataRows</a></span>(java.lang.String[]&nbsp;ids)</code>
<div class="block">Execute whatever query is associated with this QueryStrategy,
 using the received ids as the values for the IN list.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected abstract java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/lang/InListMultiProbeTest.QueryStrategy.html#getName--">getName</a></span>()</code>
<div class="block">Return the name of this query strategy (used for reporting
 failures).</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/lang/InListMultiProbeTest.QueryStrategy.html#testSize-int-">testSize</a></span>(int&nbsp;size)</code>
<div class="block">Build a list of ids to be used as the IN values for the query.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/lang/InListMultiProbeTest.QueryStrategy.html#validate-java.lang.String:A-java.sql.ResultSet-">validate</a></span>(java.lang.String[]&nbsp;foreignIds,
        java.sql.ResultSet&nbsp;results)</code>
<div class="block">Take a list of foreign_key_ids that correlate to the IN
 list for the most recently-executed query and verify that
 the received query results are correct.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="random">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>random</h4>
<pre>private&nbsp;java.util.Random random</pre>
</li>
</ul>
<a name="conn">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>conn</h4>
<pre>protected&nbsp;java.sql.Connection conn</pre>
</li>
</ul>
<a name="rowComparator">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>rowComparator</h4>
<pre>java.util.Comparator&lt;java.lang.String[]&gt; rowComparator</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="QueryStrategy-java.sql.Connection-java.util.Random-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>QueryStrategy</h4>
<pre>public&nbsp;QueryStrategy(java.sql.Connection&nbsp;conn,
                     java.util.Random&nbsp;random)</pre>
<div class="block">Constructor: just take the received objects and save them
 locally.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="testSize-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>testSize</h4>
<pre>public final&nbsp;int&nbsp;testSize(int&nbsp;size)
                   throws java.sql.SQLException</pre>
<div class="block">Build a list of ids to be used as the IN values for the query.
 Then execute this strategy's query, validate the results, and
 return the number of expected rows.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>size</code> - The size of the IN list that we want to build.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd>
</dl>
</li>
</ul>
<a name="validate-java.lang.String:A-java.sql.ResultSet-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>validate</h4>
<pre>protected&nbsp;int&nbsp;validate(java.lang.String[]&nbsp;foreignIds,
                       java.sql.ResultSet&nbsp;results)
                throws java.sql.SQLException</pre>
<div class="block">Take a list of foreign_key_ids that correlate to the IN
 list for the most recently-executed query and verify that
 the received query results are correct.

 When we get here foreignIdToRowsMap holds an in-memory version
 of *all* rows that exist in DATA_TABLE.  So in order to figure
 out what the "expected" results are, we take each id from the
 IN list (i.e. from the "foreignIds" array), look it up in the
 in-memory map, and add the corresponding row to a list of
 "expected" rows.  Since each foreignId maps to one or more
 rows, we iterate through all rows for the foreignId and add
 each one to the "expected" list.

 Then we sort the list on the "id" column so that it matches the
 ordering of the query result set.  And finally, we "unravel"
 the list into a two-dimensional array of Strings, which can
 then be compared with the received ResultSet using the normal
 JDBC assertion methods.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd>
</dl>
</li>
</ul>
<a name="fetchDataRows-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetchDataRows</h4>
<pre>protected abstract&nbsp;int&nbsp;fetchDataRows(java.lang.String[]&nbsp;ids)
                              throws java.sql.SQLException</pre>
<div class="block">Execute whatever query is associated with this QueryStrategy,
 using the received ids as the values for the IN list.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd>
</dl>
</li>
</ul>
<a name="getName--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getName</h4>
<pre>protected abstract&nbsp;java.lang.String&nbsp;getName()</pre>
<div class="block">Return the name of this query strategy (used for reporting
 failures).</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/lang/InListMultiProbeTest.MixedIdsStrategy.html" title="class in org.apache.derbyTesting.functionTests.tests.lang"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/lang/InPredicateTest.html" title="class in org.apache.derbyTesting.functionTests.tests.lang"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/derbyTesting/functionTests/tests/lang/InListMultiProbeTest.QueryStrategy.html" target="_top">Frames</a></li>
<li><a href="InListMultiProbeTest.QueryStrategy.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
