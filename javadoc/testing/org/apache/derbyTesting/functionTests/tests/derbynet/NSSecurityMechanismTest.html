<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:06:16 IST 2017 -->
<title>NSSecurityMechanismTest (Apache Derby V10.13 Test Javadoc)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="NSSecurityMechanismTest (Apache Derby V10.13 Test Javadoc)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":9,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":9,"i21":10,"i22":10,"i23":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSinSameJVMTest.html" title="class in org.apache.derbyTesting.functionTests.tests.derbynet"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/OutBufferedStreamTest.html" title="class in org.apache.derbyTesting.functionTests.tests.derbynet"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html" target="_top">Frames</a></li>
<li><a href="NSSecurityMechanismTest.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derbyTesting.functionTests.tests.derbynet</div>
<h2 title="Class NSSecurityMechanismTest" class="title">Class NSSecurityMechanismTest</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>junit.framework.Assert</li>
<li>
<ul class="inheritance">
<li>junit.framework.TestCase</li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html" title="class in org.apache.derbyTesting.junit">org.apache.derbyTesting.junit.BaseTestCase</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html" title="class in org.apache.derbyTesting.junit">org.apache.derbyTesting.junit.BaseJDBCTestCase</a></li>
<li>
<ul class="inheritance">
<li>org.apache.derbyTesting.functionTests.tests.derbynet.NSSecurityMechanismTest</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>junit.framework.Test</dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">NSSecurityMechanismTest</span>
extends <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html" title="class in org.apache.derbyTesting.junit">BaseJDBCTestCase</a></pre>
<div class="block">This class tests the security mechanisms supported by Network Server
 Network server supports SECMEC_EUSRIDPWD, SECMEC_USRIDPWD, SECMEC_USRIDONL
 and SECMEC_USRSSBPWD.
 
 -----------------------------------------------------------------
 Security Mechanism | secmec           | User friendly name   
                    |  codepoint value |
 -----------------------------------------------------------------
 USRIDONL           | 0x04             | USER_ONLY_SECURITY
 USRIDPWD           | 0x03             | CLEAR_TEXT_PASSWORD_SECURITY
 EUSRIDPWD          | 0x09             | ENCRYPTED_USER_AND_PASSWORD_SECURITY
 USRSSBPWD          | 0x08             | STRONG_PASSWORD_SUBSTITUTE_SECURITY
 -----------------------------------------------------------------
 
 Key points: 
 #1) Server and client support encrypted userid/password (EUSRIDPWD) via the
 use of Diffie Helman key-agreement protocol - but current Open Group DRDA
 specifications imposes small prime and base generator values (256 bits) that
 prevents other JCE's to be used as java cryptography providers - typical
 minimum security requirements is usually of 1024 bits (512-bit absolute
 minimum) when using DH key-agreement protocol to generate a session key.
 
 (Reference: DDM manual, page 281 and 282. Section: Generating the shared
 private key. DRDA's diffie helman agreed public values for prime are 256
 bits. The spec gives the public values for the prime, generator and the size
 of exponent required for DH . These values must be used as is to generate a
 shared private key.)
 
 Encryption is done using JCE. Hence JCE support of the necessary algorithm
 is required for a particular security mechanism to work. Thus even though 
 the server and client have code to support EUSRIDPWD, this security 
 mechanism will not work in all JVMs.
 
 JVMs where support for DH(32byte prime) is not available and thus EUSRIDPWD
 won't work are Sun JVM (versions 1.3.1,1.4.1,1.4.2,1.5) and IBM JVM (
 versions 1.3.1 and some old versions of 1.4.2 (in 2004))
 
 JVMs where support for DH(32bytes prime) is available and thus EUSRIDPWD 
 will work are IBM JVM [versions 1.4.1, later versions of 1.4.2 (from 2005),
 1.5]
 
 #2) Note, if  server restricts the client connections based on security 
 mechanism by setting derby.drda.securityMechanism, in that case the clients 
 will see an error similar to this:
 "Connection authorization failure occurred. Reason: security mechanism not
  supported"

 #3) USRSSBPWD - Strong password substitute is only supported starting from
     Apache Derby 10.2.
         NOTE: USRSSBPWD only works with the derby network client driver for now.
   ----</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#derby_drda_securityMechanism">derby_drda_securityMechanism</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.lang.String[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#derby_drda_securityMechanisms">derby_drda_securityMechanisms</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.lang.String[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#PWD_ATTRIBUTE">PWD_ATTRIBUTE</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static short[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#SECMEC_ATTRIBUTE">SECMEC_ATTRIBUTE</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static short</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#SECMEC_EUSRIDPWD">SECMEC_EUSRIDPWD</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static short</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#SECMEC_USRENCPWD">SECMEC_USRENCPWD</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static short</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#SECMEC_USRIDNWPWD">SECMEC_USRIDNWPWD</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static short</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#SECMEC_USRIDONL">SECMEC_USRIDONL</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static short</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#SECMEC_USRIDPWD">SECMEC_USRIDPWD</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static short</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#SECMEC_USRSSBPWD">SECMEC_USRSSBPWD</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.lang.String[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#USER_ATTRIBUTE">USER_ATTRIBUTE</a></span></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.derbyTesting.junit.BaseTestCase">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.derbyTesting.junit.<a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html" title="class in org.apache.derbyTesting.junit">BaseTestCase</a></h3>
<code><a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#DEFAULT_DB_DIR">DEFAULT_DB_DIR</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#DERBY_LOG">DERBY_LOG</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#ERRORSTACKTRACEFILE">ERRORSTACKTRACEFILE</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#NSSecurityMechanismTest-java.lang.String-">NSSecurityMechanismTest</a></span>(java.lang.String&nbsp;name)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private java.util.HashMap&lt;java.lang.String,java.lang.Object&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#addRequiredAttributes-java.util.HashMap-">addRequiredAttributes</a></span>(java.util.HashMap&lt;java.lang.String,java.lang.Object&gt;&nbsp;attrs)</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#assertAllCombinationsOfUserPasswordSecMecInputOK-java.lang.String:A-">assertAllCombinationsOfUserPasswordSecMecInputOK</a></span>(java.lang.String[]&nbsp;expectedValues)</code>
<div class="block">Test different interesting combinations of user,password, security 
 mechanism for testing security mechanism upgrade logic.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#assertConnectionOK-java.sql.Connection-">assertConnectionOK</a></span>(java.sql.Connection&nbsp;conn)</code>
<div class="block">Test a connection by executing a sample query</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#assertConnectionsUsingDriverManager-java.lang.String:A-">assertConnectionsUsingDriverManager</a></span>(java.lang.String[]&nbsp;expectedValues)</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#assertConnectionUsingDataSource-java.lang.String:A-">assertConnectionUsingDataSource</a></span>(java.lang.String[]&nbsp;expectedValues)</code>
<div class="block">Get connection from datasource and also set security mechanism</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#assertConnectionUsingDriverManager-java.lang.String-java.lang.String-java.lang.String-">assertConnectionUsingDriverManager</a></span>(java.lang.String&nbsp;dbUrl,
                                  java.lang.String&nbsp;msg,
                                  java.lang.String&nbsp;expectedValue)</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#assertDerby1080Fixed-java.lang.String-">assertDerby1080Fixed</a></span>(java.lang.String&nbsp;expectedValue)</code>
<div class="block">This is a regression test for DERBY-1080 - where some variables required
 only for the EUSRIDPWD security mechanism case were not getting reset on
 connection re-use and resulting in protocol error.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#assertSecMecWithConnPoolingOK-java.lang.String-java.lang.String-java.lang.Short-">assertSecMecWithConnPoolingOK</a></span>(java.lang.String&nbsp;user,
                             java.lang.String&nbsp;password,
                             java.lang.Short&nbsp;secmec)</code>
<div class="block">Test a deferred connection reset.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#assertSecurityMechanismOK-java.lang.String-java.lang.String-java.lang.Short-java.lang.String-java.lang.String-">assertSecurityMechanismOK</a></span>(java.lang.String&nbsp;user,
                         java.lang.String&nbsp;password,
                         java.lang.Short&nbsp;secmec,
                         java.lang.String&nbsp;msg,
                         java.lang.String&nbsp;expectedValue)</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#assertSQLState08001-java.lang.String-java.sql.SQLException-">assertSQLState08001</a></span>(java.lang.String&nbsp;expectedValue,
                   java.sql.SQLException&nbsp;sqle)</code>&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#assertUSRSSBPWD_with_BUILTIN-java.lang.String:A-">assertUSRSSBPWD_with_BUILTIN</a></span>(java.lang.String[]&nbsp;expectedValues)</code>
<div class="block">Test SECMEC_USRSSBPWD with derby BUILTIN authentication turned ON.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#dumpSQLException-java.sql.SQLException-">dumpSQLException</a></span>(java.sql.SQLException&nbsp;sqle)</code>
<div class="block">Dump SQLState and message for the complete nested chain of SQLException</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>private javax.sql.ConnectionPoolDataSource</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#getCPDS-java.lang.String-java.lang.String-">getCPDS</a></span>(java.lang.String&nbsp;user,
       java.lang.String&nbsp;password)</code>&nbsp;</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#getDataSourceConnection-java.lang.String-java.lang.String-java.lang.String-">getDataSourceConnection</a></span>(java.lang.String&nbsp;user,
                       java.lang.String&nbsp;password,
                       java.lang.String&nbsp;expectedValue)</code>
<div class="block">Helper method to get connection from datasource and to print
 the exceptions if any when getting a connection.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>private java.sql.Connection</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#getDataSourceConnectionWithSecMec-java.lang.String-java.lang.String-java.lang.Short-">getDataSourceConnectionWithSecMec</a></span>(java.lang.String&nbsp;user,
                                 java.lang.String&nbsp;password,
                                 java.lang.Short&nbsp;secMec)</code>&nbsp;</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>private javax.sql.DataSource</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#getDS-java.lang.String-java.lang.String-">getDS</a></span>(java.lang.String&nbsp;user,
     java.lang.String&nbsp;password)</code>&nbsp;</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#getExpectedValueFromAll-java.lang.String:A-int-int-int-">getExpectedValueFromAll</a></span>(java.lang.String[]&nbsp;expectedValues,
                       int&nbsp;USER_ATTR,
                       int&nbsp;PWD_ATTR,
                       int&nbsp;SECMEC_ATTR)</code>&nbsp;</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#getJDBCUrl-java.lang.String-">getJDBCUrl</a></span>(java.lang.String&nbsp;attrs)</code>&nbsp;</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#hasSufficientEntropy--">hasSufficientEntropy</a></span>()</code>
<div class="block">Tells if the current platform is assumed to have sufficient entropy for
 the strong password substitution security mechanism to run reasonably
 fast.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#setSecurityMechanism-java.lang.String-">setSecurityMechanism</a></span>(java.lang.String&nbsp;derby_security_mechanism)</code>&nbsp;</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>static junit.framework.Test</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#suite--">suite</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#tearDown--">tearDown</a></span>()</code>
<div class="block">Tear down this fixture, sub-classes should call
 super.tearDown().</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#testNetworkServerSecurityMechanism--">testNetworkServerSecurityMechanism</a></span>()</code>
<div class="block">Test cases for security mechanism
  ---------------------------------------------------------------
  DriverManager:
  T1 - default , no user      PASS (for derbyclient)
  T2 - user only              PASS (for derbyclient)
  T3 - user,password          PASS (only for derbynet)
  T4 - user,password, security mechanism not set  FAIL
  T5 - user,password, security mechanism set
       to SECMEC_EUSRIDPWD  PASS/FAIL
       (Fails with Sun JVM as EUSRIDPWD secmec cannot be used)
  T6 - user, security mechanism set to SECMEC_USRIDONL   PASS
  T7 - user,password, security mechanism set to SECMEC_USRENCPWD  FAIL
  Test with datasource as well as DriverManager
  T8 - user,password security mechanism set to SECMEC_USRIDONL   PASS
  T9 - user,password security mechanism set to SECMEC_USRSSBPWD  PASS
  Test with datasource as well as DriverManager
 Note, that with DERBY-928, the pass/fail for the connections will depend 
 on the security mechanism specified at the server by property 
 derby.drda.securityMechanism.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html#testSecurityMechanismOnEmbedded--">testSecurityMechanismOnEmbedded</a></span>()</code>
<div class="block">Test that securityMechanism=8 is ignored by the embedded driver
 (DERBY-3025).</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.derbyTesting.junit.BaseJDBCTestCase">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.derbyTesting.junit.<a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html" title="class in org.apache.derbyTesting.junit">BaseJDBCTestCase</a></h3>
<code><a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertCallError-java.lang.String-java.lang.String-">assertCallError</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertCheckTable-java.lang.String-">assertCheckTable</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertCommitError-java.lang.String-java.sql.Connection-">assertCommitError</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertCompileError-java.lang.String-java.lang.String-">assertCompileError</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertEquals-java.sql.Blob-java.sql.Blob-">assertEquals</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertEquals-java.sql.Clob-java.sql.Clob-">assertEquals</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertEquals-java.lang.String-java.sql.Time-java.sql.Time-">assertEquals</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertEquivalentDataType-int-int-">assertEquivalentDataType</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertErrorCode-int-java.sql.SQLException-">assertErrorCode</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertGetIntError-int-java.lang.String-java.sql.ResultSet-">assertGetIntError</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertNextError-java.lang.String-java.sql.ResultSet-">assertNextError</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertPreparedStatementError-java.lang.String-java.sql.PreparedStatement-">assertPreparedStatementError</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertResults-java.sql.Connection-java.lang.String-java.lang.String:A:A-boolean-">assertResults</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertResults-java.sql.ResultSet-java.lang.String:A:A-boolean-">assertResults</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertSQLExceptionEquals-java.sql.SQLException-java.sql.SQLException-">assertSQLExceptionEquals</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertSQLState-java.lang.String-java.sql.SQLException-">assertSQLState</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertSQLState-java.lang.String-java.lang.String-java.sql.SQLException-">assertSQLState</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertStatementError-java.lang.String:A-java.sql.Statement-java.lang.String-">assertStatementError</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertStatementError-java.lang.String-int-java.sql.Statement-java.lang.String-">assertStatementError</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertStatementError-java.lang.String-java.sql.PreparedStatement-">assertStatementError</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertStatementError-java.lang.String-java.sql.Statement-java.lang.String-">assertStatementError</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertStatementErrorUnordered-java.lang.String:A-java.sql.Statement-java.lang.String-">assertStatementErrorUnordered</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertTableRowCount-java.lang.String-int-">assertTableRowCount</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertUpdateCount-java.sql.PreparedStatement-int-">assertUpdateCount</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertUpdateCount-java.sql.Statement-int-java.lang.String-">assertUpdateCount</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#assertWarning-java.sql.Connection-java.lang.String-">assertWarning</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#chattyPrepare-java.sql.Connection-java.lang.String-">chattyPrepare</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#chattyPrepareCall-java.sql.Connection-java.lang.String-">chattyPrepareCall</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#checkAllConsistency-java.sql.Connection-">checkAllConsistency</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#checkEstimatedRowCount-java.sql.Connection-double-">checkEstimatedRowCount</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#closeStatement-java.sql.Statement-">closeStatement</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#commit--">commit</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#createStatement--">createStatement</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#createStatement-int-int-">createStatement</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#createStatement-int-int-int-">createStatement</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#dropTable-java.sql.Connection-java.lang.String-">dropTable</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#dropTable-java.lang.String-">dropTable</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#dropView-java.sql.Connection-java.lang.String-">dropView</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#dropView-java.lang.String-">dropView</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#dumpRs-java.sql.ResultSet-">dumpRs</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#dumpRs-java.sql.ResultSet-java.io.PrintStream-">dumpRs</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#emptyStatementCache--">emptyStatementCache</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#executeQuery-java.sql.Statement-java.lang.String-">executeQuery</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#expectCompilationError-java.sql.Connection-java.lang.String-java.lang.String-">expectCompilationError</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#expectCompilationError-java.lang.String-java.lang.String-">expectCompilationError</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#expectExecutionError-java.sql.Connection-java.lang.String-java.lang.String-">expectExecutionError</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#getClientTransactionID-java.sql.Connection-">getClientTransactionID</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#getConnection--">getConnection</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#getDatabaseProperty-java.lang.String-">getDatabaseProperty</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#getLastSQLException-java.sql.SQLException-">getLastSQLException</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#goodStatement-java.sql.Connection-java.lang.String-">goodStatement</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#goodUpdate-java.sql.Connection-java.lang.String-int-">goodUpdate</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#initializeConnection-java.sql.Connection-">initializeConnection</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#openConnection-java.lang.String-">openConnection</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#openDefaultConnection--">openDefaultConnection</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#openDefaultConnection-java.lang.String-java.lang.String-">openDefaultConnection</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#openDefaultConnection-org.apache.derbyTesting.junit.TestConfiguration-">openDefaultConnection</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#openUserConnection-java.lang.String-">openUserConnection</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#prepareCall-java.lang.String-">prepareCall</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#prepareCall-java.lang.String-int-int-">prepareCall</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#prepareCall-java.lang.String-int-int-int-">prepareCall</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#prepareStatement-java.lang.String-">prepareStatement</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#prepareStatement-java.lang.String-int-">prepareStatement</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#prepareStatement-java.lang.String-int:A-">prepareStatement</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#prepareStatement-java.lang.String-int-int-">prepareStatement</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#prepareStatement-java.lang.String-int-int-int-">prepareStatement</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#prepareStatement-java.lang.String-java.lang.String:A-">prepareStatement</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#rollback--">rollback</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#runBare--">runBare</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#runBareOverridable--">runBareOverridable</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#runScript-java.io.InputStream-java.lang.String-">runScript</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#runScript-java.lang.String-java.lang.String-">runScript</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#runSQLCommands-java.lang.String-">runSQLCommands</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#setAutoCommit-boolean-">setAutoCommit</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#usingDB2Client--">usingDB2Client</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#usingDerbyNetClient--">usingDerbyNetClient</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#usingEmbedded--">usingEmbedded</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.derbyTesting.junit.BaseTestCase">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.derbyTesting.junit.<a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html" title="class in org.apache.derbyTesting.junit">BaseTestCase</a></h3>
<code><a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#alarm-java.lang.String-">alarm</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#assertDirectoryDeleted-java.io.File-">assertDirectoryDeleted</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#assertEquals-byte:A-byte:A-">assertEquals</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#assertEquals-java.io.File-java.io.File-">assertEquals</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#assertEquals-java.io.InputStream-java.io.InputStream-">assertEquals</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#assertEquals-int:A-int:A-">assertEquals</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#assertEquals-long:A-long:A-">assertEquals</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#assertEquals-java.io.Reader-java.io.Reader-">assertEquals</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#assertExecJavaCmdAsExpected-java.lang.String:A-java.lang.String:A-int-">assertExecJavaCmdAsExpected</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#assertLaunchedJUnitTestMethod-java.lang.String-">assertLaunchedJUnitTestMethod</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#assertLaunchedJUnitTestMethod-java.lang.String-java.lang.String-">assertLaunchedJUnitTestMethod</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#assertSameNullness-java.lang.Object-java.lang.Object-">assertSameNullness</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#assertSecurityManager--">assertSecurityManager</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#assertThrowableEquals-java.lang.Throwable-java.lang.Throwable-">assertThrowableEquals</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#currentDirectory--">currentDirectory</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#execJavaCmd-java.lang.String:A-">execJavaCmd</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#execJavaCmd-java.lang.String-java.lang.String-java.lang.String:A-java.io.File-">execJavaCmd</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#execJavaCmd-java.lang.String-java.lang.String-java.lang.String:A-java.io.File-boolean-">execJavaCmd</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#fail-java.lang.String-java.lang.Throwable-">fail</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#getClassVersionMajor--">getClassVersionMajor</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#getEmmaJar--">getEmmaJar</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#getFailureFolder--">getFailureFolder</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#getFilesWith-java.io.File-java.lang.String-">getFilesWith</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#getJavaExecutableName--">getJavaExecutableName</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#getSystemProperty-java.lang.String-">getSystemProperty</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#getTestConfiguration--">getTestConfiguration</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#getTestResource-java.lang.String-">getTestResource</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#hasInterruptibleIO--">hasInterruptibleIO</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#isCVM--">isCVM</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#isIBMJVM--">isIBMJVM</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#isJ9Platform--">isJ9Platform</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#isJava5--">isJava5</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#isJava7--">isJava7</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#isPhoneME--">isPhoneME</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#isPlatform-java.lang.String-">isPlatform</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#isSunJVM--">isSunJVM</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#isWindowsPlatform--">isWindowsPlatform</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#newAssertionFailedError-java.lang.String-java.lang.Throwable-">newAssertionFailedError</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#openTestResource-java.net.URL-">openTestResource</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#println-java.lang.String-">println</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#printStackTrace-java.lang.Throwable-">printStackTrace</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#readProcessOutput-java.lang.Process-">readProcessOutput</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#removeDirectory-java.io.File-">removeDirectory</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#removeDirectory-java.lang.String-">removeDirectory</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#removeFiles-java.lang.String:A-">removeFiles</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#removeSystemProperty-java.lang.String-">removeSystemProperty</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#runsWithEmma--">runsWithEmma</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#runsWithJaCoCo--">runsWithJaCoCo</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#setSystemErr-java.io.PrintStream-">setSystemErr</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#setSystemOut-java.io.PrintStream-">setSystemOut</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#setSystemProperty-java.lang.String-java.lang.String-">setSystemProperty</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#sleep-long-">sleep</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#sleepAtLeastOneTick--">sleepAtLeastOneTick</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#traceit-java.lang.String-">traceit</a>, <a href="../../../../../../org/apache/derbyTesting/junit/BaseTestCase.html#vmAtLeast-int-int-">vmAtLeast</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.junit.framework.TestCase">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;junit.framework.TestCase</h3>
<code>countTestCases, createResult, getName, run, run, runTest, setName, setUp, toString</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.junit.framework.Assert">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;junit.framework.Assert</h3>
<code>assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertFalse, assertFalse, assertNotNull, assertNotNull, assertNotSame, assertNotSame, assertNull, assertNull, assertSame, assertSame, assertTrue, assertTrue, fail, fail, failNotEquals, failNotSame, failSame</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="derby_drda_securityMechanisms">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>derby_drda_securityMechanisms</h4>
<pre>private static&nbsp;java.lang.String[] derby_drda_securityMechanisms</pre>
</li>
</ul>
<a name="derby_drda_securityMechanism">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>derby_drda_securityMechanism</h4>
<pre>private static&nbsp;java.lang.String derby_drda_securityMechanism</pre>
</li>
</ul>
<a name="USER_ATTRIBUTE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>USER_ATTRIBUTE</h4>
<pre>private static&nbsp;java.lang.String[] USER_ATTRIBUTE</pre>
</li>
</ul>
<a name="PWD_ATTRIBUTE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PWD_ATTRIBUTE</h4>
<pre>private static&nbsp;java.lang.String[] PWD_ATTRIBUTE</pre>
</li>
</ul>
<a name="SECMEC_EUSRIDPWD">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SECMEC_EUSRIDPWD</h4>
<pre>static final&nbsp;short SECMEC_EUSRIDPWD</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.derbyTesting.functionTests.tests.derbynet.NSSecurityMechanismTest.SECMEC_EUSRIDPWD">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="SECMEC_USRIDONL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SECMEC_USRIDONL</h4>
<pre>static final&nbsp;short SECMEC_USRIDONL</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.derbyTesting.functionTests.tests.derbynet.NSSecurityMechanismTest.SECMEC_USRIDONL">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="SECMEC_USRENCPWD">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SECMEC_USRENCPWD</h4>
<pre>static final&nbsp;short SECMEC_USRENCPWD</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.derbyTesting.functionTests.tests.derbynet.NSSecurityMechanismTest.SECMEC_USRENCPWD">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="SECMEC_USRIDNWPWD">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SECMEC_USRIDNWPWD</h4>
<pre>static final&nbsp;short SECMEC_USRIDNWPWD</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.derbyTesting.functionTests.tests.derbynet.NSSecurityMechanismTest.SECMEC_USRIDNWPWD">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="SECMEC_USRIDPWD">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SECMEC_USRIDPWD</h4>
<pre>static final&nbsp;short SECMEC_USRIDPWD</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.derbyTesting.functionTests.tests.derbynet.NSSecurityMechanismTest.SECMEC_USRIDPWD">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="SECMEC_USRSSBPWD">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SECMEC_USRSSBPWD</h4>
<pre>static final&nbsp;short SECMEC_USRSSBPWD</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.derbyTesting.functionTests.tests.derbynet.NSSecurityMechanismTest.SECMEC_USRSSBPWD">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="SECMEC_ATTRIBUTE">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SECMEC_ATTRIBUTE</h4>
<pre>private static&nbsp;short[] SECMEC_ATTRIBUTE</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="NSSecurityMechanismTest-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>NSSecurityMechanismTest</h4>
<pre>public&nbsp;NSSecurityMechanismTest(java.lang.String&nbsp;name)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="suite--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>suite</h4>
<pre>public static&nbsp;junit.framework.Test&nbsp;suite()</pre>
</li>
</ul>
<a name="tearDown--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tearDown</h4>
<pre>protected&nbsp;void&nbsp;tearDown()
                 throws java.lang.Exception</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#tearDown--">BaseJDBCTestCase</a></code></span></div>
<div class="block">Tear down this fixture, sub-classes should call
 super.tearDown(). This cleans up and closes the connection
 if it is open and any statement objects returned through
 the utility methods.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html#tearDown--">tearDown</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../org/apache/derbyTesting/junit/BaseJDBCTestCase.html" title="class in org.apache.derbyTesting.junit">BaseJDBCTestCase</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a name="testNetworkServerSecurityMechanism--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>testNetworkServerSecurityMechanism</h4>
<pre>public&nbsp;void&nbsp;testNetworkServerSecurityMechanism()
                                        throws java.sql.SQLException,
                                               java.lang.Exception</pre>
<div class="block">Test cases for security mechanism
  ---------------------------------------------------------------
  DriverManager:
  T1 - default , no user      PASS (for derbyclient)
  T2 - user only              PASS (for derbyclient)
  T3 - user,password          PASS (only for derbynet)
  T4 - user,password, security mechanism not set  FAIL
  T5 - user,password, security mechanism set
       to SECMEC_EUSRIDPWD  PASS/FAIL
       (Fails with Sun JVM as EUSRIDPWD secmec cannot be used)
  T6 - user, security mechanism set to SECMEC_USRIDONL   PASS
  T7 - user,password, security mechanism set to SECMEC_USRENCPWD  FAIL
  Test with datasource as well as DriverManager
  T8 - user,password security mechanism set to SECMEC_USRIDONL   PASS
  T9 - user,password security mechanism set to SECMEC_USRSSBPWD  PASS
  Test with datasource as well as DriverManager
 Note, that with DERBY-928, the pass/fail for the connections will depend 
 on the security mechanism specified at the server by property 
 derby.drda.securityMechanism.  Please check out the following
 html file http://issues.apache.org/jira/secure/attachment/12322971/Derby928_Table_SecurityMechanisms..htm
 for a combination of url/security mechanisms and the expected results</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a name="testSecurityMechanismOnEmbedded--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>testSecurityMechanismOnEmbedded</h4>
<pre>public&nbsp;void&nbsp;testSecurityMechanismOnEmbedded()
                                     throws java.sql.SQLException</pre>
<div class="block">Test that securityMechanism=8 is ignored by the embedded driver
 (DERBY-3025).</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd>
</dl>
</li>
</ul>
<a name="setSecurityMechanism-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSecurityMechanism</h4>
<pre>private&nbsp;boolean&nbsp;setSecurityMechanism(java.lang.String&nbsp;derby_security_mechanism)
                              throws java.lang.Exception</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a name="assertConnectionsUsingDriverManager-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertConnectionsUsingDriverManager</h4>
<pre>private&nbsp;void&nbsp;assertConnectionsUsingDriverManager(java.lang.String[]&nbsp;expectedValues)</pre>
</li>
</ul>
<a name="assertConnectionUsingDataSource-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertConnectionUsingDataSource</h4>
<pre>private&nbsp;void&nbsp;assertConnectionUsingDataSource(java.lang.String[]&nbsp;expectedValues)</pre>
<div class="block">Get connection from datasource and also set security mechanism</div>
</li>
</ul>
<a name="assertSecurityMechanismOK-java.lang.String-java.lang.String-java.lang.Short-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertSecurityMechanismOK</h4>
<pre>private&nbsp;void&nbsp;assertSecurityMechanismOK(java.lang.String&nbsp;user,
                                       java.lang.String&nbsp;password,
                                       java.lang.Short&nbsp;secmec,
                                       java.lang.String&nbsp;msg,
                                       java.lang.String&nbsp;expectedValue)</pre>
</li>
</ul>
<a name="assertConnectionUsingDriverManager-java.lang.String-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertConnectionUsingDriverManager</h4>
<pre>private&nbsp;void&nbsp;assertConnectionUsingDriverManager(java.lang.String&nbsp;dbUrl,
                                                java.lang.String&nbsp;msg,
                                                java.lang.String&nbsp;expectedValue)</pre>
</li>
</ul>
<a name="assertAllCombinationsOfUserPasswordSecMecInputOK-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertAllCombinationsOfUserPasswordSecMecInputOK</h4>
<pre>private&nbsp;void&nbsp;assertAllCombinationsOfUserPasswordSecMecInputOK(java.lang.String[]&nbsp;expectedValues)</pre>
<div class="block">Test different interesting combinations of user,password, security 
 mechanism for testing security mechanism upgrade logic. This test
 has been added as part of DERBY-962. Two things have been fixed in
 DERBY-962, affects only client behavior.

 1)Upgrade logic should not override security mechanism if it has been 
 explicitly set in connection request (either via DriverManager or 
 using DataSource)

 2)Upgrade security mechanism to a more secure one , ie preferably 
 to encrypted userid and password if the JVM in which the client is 
 running has support for it.
 
 Details are:  
 If security mechanism is not specified as part of the connection 
 request, then client will do an automatic switching (upgrade) of 
 security mechanism to use. The logic is as follows :
 if password is available, and if the JVM in which the client is running 
 supports EUSRIDPWD mechanism, in that case also, USRIDPWD security 
 mechanism is used. 
 if password is available, and if the JVM in which the client is running 
 does not support EUSRIDPWD mechanism, in that case the client will then
 default to USRIDPWD.
 Also see DERBY-962 http://issues.apache.org/jira/browse/DERBY-962
 <BR>
 To understand which JVMs support EUSRIDPWD or not, please see class
 level comments (#1)
 <BR>
 The expected output from this test will depend on the following
 -- the client behavior. For the derby client, the table below 
 represents what security mechanism the client will send to server. 
 -- Note: in case of derby client, if no user  is specified, user 
 defaults to APP.
 -- Will depend on if the server has been started with property 
 derby.drda.securityMechanism and to the value it is set to.  See method
 (fixture) testNetworkServerSecurityMechanism() to check if server is 
 using the derby.drda.securityMechanism to restrict client connections
 based on security mechanism. 
 
     TABLE with all different combinations of userid, password, security
     mechanism of derby client that is covered by this testcase if test
     is run against IBM15 and JDK15. 

     IBM15 supports eusridpwd, whereas SunJDK15 doesnt support EUSRIDPWD

     Security Mechanisms supported by derby server and client
     ====================================================================
     |SecMec     |codepoint value|   User friendly name                  |
     ====================================================================
     |USRIDONL   |   0x04        |   USER_ONLY_SECURITY                  |
     |USRIDPWD   |   0x03        |   CLEAR_TEXT_PASSWORD_SECURITY        |
     |EUSRIDPWD  |   0x09        |   ENCRYPTED_USER_AND_PASSWORD_SECURITY|
     |USRSSBPWD  |   0x08        |   STRONG_PASSWORD_SUBSTITUTE_SECURITY |
     =====================================================================
         Explanation of columns in table. 

         a) Connection request specifies a user or not.
         Note: if no user is specified, client defaults to APP
         b) Connection request specifies a password or not
         c) Connection request specifies securityMechanism or not. the valid
         values are 4(USRIDONL), 3(USRIDPWD), 9(EUSRIDPWD) and 8(USRSSBPWD).
         d) support eusridpwd means whether this client jvm supports encrypted 
     userid/password security mechanism or not.  A value of Y means it 
     supports and N means no.
         The next three columns specify what the client sends to the server
         e) Does client send user information 
         f) Does client send password information
         g) What security mechanism value (secmec value) is sent to server.

         SecMec refers to securityMechanism.
         Y means yes, N means No,  - or blank means not specified.
         Err stands for error.
         Err(1) stands for null password not supported
         Err(2) stands for case when the JCE does not support encrypted userid and
         password security mechanism. 
         ----------------------------------------------------------------
         | url connection      | support   | Client sends to Server      |
         |User |Pwd    |secmec |eusridpwd  |User   Pwd    SecMec         |
         |#a   |#b     |#c     |#d         |#e     #f      #g            |
         |---------------------------------------------------------------|
         =================================================================
     |SecMec not specified on connection request                    
         =================================================================
         |Y    |Y     |-       |Y         |Y        Y       3            |
         |----------------------------------------------------------------
         |     |Y     |-       |Y         |Y        Y       3            |
         -----------------------------------------------------------------
         |Y    |      |-       |Y         |Y        N       4            |
         -----------------------------------------------------------------
         |     |      |-       |Y         |Y        N       4            |
         =================================================================
     |Y    |Y     |-       |N         |Y        Y       3            |
     |----------------------------------------------------------------
     |     |Y     |-       |N         |Y        Y       3            |
     -----------------------------------------------------------------
     |Y    |      |-       |N         |Y        N       4            |
     -----------------------------------------------------------------
     |     |      |-       |N         |Y        N       4            |
     =================================================================
         SecMec specified to 3 (clear text userid and password)
         =================================================================
     |Y    |Y     |3       |Y         |Y        Y       3            |
     |----------------------------------------------------------------
     |     |Y     |3       |Y         |Y        Y       3            |
     -----------------------------------------------------------------
     |Y    |      |3       |Y         |-        -       Err1         |
     -----------------------------------------------------------------
     |     |      |3       |Y         |-        -       Err1         |
     =================================================================
     |Y    |Y     |3       |N         |Y        Y       3            |
     |----------------------------------------------------------------
     |     |Y     |3       |N         |Y        Y       3            |
     -----------------------------------------------------------------
     |Y    |      |3       |N         |-        -       Err1         |
     -----------------------------------------------------------------
     |     |      |3       |N         |-        -       Err1         |
     =================================================================
         SecMec specified to 9 (encrypted userid/password)
     =================================================================
     |Y    |Y     |9       |Y         |Y        Y       9            |
     |----------------------------------------------------------------
     |     |Y     |9       |Y         |Y        Y       9            |
     -----------------------------------------------------------------
     |Y    |      |9       |Y         | -       -       Err1         |
     -----------------------------------------------------------------
     |     |      |9       |Y         | -       -       Err1         |
     =================================================================
     |Y    |Y     |9       |N         | -       -       Err2         |
     |----------------------------------------------------------------
     |     |Y     |9       |N         | -       -       Err2         |
     -----------------------------------------------------------------
     |Y    |      |9       |N         | -       -       Err1         |
     -----------------------------------------------------------------
     |     |      |9       |N         | -       -       Err1         |
     =================================================================
         SecMec specified to 4 (userid only security)
     =================================================================
     |Y    |Y     |4       |Y         |Y        N       4            |
     |----------------------------------------------------------------
     |     |Y     |4       |Y         |Y        N       4            |
     -----------------------------------------------------------------
     |Y    |      |4       |Y         |Y        N       4            |
     -----------------------------------------------------------------
     |     |      |4       |Y         |Y        N       4            |
     =================================================================
     |Y    |Y     |4       |N         |Y        N       4            |
     |----------------------------------------------------------------
     |     |Y     |4       |N         |Y        N       4            |
     -----------------------------------------------------------------
     |Y    |      |4       |N         |Y        N       4            |
     -----------------------------------------------------------------
     |     |      |4       |N         |Y        N       4            |
     =================================================================
         SecMec specified to 8 (strong password substitute)
     =================================================================
     |Y    |Y     |8       |Y         |Y        Y       8            |
     |----------------------------------------------------------------
     |     |Y     |8       |Y         |Y        Y       8            |
     -----------------------------------------------------------------
     |Y    |      |8       |Y         | -       -       Err1         |
     -----------------------------------------------------------------
     |     |      |8       |Y         | -       -       Err1         |
     =================================================================
     |Y    |Y     |8       |N         | -       Y       8            |
     |----------------------------------------------------------------
     |     |Y     |8       |N         | -       Y       8            |
     -----------------------------------------------------------------
     |Y    |      |8       |N         | -       -       Err1         |
     -----------------------------------------------------------------
     |     |      |8       |N         | -       -       Err1         |
     =================================================================</div>
</li>
</ul>
<a name="getExpectedValueFromAll-java.lang.String:A-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExpectedValueFromAll</h4>
<pre>private&nbsp;java.lang.String&nbsp;getExpectedValueFromAll(java.lang.String[]&nbsp;expectedValues,
                                                 int&nbsp;USER_ATTR,
                                                 int&nbsp;PWD_ATTR,
                                                 int&nbsp;SECMEC_ATTR)</pre>
</li>
</ul>
<a name="getDataSourceConnection-java.lang.String-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDataSourceConnection</h4>
<pre>private&nbsp;void&nbsp;getDataSourceConnection(java.lang.String&nbsp;user,
                                     java.lang.String&nbsp;password,
                                     java.lang.String&nbsp;expectedValue)</pre>
<div class="block">Helper method to get connection from datasource and to print
 the exceptions if any when getting a connection. This method 
 is used in assertAllCombinationsOfUserPasswordSecMecInputOK.
 For explanation of exceptions that might arise in this method,
 please check assertAllCombinationsOfUserPasswordSecMecInputOK
 javadoc comment.
 get connection from datasource</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>user</code> - username</dd>
<dd><code>password</code> - password</dd>
<dd><code>expectedValue</code> - expected sql state</dd>
</dl>
</li>
</ul>
<a name="dumpSQLException-java.sql.SQLException-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dumpSQLException</h4>
<pre>private static&nbsp;void&nbsp;dumpSQLException(java.sql.SQLException&nbsp;sqle)</pre>
<div class="block">Dump SQLState and message for the complete nested chain of SQLException</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sqle</code> - SQLException whose complete chain of exceptions is
 traversed and sqlstate and message is printed out</dd>
</dl>
</li>
</ul>
<a name="assertSecMecWithConnPoolingOK-java.lang.String-java.lang.String-java.lang.Short-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertSecMecWithConnPoolingOK</h4>
<pre>private&nbsp;void&nbsp;assertSecMecWithConnPoolingOK(java.lang.String&nbsp;user,
                                           java.lang.String&nbsp;password,
                                           java.lang.Short&nbsp;secmec)
                                    throws java.lang.Exception</pre>
<div class="block">Test a deferred connection reset. When connection pooling is done
 and connection is reset, the client sends EXCSAT,ACCSEC and followed
 by SECCHK and ACCRDB. Test if the security mechanism related information
 is correctly reset or not. This method was added to help simulate 
 regression test for DERBY-1080. It is called from testDerby1080.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>user</code> - username</dd>
<dd><code>password</code> - password for connection</dd>
<dd><code>secmec</code> - security mechanism for datasource</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a name="assertConnectionOK-java.sql.Connection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertConnectionOK</h4>
<pre>private&nbsp;void&nbsp;assertConnectionOK(java.sql.Connection&nbsp;conn)
                         throws java.sql.SQLException</pre>
<div class="block">Test a connection by executing a sample query</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>conn</code> - database connection</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if there is any error</dd>
<dd><code>java.sql.SQLException</code></dd>
</dl>
</li>
</ul>
<a name="assertDerby1080Fixed-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertDerby1080Fixed</h4>
<pre>private&nbsp;void&nbsp;assertDerby1080Fixed(java.lang.String&nbsp;expectedValue)
                           throws java.lang.Exception</pre>
<div class="block">This is a regression test for DERBY-1080 - where some variables required
 only for the EUSRIDPWD security mechanism case were not getting reset on
 connection re-use and resulting in protocol error. This also applies to
 USRSSBPWD security mechanism. 
 
 Read class level comments (#1) to understand what is specified by drda
 spec for EUSRIDPWD.  
 <br>
 Encryption is done using JCE. Hence JCE support of the necessary
 algorithm is required for EUSRIDPWD security mechanism to work. Thus
 even though the server and client have code to support EUSRIDPWD, this
 security mechanism will not work in all JVMs. 
 
 JVMs where support for DH(32byte prime) is not available and thus EUSRIDPWD 
 wont work are Sun JVM (versions 1.3.1, 1.4.1, 1.4.2, 1.5) and 
 IBM JVM (versions 1.3.1 and some old versions of 1.4.2 (in 2004) )
 
 Expected behavior for this test:
 If no regression has occurred, this test should work OK, given the 
 expected exception in following cases:
 1) When EUSRIDPWD is not supported in JVM the test is running, a CNFE
 with initializing EncryptionManager will happen. This will happen for 
 Sun JVM (versions 1.3.1, 1.4.1, 1.4.2, 1.5) and 
 IBM JVM (versions 1.3.1 and some old versions of 1.4.2 (in 2004) )
 For derby client, the error message is 
 "Security exception encountered, see next exception for details."
 2)If server does not accept EUSRIDPWD security mechanism from clients,then
 error message will be "Connection authorization failure
 occurred. Reason: security mechanism not supported"
 Note: #2 can happen if server is started with derby.drda.securityMechanism
 and thus restricts what security mechanisms the client can connect with.
 This will happen for the test run when derby.drda.securityMechanism is
 set, to a valid value other than ENCRYPTED_USER_AND_PASSWORD_SECURITY.
 <br>
 See testNetworkServerSecurityMechanism where this method is called to 
 test for regression for DERBY-1080, and to check if server is using the
 derby.drda.securityMechanism to restrict client connections based on
 the security mechanism.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a name="assertUSRSSBPWD_with_BUILTIN-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertUSRSSBPWD_with_BUILTIN</h4>
<pre>private&nbsp;void&nbsp;assertUSRSSBPWD_with_BUILTIN(java.lang.String[]&nbsp;expectedValues)
                                   throws java.lang.Exception</pre>
<div class="block">Test SECMEC_USRSSBPWD with derby BUILTIN authentication turned ON.

 We want to test a combination of USRSSBPWD with BUILTIN as password
 substitute is only supported with NONE or BUILTIN Derby authentication
 scheme right now (DERBY-528). Also, it doesn't work if passwords are
 hashed with the configurable hash authentication scheme (DERBY-4483)
 before they are stored in the database, so we'll need to disable that.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if there an unexpected error</dd>
</dl>
</li>
</ul>
<a name="getDataSourceConnectionWithSecMec-java.lang.String-java.lang.String-java.lang.Short-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDataSourceConnectionWithSecMec</h4>
<pre>private&nbsp;java.sql.Connection&nbsp;getDataSourceConnectionWithSecMec(java.lang.String&nbsp;user,
                                                              java.lang.String&nbsp;password,
                                                              java.lang.Short&nbsp;secMec)
                                                       throws java.lang.Exception</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a name="getJDBCUrl-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getJDBCUrl</h4>
<pre>private&nbsp;java.lang.String&nbsp;getJDBCUrl(java.lang.String&nbsp;attrs)</pre>
</li>
</ul>
<a name="getDS-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDS</h4>
<pre>private&nbsp;javax.sql.DataSource&nbsp;getDS(java.lang.String&nbsp;user,
                                   java.lang.String&nbsp;password)</pre>
</li>
</ul>
<a name="addRequiredAttributes-java.util.HashMap-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addRequiredAttributes</h4>
<pre>private&nbsp;java.util.HashMap&lt;java.lang.String,java.lang.Object&gt;&nbsp;addRequiredAttributes(java.util.HashMap&lt;java.lang.String,java.lang.Object&gt;&nbsp;attrs)</pre>
</li>
</ul>
<a name="getCPDS-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCPDS</h4>
<pre>private&nbsp;javax.sql.ConnectionPoolDataSource&nbsp;getCPDS(java.lang.String&nbsp;user,
                                                   java.lang.String&nbsp;password)</pre>
</li>
</ul>
<a name="assertSQLState08001-java.lang.String-java.sql.SQLException-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertSQLState08001</h4>
<pre>private&nbsp;void&nbsp;assertSQLState08001(java.lang.String&nbsp;expectedValue,
                                 java.sql.SQLException&nbsp;sqle)</pre>
</li>
</ul>
<a name="hasSufficientEntropy--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>hasSufficientEntropy</h4>
<pre>private&nbsp;boolean&nbsp;hasSufficientEntropy()</pre>
<div class="block">Tells if the current platform is assumed to have sufficient entropy for
 the strong password substitution security mechanism to run reasonably
 fast.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/NSinSameJVMTest.html" title="class in org.apache.derbyTesting.functionTests.tests.derbynet"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/derbyTesting/functionTests/tests/derbynet/OutBufferedStreamTest.html" title="class in org.apache.derbyTesting.functionTests.tests.derbynet"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/derbyTesting/functionTests/tests/derbynet/NSSecurityMechanismTest.html" target="_top">Frames</a></li>
<li><a href="NSSecurityMechanismTest.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
