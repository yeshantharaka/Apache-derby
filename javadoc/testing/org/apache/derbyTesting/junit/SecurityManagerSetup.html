<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:06:03 IST 2017 -->
<title>SecurityManagerSetup (Apache Derby V10.13 Test Javadoc)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SecurityManagerSetup (Apache Derby V10.13 Test Javadoc)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9,"i2":9,"i3":9,"i4":9,"i5":9,"i6":9,"i7":9,"i8":9,"i9":9,"i10":9,"i11":9,"i12":9,"i13":9,"i14":9,"i15":9,"i16":9,"i17":9,"i18":10,"i19":9,"i20":10,"i21":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/derbyTesting/junit/RuntimeStatisticsParser.Qualifier.html" title="class in org.apache.derbyTesting.junit"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/apache/derbyTesting/junit/ServerSetup.html" title="class in org.apache.derbyTesting.junit"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/derbyTesting/junit/SecurityManagerSetup.html" target="_top">Frames</a></li>
<li><a href="SecurityManagerSetup.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derbyTesting.junit</div>
<h2 title="Class SecurityManagerSetup" class="title">Class SecurityManagerSetup</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>junit.framework.Assert</li>
<li>
<ul class="inheritance">
<li>junit.extensions.TestDecorator</li>
<li>
<ul class="inheritance">
<li>junit.extensions.TestSetup</li>
<li>
<ul class="inheritance">
<li>org.apache.derbyTesting.junit.SecurityManagerSetup</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>junit.framework.Test</dd>
</dl>
<hr>
<br>
<pre>public final class <span class="typeNameLabel">SecurityManagerSetup</span>
extends junit.extensions.TestSetup</pre>
<div class="block">Configures the wrapped test to be run with the specified security policy.
 <p>
 This setup class normally installs the default policy file. This can be
 overridden by specifying java.security.policy=&lt;NONE&gt; (see
 <a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#NO_POLICY">NO_POLICY</a>), and can also be overridden by installing a
 security manager explicitly before the default security manager is installed.
 <p>
 Individual tests/suites can be configured to be run without a security
 manager, with a specific policy file, or with a specific policy file merged
 with the default policy file. The last option is useful when you only need
 to extend the default policy with a few extra permissions to run a test.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#additionalPolicyResource">additionalPolicyResource</a></span></code>
<div class="block">An additional policy to install (may be <code>null</code>).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.util.Properties</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#classPathSet">classPathSet</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#decoratorPolicyResource">decoratorPolicyResource</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.SecurityManager</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#decoratorSecurityManager">decoratorSecurityManager</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#externalSecurityManagerInstalled">externalSecurityManagerInstalled</a></span></code>
<div class="block">True if a security manager was installed outside of the
 control of this class and BaseTestCase.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#isJars">isJars</a></span></code>
<div class="block">True if the classes are loaded from jars.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#jacocoEnabled">jacocoEnabled</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#JVM_HAS_SUBJECT_AUTHORIZATION">JVM_HAS_SUBJECT_AUTHORIZATION</a></span></code>
<div class="block">Does the JVM support Subjects for
 authorization through Java security manager.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#NO_POLICY">NO_POLICY</a></span></code>
<div class="block">Constant used to indicate that no security policy is to be installed.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.junit.extensions.TestDecorator">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;junit.extensions.TestDecorator</h3>
<code>fTest</code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#SecurityManagerSetup-junit.framework.Test-java.lang.String-">SecurityManagerSetup</a></span>(junit.framework.Test&nbsp;test,
                    java.lang.String&nbsp;policyResource)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#SecurityManagerSetup-junit.framework.Test-java.lang.String-boolean-">SecurityManagerSetup</a></span>(junit.framework.Test&nbsp;test,
                    java.lang.String&nbsp;policyResource,
                    boolean&nbsp;mergePolicies)</code>
<div class="block">Installs a new security policy.</div>
</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#SecurityManagerSetup-junit.framework.Test-java.lang.String-java.lang.SecurityManager-">SecurityManagerSetup</a></span>(junit.framework.Test&nbsp;test,
                    java.lang.String&nbsp;policyResource,
                    java.lang.SecurityManager&nbsp;securityManager)</code>
<div class="block">Use custom policy and SecurityManager</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#checkIfJacocoIsRunning--">checkIfJacocoIsRunning</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#determineClasspath--">determineClasspath</a></span>()</code>
<div class="block">Determine the settings of the classpath in order to configure
 the variables used in the testing policy files.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#getDefaultPolicy--">getDefaultPolicy</a></span>()</code>
<div class="block">Return the name of the default policy.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#getEffectivePolicyResource-java.lang.String-java.lang.String-">getEffectivePolicyResource</a></span>(java.lang.String&nbsp;policy1,
                          java.lang.String&nbsp;policy2)</code>
<div class="block">Returns the location of the effective policy resource.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static java.util.Properties</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#getPolicyFilePropertiesForOldHarness--">getPolicyFilePropertiesForOldHarness</a></span>()</code>
<div class="block">Return the policy file system properties for use
 by the old test harness.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private static java.net.URL</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#getResourceURL-java.lang.String-">getResourceURL</a></span>(java.lang.String&nbsp;policy)</code>
<div class="block">Returns a URL for the given policy resource.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>(package private) static java.net.URL</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#getURL-java.lang.Class-">getURL</a></span>(java.lang.Class&nbsp;cl)</code>
<div class="block">Get the URL of the code base from a class.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>static java.net.URL</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#getURL-java.lang.String-">getURL</a></span>(java.lang.String&nbsp;className)</code>
<div class="block">Get the URL of the code base from a class name.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>(package private) static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#installSecurityManager--">installSecurityManager</a></span>()</code>
<div class="block">Install a SecurityManager with the default test policy
 file:
 org/apache/derbyTesting/functionTests/util/derby_tests.policy</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#installSecurityManager-java.lang.String-">installSecurityManager</a></span>(java.lang.String&nbsp;policyFile)</code>&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#installSecurityManager-java.lang.String-java.lang.SecurityManager-">installSecurityManager</a></span>(java.lang.String&nbsp;policyFile,
                      java.lang.SecurityManager&nbsp;sm)</code>&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#mergePolicies-java.net.URL-java.net.URL-">mergePolicies</a></span>(java.net.URL&nbsp;policy1,
             java.net.URL&nbsp;policy2)</code>
<div class="block">Merges the two specified policy resources (typically files), and writes
 the combined policy to a new file.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#mkdir-java.io.File-">mkdir</a></span>(java.io.File&nbsp;dir)</code>
<div class="block">Creates the specified directory if it doesn't exist.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>(package private) static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#noSecurityManager--">noSecurityManager</a></span>()</code>
<div class="block">"Install" no security manager.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>static junit.framework.Test</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#noSecurityManager-junit.framework.Test-">noSecurityManager</a></span>(junit.framework.Test&nbsp;test)</code>
<div class="block">Get a decorator that will ensure no security manger
 is installed to run a test.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>private static java.io.InputStream</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#openStream-java.net.URL-">openStream</a></span>(java.net.URL&nbsp;resource)</code>
<div class="block">Opens the resource stream in a privileged block.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#println-java.lang.String-">println</a></span>(java.lang.String&nbsp;msg)</code>
<div class="block">Prints a debug message if debugging is enabled.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#setSecurityPolicy-java.util.Properties-java.lang.String-">setSecurityPolicy</a></span>(java.util.Properties&nbsp;set,
                 java.lang.String&nbsp;policyResource)</code>&nbsp;</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#setUp--">setUp</a></span>()</code>
<div class="block">Install specific policy file with the security manager
 including the special case of no security manager.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#stripJar-java.net.URL-">stripJar</a></span>(java.net.URL&nbsp;url)</code>
<div class="block">Strip off the last token which will be the jar name.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#tearDown--">tearDown</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#uninstallSecurityManager--">uninstallSecurityManager</a></span>()</code>
<div class="block">Remove the security manager.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.junit.extensions.TestSetup">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;junit.extensions.TestSetup</h3>
<code>run</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.junit.extensions.TestDecorator">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;junit.extensions.TestDecorator</h3>
<code>basicRun, countTestCases, getTest, toString</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.junit.framework.Assert">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;junit.framework.Assert</h3>
<code>assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertFalse, assertFalse, assertNotNull, assertNotNull, assertNotSame, assertNotSame, assertNull, assertNull, assertSame, assertSame, assertTrue, assertTrue, fail, fail, failNotEquals, failNotSame, failSame</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="NO_POLICY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NO_POLICY</h4>
<pre>static final&nbsp;java.lang.String NO_POLICY</pre>
<div class="block">Constant used to indicate that no security policy is to be installed.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.apache.derbyTesting.junit.SecurityManagerSetup.NO_POLICY">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="JVM_HAS_SUBJECT_AUTHORIZATION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>JVM_HAS_SUBJECT_AUTHORIZATION</h4>
<pre>public static final&nbsp;boolean JVM_HAS_SUBJECT_AUTHORIZATION</pre>
<div class="block">Does the JVM support Subjects for
 authorization through Java security manager.
 J2ME/CDC/Foundation 1.1 does not support Subjects.</div>
</li>
</ul>
<a name="classPathSet">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>classPathSet</h4>
<pre>private static final&nbsp;java.util.Properties classPathSet</pre>
</li>
</ul>
<a name="isJars">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isJars</h4>
<pre>static&nbsp;boolean isJars</pre>
<div class="block">True if the classes are loaded from jars.</div>
</li>
</ul>
<a name="externalSecurityManagerInstalled">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>externalSecurityManagerInstalled</h4>
<pre>private static final&nbsp;boolean externalSecurityManagerInstalled</pre>
<div class="block">True if a security manager was installed outside of the
 control of this class and BaseTestCase.</div>
</li>
</ul>
<a name="jacocoEnabled">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>jacocoEnabled</h4>
<pre>static final&nbsp;boolean jacocoEnabled</pre>
</li>
</ul>
<a name="decoratorPolicyResource">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>decoratorPolicyResource</h4>
<pre>private final&nbsp;java.lang.String decoratorPolicyResource</pre>
</li>
</ul>
<a name="additionalPolicyResource">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>additionalPolicyResource</h4>
<pre>private final&nbsp;java.lang.String additionalPolicyResource</pre>
<div class="block">An additional policy to install (may be <code>null</code>).</div>
</li>
</ul>
<a name="decoratorSecurityManager">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>decoratorSecurityManager</h4>
<pre>private&nbsp;java.lang.SecurityManager decoratorSecurityManager</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="SecurityManagerSetup-junit.framework.Test-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SecurityManagerSetup</h4>
<pre>public&nbsp;SecurityManagerSetup(junit.framework.Test&nbsp;test,
                            java.lang.String&nbsp;policyResource)</pre>
</li>
</ul>
<a name="SecurityManagerSetup-junit.framework.Test-java.lang.String-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SecurityManagerSetup</h4>
<pre>public&nbsp;SecurityManagerSetup(junit.framework.Test&nbsp;test,
                            java.lang.String&nbsp;policyResource,
                            boolean&nbsp;mergePolicies)</pre>
<div class="block">Installs a new security policy.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>test</code> - the test to wrap</dd>
<dd><code>policyResource</code> - the policy to install</dd>
<dd><code>mergePolicies</code> - if <code>false</code> the specified policy will be the
      only policy installed, if <code>true</code> the specified policy will be
      merged with the default test policy for the test framework</dd>
</dl>
</li>
</ul>
<a name="SecurityManagerSetup-junit.framework.Test-java.lang.String-java.lang.SecurityManager-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SecurityManagerSetup</h4>
<pre>public&nbsp;SecurityManagerSetup(junit.framework.Test&nbsp;test,
                            java.lang.String&nbsp;policyResource,
                            java.lang.SecurityManager&nbsp;securityManager)</pre>
<div class="block">Use custom policy and SecurityManager</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>test</code> - - Test to wrap</dd>
<dd><code>policyResource</code> - - policy resource. If null use default testing policy</dd>
<dd><code>securityManager</code> - - Custom SecurityManager if null use the system security manager</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="checkIfJacocoIsRunning--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkIfJacocoIsRunning</h4>
<pre>private static&nbsp;boolean&nbsp;checkIfJacocoIsRunning()</pre>
</li>
</ul>
<a name="noSecurityManager-junit.framework.Test-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>noSecurityManager</h4>
<pre>public static&nbsp;junit.framework.Test&nbsp;noSecurityManager(junit.framework.Test&nbsp;test)</pre>
<div class="block">Get a decorator that will ensure no security manger
 is installed to run a test. Not supported for suites.
 <BR>
 An empty suite is returned if a security manager was installed
 externally, i.e. not under the control of the BaseTestCase
 and this code. In this case the code can not support the
 mode of no security manager as it may not have enough information
 to re-install the security manager. So the passed in test
 will be skipped.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>test</code> - Test to run without a security manager. Note that
 this must be an instance of BaseTestCase as this call depends
 on setup code in that class. Arbitrary Test instances cannot be passed in.</dd>
</dl>
</li>
</ul>
<a name="noSecurityManager--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>noSecurityManager</h4>
<pre>static&nbsp;void&nbsp;noSecurityManager()</pre>
<div class="block">"Install" no security manager.</div>
</li>
</ul>
<a name="setUp--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setUp</h4>
<pre>protected&nbsp;void&nbsp;setUp()
              throws java.io.IOException</pre>
<div class="block">Install specific policy file with the security manager
 including the special case of no security manager.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>setUp</code>&nbsp;in class&nbsp;<code>junit.extensions.TestSetup</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="tearDown--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tearDown</h4>
<pre>protected&nbsp;void&nbsp;tearDown()
                 throws java.lang.Exception</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>tearDown</code>&nbsp;in class&nbsp;<code>junit.extensions.TestSetup</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a name="getDefaultPolicy--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDefaultPolicy</h4>
<pre>private static&nbsp;java.lang.String&nbsp;getDefaultPolicy()</pre>
<div class="block">Return the name of the default policy.</div>
</li>
</ul>
<a name="installSecurityManager--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>installSecurityManager</h4>
<pre>static&nbsp;void&nbsp;installSecurityManager()</pre>
<div class="block">Install a SecurityManager with the default test policy
 file:
 org/apache/derbyTesting/functionTests/util/derby_tests.policy</div>
</li>
</ul>
<a name="installSecurityManager-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>installSecurityManager</h4>
<pre>private static&nbsp;void&nbsp;installSecurityManager(java.lang.String&nbsp;policyFile)</pre>
</li>
</ul>
<a name="installSecurityManager-java.lang.String-java.lang.SecurityManager-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>installSecurityManager</h4>
<pre>private static&nbsp;void&nbsp;installSecurityManager(java.lang.String&nbsp;policyFile,
                                           java.lang.SecurityManager&nbsp;sm)</pre>
</li>
</ul>
<a name="setSecurityPolicy-java.util.Properties-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSecurityPolicy</h4>
<pre>private static&nbsp;void&nbsp;setSecurityPolicy(java.util.Properties&nbsp;set,
                                      java.lang.String&nbsp;policyResource)</pre>
</li>
</ul>
<a name="determineClasspath--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>determineClasspath</h4>
<pre>private static&nbsp;boolean&nbsp;determineClasspath()</pre>
<div class="block">Determine the settings of the classpath in order to configure
 the variables used in the testing policy files.
 Looks for three items:
 
 Location of derbyTesting.jar via this class
 Location of derby.jar via org.apache.derby.jdbc.EmbeddedDataSource
 Location of derbyclient.jar via org.apache.derby.jdbc.ClientDataSource
 
 Two options are supported, either all are in jar files or
 all are on the classpath. Properties are set as follows:
 
 <P>
 Classpath:
 <BR>
 derbyTesting.codeclasses set to URL of classes folder
 <BR>
 derbyTesting.ppcodeclasses set to URL of the 'classes.pptesting' folder
 if it exists on the classpath. The existence of the package private tests
 is determined via org.apache.derby.PackagePrivateTestSuite
 <P>
 Jar files:
 <BR>
 derbyTesting.codejar - URL of derby.jar,
 derbynet.jar and derbytools.jar, all assumed to be in the
 same location.
 <BR>
 derbyTesting.clientjar - URL of derbyclient.jar
 <BR>
 derbyTesting.testjar - URL of derbyTesting.jar
 <BR>
 derbyTesting.testjarpath - File system path to derbyTesting.jar
 if the jar has a URL with a file protocol.</div>
</li>
</ul>
<a name="getPolicyFilePropertiesForOldHarness--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPolicyFilePropertiesForOldHarness</h4>
<pre>public static&nbsp;java.util.Properties&nbsp;getPolicyFilePropertiesForOldHarness()</pre>
<div class="block">Return the policy file system properties for use
 by the old test harness. This ensures a consistent
 approach to setting the properties. There are the
 properties used to define the jar file location in
 any policy files.</div>
</li>
</ul>
<a name="stripJar-java.net.URL-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stripJar</h4>
<pre>private static&nbsp;java.lang.String&nbsp;stripJar(java.net.URL&nbsp;url)</pre>
<div class="block">Strip off the last token which will be the jar name.
 The returned string includes the trailing slash.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>url</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the jar name from the URL as a String</dd>
</dl>
</li>
</ul>
<a name="getURL-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getURL</h4>
<pre>public static&nbsp;java.net.URL&nbsp;getURL(java.lang.String&nbsp;className)</pre>
<div class="block">Get the URL of the code base from a class name.
 If the class cannot be loaded, null is returned.</div>
</li>
</ul>
<a name="getURL-java.lang.Class-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getURL</h4>
<pre>static&nbsp;java.net.URL&nbsp;getURL(java.lang.Class&nbsp;cl)</pre>
<div class="block">Get the URL of the code base from a class.</div>
</li>
</ul>
<a name="uninstallSecurityManager--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>uninstallSecurityManager</h4>
<pre>private static&nbsp;void&nbsp;uninstallSecurityManager()</pre>
<div class="block">Remove the security manager.</div>
</li>
</ul>
<a name="getEffectivePolicyResource-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEffectivePolicyResource</h4>
<pre>private static&nbsp;java.lang.String&nbsp;getEffectivePolicyResource(java.lang.String&nbsp;policy1,
                                                           java.lang.String&nbsp;policy2)
                                                    throws java.io.IOException</pre>
<div class="block">Returns the location of the effective policy resource.
 <p>
 If two valid policy resources from different locations are specified,
 they will be merged into one policy file.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>policy1</code> - first policy</dd>
<dd><code>policy2</code> - second policy (may be <code>null</code>)</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The location of a policy resource, or <a href="../../../../org/apache/derbyTesting/junit/SecurityManagerSetup.html#NO_POLICY">NO_POLICY</a>.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if reading or writing a policy resource fails</dd>
</dl>
</li>
</ul>
<a name="getResourceURL-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getResourceURL</h4>
<pre>private static&nbsp;java.net.URL&nbsp;getResourceURL(java.lang.String&nbsp;policy)
                                    throws java.net.MalformedURLException</pre>
<div class="block">Returns a URL for the given policy resource.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>policy</code> - the policy resource</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A <code>URL</code> denoting the policy resource.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.net.MalformedURLException</code> - if the resource string not a valid URL</dd>
</dl>
</li>
</ul>
<a name="mergePolicies-java.net.URL-java.net.URL-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mergePolicies</h4>
<pre>private static&nbsp;java.lang.String&nbsp;mergePolicies(java.net.URL&nbsp;policy1,
                                              java.net.URL&nbsp;policy2)
                                       throws java.io.IOException</pre>
<div class="block">Merges the two specified policy resources (typically files), and writes
 the combined policy to a new file.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>policy1</code> - the first policy</dd>
<dd><code>policy2</code> - the second policy</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The resource location string for a policy file.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if reading or writing to one of the resources fails</dd>
</dl>
</li>
</ul>
<a name="openStream-java.net.URL-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openStream</h4>
<pre>private static&nbsp;java.io.InputStream&nbsp;openStream(java.net.URL&nbsp;resource)
                                       throws java.io.IOException</pre>
<div class="block">Opens the resource stream in a privileged block.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="mkdir-java.io.File-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mkdir</h4>
<pre>private static&nbsp;void&nbsp;mkdir(java.io.File&nbsp;dir)</pre>
<div class="block">Creates the specified directory if it doesn't exist.</div>
</li>
</ul>
<a name="println-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>println</h4>
<pre>private static&nbsp;void&nbsp;println(java.lang.String&nbsp;msg)</pre>
<div class="block">Prints a debug message if debugging is enabled.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/derbyTesting/junit/RuntimeStatisticsParser.Qualifier.html" title="class in org.apache.derbyTesting.junit"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/apache/derbyTesting/junit/ServerSetup.html" title="class in org.apache.derbyTesting.junit"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/derbyTesting/junit/SecurityManagerSetup.html" target="_top">Frames</a></li>
<li><a href="SecurityManagerSetup.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
