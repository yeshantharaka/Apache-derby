<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:04:40 IST 2017 -->
<title>BackingStoreHashtable (Apache Derby V10.13 Internals)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="BackingStoreHashtable (Apache Derby V10.13 Internals)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":9,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":9,"i18":10,"i19":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/derby/iapi/store/access/AccessFactoryGlobals.html" title="interface in org.apache.derby.iapi.store.access"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.BackingStoreHashtableEnumeration.html" title="class in org.apache.derby.iapi.store.access"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/derby/iapi/store/access/BackingStoreHashtable.html" target="_top">Frames</a></li>
<li><a href="BackingStoreHashtable.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derby.iapi.store.access</div>
<h2 title="Class BackingStoreHashtable" class="title">Class BackingStoreHashtable</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.derby.iapi.store.access.BackingStoreHashtable</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../../../org/apache/derby/impl/store/access/BackingStoreHashTableFromScan.html" title="class in org.apache.derby.impl.store.access">BackingStoreHashTableFromScan</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">BackingStoreHashtable</span>
extends java.lang.Object</pre>
<div class="block"><p>
A BackingStoreHashtable is a utility class which will store a set of rows into
an in memory hash table, or overflow the hash table to a tempory on disk 
structure.
</p>

<p>
All rows must contain the same number of columns, and the column at position
N of all the rows must have the same format id.  If the BackingStoreHashtable needs to be
overflowed to disk, then an arbitrary row will be chosen and used as a template
for creating the underlying overflow container.
</p>

<p>
The hash table will be built logically as follows (actual implementation
may differ).  The important points are that the hash value is the standard
java hash value on the row[key_column_numbers[0], if key_column_numbers.length is 1,
or row[key_column_numbers[0, 1, ...]] if key_column_numbers.length &gt; 1, 
and that duplicate detection is done by the standard java duplicate detection provided by 
java.util.Hashtable.
</p>

<pre>
import java.util.Hashtable;

hash_table = new Hashtable();

Object row; // is a DataValueDescriptor[] or a LocatedRow

boolean  needsToClone = rowSource.needsToClone();

while((row = rowSource.getNextRowFromRowSource()) != null)
{
    if (needsToClone)
        row = clone_row_from_row(row);

    Object key = KeyHasher.buildHashKey(row, key_column_numbers);

    if ((duplicate_value = 
        hash_table.put(key, row)) != null)
    {
        Vector row_vec;

        // inserted a duplicate
        if ((duplicate_value instanceof vector))
        {
            row_vec = (Vector) duplicate_value;
        }
        else
        {
            // allocate vector to hold duplicates
            row_vec = new Vector(2);

            // insert original row into vector
            row_vec.addElement(duplicate_value);

            // put the vector as the data rather than the row
            hash_table.put(key, row_vec);
        }
        
        // insert new row into vector
        row_vec.addElement(row);
    }
}
</pre>

<p>
What actually goes into the hash table is a little complicated. That is because
the row may either be an array of column values (i.e. DataValueDescriptor[])
or a LocatedRow (i.e., a structure holding the columns plus a RowLocation).
In addition, the hash value itself may either be one of these rows or
(in the case of multiple rows which hash to the same value) a bucket (List)
of rows. To sum this up, the values in a hash table which does not spill
to disk may be the following:
</p>

<ul>
<li>DataValueDescriptor[] and ArrayList<DataValueDescriptor></li>
<li>or LocatedRow and ArrayList<LocatedRow></li>
</ul>

<p>
If rows spill to disk, then they just become arrays of columns. In this case,
a LocatedRow becomes a DataValueDescriptor[], where the last cell contains
the RowLocation.
</p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.BackingStoreHashtableEnumeration.html" title="class in org.apache.derby.iapi.store.access">BackingStoreHashtable.BackingStoreHashtableEnumeration</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.RowList.html" title="class in org.apache.derby.iapi.store.access">BackingStoreHashtable.RowList</a></span></code>
<div class="block">List of <code>DataValueDescriptor[]</code> instances that represent rows.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#ARRAY_LIST_SIZE">ARRAY_LIST_SIZE</a></span></code>
<div class="block">The estimated number of bytes used by ArrayList(0)</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.Properties</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#auxillary_runtimestats">auxillary_runtimestats</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/derby/iapi/store/access/DiskHashtable.html" title="class in org.apache.derby.iapi.store.access">DiskHashtable</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#diskHashtable">diskHashtable</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.HashMap&lt;java.lang.Object,java.lang.Object&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#hash_table">hash_table</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#inmemory_rowcnt">inmemory_rowcnt</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#keepAfterCommit">keepAfterCommit</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#key_column_numbers">key_column_numbers</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#max_inmemory_rowcnt">max_inmemory_rowcnt</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#max_inmemory_size">max_inmemory_size</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#remove_duplicates">remove_duplicates</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/derby/iapi/store/access/RowSource.html" title="interface in org.apache.derby.iapi.store.access">RowSource</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#row_source">row_source</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#skipNullKeyColumns">skipNullKeyColumns</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/derby/iapi/store/access/TransactionController.html" title="interface in org.apache.derby.iapi.store.access">TransactionController</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#tc">tc</a></span></code>
<div class="block">Fields of the class</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private </code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#BackingStoreHashtable--">BackingStoreHashtable</a></span>()</code>
<div class="block">Constructors for This class:</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#BackingStoreHashtable-org.apache.derby.iapi.store.access.TransactionController-org.apache.derby.iapi.store.access.RowSource-int:A-boolean-long-long-int-float-boolean-boolean-">BackingStoreHashtable</a></span>(<a href="../../../../../../org/apache/derby/iapi/store/access/TransactionController.html" title="interface in org.apache.derby.iapi.store.access">TransactionController</a>&nbsp;tc,
                     <a href="../../../../../../org/apache/derby/iapi/store/access/RowSource.html" title="interface in org.apache.derby.iapi.store.access">RowSource</a>&nbsp;row_source,
                     int[]&nbsp;key_column_numbers,
                     boolean&nbsp;remove_duplicates,
                     long&nbsp;estimated_rowcnt,
                     long&nbsp;max_inmemory_rowcnt,
                     int&nbsp;initialCapacity,
                     float&nbsp;loadFactor,
                     boolean&nbsp;skipNullKeyColumns,
                     boolean&nbsp;keepAfterCommit)</code>
<div class="block">Create the BackingStoreHashtable from a row source.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#add_row_to_hash_table-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-boolean-">add_row_to_hash_table</a></span>(<a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;columnValues,
                     <a href="../../../../../../org/apache/derby/iapi/types/RowLocation.html" title="interface in org.apache.derby.iapi.types">RowLocation</a>&nbsp;rowLocation,
                     boolean&nbsp;needsToClone)</code>
<div class="block">Do the work to add one row to the hash table.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>private static <a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#cloneRow-org.apache.derby.iapi.types.DataValueDescriptor:A-">cloneRow</a></span>(<a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;old_row)</code>
<div class="block">Return a cloned copy of the row.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#close--">close</a></span>()</code>
<div class="block">Close the BackingStoreHashtable.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#doSpaceAccounting-java.lang.Object-boolean-">doSpaceAccounting</a></span>(java.lang.Object&nbsp;hashValue,
                 boolean&nbsp;firstDuplicate)</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>java.util.Enumeration&lt;java.lang.Object&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#elements--">elements</a></span>()</code>
<div class="block">
 Return an Enumeration that can be used to scan the entire table.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#get-java.lang.Object-">get</a></span>(java.lang.Object&nbsp;key)</code>
<div class="block">
 Get data associated with given key.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#getAllRuntimeStats-java.util.Properties-">getAllRuntimeStats</a></span>(java.util.Properties&nbsp;prop)</code>
<div class="block">Return runtime stats to caller by adding them to prop.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#getEstimatedMemUsage-java.lang.Object-">getEstimatedMemUsage</a></span>(java.lang.Object&nbsp;hashValue)</code>
<div class="block">Take a value which will go into the hash table and return an estimate
 of how much memory that value will consume.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#getNextRowFromRowSource--">getNextRowFromRowSource</a></span>()</code>
<div class="block">Call method to either get next row or next row with non-null
 key columns.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#includeRowLocations--">includeRowLocations</a></span>()</code>
<div class="block">Return true if we should include RowLocations with the rows
 stored in this hash table.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#makeDiskRow-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-">makeDiskRow</a></span>(<a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;columnValues,
           <a href="../../../../../../org/apache/derby/iapi/types/RowLocation.html" title="interface in org.apache.derby.iapi.types">RowLocation</a>&nbsp;rowLocation)</code>
<div class="block">
 Construct a full set of columns, which may need to end
 with the row location.The full set of columns is what's
 stored on disk when we spill to disk.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#makeDiskRow-java.lang.Object-">makeDiskRow</a></span>(java.lang.Object&nbsp;raw)</code>
<div class="block">
 Make a full set of columns from an object which is either already
 an array of column or otherwise a LocatedRow.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>private java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#makeInMemoryRow-org.apache.derby.iapi.types.DataValueDescriptor:A-">makeInMemoryRow</a></span>(<a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;diskRow)</code>
<div class="block">
 Make an in-memory row from an on-disk row.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>private java.util.List</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#makeInMemoryRows-java.util.List-">makeInMemoryRows</a></span>(java.util.List&nbsp;diskRows)</code>
<div class="block">
 Turn a list of disk rows into a list of in-memory rows.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#putRow-boolean-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-">putRow</a></span>(boolean&nbsp;needsToClone,
      <a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;row,
      <a href="../../../../../../org/apache/derby/iapi/types/RowLocation.html" title="interface in org.apache.derby.iapi.types">RowLocation</a>&nbsp;rowLocation)</code>
<div class="block">Put a row into the hash table.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#remove-java.lang.Object-">remove</a></span>(java.lang.Object&nbsp;key)</code>
<div class="block">remove a row from the hash table.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#setAuxillaryRuntimeStats-java.util.Properties-">setAuxillaryRuntimeStats</a></span>(java.util.Properties&nbsp;prop)</code>
<div class="block">Set the auxillary runtime stats.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>(package private) static <a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#shallowCloneRow-org.apache.derby.iapi.types.DataValueDescriptor:A-">shallowCloneRow</a></span>(<a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;old_row)</code>
<div class="block">Return a shallow cloned row</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#size--">size</a></span>()</code>
<div class="block">Return number of unique rows in the hash table.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.html#spillToDisk-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-">spillToDisk</a></span>(<a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;columnValues,
           <a href="../../../../../../org/apache/derby/iapi/types/RowLocation.html" title="interface in org.apache.derby.iapi.types">RowLocation</a>&nbsp;rowLocation)</code>
<div class="block">Determine whether a new row should be spilled to disk and, if so, do it.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="tc">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tc</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/derby/iapi/store/access/TransactionController.html" title="interface in org.apache.derby.iapi.store.access">TransactionController</a> tc</pre>
<div class="block">Fields of the class</div>
</li>
</ul>
<a name="hash_table">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hash_table</h4>
<pre>private&nbsp;java.util.HashMap&lt;java.lang.Object,java.lang.Object&gt; hash_table</pre>
</li>
</ul>
<a name="key_column_numbers">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>key_column_numbers</h4>
<pre>private&nbsp;int[] key_column_numbers</pre>
</li>
</ul>
<a name="remove_duplicates">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remove_duplicates</h4>
<pre>private&nbsp;boolean remove_duplicates</pre>
</li>
</ul>
<a name="skipNullKeyColumns">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>skipNullKeyColumns</h4>
<pre>private&nbsp;boolean skipNullKeyColumns</pre>
</li>
</ul>
<a name="auxillary_runtimestats">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>auxillary_runtimestats</h4>
<pre>private&nbsp;java.util.Properties auxillary_runtimestats</pre>
</li>
</ul>
<a name="row_source">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>row_source</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/derby/iapi/store/access/RowSource.html" title="interface in org.apache.derby.iapi.store.access">RowSource</a> row_source</pre>
</li>
</ul>
<a name="max_inmemory_rowcnt">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>max_inmemory_rowcnt</h4>
<pre>private&nbsp;long max_inmemory_rowcnt</pre>
</li>
</ul>
<a name="inmemory_rowcnt">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inmemory_rowcnt</h4>
<pre>private&nbsp;long inmemory_rowcnt</pre>
</li>
</ul>
<a name="max_inmemory_size">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>max_inmemory_size</h4>
<pre>private&nbsp;long max_inmemory_size</pre>
</li>
</ul>
<a name="keepAfterCommit">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>keepAfterCommit</h4>
<pre>private&nbsp;boolean keepAfterCommit</pre>
</li>
</ul>
<a name="ARRAY_LIST_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ARRAY_LIST_SIZE</h4>
<pre>private static final&nbsp;int ARRAY_LIST_SIZE</pre>
<div class="block">The estimated number of bytes used by ArrayList(0)</div>
</li>
</ul>
<a name="diskHashtable">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>diskHashtable</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/derby/iapi/store/access/DiskHashtable.html" title="class in org.apache.derby.iapi.store.access">DiskHashtable</a> diskHashtable</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BackingStoreHashtable--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BackingStoreHashtable</h4>
<pre>private&nbsp;BackingStoreHashtable()</pre>
<div class="block">Constructors for This class:</div>
</li>
</ul>
<a name="BackingStoreHashtable-org.apache.derby.iapi.store.access.TransactionController-org.apache.derby.iapi.store.access.RowSource-int:A-boolean-long-long-int-float-boolean-boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BackingStoreHashtable</h4>
<pre>public&nbsp;BackingStoreHashtable(<a href="../../../../../../org/apache/derby/iapi/store/access/TransactionController.html" title="interface in org.apache.derby.iapi.store.access">TransactionController</a>&nbsp;tc,
                             <a href="../../../../../../org/apache/derby/iapi/store/access/RowSource.html" title="interface in org.apache.derby.iapi.store.access">RowSource</a>&nbsp;row_source,
                             int[]&nbsp;key_column_numbers,
                             boolean&nbsp;remove_duplicates,
                             long&nbsp;estimated_rowcnt,
                             long&nbsp;max_inmemory_rowcnt,
                             int&nbsp;initialCapacity,
                             float&nbsp;loadFactor,
                             boolean&nbsp;skipNullKeyColumns,
                             boolean&nbsp;keepAfterCommit)
                      throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Create the BackingStoreHashtable from a row source.
 <p>
 This routine drains the RowSource.  The performance characteristics
 depends on the number of rows inserted and the parameters to the 
 constructor. RowLocations are supported iff row_source is null.
 RowLocations in a non-null row_source can be added later
 if there is a use-case that stresses this behavior.
 <p>
 If the number of rows is &lt;= "max_inmemory_rowcnt", then the rows are
 inserted into a java.util.HashMap. In this case no
 TransactionController is necessary, a "null" tc is valid.
 <p>
 If the number of rows is &gt; "max_inmemory_rowcnt", then the rows will
 be all placed in some sort of Access temporary file on disk.  This 
 case requires a valid TransactionController.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tc</code> - An open TransactionController to be used if the
                          hash table needs to overflow to disk.</dd>
<dd><code>row_source</code> - RowSource to read rows from.</dd>
<dd><code>key_column_numbers</code> - The column numbers of the columns in the
                          scan result row to be the key to the HashMap.
                          "0" is the first column in the scan result
                          row (which may be different than the first
                          row in the table of the scan).</dd>
<dd><code>remove_duplicates</code> - Should the HashMap automatically remove
                          duplicates, or should it create the list of
                          duplicates?</dd>
<dd><code>estimated_rowcnt</code> - The estimated number of rows in the hash table.
                          Pass in -1 if there is no estimate.</dd>
<dd><code>max_inmemory_rowcnt</code> - The maximum number of rows to insert into the 
                          inmemory Hash table before overflowing to disk.
                          Pass in -1 if there is no maximum.</dd>
<dd><code>initialCapacity</code> - If not "-1" used to initialize the java HashMap</dd>
<dd><code>loadFactor</code> - If not "-1" used to initialize the java HashMap</dd>
<dd><code>skipNullKeyColumns</code> - Skip rows with a null key column, if true.</dd>
<dd><code>keepAfterCommit</code> - If true the hash table is kept after a commit,
                        if false the hash table is dropped on the next commit.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="includeRowLocations--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>includeRowLocations</h4>
<pre>public&nbsp;boolean&nbsp;includeRowLocations()</pre>
<div class="block">Return true if we should include RowLocations with the rows
 stored in this hash table.</div>
</li>
</ul>
<a name="getNextRowFromRowSource--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNextRowFromRowSource</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;getNextRowFromRowSource()
                                               throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Call method to either get next row or next row with non-null
 key columns. Currently, RowLocation information is not included in
 rows siphoned out of a RowSource. That functionality is only supported
 if the rows come from the scan of a base table.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="cloneRow-org.apache.derby.iapi.types.DataValueDescriptor:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cloneRow</h4>
<pre>private static&nbsp;<a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;cloneRow(<a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;old_row)
                                       throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Return a cloned copy of the row.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The cloned row row to use.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="shallowCloneRow-org.apache.derby.iapi.types.DataValueDescriptor:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shallowCloneRow</h4>
<pre>static&nbsp;<a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;shallowCloneRow(<a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;old_row)
                                      throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Return a shallow cloned row</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The cloned row row to use.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="add_row_to_hash_table-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>add_row_to_hash_table</h4>
<pre>private&nbsp;void&nbsp;add_row_to_hash_table(<a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;columnValues,
                                   <a href="../../../../../../org/apache/derby/iapi/types/RowLocation.html" title="interface in org.apache.derby.iapi.types">RowLocation</a>&nbsp;rowLocation,
                                   boolean&nbsp;needsToClone)
                            throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Do the work to add one row to the hash table.
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>columnValues</code> - Row to add to the hash table.</dd>
<dd><code>rowLocation</code> - Location of row in conglomerate; could be null.</dd>
<dd><code>needsToClone</code> - If the row needs to be cloned</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="doSpaceAccounting-java.lang.Object-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doSpaceAccounting</h4>
<pre>private&nbsp;void&nbsp;doSpaceAccounting(java.lang.Object&nbsp;hashValue,
                               boolean&nbsp;firstDuplicate)</pre>
</li>
</ul>
<a name="spillToDisk-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>spillToDisk</h4>
<pre>private&nbsp;boolean&nbsp;spillToDisk(<a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;columnValues,
                            <a href="../../../../../../org/apache/derby/iapi/types/RowLocation.html" title="interface in org.apache.derby.iapi.types">RowLocation</a>&nbsp;rowLocation)
                     throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Determine whether a new row should be spilled to disk and, if so, do it.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>columnValues</code> - Actual columns from source row.</dd>
<dd><code>rowLocation</code> - Optional row location.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the row was spilled to disk, false if not</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="makeDiskRow-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>makeDiskRow</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;makeDiskRow(java.lang.Object&nbsp;raw)</pre>
<div class="block"><p>
 Make a full set of columns from an object which is either already
 an array of column or otherwise a LocatedRow. The full set of columns
 is what's stored on disk when we spill to disk. This is the inverse of
 makeInMemoryRow().
 </p></div>
</li>
</ul>
<a name="makeInMemoryRows-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>makeInMemoryRows</h4>
<pre>private&nbsp;java.util.List&nbsp;makeInMemoryRows(java.util.List&nbsp;diskRows)</pre>
<div class="block"><p>
 Turn a list of disk rows into a list of in-memory rows. The on disk
 rows are always of type DataValueDescriptor[]. But the in-memory rows
 could be of type LocatedRow.
 </p></div>
</li>
</ul>
<a name="makeInMemoryRow-org.apache.derby.iapi.types.DataValueDescriptor:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>makeInMemoryRow</h4>
<pre>private&nbsp;java.lang.Object&nbsp;makeInMemoryRow(<a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;diskRow)</pre>
<div class="block"><p>
 Make an in-memory row from an on-disk row. This is the inverse
 of makeDiskRow().
 </p></div>
</li>
</ul>
<a name="makeDiskRow-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>makeDiskRow</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;makeDiskRow(<a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;columnValues,
                                          <a href="../../../../../../org/apache/derby/iapi/types/RowLocation.html" title="interface in org.apache.derby.iapi.types">RowLocation</a>&nbsp;rowLocation)</pre>
<div class="block"><p>
 Construct a full set of columns, which may need to end
 with the row location.The full set of columns is what's
 stored on disk when we spill to disk.
 </p></div>
</li>
</ul>
<a name="getEstimatedMemUsage-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEstimatedMemUsage</h4>
<pre>private&nbsp;long&nbsp;getEstimatedMemUsage(java.lang.Object&nbsp;hashValue)</pre>
<div class="block">Take a value which will go into the hash table and return an estimate
 of how much memory that value will consume. The hash value could
 be either an array of columns or a LocatedRow.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>hashValue</code> - The object for which we want to know the memory usage.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A guess as to how much memory the current hash value will
  use.</dd>
</dl>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()
           throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Close the BackingStoreHashtable.
 <p>
 Perform any necessary cleanup after finishing with the hashtable.  Will
 deallocate/dereference objects as necessary.  If the table has gone
 to disk this will drop any on disk files used to support the hash table.
 <p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="elements--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>elements</h4>
<pre>public&nbsp;java.util.Enumeration&lt;java.lang.Object&gt;&nbsp;elements()
                                                 throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block"><p>
 Return an Enumeration that can be used to scan the entire table. The objects
 in the Enumeration can be either of the following:
 </p>

 <ul>
 <li>a row - This is a single row with a unique hash key.</li>
 <li>or a bucket of rows - This is a list of rows which all have the same hash key.</li>
 </ul>

 <p>
 The situation is a little more complicated because the row representation
 is different depending on whether the row includes a RowLocation.
 If includeRowLocations()== true, then the row is a LocatedRow. Otherwise,
 the row is an array of DataValueDescriptor. Putting all of this together,
 if the row contains a RowLocation, then the objects in the Enumeration returned
 by this method can be either of the following:
 </p>

 <ul>
 <li>a LocatedRow</li>
 <li>or a List&lt;LocatedRow&gt;</li>
 </ul>

 <p>
 But if the row does not contain a RowLocation, then the objects in the
 Enumeration returned by this method can be either of the following:
 </p>

 <ul>
 <li>a DataValueDescriptor[]</li>
 <li>or a List&lt;DataValueDescriptor[]&gt;</li>
 </ul>

 <p>
 RESOLVE - is it worth it to support this routine when we have a
           disk overflow hash table?
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The Enumeration.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="get-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre>public&nbsp;java.lang.Object&nbsp;get(java.lang.Object&nbsp;key)
                     throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block"><p>
 Get data associated with given key.
 </p>

 <p>
 There are 2 different types of objects returned from this routine.
 </p>

 <p>
 In both cases, the key value is either the object stored in 
 row[key_column_numbers[0]], if key_column_numbers.length is 1, 
 otherwise it is a KeyHasher containing
 the objects stored in row[key_column_numbers[0, 1, ...]].
 For every qualifying unique row value an entry is placed into the 
 hash table.
 </p>

 <p>
 For row values with duplicates, the value of the data is a list of
 rows.
 </p>

 <p>
 The situation is a little more complicated because the row representation
 is different depending on whether the row includes a RowLocation.
 If includeRowLocations() == true, then the row is a LocatedRow. Otherwise,
 the row is an array of DataValueDescriptor. Putting all of this together,
 if the row contains a RowLocation, then the objects returned by this method
 can be either of the following:
 </p>

 <ul>
 <li>a LocatedRow</li>
 <li>or a List&lt;LocatedRow&gt;</li>
 </ul>

 <p>
 But if the row does not contain a RowLocation, then the objects
 returned by this method can be either of the following:
 </p>

 <ul>
 <li>a DataValueDescriptor[]</li>
 <li>or a List&lt;DataValueDescriptor[]&gt;</li>
 </ul>

 <p>
 The caller will have to call "instanceof" on the data value
 object if duplicates are expected, to determine if the data value
 of the hash table entry is a row or is a list of rows.
 </p>

 <p>
 See the javadoc for elements() for more information on the objects
 returned by this method.
 </p>

 <p>
 The BackingStoreHashtable "owns" the objects returned from the get()
 routine.  They remain valid until the next access to the 
 BackingStoreHashtable.  If the client needs to keep references to these
 objects, it should clone copies of the objects.  A valid 
 BackingStoreHashtable can place all rows into a disk based conglomerate,
 declare a row buffer and then reuse that row buffer for every get()
 call.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - The key to hash on.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The value to which the key is mapped in this hashtable; 
         null if the key is not mapped to any value in this hashtable.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="getAllRuntimeStats-java.util.Properties-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllRuntimeStats</h4>
<pre>public&nbsp;void&nbsp;getAllRuntimeStats(java.util.Properties&nbsp;prop)
                        throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Return runtime stats to caller by adding them to prop.
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>prop</code> - The set of properties to append to.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="remove-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remove</h4>
<pre>public&nbsp;java.lang.Object&nbsp;remove(java.lang.Object&nbsp;key)
                        throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">remove a row from the hash table.
 <p>
 a remove of a duplicate removes the entire duplicate list.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - The key of the row to remove.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="setAuxillaryRuntimeStats-java.util.Properties-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setAuxillaryRuntimeStats</h4>
<pre>public&nbsp;void&nbsp;setAuxillaryRuntimeStats(java.util.Properties&nbsp;prop)
                              throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Set the auxillary runtime stats.
 <p>
 getRuntimeStats() will return both the auxillary stats and any
 BackingStoreHashtable() specific stats.  Note that each call to
 setAuxillaryRuntimeStats() overwrites the Property set that was
 set previously.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>prop</code> - The set of properties to append from.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="putRow-boolean-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>putRow</h4>
<pre>public&nbsp;boolean&nbsp;putRow(boolean&nbsp;needsToClone,
                      <a href="../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;row,
                      <a href="../../../../../../org/apache/derby/iapi/types/RowLocation.html" title="interface in org.apache.derby.iapi.types">RowLocation</a>&nbsp;rowLocation)
               throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Put a row into the hash table.
 <p>
 The in memory hash table will need to keep a reference to the row
 after the put call has returned.  If "needsToClone" is true then the
 hash table will make a copy of the row and put that, else if 
 "needsToClone" is false then the hash table will keep a reference to
 the row passed in and no copy will be made.
 <p>
 If routine returns false, then no reference is kept to the duplicate
 row which was rejected (thus allowing caller to reuse the object).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>needsToClone</code> - does this routine have to make a copy of the row,
                     in order to keep a reference to it after return?</dd>
<dd><code>row</code> - The row to insert into the table.</dd>
<dd><code>rowLocation</code> - Location of row in conglomerate; could be null.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if row was inserted into the hash table.  Returns
              false if the BackingStoreHashtable is eliminating 
              duplicates, and the row being inserted is a duplicate,
                                or if we are skipping rows with 1 or more null key columns
                                and we find a null key column.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="size--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>size</h4>
<pre>public&nbsp;int&nbsp;size()
         throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Return number of unique rows in the hash table.
 <p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of unique rows in the hash table.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/derby/iapi/store/access/AccessFactoryGlobals.html" title="interface in org.apache.derby.iapi.store.access"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/derby/iapi/store/access/BackingStoreHashtable.BackingStoreHashtableEnumeration.html" title="class in org.apache.derby.iapi.store.access"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/derby/iapi/store/access/BackingStoreHashtable.html" target="_top">Frames</a></li>
<li><a href="BackingStoreHashtable.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
