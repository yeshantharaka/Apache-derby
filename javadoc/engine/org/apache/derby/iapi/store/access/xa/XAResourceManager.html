<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:04:55 IST 2017 -->
<title>XAResourceManager (Apache Derby V10.13 Internals)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="XAResourceManager (Apache Derby V10.13 Internals)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../../../org/apache/derby/iapi/store/access/xa/XAXactId.html" title="class in org.apache.derby.iapi.store.access.xa"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/iapi/store/access/xa/XAResourceManager.html" target="_top">Frames</a></li>
<li><a href="XAResourceManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derby.iapi.store.access.xa</div>
<h2 title="Interface XAResourceManager" class="title">Interface XAResourceManager</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../../../../org/apache/derby/impl/store/raw/xact/XactXAResourceManager.html" title="class in org.apache.derby.impl.store.raw.xact">XactXAResourceManager</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">XAResourceManager</span></pre>
<div class="block">This interface allows access to commit,prepare,abort global transactions
as part of a two phase commit protocol.  These interfaces have been chosen
to be exact implementations required to implement the XAResource interfaces
as part of the JTA standard extension.
<P>
It is expected that the following interfaces are only used during the 
recovery portion of 2 phase commit, when the transaction manager is
cleaning up after a runtime crash - it is expected that no current context
managers exist for the Xid's being operated on.  The "online" two phase commit
protocol will be implemented by calls directly on a TransactionController.
<P>
The XAResource interface is a Java mapping of the industry standard XA resource
manager interface.  Please refer to: X/Open CAE Specification - Distributed 
Transaction Processing: The XA Specification, X/Open Document No. XO/CAE/91/300
or ISBN 1 872630 24 3.
<P></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/iapi/store/access/xa/XAResourceManager.html#commit-org.apache.derby.iapi.services.context.ContextManager-javax.transaction.xa.Xid-boolean-">commit</a></span>(<a href="../../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&nbsp;cm,
      javax.transaction.xa.Xid&nbsp;xid,
      boolean&nbsp;onePhase)</code>
<div class="block">This method is called to commit the global transaction specified by xid.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/iapi/store/access/xa/XAResourceManager.html#find-javax.transaction.xa.Xid-">find</a></span>(javax.transaction.xa.Xid&nbsp;xid)</code>
<div class="block">Find the given Xid in the transaction table.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/iapi/store/access/xa/XAResourceManager.html#forget-org.apache.derby.iapi.services.context.ContextManager-javax.transaction.xa.Xid-">forget</a></span>(<a href="../../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&nbsp;cm,
      javax.transaction.xa.Xid&nbsp;xid)</code>
<div class="block">This method is called to remove the given transaction 
 from the transaction table/log.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>javax.transaction.xa.Xid[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/iapi/store/access/xa/XAResourceManager.html#recover-int-">recover</a></span>(int&nbsp;flags)</code>
<div class="block">This method is called to obtain a list of prepared transactions.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/iapi/store/access/xa/XAResourceManager.html#rollback-org.apache.derby.iapi.services.context.ContextManager-javax.transaction.xa.Xid-">rollback</a></span>(<a href="../../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&nbsp;cm,
        javax.transaction.xa.Xid&nbsp;xid)</code>
<div class="block">rollback the transaction identified by Xid.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="commit-org.apache.derby.iapi.services.context.ContextManager-javax.transaction.xa.Xid-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commit</h4>
<pre>void&nbsp;commit(<a href="../../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&nbsp;cm,
            javax.transaction.xa.Xid&nbsp;xid,
            boolean&nbsp;onePhase)
     throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">This method is called to commit the global transaction specified by xid.
 <p>
 RESOLVE - how do we map to the "right" XAExceptions.
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>cm</code> - The ContextManager returned from the find() call.</dd>
<dd><code>xid</code> - A global transaction identifier.</dd>
<dd><code>onePhase</code> - If true, the resource manager should use a one-phase
                 commit protocol to commit the work done on behalf of 
                 xid.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="find-javax.transaction.xa.Xid-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>find</h4>
<pre><a href="../../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&nbsp;find(javax.transaction.xa.Xid&nbsp;xid)</pre>
<div class="block">Find the given Xid in the transaction table.
 <p>
 This routine is used to find a in-doubt transaction from the list
 of Xid's returned from the recover() routine.  
 <p>
 In the current implementation it is up to the calling routine
 to make the returned ContextManager the "current" ContextManager
 before calls to commit,abort, or forget.  The caller is responsible
 for error handling, ie. calling cleanupOnError() on the correct
 ContextManager.
 <p>
 If the Xid is not in the system, "null" is returned.
 RESOLVE - find out from sku if she wants a exception instead?
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>xid</code> - A global transaction identifier.</dd>
</dl>
</li>
</ul>
<a name="forget-org.apache.derby.iapi.services.context.ContextManager-javax.transaction.xa.Xid-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forget</h4>
<pre>void&nbsp;forget(<a href="../../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&nbsp;cm,
            javax.transaction.xa.Xid&nbsp;xid)
     throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">This method is called to remove the given transaction 
 from the transaction table/log.
 <p>
 Used to let the store remove all record from log and transaction
 table of the given transaction.  This should only be used to 
 clean up heuristically completed transactions, otherwise commit or
 abort should be used to act on other transactions.
 <p>
 If forget() is called on a transaction which has not be heuristically
 completed then it will throw an exception:
 SQLState.STORE_XA_PROTOCOL_VIOLATION.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>cm</code> - The ContextManager returned from the find() call.</dd>
<dd><code>xid</code> - A global transaction identifier.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="recover-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recover</h4>
<pre>javax.transaction.xa.Xid[]&nbsp;recover(int&nbsp;flags)
                            throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">This method is called to obtain a list of prepared transactions.
 <p>
 This call returns a complete list of global transactions which are 
 either prepared or heuristically complete.
 <p>
 The XAResource interface expects a scan type interface, but our
 implementation only returns a complete list of transactions.  So to
 simulate the scan the following state is maintained.  If TMSTARTSCAN
 is specified the complete list is returned.  If recover is called with
 TMNOFLAGS is ever called a 0 length array is returned.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>flags</code> - combination of the following flags 
                 XAResource.{TMSTARTRSCAN,TMENDRSCAN,TMNOFLAGS}.  
                 TMNOFLAGS must be used when no other flags are used.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Return a array with 0 or more Xid's which are currently in
         prepared or heuristically completed state.  If an error occurs
         during the operation, an appropriate error is thrown.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="rollback-org.apache.derby.iapi.services.context.ContextManager-javax.transaction.xa.Xid-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>rollback</h4>
<pre>void&nbsp;rollback(<a href="../../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&nbsp;cm,
              javax.transaction.xa.Xid&nbsp;xid)
       throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">rollback the transaction identified by Xid.
 <p>
 The given transaction is roll'ed back and it's history is not
 maintained in the transaction table or long term log.
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>cm</code> - The ContextManager returned from the find() call.</dd>
<dd><code>xid</code> - A global transaction identifier.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../../../org/apache/derby/iapi/store/access/xa/XAXactId.html" title="class in org.apache.derby.iapi.store.access.xa"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/iapi/store/access/xa/XAResourceManager.html" target="_top">Frames</a></li>
<li><a href="XAResourceManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
