<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:04:36 IST 2017 -->
<title>ReaderToUTF8Stream (Apache Derby V10.13 Internals)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ReaderToUTF8Stream (Apache Derby V10.13 Internals)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/derby/iapi/types/RawToBinaryFormatStream.html" title="class in org.apache.derby.iapi.types"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../org/apache/derby/iapi/types/RefDataValue.html" title="interface in org.apache.derby.iapi.types"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/derby/iapi/types/ReaderToUTF8Stream.html" target="_top">Frames</a></li>
<li><a href="ReaderToUTF8Stream.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derby.iapi.types</div>
<h2 title="Class ReaderToUTF8Stream" class="title">Class ReaderToUTF8Stream</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>java.io.InputStream</li>
<li>
<ul class="inheritance">
<li>org.apache.derby.iapi.types.ReaderToUTF8Stream</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.io.Closeable, java.lang.AutoCloseable</dd>
</dl>
<hr>
<br>
<pre>public final class <span class="typeNameLabel">ReaderToUTF8Stream</span>
extends java.io.InputStream</pre>
<div class="block">Converts the characters served by a <code>java.io.Reader</code> to a stream
 returning the data in the on-disk modified UTF-8 encoded representation used
 by Derby.
 <p>
 Length validation is performed. If required and allowed by the target column
 type, truncation of blanks will also be performed.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#blen">blen</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#boff">boff</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private byte[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#buffer">buffer</a></span></code>
<div class="block">Buffer to hold the data read from stream and converted to the modified
 UTF-8 format.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#charCount">charCount</a></span></code>
<div class="block">The number of chars encoded.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#charsToTruncate">charsToTruncate</a></span></code>
<div class="block">Number of characters to truncate from this stream.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#eof">eof</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#FIRST_READ">FIRST_READ</a></span></code>
<div class="block">Constant indicating the first iteration of <code>fillBuffer</code>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/derby/iapi/types/StreamHeaderGenerator.html" title="interface in org.apache.derby.iapi.types">StreamHeaderGenerator</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#hdrGen">hdrGen</a></span></code>
<div class="block">The generator for the stream header to use for this stream.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#headerLength">headerLength</a></span></code>
<div class="block">The length of the header.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#mark">mark</a></span></code>
<div class="block">Stream mark, set through <a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#mark-int-">mark(int)</a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#MARK_UNSET_OR_EXCEEDED">MARK_UNSET_OR_EXCEEDED</a></span></code>
<div class="block">Constant indicating that no mark is set in the stream, or that the read
 ahead limit of the mark has been exceeded.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#multipleBuffer">multipleBuffer</a></span></code>
<div class="block">Tells if the stream content is/was larger than the buffer size.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#READ_BUFFER_RESERVATION">READ_BUFFER_RESERVATION</a></span></code>
<div class="block">Buffer space reserved for one 3 byte encoded char and the EOF marker.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#readAheadLimit">readAheadLimit</a></span></code>
<div class="block">Read ahead limit for mark, set through <a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#mark-int-">mark(int)</a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/derby/iapi/services/io/LimitReader.html" title="class in org.apache.derby.iapi.services.io">LimitReader</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#reader">reader</a></span></code>
<div class="block">Application's reader wrapped in a LimitReader.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static char</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#SPACE">SPACE</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#typeName">typeName</a></span></code>
<div class="block">The type name for the column data is inserted into.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#valueLength">valueLength</a></span></code>
<div class="block">If positive, length of the expected final value, after truncation if any,
 in characters.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#ReaderToUTF8Stream-java.io.Reader-int-int-java.lang.String-org.apache.derby.iapi.types.StreamHeaderGenerator-">ReaderToUTF8Stream</a></span>(java.io.Reader&nbsp;appReader,
                  int&nbsp;valueLength,
                  int&nbsp;numCharsToTruncate,
                  java.lang.String&nbsp;typeName,
                  <a href="../../../../../org/apache/derby/iapi/types/StreamHeaderGenerator.html" title="interface in org.apache.derby.iapi.types">StreamHeaderGenerator</a>&nbsp;headerGenerator)</code>
<div class="block">Create a stream that will truncate trailing blanks if required/allowed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#ReaderToUTF8Stream-java.io.Reader-int-java.lang.String-org.apache.derby.iapi.types.StreamHeaderGenerator-">ReaderToUTF8Stream</a></span>(java.io.Reader&nbsp;appReader,
                  int&nbsp;maximumLength,
                  java.lang.String&nbsp;typeName,
                  <a href="../../../../../org/apache/derby/iapi/types/StreamHeaderGenerator.html" title="interface in org.apache.derby.iapi.types">StreamHeaderGenerator</a>&nbsp;headerGenerator)</code>
<div class="block">Creates a UTF-8 stream for an application reader whose length isn't
 known at insertion time.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#available--">available</a></span>()</code>
<div class="block">Return an optimized version of bytes available to read from 
 the stream.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#canTruncate--">canTruncate</a></span>()</code>
<div class="block">Determine if trailing blank truncation is allowed.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#checkSufficientData--">checkSufficientData</a></span>()</code>
<div class="block">Validate the length of the stream, take corrective action if allowed.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#close--">close</a></span>()</code>
<div class="block">return resources</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#fillBuffer-int-">fillBuffer</a></span>(int&nbsp;startingOffset)</code>
<div class="block">Fills the internal buffer with data read from the source stream.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#mark-int-">mark</a></span>(int&nbsp;readAheadLimit)</code>
<div class="block">Marks the current position in the stream.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#markSupported--">markSupported</a></span>()</code>
<div class="block">Tests if this stream supports mark/reset.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#read--">read</a></span>()</code>
<div class="block">Reads a byte from the stream.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#read-byte:A-int-int-">read</a></span>(byte[]&nbsp;b,
    int&nbsp;off,
    int&nbsp;len)</code>
<div class="block">Reads up to <code>len</code> bytes from the stream.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#reset--">reset</a></span>()</code>
<div class="block">Repositions this stream to the position at the time the mark method was
 last called on this input stream.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#truncate--">truncate</a></span>()</code>
<div class="block">Attempt to truncate the stream by removing trailing blanks.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.io.InputStream">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.io.InputStream</h3>
<code>read, skip</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="reader">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reader</h4>
<pre>private&nbsp;<a href="../../../../../org/apache/derby/iapi/services/io/LimitReader.html" title="class in org.apache.derby.iapi.services.io">LimitReader</a> reader</pre>
<div class="block">Application's reader wrapped in a LimitReader.</div>
</li>
</ul>
<a name="FIRST_READ">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FIRST_READ</h4>
<pre>private static final&nbsp;int FIRST_READ</pre>
<div class="block">Constant indicating the first iteration of <code>fillBuffer</code>.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#org.apache.derby.iapi.types.ReaderToUTF8Stream.FIRST_READ">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="READ_BUFFER_RESERVATION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>READ_BUFFER_RESERVATION</h4>
<pre>private static final&nbsp;int READ_BUFFER_RESERVATION</pre>
<div class="block">Buffer space reserved for one 3 byte encoded char and the EOF marker.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#org.apache.derby.iapi.types.ReaderToUTF8Stream.READ_BUFFER_RESERVATION">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="MARK_UNSET_OR_EXCEEDED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MARK_UNSET_OR_EXCEEDED</h4>
<pre>private static final&nbsp;int MARK_UNSET_OR_EXCEEDED</pre>
<div class="block">Constant indicating that no mark is set in the stream, or that the read
 ahead limit of the mark has been exceeded.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#org.apache.derby.iapi.types.ReaderToUTF8Stream.MARK_UNSET_OR_EXCEEDED">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="buffer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buffer</h4>
<pre>private&nbsp;byte[] buffer</pre>
<div class="block">Buffer to hold the data read from stream and converted to the modified
 UTF-8 format. The initial size is dependent on whether the data value
 length is known (limited upwards to 32 KB), but it may grow if
 <a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#mark-int-">mark(int)</a> is invoked.</div>
</li>
</ul>
<a name="boff">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>boff</h4>
<pre>private&nbsp;int boff</pre>
</li>
</ul>
<a name="blen">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blen</h4>
<pre>private&nbsp;int blen</pre>
</li>
</ul>
<a name="mark">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mark</h4>
<pre>private&nbsp;int mark</pre>
<div class="block">Stream mark, set through <a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#mark-int-">mark(int)</a>.</div>
</li>
</ul>
<a name="readAheadLimit">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readAheadLimit</h4>
<pre>private&nbsp;int readAheadLimit</pre>
<div class="block">Read ahead limit for mark, set through <a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#mark-int-">mark(int)</a>.</div>
</li>
</ul>
<a name="eof">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>eof</h4>
<pre>private&nbsp;boolean eof</pre>
</li>
</ul>
<a name="multipleBuffer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>multipleBuffer</h4>
<pre>private&nbsp;boolean multipleBuffer</pre>
<div class="block">Tells if the stream content is/was larger than the buffer size.</div>
</li>
</ul>
<a name="hdrGen">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hdrGen</h4>
<pre>private final&nbsp;<a href="../../../../../org/apache/derby/iapi/types/StreamHeaderGenerator.html" title="interface in org.apache.derby.iapi.types">StreamHeaderGenerator</a> hdrGen</pre>
<div class="block">The generator for the stream header to use for this stream.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../org/apache/derby/iapi/types/ReaderToUTF8Stream.html#checkSufficientData--"><code>checkSufficientData()</code></a></dd>
</dl>
</li>
</ul>
<a name="headerLength">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>headerLength</h4>
<pre>private&nbsp;int headerLength</pre>
<div class="block">The length of the header.</div>
</li>
</ul>
<a name="charsToTruncate">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>charsToTruncate</h4>
<pre>private final&nbsp;int charsToTruncate</pre>
<div class="block">Number of characters to truncate from this stream.
 The SQL standard allows for truncation of trailing spaces for CLOB,
 VARCHAR and CHAR. If zero, no characters are truncated, unless the
 stream length exceeds the maximum length of the column we are inserting
 into.</div>
</li>
</ul>
<a name="SPACE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SPACE</h4>
<pre>private static final&nbsp;char SPACE</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#org.apache.derby.iapi.types.ReaderToUTF8Stream.SPACE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="valueLength">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>valueLength</h4>
<pre>private final&nbsp;int valueLength</pre>
<div class="block">If positive, length of the expected final value, after truncation if any,
 in characters. If negative, the maximum length allowed in the column we
 are inserting into. A negative value means we are working with a stream
 of unknown length, inserted through one of the JDBC 4.0 "lengthless
 override" methods.</div>
</li>
</ul>
<a name="typeName">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>typeName</h4>
<pre>private final&nbsp;java.lang.String typeName</pre>
<div class="block">The type name for the column data is inserted into.</div>
</li>
</ul>
<a name="charCount">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>charCount</h4>
<pre>private&nbsp;int charCount</pre>
<div class="block">The number of chars encoded.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ReaderToUTF8Stream-java.io.Reader-int-int-java.lang.String-org.apache.derby.iapi.types.StreamHeaderGenerator-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ReaderToUTF8Stream</h4>
<pre>public&nbsp;ReaderToUTF8Stream(java.io.Reader&nbsp;appReader,
                          int&nbsp;valueLength,
                          int&nbsp;numCharsToTruncate,
                          java.lang.String&nbsp;typeName,
                          <a href="../../../../../org/apache/derby/iapi/types/StreamHeaderGenerator.html" title="interface in org.apache.derby.iapi.types">StreamHeaderGenerator</a>&nbsp;headerGenerator)</pre>
<div class="block">Create a stream that will truncate trailing blanks if required/allowed.

 If the stream must be truncated, the number of blanks to truncate
 is specified to allow the stream to be checked for exact length, as
 required by JDBC 3.0. If the stream is shorter or longer than specified,
 an exception is thrown during read.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>appReader</code> - application reader</dd>
<dd><code>valueLength</code> - the expected length of the reader in characters
      (positive), or the inverse (maxColWidth * -1) of the maximum column
      width if the expected stream length is unknown</dd>
<dd><code>numCharsToTruncate</code> - the number of trailing blanks to truncate</dd>
<dd><code>typeName</code> - type name of the column data is inserted into</dd>
<dd><code>headerGenerator</code> - the stream header generator</dd>
</dl>
</li>
</ul>
<a name="ReaderToUTF8Stream-java.io.Reader-int-java.lang.String-org.apache.derby.iapi.types.StreamHeaderGenerator-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ReaderToUTF8Stream</h4>
<pre>public&nbsp;ReaderToUTF8Stream(java.io.Reader&nbsp;appReader,
                          int&nbsp;maximumLength,
                          java.lang.String&nbsp;typeName,
                          <a href="../../../../../org/apache/derby/iapi/types/StreamHeaderGenerator.html" title="interface in org.apache.derby.iapi.types">StreamHeaderGenerator</a>&nbsp;headerGenerator)</pre>
<div class="block">Creates a UTF-8 stream for an application reader whose length isn't
 known at insertion time.
 <p>
 The application reader is coming in through one of the "lengthless
 overrides" added in JDBC 4.0, for instance
 java.sql.PreparedStatement.setCharacterStream(int,Reader).
 A limit is placed on the length of the application reader. If the reader
 exceeds the maximum length, truncation of trailing blanks is attempted.
 If truncation fails, an exception is thrown.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>appReader</code> - application reader</dd>
<dd><code>maximumLength</code> - maximum allowed length in number of characters for
      the reader, typically the maximum field size</dd>
<dd><code>typeName</code> - type name of the column data is inserted into</dd>
<dd><code>headerGenerator</code> - the stream header generator</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - if maximum length is negative</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="read--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;int&nbsp;read()
         throws java.io.IOException</pre>
<div class="block">Reads a byte from the stream.
 <p>
 Characters read from the source stream are converted to the UTF-8 Derby
 specific encoding.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>read</code>&nbsp;in class&nbsp;<code>java.io.InputStream</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The byte read, or <code>-1</code> if the end-of-stream is reached.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.EOFException</code> - if the end-of-stream has already been reached or
      the stream has been closed</dd>
<dd><code>java.io.IOException</code> - if reading from the source stream fails</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>InputStream.read()</code></dd>
</dl>
</li>
</ul>
<a name="read-byte:A-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;int&nbsp;read(byte[]&nbsp;b,
                int&nbsp;off,
                int&nbsp;len)
         throws java.io.IOException</pre>
<div class="block">Reads up to <code>len</code> bytes from the stream.
 <p>
 Characters read from the source stream are converted to the UTF-8 Derby
 specific encoding.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>read</code>&nbsp;in class&nbsp;<code>java.io.InputStream</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of bytes read, or <code>-1</code> if the end-of-stream is
      reached.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.EOFException</code> - if the end-of-stream has already been reached or
      the stream has been closed</dd>
<dd><code>java.io.IOException</code> - if reading from the source stream fails</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>InputStream.read(byte[],int,int)</code></dd>
</dl>
</li>
</ul>
<a name="fillBuffer-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fillBuffer</h4>
<pre>private&nbsp;void&nbsp;fillBuffer(int&nbsp;startingOffset)
                 throws java.io.IOException</pre>
<div class="block">Fills the internal buffer with data read from the source stream.
 <p>
 The characters read from the source are converted to the modified UTF-8
 encoding, used as the on-disk format by Derby.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>startingOffset</code> - offset at which to start filling the buffer, used
      to avoid overwriting the stream header data on the first iteration</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../org/apache/derby/iapi/services/io/DerbyIOException.html" title="class in org.apache.derby.iapi.services.io">DerbyIOException</a></code> - if the source stream has an invalid length
      (different than specified), or if truncation of blanks fails</dd>
<dd><code>java.io.IOException</code> - if reading from the source stream fails</dd>
</dl>
</li>
</ul>
<a name="checkSufficientData--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkSufficientData</h4>
<pre>private&nbsp;void&nbsp;checkSufficientData()
                          throws java.io.IOException</pre>
<div class="block">Validate the length of the stream, take corrective action if allowed.

 JDBC 3.0 (from tutorial book) requires that an input stream has the
 correct number of bytes in the stream.
 If the stream is too long, trailing blank truncation is attempted if
 allowed. If truncation fails, or is disallowed, an exception is thrown.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an errors occurs in the application stream</dd>
<dd><code><a href="../../../../../org/apache/derby/iapi/services/io/DerbyIOException.html" title="class in org.apache.derby.iapi.services.io">DerbyIOException</a></code> - if Derby finds a problem with the stream;
      stream is too long and cannot be truncated, or the stream length
      does not match the specified length</dd>
</dl>
</li>
</ul>
<a name="canTruncate--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>canTruncate</h4>
<pre>private&nbsp;boolean&nbsp;canTruncate()</pre>
<div class="block">Determine if trailing blank truncation is allowed.</div>
</li>
</ul>
<a name="truncate--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>truncate</h4>
<pre>private&nbsp;void&nbsp;truncate()
               throws java.io.IOException</pre>
<div class="block">Attempt to truncate the stream by removing trailing blanks.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block">return resources</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.io.Closeable</code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.lang.AutoCloseable</code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>close</code>&nbsp;in class&nbsp;<code>java.io.InputStream</code></dd>
</dl>
</li>
</ul>
<a name="available--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>available</h4>
<pre>public final&nbsp;int&nbsp;available()</pre>
<div class="block">Return an optimized version of bytes available to read from 
 the stream.
 <p>
 Note, it is not exactly per <code>java.io.InputStream#available()</code>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>available</code>&nbsp;in class&nbsp;<code>java.io.InputStream</code></dd>
</dl>
</li>
</ul>
<a name="mark-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mark</h4>
<pre>public&nbsp;void&nbsp;mark(int&nbsp;readAheadLimit)</pre>
<div class="block">Marks the current position in the stream.
 <p>
 Note that this stream is not marked at position zero by default (i.e.
 in the constructor).</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>mark</code>&nbsp;in class&nbsp;<code>java.io.InputStream</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>readAheadLimit</code> - the maximum limit of bytes that can be read before
      the mark position becomes invalid</dd>
</dl>
</li>
</ul>
<a name="reset--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reset</h4>
<pre>public&nbsp;void&nbsp;reset()
           throws java.io.IOException</pre>
<div class="block">Repositions this stream to the position at the time the mark method was
 last called on this input stream.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>reset</code>&nbsp;in class&nbsp;<code>java.io.InputStream</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.EOFException</code> - if the stream has been closed</dd>
<dd><code>java.io.IOException</code> - if no mark has been set, or the read ahead limit of
      the mark has been exceeded</dd>
</dl>
</li>
</ul>
<a name="markSupported--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>markSupported</h4>
<pre>public&nbsp;boolean&nbsp;markSupported()</pre>
<div class="block">Tests if this stream supports mark/reset.
 <p>
 The <code>markSupported</code> method of <code>ByteArrayInputStream</code> always
 returns <code>true</code>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>markSupported</code>&nbsp;in class&nbsp;<code>java.io.InputStream</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code>, mark/reset is always supported.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/derby/iapi/types/RawToBinaryFormatStream.html" title="class in org.apache.derby.iapi.types"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../org/apache/derby/iapi/types/RefDataValue.html" title="interface in org.apache.derby.iapi.types"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/derby/iapi/types/ReaderToUTF8Stream.html" target="_top">Frames</a></li>
<li><a href="ReaderToUTF8Stream.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
