<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:05:06 IST 2017 -->
<title>ContextService (Apache Derby V10.13 Internals)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ContextService (Apache Derby V10.13 Internals)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":9,"i2":9,"i3":10,"i4":9,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.CtxStack.html" title="class in org.apache.derby.iapi.services.context"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.ContextManagerStack.html" title="class in org.apache.derby.iapi.services.context"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/derby/iapi/services/context/ContextService.html" target="_top">Frames</a></li>
<li><a href="ContextService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derby.iapi.services.context</div>
<h2 title="Class ContextService" class="title">Class ContextService</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.derby.iapi.services.context.ContextService</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public final class <span class="typeNameLabel">ContextService</span>
extends java.lang.Object</pre>
<div class="block">A set of static methods to supply easier access to contexts.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.ContextManagerStack.html" title="class in org.apache.derby.iapi.services.context">ContextService.ContextManagerStack</a></span></code>
<div class="block">Specialized stack class that contains context managers.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.HashSet&lt;<a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html#allContexts">allContexts</a></span></code>
<div class="block">Collection of all ContextManagers that are open
 in the complete Derby system.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/derby/iapi/services/stream/HeaderPrintWriter.html" title="interface in org.apache.derby.iapi.services.stream">HeaderPrintWriter</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html#errorStream">errorStream</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static <a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html" title="class in org.apache.derby.iapi.services.context">ContextService</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html#factory">factory</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.ThreadLocal&lt;java.lang.Object&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html#threadContextList">threadContextList</a></span></code>
<div class="block">Maintains a list of all the contexts that this thread has created
                and/or used.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html#ContextService--">ContextService</a></span>()</code>
<div class="block">Create a new ContextService for a Derby system.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html#addToThreadList-java.lang.Thread-org.apache.derby.iapi.services.context.ContextManager-">addToThreadList</a></span>(java.lang.Thread&nbsp;me,
               <a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&nbsp;associateCM)</code>
<div class="block">The current thread (passed in a me) is setting associateCM
 to be its current context manager.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static <a href="../../../../../../org/apache/derby/iapi/services/context/Context.html" title="interface in org.apache.derby.iapi.services.context">Context</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html#getContext-java.lang.String-">getContext</a></span>(java.lang.String&nbsp;contextId)</code>
<div class="block">Find the context with the given name in the context service factory
                loaded for the system.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static <a href="../../../../../../org/apache/derby/iapi/services/context/Context.html" title="interface in org.apache.derby.iapi.services.context">Context</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html#getContextOrNull-java.lang.String-">getContextOrNull</a></span>(java.lang.String&nbsp;contextId)</code>
<div class="block">Find the context with the given name in the context service factory
                loaded for the system.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html#getCurrentContextManager--">getCurrentContextManager</a></span>()</code>
<div class="block">Get current Context Manager linked to the current Thread.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static <a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html" title="class in org.apache.derby.iapi.services.context">ContextService</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html#getFactory--">getFactory</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html#newContextManager--">newContextManager</a></span>()</code>
<div class="block">It's up to the caller to track this context manager and set it
 in the context manager list using setCurrentContextManager.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html#notifyAllActiveThreads-org.apache.derby.iapi.services.context.Context-">notifyAllActiveThreads</a></span>(<a href="../../../../../../org/apache/derby/iapi/services/context/Context.html" title="interface in org.apache.derby.iapi.services.context">Context</a>&nbsp;c)</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html#removeContext-org.apache.derby.iapi.services.context.ContextManager-">removeContext</a></span>(<a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&nbsp;cm)</code>
<div class="block">Remove a ContextManager from the list of all active
 contexts managers.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html#resetCurrentContextManager-org.apache.derby.iapi.services.context.ContextManager-">resetCurrentContextManager</a></span>(<a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&nbsp;cm)</code>
<div class="block">Break the link between the current Thread and the passed
 in ContextManager.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html#setCurrentContextManager-org.apache.derby.iapi.services.context.ContextManager-">setCurrentContextManager</a></span>(<a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&nbsp;cm)</code>
<div class="block">Link the current thread to the passed in Contextmanager
 so that a subsequent call to getCurrentContextManager by
 the current Thread will return cm.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html#stop--">stop</a></span>()</code>
<div class="block">So it can be given to us and taken away...</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="factory">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>factory</h4>
<pre>private static&nbsp;<a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html" title="class in org.apache.derby.iapi.services.context">ContextService</a> factory</pre>
</li>
</ul>
<a name="errorStream">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>errorStream</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/derby/iapi/services/stream/HeaderPrintWriter.html" title="interface in org.apache.derby.iapi.services.stream">HeaderPrintWriter</a> errorStream</pre>
</li>
</ul>
<a name="threadContextList">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>threadContextList</h4>
<pre>private&nbsp;java.lang.ThreadLocal&lt;java.lang.Object&gt; threadContextList</pre>
<div class="block">Maintains a list of all the contexts that this thread has created
                and/or used. The object stored in the thread local varys according
                how this thread has been used and will be one of:

                <UL>
                <LI> null - the thread no affiliation with a context manager.

                <LI> ContextManager - the current thread has used or is using
            this context manager. If ContextManager.activeThread equals
            the current thread then the thread is currently active with
            the ContextManager. In this case ContextManager.activeCount
            will be greater than zero and represent the level of nested
            setCurrentContextmanager calls.
            If ContextManager.activeThread is null then no other thread
            is using the Contextmanager, if ContextManager.activeThread
            is not-null and not equal to the current thread then some
            other thread is using the context. It is assumed that
            only a single thread can be using a ContextManager at any time
            and this is enforced by synchronization outside the ContextManager.
            E.g for JDBC connections, synchronization at the JDBC level.

        <LI> ContextManagerStack containing ContextManagers - the current
        thread is actively using multiple different ContextManagers,
        with nesting. All ContextManagers in the stack will have
        activeThread set to the current thread, and their activeCount
        set to -1. This is because nesting is solely represented by
        the stack, with the current context manager on top of the stack.
        This supports multiple levels of nesting across two stacks, e.g.
        C1-&gt;C2-&gt;C2-&gt;C1-&gt;C2.
                </UL>

                This thread local is used to find the current context manager. Basically it provides
                fast access to a list of candidate contexts. If one of the contexts has its activeThread
                equal to the current thread then it is the current context manager.

                If the thread has pushed multiple contexts (e.g. open a new non-nested Derby connection
                from a server side method) then threadContextList will contain a Stack. The value for each cm
                will be a push order, with higher numbers being more recently pushed.

                To support the case where a single context manager is pushed twice (nested connection),
                the context manager keeps track of the number of times it has been pushed (set). Note that
                our synchronization requires that a single context can only be accessed by a single thread at a time.
                In the JDBC layer this is enforced by the synchronization on the connection object.

                <P>
                There are two cases we are trying to optimise.
                <UL>
                <LI> Typical JDBC client program where there a Connection is always executed using a single thread.
                        In this case this variable will contain the Connection's context manager 
                <LI> Typical application server pooled connection where a single thread may use a connection from a pool
                for the lifetime of the request. In this case this variable will contain a  WeakReference.
                </UL>
        <BR>
        Single thread for Connection execution.
        <pre>
        threadContextList.get() == cm
        // while in JDBC engine code
        cm.activeThread == Thread.currentThread();
        cm.activeCount = 1;
        </pre>
        
        <BR>
        J2EE single thread for lifetime of execution.
        <pre>
        // thread executing request
         threadContextList.get() == cm
        // while in JDBC engine code
        cm.activeThread == Thread.currentThread();
        cm.activeCount = 1;
        
        // other threads that have recently executed
        // the same connection can have
        threadContextList.get() == cm
        cm.activeThread != Thread.currentThread();
       </pre>
        
        <BR>
        Nested routine calls within single connection
        <pre>
        threadContextList.get() == cm
        // Within server-side JDBC code in a
        // function called from another function/procedure
        // called from an applications's statement
        // (three levels of nesting)
        cm.activeThread == Thread.currentThread();
        cm.activeCount = 3;         
        </pre>
        
        <BR>
        Nested routine calls with the inner routine
        using a different connection to access a Derby database.
        Note nesting of orignal Contextmanager cm is changed
        from an activeCount of 2 to nesting within the stack
        once multiple ContextManagers are involved.
        <pre>
        threadContextList.get() == stack {cm2,cm,cm}
        cm.activeThread == Thread.currentThread();
        cm.activeCount = -1; // nesting in stack
        cm2.activeThread == Thread.currentThread();
        cm2.activeCount = -1; // nesting in stack
        </pre> 
        
        <BR>
        Nested multiple ContextManagers, the code supports
        this, though it may not be possible currently
        to have a stack like this from SQL/JDBC.
        <pre>
        threadContextList.get() == stack {cm3,cm2,cm,cm2,cm,cm}
        cm.activeThread == Thread.currentThread();
        cm.activeCount = -1; // nesting in stack
        cm2.activeThread == Thread.currentThread();
        cm2.activeCount = -1; // nesting in stack
        cm3.activeThread == Thread.currentThread();
        cm3.activeCount = -1; // nesting in stack
        </pre></div>
</li>
</ul>
<a name="allContexts">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>allContexts</h4>
<pre>private&nbsp;java.util.HashSet&lt;<a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&gt; allContexts</pre>
<div class="block">Collection of all ContextManagers that are open
 in the complete Derby system. A ContextManager is
 added when it is created with newContextManager and
 removed when the session is closed.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html#newContextManager--"><code>newContextManager()</code></a>, 
<a href="../../../../../../org/apache/derby/iapi/services/context/SystemContext.html#cleanupOnError-java.lang.Throwable-"><code>SystemContext.cleanupOnError(Throwable)</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ContextService--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ContextService</h4>
<pre>public&nbsp;ContextService()</pre>
<div class="block">Create a new ContextService for a Derby system.
 Only a single system is active at any time.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="stop--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stop</h4>
<pre>public static&nbsp;void&nbsp;stop()</pre>
<div class="block">So it can be given to us and taken away...</div>
</li>
</ul>
<a name="getFactory--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFactory</h4>
<pre>public static&nbsp;<a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html" title="class in org.apache.derby.iapi.services.context">ContextService</a>&nbsp;getFactory()</pre>
</li>
</ul>
<a name="getContext-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getContext</h4>
<pre>public static&nbsp;<a href="../../../../../../org/apache/derby/iapi/services/context/Context.html" title="interface in org.apache.derby.iapi.services.context">Context</a>&nbsp;getContext(java.lang.String&nbsp;contextId)</pre>
<div class="block">Find the context with the given name in the context service factory
                loaded for the system.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The requested context, null if it doesn't exist.</dd>
</dl>
</li>
</ul>
<a name="getContextOrNull-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getContextOrNull</h4>
<pre>public static&nbsp;<a href="../../../../../../org/apache/derby/iapi/services/context/Context.html" title="interface in org.apache.derby.iapi.services.context">Context</a>&nbsp;getContextOrNull(java.lang.String&nbsp;contextId)</pre>
<div class="block">Find the context with the given name in the context service factory
                loaded for the system.

                This version will not do any debug checking, but return null
                quietly if it runs into any problems.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The requested context, null if it doesn't exist.</dd>
</dl>
</li>
</ul>
<a name="getCurrentContextManager--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentContextManager</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&nbsp;getCurrentContextManager()</pre>
<div class="block">Get current Context Manager linked to the current Thread.
 See setCurrentContextManager for details.
 Note that this call can be expensive and is only
 intended to be used in "stateless" situations.
 Ideally code has a reference to the correct
 ContextManager from another Object, such as a pushed Context.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>ContextManager current Context Manager</dd>
</dl>
</li>
</ul>
<a name="resetCurrentContextManager-org.apache.derby.iapi.services.context.ContextManager-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resetCurrentContextManager</h4>
<pre>public&nbsp;void&nbsp;resetCurrentContextManager(<a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&nbsp;cm)</pre>
<div class="block">Break the link between the current Thread and the passed
 in ContextManager. Called in a pair with setCurrentContextManager,
 see that method for details.</div>
</li>
</ul>
<a name="addToThreadList-java.lang.Thread-org.apache.derby.iapi.services.context.ContextManager-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addToThreadList</h4>
<pre>private&nbsp;boolean&nbsp;addToThreadList(java.lang.Thread&nbsp;me,
                                <a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&nbsp;associateCM)</pre>
<div class="block">The current thread (passed in a me) is setting associateCM
 to be its current context manager. Sets the thread local
 variable threadContextList to reflect associateCM being
 the current ContextManager.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True if the nesting level is to be represented in
 the ContextManager.activeCount field. False if not.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.html#activeCount"><code>ContextManager.activeCount</code></a>, 
<a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.html#activeThread"><code>ContextManager.activeThread</code></a></dd>
</dl>
</li>
</ul>
<a name="setCurrentContextManager-org.apache.derby.iapi.services.context.ContextManager-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setCurrentContextManager</h4>
<pre>public&nbsp;void&nbsp;setCurrentContextManager(<a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&nbsp;cm)</pre>
<div class="block">Link the current thread to the passed in Contextmanager
 so that a subsequent call to getCurrentContextManager by
 the current Thread will return cm.
 ContextManagers are tied to a Thread while the thread
 is executing Derby code. For example on most JDBC method
 calls the ContextManager backing the Connection object
 is tied to the current Thread at the start of the method
 and reset at the end of the method. Once the Thread
 has completed its Derby work the method resetCurrentContextManager
 must be called with the same ContextManager to break the link.
 Note that a subsquent use of the ContextManager may be on
 a separate Thread, the Thread is only linked to the ContextManager
 between the setCurrentContextManager and resetCurrentContextManager calls.
 <BR>
 ContextService supports nesting of calls by a single Thread, either
 with the same ContextManager or a different ContextManager.
 <UL>
 <LI>The same ContextManager would be pushed during a nested JDBC call in
 a procedure or function.
 <LI>A different ContextManager would be pushed during a call on
 a different embedded JDBC Connection in a procedure or function.
 </UL></div>
</li>
</ul>
<a name="newContextManager--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newContextManager</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&nbsp;newContextManager()</pre>
<div class="block">It's up to the caller to track this context manager and set it
 in the context manager list using setCurrentContextManager.
 We don't keep track of it due to this call being made.</div>
</li>
</ul>
<a name="notifyAllActiveThreads-org.apache.derby.iapi.services.context.Context-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>notifyAllActiveThreads</h4>
<pre>public&nbsp;void&nbsp;notifyAllActiveThreads(<a href="../../../../../../org/apache/derby/iapi/services/context/Context.html" title="interface in org.apache.derby.iapi.services.context">Context</a>&nbsp;c)</pre>
</li>
</ul>
<a name="removeContext-org.apache.derby.iapi.services.context.ContextManager-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>removeContext</h4>
<pre>void&nbsp;removeContext(<a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&nbsp;cm)</pre>
<div class="block">Remove a ContextManager from the list of all active
 contexts managers.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.CtxStack.html" title="class in org.apache.derby.iapi.services.context"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.ContextManagerStack.html" title="class in org.apache.derby.iapi.services.context"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/derby/iapi/services/context/ContextService.html" target="_top">Frames</a></li>
<li><a href="ContextService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
