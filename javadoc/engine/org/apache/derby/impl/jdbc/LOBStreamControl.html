<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:05:00 IST 2017 -->
<title>LOBStreamControl (Apache Derby V10.13 Internals)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="LOBStreamControl (Apache Derby V10.13 Internals)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":9,"i5":9,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/derby/impl/jdbc/LOBStoredProcedure.html" title="class in org.apache.derby.impl.jdbc"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../org/apache/derby/impl/jdbc/PositionedStoreStream.html" title="class in org.apache.derby.impl.jdbc"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/derby/impl/jdbc/LOBStreamControl.html" target="_top">Frames</a></li>
<li><a href="LOBStreamControl.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derby.impl.jdbc</div>
<h2 title="Class LOBStreamControl" class="title">Class LOBStreamControl</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.derby.impl.jdbc.LOBStreamControl</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>final class <span class="typeNameLabel">LOBStreamControl</span>
extends java.lang.Object</pre>
<div class="block">This class acts as a layer of blob/clob repository (in memory or file).
 The max bytes of data stored in memory depends on the way this
 class is created. If the class is created with initial data, the buffer
 size is set to the size of the byte array supplied, but no larger than
 MAX_BUF_SIZE. If no initial data is supplied, or if the initial data size
 is less than DEFAULT_BUF_SIZE, the buffer size is set to DEFAULT_BUF_SIZE.
 When write increases the data beyond this value a temporary file is created
 and data is moved into that. If truncate reduces the size of the file below
 initial buffer size, the data is moved into memory.

 This class also creates InputStream and OutputStream which can be used to access
 blob data irrespective of if its in memory or in file.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#bufferSize">bufferSize</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/derby/impl/jdbc/EmbedConnection.html" title="class in org.apache.derby.impl.jdbc">EmbedConnection</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#conn">conn</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private byte[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#dataBytes">dataBytes</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#DEFAULT_BUF_SIZE">DEFAULT_BUF_SIZE</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#isBytes">isBytes</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#MAX_BUF_SIZE">MAX_BUF_SIZE</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/derby/impl/jdbc/LOBFile.html" title="class in org.apache.derby.impl.jdbc">LOBFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#tmpFile">tmpFile</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#updateCount">updateCount</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#LOBStreamControl-org.apache.derby.impl.jdbc.EmbedConnection-">LOBStreamControl</a></span>(<a href="../../../../../org/apache/derby/impl/jdbc/EmbedConnection.html" title="class in org.apache.derby.impl.jdbc">EmbedConnection</a>&nbsp;conn)</code>
<div class="block">Creates an empty LOBStreamControl.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#LOBStreamControl-org.apache.derby.impl.jdbc.EmbedConnection-byte:A-">LOBStreamControl</a></span>(<a href="../../../../../org/apache/derby/impl/jdbc/EmbedConnection.html" title="class in org.apache.derby.impl.jdbc">EmbedConnection</a>&nbsp;conn,
                byte[]&nbsp;data)</code>
<div class="block">Creates a LOBStreamControl and initializes with a bytes array.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#copyData-java.io.InputStream-long-">copyData</a></span>(java.io.InputStream&nbsp;inStream,
        long&nbsp;length)</code>
<div class="block">Copies bytes from stream to local storage.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#copyUtf8Data-java.io.InputStream-long-">copyUtf8Data</a></span>(java.io.InputStream&nbsp;utf8Stream,
            long&nbsp;charLength)</code>
<div class="block">Copies UTF-8 encoded chars from a stream to local storage.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#deleteFile-org.apache.derby.io.StorageFile-">deleteFile</a></span>(<a href="../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#finalize--">finalize</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private static java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#findService-java.lang.String-java.lang.String-">findService</a></span>(java.lang.String&nbsp;factoryInterface,
           java.lang.String&nbsp;serviceName)</code>
<div class="block">Privileged service lookup.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private static java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#findServiceModule-java.lang.Object-java.lang.String-">findServiceModule</a></span>(java.lang.Object&nbsp;serviceModule,
                 java.lang.String&nbsp;factoryInterface)</code>
<div class="block">Privileged startup.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#free--">free</a></span>()</code>
<div class="block">Invalidates all the variables and closes file handle if open.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>(package private) java.io.InputStream</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#getInputStream-long-">getInputStream</a></span>(long&nbsp;pos)</code>
<div class="block">returns input stream linked with this object.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#getLength--">getLength</a></span>()</code>
<div class="block">Returns length of data.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>(package private) java.io.OutputStream</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#getOutputStream-long-">getOutputStream</a></span>(long&nbsp;pos)</code>
<div class="block">returns output stream linked with this object</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#getUpdateCount--">getUpdateCount</a></span>()</code>
<div class="block">Returns the running sequence number to check if the lob is updated since
 last access.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#init-byte:A-long-">init</a></span>(byte[]&nbsp;b,
    long&nbsp;len)</code>&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#isValidOffset-int-int-">isValidOffset</a></span>(int&nbsp;off,
             int&nbsp;length)</code>&nbsp;</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#isValidPostion-long-">isValidPostion</a></span>(long&nbsp;pos)</code>&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#read-byte:A-int-int-long-">read</a></span>(byte[]&nbsp;buff,
    int&nbsp;off,
    int&nbsp;len,
    long&nbsp;pos)</code>
<div class="block">Reads bytes starting from 'position' into bytes array.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#read-long-">read</a></span>(long&nbsp;pos)</code>
<div class="block">Reads one byte.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#readBytes-byte:A-int-int-long-">readBytes</a></span>(byte[]&nbsp;b,
         int&nbsp;off,
         int&nbsp;len,
         long&nbsp;pos)</code>&nbsp;</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#releaseTempFile-org.apache.derby.impl.jdbc.LOBFile-">releaseTempFile</a></span>(<a href="../../../../../org/apache/derby/impl/jdbc/LOBFile.html" title="class in org.apache.derby.impl.jdbc">LOBFile</a>&nbsp;file)</code>
<div class="block">Close and release all resources held by a temporary file.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#replaceBytes-byte:A-long-long-">replaceBytes</a></span>(byte[]&nbsp;buf,
            long&nbsp;stPos,
            long&nbsp;endPos)</code>
<div class="block">Replaces a block of bytes in the middle of the LOB with a another block
 of bytes, which may be of a different size.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#truncate-long-">truncate</a></span>(long&nbsp;size)</code>
<div class="block">Resets the size.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#updateData-byte:A-int-int-long-">updateData</a></span>(byte[]&nbsp;bytes,
          int&nbsp;offset,
          int&nbsp;len,
          long&nbsp;pos)</code>&nbsp;</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#write-byte:A-int-int-long-">write</a></span>(byte[]&nbsp;b,
     int&nbsp;off,
     int&nbsp;len,
     long&nbsp;pos)</code>
<div class="block">Writes <code>len</code> bytes from the specified byte array to the LOB.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/LOBStreamControl.html#write-int-long-">write</a></span>(int&nbsp;b,
     long&nbsp;pos)</code>
<div class="block">Writes one byte.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="tmpFile">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tmpFile</h4>
<pre>private&nbsp;<a href="../../../../../org/apache/derby/impl/jdbc/LOBFile.html" title="class in org.apache.derby.impl.jdbc">LOBFile</a> tmpFile</pre>
</li>
</ul>
<a name="dataBytes">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataBytes</h4>
<pre>private&nbsp;byte[] dataBytes</pre>
</li>
</ul>
<a name="isBytes">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isBytes</h4>
<pre>private&nbsp;boolean isBytes</pre>
</li>
</ul>
<a name="bufferSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bufferSize</h4>
<pre>private final&nbsp;int bufferSize</pre>
</li>
</ul>
<a name="conn">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>conn</h4>
<pre>private final&nbsp;<a href="../../../../../org/apache/derby/impl/jdbc/EmbedConnection.html" title="class in org.apache.derby.impl.jdbc">EmbedConnection</a> conn</pre>
</li>
</ul>
<a name="updateCount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateCount</h4>
<pre>private&nbsp;long updateCount</pre>
</li>
</ul>
<a name="DEFAULT_BUF_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_BUF_SIZE</h4>
<pre>private static final&nbsp;int DEFAULT_BUF_SIZE</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#org.apache.derby.impl.jdbc.LOBStreamControl.DEFAULT_BUF_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="MAX_BUF_SIZE">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MAX_BUF_SIZE</h4>
<pre>private static final&nbsp;int MAX_BUF_SIZE</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#org.apache.derby.impl.jdbc.LOBStreamControl.MAX_BUF_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="LOBStreamControl-org.apache.derby.impl.jdbc.EmbedConnection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOBStreamControl</h4>
<pre>LOBStreamControl(<a href="../../../../../org/apache/derby/impl/jdbc/EmbedConnection.html" title="class in org.apache.derby.impl.jdbc">EmbedConnection</a>&nbsp;conn)</pre>
<div class="block">Creates an empty LOBStreamControl.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>conn</code> - Connection for this lob</dd>
</dl>
</li>
</ul>
<a name="LOBStreamControl-org.apache.derby.impl.jdbc.EmbedConnection-byte:A-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>LOBStreamControl</h4>
<pre>LOBStreamControl(<a href="../../../../../org/apache/derby/impl/jdbc/EmbedConnection.html" title="class in org.apache.derby.impl.jdbc">EmbedConnection</a>&nbsp;conn,
                 byte[]&nbsp;data)
          throws java.io.IOException,
                 <a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Creates a LOBStreamControl and initializes with a bytes array.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>conn</code> - Connection for this lob</dd>
<dd><code>data</code> - initial value</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="init-byte:A-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre>private&nbsp;void&nbsp;init(byte[]&nbsp;b,
                  long&nbsp;len)
           throws java.io.IOException,
                  <a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="updateData-byte:A-int-int-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateData</h4>
<pre>private&nbsp;long&nbsp;updateData(byte[]&nbsp;bytes,
                        int&nbsp;offset,
                        int&nbsp;len,
                        long&nbsp;pos)
                 throws <a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="isValidPostion-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isValidPostion</h4>
<pre>private&nbsp;void&nbsp;isValidPostion(long&nbsp;pos)
                     throws java.io.IOException,
                            <a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="isValidOffset-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isValidOffset</h4>
<pre>private&nbsp;void&nbsp;isValidOffset(int&nbsp;off,
                           int&nbsp;length)
                    throws <a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="write-int-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>write</h4>
<pre>long&nbsp;write(int&nbsp;b,
           long&nbsp;pos)
    throws java.io.IOException,
           <a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Writes one byte.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>b</code> - byte</dd>
<dd><code>pos</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>new position</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if writing to the LOB file fails</dd>
<dd><code><a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - if encrypting/decrypting the LOB file fails</dd>
</dl>
</li>
</ul>
<a name="write-byte:A-int-int-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>write</h4>
<pre>long&nbsp;write(byte[]&nbsp;b,
           int&nbsp;off,
           int&nbsp;len,
           long&nbsp;pos)
    throws java.io.IOException,
           <a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Writes <code>len</code> bytes from the specified byte array to the LOB.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>b</code> - byte array</dd>
<dd><code>off</code> - offset from where to read from the byte array</dd>
<dd><code>len</code> - number of bytes to be written</dd>
<dd><code>pos</code> - starting position</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The position after the bytes have been written to the LOB.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if writing to the LOB fails</dd>
<dd><code><a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - if writing to the LOB fails</dd>
<dd><code>java.lang.IndexOutOfBoundsException</code> - if <code>len</code> is larger than
       <code>b.length - off</code></dd>
</dl>
</li>
</ul>
<a name="read-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>int&nbsp;read(long&nbsp;pos)
  throws java.io.IOException,
         <a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Reads one byte.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pos</code> - position from where to read</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>byte</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if reading the LOB file fails</dd>
<dd><code><a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - if decrypting an encrypted LOB file fails</dd>
</dl>
</li>
</ul>
<a name="readBytes-byte:A-int-int-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readBytes</h4>
<pre>private&nbsp;int&nbsp;readBytes(byte[]&nbsp;b,
                      int&nbsp;off,
                      int&nbsp;len,
                      long&nbsp;pos)</pre>
</li>
</ul>
<a name="read-byte:A-int-int-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>int&nbsp;read(byte[]&nbsp;buff,
         int&nbsp;off,
         int&nbsp;len,
         long&nbsp;pos)
  throws java.io.IOException,
         <a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Reads bytes starting from 'position' into bytes array.
 starting from 'offset'</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>buff</code> - array into the bytes will be copied</dd>
<dd><code>off</code> - offset from where the array has to be populated</dd>
<dd><code>len</code> - number of bytes to read</dd>
<dd><code>pos</code> - initial position before reading</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>number new position</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if reading the LOB file fails</dd>
<dd><code><a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - if decrypting an encrypted LOB file fails</dd>
</dl>
</li>
</ul>
<a name="getInputStream-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInputStream</h4>
<pre>java.io.InputStream&nbsp;getInputStream(long&nbsp;pos)</pre>
<div class="block">returns input stream linked with this object.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pos</code> - initial postion</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>InputStream</dd>
</dl>
</li>
</ul>
<a name="getOutputStream-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOutputStream</h4>
<pre>java.io.OutputStream&nbsp;getOutputStream(long&nbsp;pos)</pre>
<div class="block">returns output stream linked with this object</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pos</code> - initial postion</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>OutputStream</dd>
</dl>
</li>
</ul>
<a name="getLength--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLength</h4>
<pre>long&nbsp;getLength()
        throws java.io.IOException</pre>
<div class="block">Returns length of data.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>length</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="truncate-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>truncate</h4>
<pre>void&nbsp;truncate(long&nbsp;size)
       throws java.io.IOException,
              <a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Resets the size.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>size</code> - new size should be smaller than existing size</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="copyData-java.io.InputStream-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>copyData</h4>
<pre>void&nbsp;copyData(java.io.InputStream&nbsp;inStream,
              long&nbsp;length)
       throws java.io.IOException,
              <a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Copies bytes from stream to local storage.
 <p>
 Note that specifying the length as <code>Long.MAX_VALUE</code> results in
 reading data from the stream until EOF is reached, but no length checking
 will be performed.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>inStream</code> - the stream to copy from</dd>
<dd><code>length</code> - number of bytes to be copied, or <code>Long.MAX_VALUE</code> to
      copy everything until EOF is reached</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if reading or writing a LOB file fails</dd>
<dd><code><a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - if encrypting or decrypting a LOB file fails</dd>
</dl>
</li>
</ul>
<a name="copyUtf8Data-java.io.InputStream-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>copyUtf8Data</h4>
<pre>long&nbsp;copyUtf8Data(java.io.InputStream&nbsp;utf8Stream,
                  long&nbsp;charLength)
           throws java.io.IOException,
                  <a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Copies UTF-8 encoded chars from a stream to local storage.
 <p>
 Note that specifying the length as <code>Long.MAX_VALUE</code> results in
 reading data from the stream until EOF is reached, but no length checking
 will be performed.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>utf8Stream</code> - the stream to copy from</dd>
<dd><code>charLength</code> - number of chars to be copied, or <code>Long.MAX_VALUE</code>
      to copy everything until EOF is reached</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of characters copied.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.EOFException</code> - if EOF is reached prematurely</dd>
<dd><code>java.io.IOException</code> - thrown on a number of error conditions</dd>
<dd><code><a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - if reading, writing or truncating the
      <code>LOBStreamControl</code>-object fails</dd>
<dd><code>java.io.UTFDataFormatException</code> - if an invalid UTF-8 encoding is detected</dd>
</dl>
</li>
</ul>
<a name="finalize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalize</h4>
<pre>protected&nbsp;void&nbsp;finalize()
                 throws java.lang.Throwable</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>finalize</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Throwable</code></dd>
</dl>
</li>
</ul>
<a name="deleteFile-org.apache.derby.io.StorageFile-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteFile</h4>
<pre>private&nbsp;void&nbsp;deleteFile(<a href="../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)</pre>
</li>
</ul>
<a name="free--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>free</h4>
<pre>void&nbsp;free()
   throws java.io.IOException</pre>
<div class="block">Invalidates all the variables and closes file handle if open.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if closing the file fails</dd>
</dl>
</li>
</ul>
<a name="releaseTempFile-org.apache.derby.impl.jdbc.LOBFile-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>releaseTempFile</h4>
<pre>private&nbsp;void&nbsp;releaseTempFile(<a href="../../../../../org/apache/derby/impl/jdbc/LOBFile.html" title="class in org.apache.derby.impl.jdbc">LOBFile</a>&nbsp;file)
                      throws java.io.IOException</pre>
<div class="block">Close and release all resources held by a temporary file. The file will
 also be deleted from the file system and removed from the list of
 <code>LOBFile</code>s in <code>EmbedConnection</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>file</code> - the temporary file</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if the file cannot be closed or deleted</dd>
</dl>
</li>
</ul>
<a name="replaceBytes-byte:A-long-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replaceBytes</h4>
<pre>long&nbsp;replaceBytes(byte[]&nbsp;buf,
                  long&nbsp;stPos,
                  long&nbsp;endPos)
           throws java.io.IOException,
                  <a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Replaces a block of bytes in the middle of the LOB with a another block
 of bytes, which may be of a different size.
 <p>
 The new byte array may not be be of same length as the original,
 thus it may result in resizing the total lob.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>buf</code> - byte array which will be written inplace of old block</dd>
<dd><code>stPos</code> - inclusive starting position of current block</dd>
<dd><code>endPos</code> - exclusive end position of current block</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Current position after write.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if writing to the temporary file fails</dd>
<dd><code><a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="getUpdateCount--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUpdateCount</h4>
<pre>long&nbsp;getUpdateCount()</pre>
<div class="block">Returns the running sequence number to check if the lob is updated since
 last access.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The current update sequence number.</dd>
</dl>
</li>
</ul>
<a name="findServiceModule-java.lang.Object-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findServiceModule</h4>
<pre>private static&nbsp;java.lang.Object&nbsp;findServiceModule(java.lang.Object&nbsp;serviceModule,
                                                  java.lang.String&nbsp;factoryInterface)
                                           throws <a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Privileged startup. Must be private so that user code
 can't call this entry point.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="findService-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>findService</h4>
<pre>private static&nbsp;java.lang.Object&nbsp;findService(java.lang.String&nbsp;factoryInterface,
                                            java.lang.String&nbsp;serviceName)</pre>
<div class="block">Privileged service lookup. Must be private so that user code
 can't call this entry point.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/derby/impl/jdbc/LOBStoredProcedure.html" title="class in org.apache.derby.impl.jdbc"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../org/apache/derby/impl/jdbc/PositionedStoreStream.html" title="class in org.apache.derby.impl.jdbc"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/derby/impl/jdbc/LOBStreamControl.html" target="_top">Frames</a></li>
<li><a href="LOBStreamControl.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
