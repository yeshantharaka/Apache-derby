<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:05:00 IST 2017 -->
<title>UTF8Reader (Apache Derby V10.13 Internals)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="UTF8Reader (Apache Derby V10.13 Internals)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/derby/impl/jdbc/UpdatableBlobStream.html" title="class in org.apache.derby.impl.jdbc"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../org/apache/derby/impl/jdbc/Util.html" title="class in org.apache.derby.impl.jdbc"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/derby/impl/jdbc/UTF8Reader.html" target="_top">Frames</a></li>
<li><a href="UTF8Reader.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derby.impl.jdbc</div>
<h2 title="Class UTF8Reader" class="title">Class UTF8Reader</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>java.io.Reader</li>
<li>
<ul class="inheritance">
<li>org.apache.derby.impl.jdbc.UTF8Reader</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.io.Closeable, java.lang.AutoCloseable, java.lang.Readable</dd>
</dl>
<hr>
<br>
<pre>public final class <span class="typeNameLabel">UTF8Reader</span>
extends java.io.Reader</pre>
<div class="block">Class for reading characters from streams encoded in the modified UTF-8
 format.
 <p>
 Note that we often operate on a special Derby stream.
 A Derby stream is possibly different from a "normal" stream in two ways;
 an encoded length is inserted at the head of the stream, and if the encoded
 length is <code>0</code> a Derby-specific end of stream marker is appended
 to the data.
 <p>
 If the underlying stream is capable of repositioning itself on request,
 this class supports multiple readers on the same source stream in such a way
 that the various readers do not interfere with each other (except for
 serializing access). Each reader instance will have its own pointer into the
 stream, and request that the stream repositions itself before calling
 read/skip on the stream.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../org/apache/derby/impl/jdbc/PositionedStoreStream.html" title="class in org.apache.derby.impl.jdbc"><code>PositionedStoreStream</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private char[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#buffer">buffer</a></span></code>
<div class="block">Internal character buffer storing characters read from the stream.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#charactersInBuffer">charactersInBuffer</a></span></code>
<div class="block">The number of characters in the internal buffer.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/derby/iapi/jdbc/CharacterStreamDescriptor.html" title="class in org.apache.derby.iapi.jdbc">CharacterStreamDescriptor</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#csd">csd</a></span></code>
<div class="block">Descriptor containing information about the stream.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.io.InputStream</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#in">in</a></span></code>
<div class="block">The underlying data stream.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#MAXIMUM_BUFFER_SIZE">MAXIMUM_BUFFER_SIZE</a></span></code>
<div class="block">Maximum size in number of chars for the internal character buffer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#noMoreReads">noMoreReads</a></span></code>
<div class="block">Tells if this reader has been closed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/derby/impl/jdbc/ConnectionChild.html" title="class in org.apache.derby.impl.jdbc">ConnectionChild</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#parent">parent</a></span></code>
<div class="block">A reference to the parent object of the stream.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../org/apache/derby/iapi/types/PositionedStream.html" title="interface in org.apache.derby.iapi.types">PositionedStream</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#positionedIn">positionedIn</a></span></code>
<div class="block">Stream that can reposition itself on request (may be <code>null</code>).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#rawStreamPos">rawStreamPos</a></span></code>
<div class="block">Store the last visited position in the store stream, if it is capable of
 repositioning itself ({@code positionedIn !</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#READER_CLOSED">READER_CLOSED</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#readerCharCount">readerCharCount</a></span></code>
<div class="block">Number of characters read from the stream.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#readPositionInBuffer">readPositionInBuffer</a></span></code>
<div class="block">The position of the next character to read in the internal buffer.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#utfCount">utfCount</a></span></code>
<div class="block">Number of bytes read from the stream, including any header bytes.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.java.io.Reader">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;java.io.Reader</h3>
<code>lock</code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#UTF8Reader-org.apache.derby.iapi.jdbc.CharacterStreamDescriptor-org.apache.derby.impl.jdbc.ConnectionChild-java.lang.Object-">UTF8Reader</a></span>(<a href="../../../../../org/apache/derby/iapi/jdbc/CharacterStreamDescriptor.html" title="class in org.apache.derby.iapi.jdbc">CharacterStreamDescriptor</a>&nbsp;csd,
          <a href="../../../../../org/apache/derby/impl/jdbc/ConnectionChild.html" title="class in org.apache.derby.impl.jdbc">ConnectionChild</a>&nbsp;conChild,
          java.lang.Object&nbsp;sync)</code>
<div class="block">Constructs a reader on top of the source UTF-8 encoded stream.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#calculateBufferSize-org.apache.derby.iapi.jdbc.CharacterStreamDescriptor-">calculateBufferSize</a></span>(<a href="../../../../../org/apache/derby/iapi/jdbc/CharacterStreamDescriptor.html" title="class in org.apache.derby.iapi.jdbc">CharacterStreamDescriptor</a>&nbsp;csd)</code>
<div class="block">Calculates an optimized buffer size.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#close--">close</a></span>()</code>
<div class="block">Close the reader, disallowing further reads.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#closeIn--">closeIn</a></span>()</code>
<div class="block">Close the underlying stream if it is open.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#fillBuffer--">fillBuffer</a></span>()</code>
<div class="block">Fills the internal character buffer by decoding bytes from the stream.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#persistentSkip-long-">persistentSkip</a></span>(long&nbsp;toSkip)</code>
<div class="block">Skips the requested number of characters.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#read--">read</a></span>()</code>
<div class="block">Reads a single character from the stream.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#read-char:A-int-int-">read</a></span>(char[]&nbsp;cbuf,
    int&nbsp;off,
    int&nbsp;len)</code>
<div class="block">Reads characters into an array.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#readAsciiInto-byte:A-int-int-">readAsciiInto</a></span>(byte[]&nbsp;abuf,
             int&nbsp;off,
             int&nbsp;len)</code>
<div class="block">Reads characters into an array as ASCII characters.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#readInto-java.lang.StringBuffer-int-">readInto</a></span>(java.lang.StringBuffer&nbsp;sb,
        int&nbsp;len)</code>
<div class="block">Reads characters from the stream.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#reposition-long-">reposition</a></span>(long&nbsp;requestedCharPos)</code>
<div class="block">Repositions the stream so that the next character read will be the
 character at the requested position.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#resetUTF8Reader--">resetUTF8Reader</a></span>()</code>
<div class="block">Resets the reader.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#skip-long-">skip</a></span>(long&nbsp;len)</code>
<div class="block">Skips characters.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>private java.io.IOException</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#utfFormatException-java.lang.String-">utfFormatException</a></span>(java.lang.String&nbsp;s)</code>
<div class="block">Convenience method generating an <code>UTFDataFormatException</code> and
 cleaning up the reader state.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.io.Reader">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.io.Reader</h3>
<code>mark, markSupported, read, read, ready, reset</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="READER_CLOSED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>READER_CLOSED</h4>
<pre>private static final&nbsp;java.lang.String READER_CLOSED</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#org.apache.derby.impl.jdbc.UTF8Reader.READER_CLOSED">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="MAXIMUM_BUFFER_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAXIMUM_BUFFER_SIZE</h4>
<pre>private static final&nbsp;int MAXIMUM_BUFFER_SIZE</pre>
<div class="block">Maximum size in number of chars for the internal character buffer.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#org.apache.derby.impl.jdbc.UTF8Reader.MAXIMUM_BUFFER_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="in">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>in</h4>
<pre>private&nbsp;java.io.InputStream in</pre>
<div class="block">The underlying data stream.</div>
</li>
</ul>
<a name="positionedIn">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>positionedIn</h4>
<pre>private final&nbsp;<a href="../../../../../org/apache/derby/iapi/types/PositionedStream.html" title="interface in org.apache.derby.iapi.types">PositionedStream</a> positionedIn</pre>
<div class="block">Stream that can reposition itself on request (may be <code>null</code>).</div>
</li>
</ul>
<a name="rawStreamPos">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rawStreamPos</h4>
<pre>private&nbsp;long rawStreamPos</pre>
<div class="block">Store the last visited position in the store stream, if it is capable of
 repositioning itself (<code>positionedIn != null</code>).</div>
</li>
</ul>
<a name="utfCount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>utfCount</h4>
<pre>private&nbsp;long utfCount</pre>
<div class="block">Number of bytes read from the stream, including any header bytes.</div>
</li>
</ul>
<a name="readerCharCount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readerCharCount</h4>
<pre>private&nbsp;long readerCharCount</pre>
<div class="block">Number of characters read from the stream.</div>
</li>
</ul>
<a name="buffer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buffer</h4>
<pre>private final&nbsp;char[] buffer</pre>
<div class="block">Internal character buffer storing characters read from the stream.</div>
</li>
</ul>
<a name="charactersInBuffer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>charactersInBuffer</h4>
<pre>private&nbsp;int charactersInBuffer</pre>
<div class="block">The number of characters in the internal buffer.</div>
</li>
</ul>
<a name="readPositionInBuffer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readPositionInBuffer</h4>
<pre>private&nbsp;int readPositionInBuffer</pre>
<div class="block">The position of the next character to read in the internal buffer.</div>
</li>
</ul>
<a name="noMoreReads">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>noMoreReads</h4>
<pre>private&nbsp;boolean noMoreReads</pre>
<div class="block">Tells if this reader has been closed.</div>
</li>
</ul>
<a name="parent">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parent</h4>
<pre>private&nbsp;<a href="../../../../../org/apache/derby/impl/jdbc/ConnectionChild.html" title="class in org.apache.derby.impl.jdbc">ConnectionChild</a> parent</pre>
<div class="block">A reference to the parent object of the stream.
 <p>
 The reference is kept so that the parent object can't get
 garbage collected until we are done with the stream.</div>
</li>
</ul>
<a name="csd">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>csd</h4>
<pre>private final&nbsp;<a href="../../../../../org/apache/derby/iapi/jdbc/CharacterStreamDescriptor.html" title="class in org.apache.derby.iapi.jdbc">CharacterStreamDescriptor</a> csd</pre>
<div class="block">Descriptor containing information about the stream.
 Except for the current positions, the information in this object is
 considered permanent and valid for the life-time of the stream.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="UTF8Reader-org.apache.derby.iapi.jdbc.CharacterStreamDescriptor-org.apache.derby.impl.jdbc.ConnectionChild-java.lang.Object-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>UTF8Reader</h4>
<pre>public&nbsp;UTF8Reader(<a href="../../../../../org/apache/derby/iapi/jdbc/CharacterStreamDescriptor.html" title="class in org.apache.derby.iapi.jdbc">CharacterStreamDescriptor</a>&nbsp;csd,
                  <a href="../../../../../org/apache/derby/impl/jdbc/ConnectionChild.html" title="class in org.apache.derby.impl.jdbc">ConnectionChild</a>&nbsp;conChild,
                  java.lang.Object&nbsp;sync)
           throws java.io.IOException</pre>
<div class="block">Constructs a reader on top of the source UTF-8 encoded stream.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>csd</code> - a description of and reference to the source stream</dd>
<dd><code>conChild</code> - the parent object / connection child</dd>
<dd><code>sync</code> - synchronization object used when accessing the underlying
      data stream</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if reading from the underlying stream fails</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="read--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;int&nbsp;read()
         throws java.io.IOException</pre>
<div class="block">Reads a single character from the stream.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>read</code>&nbsp;in class&nbsp;<code>java.io.Reader</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A character or <code>-1</code> if end of stream has been reached.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if the stream has been closed, or an exception is
      raised while reading from the underlying stream</dd>
</dl>
</li>
</ul>
<a name="read-char:A-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;int&nbsp;read(char[]&nbsp;cbuf,
                int&nbsp;off,
                int&nbsp;len)
         throws java.io.IOException</pre>
<div class="block">Reads characters into an array.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>read</code>&nbsp;in class&nbsp;<code>java.io.Reader</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of characters read, or <code>-1</code> if the end of
      the stream has been reached.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="skip-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>skip</h4>
<pre>public&nbsp;long&nbsp;skip(long&nbsp;len)
          throws java.io.IOException</pre>
<div class="block">Skips characters.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>skip</code>&nbsp;in class&nbsp;<code>java.io.Reader</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>len</code> - the numbers of characters to skip</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of characters actually skipped.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - if the number of characters to skip is
      negative</dd>
<dd><code>java.io.IOException</code> - if accessing the underlying stream fails</dd>
</dl>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block">Close the reader, disallowing further reads.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.io.Closeable</code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.lang.AutoCloseable</code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in class&nbsp;<code>java.io.Reader</code></dd>
</dl>
</li>
</ul>
<a name="readInto-java.lang.StringBuffer-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readInto</h4>
<pre>public&nbsp;int&nbsp;readInto(java.lang.StringBuffer&nbsp;sb,
                    int&nbsp;len)
             throws java.io.IOException</pre>
<div class="block">Reads characters from the stream.
 <p>
 Due to internal buffering a smaller number of characters than what is
 requested might be returned. To ensure that the request is fulfilled,
 call this method in a loop until the requested number of characters is
 read or <code>-1</code> is returned.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sb</code> - the destination buffer</dd>
<dd><code>len</code> - maximum number of characters to read</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of characters read, or <code>-1</code> if the end of
      the stream is reached.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="readAsciiInto-byte:A-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readAsciiInto</h4>
<pre>int&nbsp;readAsciiInto(byte[]&nbsp;abuf,
                  int&nbsp;off,
                  int&nbsp;len)
           throws java.io.IOException</pre>
<div class="block">Reads characters into an array as ASCII characters.
 <p>
 Due to internal buffering a smaller number of characters than what is
 requested might be returned. To ensure that the request is fulfilled,
 call this method in a loop until the requested number of characters is
 read or <code>-1</code> is returned.
 <p>
 Characters outside the ASCII range are replaced with an out of range
 marker.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>abuf</code> - the buffer to read into</dd>
<dd><code>off</code> - the offset into the destination buffer</dd>
<dd><code>len</code> - maximum number of characters to read</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of characters read, or <code>-1</code> if the end of
      the stream is reached.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="closeIn--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeIn</h4>
<pre>private&nbsp;void&nbsp;closeIn()</pre>
<div class="block">Close the underlying stream if it is open.</div>
</li>
</ul>
<a name="utfFormatException-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>utfFormatException</h4>
<pre>private&nbsp;java.io.IOException&nbsp;utfFormatException(java.lang.String&nbsp;s)</pre>
<div class="block">Convenience method generating an <code>UTFDataFormatException</code> and
 cleaning up the reader state.</div>
</li>
</ul>
<a name="fillBuffer--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fillBuffer</h4>
<pre>private&nbsp;boolean&nbsp;fillBuffer()
                    throws java.io.IOException</pre>
<div class="block">Fills the internal character buffer by decoding bytes from the stream.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the end of the stream is reached,
      <code>false</code> if there is apparently more data to be read.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="resetUTF8Reader--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resetUTF8Reader</h4>
<pre>private&nbsp;void&nbsp;resetUTF8Reader()
                      throws java.io.IOException,
                             <a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Resets the reader.
 <p>
 This method is used internally to achieve better performance.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if resetting or reading from the stream fails</dd>
<dd><code><a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - if resetting the stream fails</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../org/apache/derby/impl/jdbc/UTF8Reader.html#reposition-long-"><code>reposition(long)</code></a></dd>
</dl>
</li>
</ul>
<a name="reposition-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reposition</h4>
<pre>void&nbsp;reposition(long&nbsp;requestedCharPos)
         throws java.io.IOException,
                <a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Repositions the stream so that the next character read will be the
 character at the requested position.
 <p>
 There are three types of repositioning, ordered after increasing cost:
 <ol> <li>Reposition within current character buffer (small hops forwards
          and potentially backwards - in range 1 char to
          <code>MAXIMUM_BUFFER_SIZE</code> chars)</li>
      <li>Forward stream from current position (hops forwards)</li>
      <li>Reset stream and skip data (hops backwards)</li>
 </ol></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>requestedCharPos</code> - 1-based requested character position</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if resetting or reading from the stream fails</dd>
<dd><code><a href="../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - if resetting the stream fails</dd>
</dl>
</li>
</ul>
<a name="calculateBufferSize-org.apache.derby.iapi.jdbc.CharacterStreamDescriptor-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateBufferSize</h4>
<pre>private final&nbsp;int&nbsp;calculateBufferSize(<a href="../../../../../org/apache/derby/iapi/jdbc/CharacterStreamDescriptor.html" title="class in org.apache.derby.iapi.jdbc">CharacterStreamDescriptor</a>&nbsp;csd)</pre>
<div class="block">Calculates an optimized buffer size.
 <p>
 The maximum size allowed is returned if the specified values don't give
 enough information to say a smaller buffer size is preferable.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>csd</code> - stream descriptor</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>An (sub)optimal buffer size.</dd>
</dl>
</li>
</ul>
<a name="persistentSkip-long-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>persistentSkip</h4>
<pre>private final&nbsp;void&nbsp;persistentSkip(long&nbsp;toSkip)
                           throws java.io.IOException</pre>
<div class="block">Skips the requested number of characters.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>toSkip</code> - number of characters to skip</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.EOFException</code> - if there are too few characters in the stream</dd>
<dd><code>java.io.IOException</code> - if reading from the stream fails</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/derby/impl/jdbc/UpdatableBlobStream.html" title="class in org.apache.derby.impl.jdbc"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../org/apache/derby/impl/jdbc/Util.html" title="class in org.apache.derby.impl.jdbc"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/derby/impl/jdbc/UTF8Reader.html" target="_top">Frames</a></li>
<li><a href="UTF8Reader.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
