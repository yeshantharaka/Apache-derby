<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:05:19 IST 2017 -->
<title>RAFContainer4 (Apache Derby V10.13 Internals)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="RAFContainer4 (Apache Derby V10.13 Internals)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":9,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html" title="class in org.apache.derby.impl.store.raw.data"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RawField.html" title="class in org.apache.derby.impl.store.raw.data"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/impl/store/raw/data/RAFContainer4.html" target="_top">Frames</a></li>
<li><a href="RAFContainer4.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derby.impl.store.raw.data</div>
<h2 title="Class RAFContainer4" class="title">Class RAFContainer4</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html" title="class in org.apache.derby.impl.store.raw.data">org.apache.derby.impl.store.raw.data.BaseContainer</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html" title="class in org.apache.derby.impl.store.raw.data">org.apache.derby.impl.store.raw.data.FileContainer</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html" title="class in org.apache.derby.impl.store.raw.data">org.apache.derby.impl.store.raw.data.RAFContainer</a></li>
<li>
<ul class="inheritance">
<li>org.apache.derby.impl.store.raw.data.RAFContainer4</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.security.PrivilegedExceptionAction&lt;java.lang.Object&gt;, <a href="../../../../../../../org/apache/derby/iapi/services/cache/Cacheable.html" title="interface in org.apache.derby.iapi.services.cache">Cacheable</a>, <a href="../../../../../../../org/apache/derby/iapi/services/io/TypedFormat.html" title="interface in org.apache.derby.iapi.services.io">TypedFormat</a>, <a href="../../../../../../../org/apache/derby/iapi/services/locks/Lockable.html" title="interface in org.apache.derby.iapi.services.locks">Lockable</a></dd>
</dl>
<hr>
<br>
<pre>class <span class="typeNameLabel">RAFContainer4</span>
extends <a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html" title="class in org.apache.derby.impl.store.raw.data">RAFContainer</a></pre>
<div class="block">RAFContainer4 overrides a few methods in FileContainer/RAFContainer in order
 to use FileChannel from Java 1.4's New IO framework to issue multiple IO
 operations to the same file concurrently instead of strictly serializing IO
 operations using a mutex on the container object. Since we compile with Java
 1.4, the override "annotations" are inside the method javadoc headers.
 <p>
 Note that our requests for multiple concurrent IOs may be serialized further
 down in the IO stack - this is entirely up to the JVM and OS. However, at
 least in Linux on Sun's 1.4.2_09 JVM we see the desired behavior:
 The FileChannel.read/write(ByteBuffer buf, long position) calls map to
 pread/pwrite system calls, which enable efficient IO to the same file
 descriptor by multiple threads.
 <p>
 This whole class should be merged back into RAFContainer when Derby
 officially stops supporting Java 1.3.
 <p>
 Significant behavior changes from RAFContainer:
 <ol>
 <li> Multiple concurrent IOs permitted.
 <li> State changes to the container (create, open, close) can now happen while
      IO is in progress due to the lack of locking. Closing a container while
      IO is in progress will cause IOExceptions in the thread calling readPage
      or writePage. If this happens something is probably amiss anyway.
      The iosInProgress variable is used in an attempt to detect this should it
      happen while running a debug build.
 </ol></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>FileChannel</code></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#channelCleanupMonitor">channelCleanupMonitor</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/iapi/store/raw/ContainerKey.html" title="class in org.apache.derby.iapi.store.raw">ContainerKey</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#currentIdentity">currentIdentity</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#giveUpIO">giveUpIO</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#giveUpIOm">giveUpIOm</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#iosInProgress">iosInProgress</a></span></code>
<div class="block">For debugging - will be incremented when an IO is started, decremented
 when it is done.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.nio.channels.FileChannel</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#ourChannel">ourChannel</a></span></code>
<div class="block">This channel will be retrieved from RAFContainer's fileData
 member when fileData is set.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#restoreChannelInProgress">restoreChannelInProgress</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#threadsInPageIO">threadsInPageIO</a></span></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.derby.impl.store.raw.data.RAFContainer">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.derby.impl.store.raw.data.<a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html" title="class in org.apache.derby.impl.store.raw.data">RAFContainer</a></h3>
<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#fileData">fileData</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#needsSync">needsSync</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.derby.impl.store.raw.data.FileContainer">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.derby.impl.store.raw.data.<a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html" title="class in org.apache.derby.impl.store.raw.data">FileContainer</a></h3>
<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#allocCache">allocCache</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#canUpdate">canUpdate</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#CHECKSUM_SIZE">CHECKSUM_SIZE</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#CONTAINER_INFO_SIZE">CONTAINER_INFO_SIZE</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#containerCache">containerCache</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#containerInfo">containerInfo</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#containerVersion">containerVersion</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#dataFactory">dataFactory</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#estimatedRowCount">estimatedRowCount</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#FIRST_ALLOC_PAGE_NUMBER">FIRST_ALLOC_PAGE_NUMBER</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#FIRST_ALLOC_PAGE_OFFSET">FIRST_ALLOC_PAGE_OFFSET</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#firstAllocPageNumber">firstAllocPageNumber</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#firstAllocPageOffset">firstAllocPageOffset</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#formatIdInteger">formatIdInteger</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#initialPages">initialPages</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#isDirty">isDirty</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#lastLogInstant">lastLogInstant</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#minimumRecordSize">minimumRecordSize</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#pageCache">pageCache</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#pageSize">pageSize</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#preDirty">preDirty</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#SPACE_TRACE">SPACE_TRACE</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#spareSpace">spareSpace</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.derby.impl.store.raw.data.BaseContainer">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.derby.impl.store.raw.data.<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html" title="class in org.apache.derby.impl.store.raw.data">BaseContainer</a></h3>
<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#identity">identity</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#isCommittedDrop">isCommittedDrop</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#isDropped">isDropped</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#isReusableRecordId">isReusableRecordId</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#RAFContainer4-org.apache.derby.impl.store.raw.data.BaseDataFileFactory-">RAFContainer4</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseDataFileFactory.html" title="class in org.apache.derby.impl.store.raw.data">BaseDataFileFactory</a>&nbsp;factory)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#awaitRestoreChannel-java.lang.Exception-boolean-">awaitRestoreChannel</a></span>(java.lang.Exception&nbsp;e,
                   boolean&nbsp;stealthMode)</code>
<div class="block">Use when seeing an exception during IO and when another thread is
 presumably doing the recovery.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#closeContainer--">closeContainer</a></span>()</code>
<div class="block">override of RAFContainer#closeContainer</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#createContainer-org.apache.derby.iapi.store.raw.ContainerKey-">createContainer</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/ContainerKey.html" title="class in org.apache.derby.iapi.store.raw">ContainerKey</a>&nbsp;newIdentity)</code>
<div class="block">override of RAFContainer#createContainer</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#debugTrace-java.lang.String-">debugTrace</a></span>(java.lang.String&nbsp;msg)</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private java.nio.channels.FileChannel</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#getChannel--">getChannel</a></span>()</code>
<div class="block">
 Return the file channel for the current value of the <code>fileData</code>
 field.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private java.nio.channels.FileChannel</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#getChannel-org.apache.derby.io.StorageRandomAccessFile-">getChannel</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a>&nbsp;file)</code>
<div class="block">Return the <code>FileChannel</code> for the specified
 <code>StorageRandomAccessFile</code> if it is a <code>RandomAccessFile</code>.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>(package private) byte[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#getEmbryonicPage-org.apache.derby.io.StorageRandomAccessFile-long-">getEmbryonicPage</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a>&nbsp;file,
                long&nbsp;offset)</code>
<div class="block">Read an embryonic page (that is, a section of the first alloc page that
 is so large that we know all the borrowed space is included in it) from
 the specified offset in a <code>StorageRandomAccessFile</code>.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#handleClosedChannel-java.nio.channels.ClosedChannelException-boolean-int-">handleClosedChannel</a></span>(java.nio.channels.ClosedChannelException&nbsp;e,
                   boolean&nbsp;stealthMode,
                   int&nbsp;retries)</code>
<div class="block">
 This method handles what to do when, during a NIO operation we receive a
 <code>ClosedChannelException</code>.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#openContainer-org.apache.derby.iapi.store.raw.ContainerKey-">openContainer</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/ContainerKey.html" title="class in org.apache.derby.iapi.store.raw">ContainerKey</a>&nbsp;newIdentity)</code>
<div class="block">Open a container.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#readFull-java.nio.ByteBuffer-java.nio.channels.FileChannel-long-">readFull</a></span>(java.nio.ByteBuffer&nbsp;dstBuffer,
        java.nio.channels.FileChannel&nbsp;srcChannel,
        long&nbsp;position)</code>
<div class="block">Attempts to fill buf completely from start until it's full.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#readPage-long-byte:A-">readPage</a></span>(long&nbsp;pageNumber,
        byte[]&nbsp;pageData)</code>
<div class="block">Read a page into the supplied array.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#readPage-long-byte:A-long-">readPage</a></span>(long&nbsp;pageNumber,
        byte[]&nbsp;pageData,
        long&nbsp;offset)</code>
<div class="block">Read a page into the supplied array.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#readPage0-long-byte:A-long-">readPage0</a></span>(long&nbsp;pageNumber,
         byte[]&nbsp;pageData,
         long&nbsp;offset)</code>&nbsp;</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#recoverContainerAfterInterrupt-java.lang.String-boolean-">recoverContainerAfterInterrupt</a></span>(java.lang.String&nbsp;whence,
                              boolean&nbsp;stealthMode)</code>
<div class="block">Use this when the thread has received a ClosedByInterruptException (or,
 prior to JDK 1.7 it may also be AsynchronousCloseException - a bug)
 exception during IO and its interruped flag is also set.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#reopen--">reopen</a></span>()</code>
<div class="block">When the existing channel (<code>ourChannel</code>) has been closed due to
 interrupt, we need to reopen the underlying RAF to get a fresh channel
 so we can resume IO.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#writeAtOffset-org.apache.derby.io.StorageRandomAccessFile-byte:A-long-">writeAtOffset</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a>&nbsp;file,
             byte[]&nbsp;bytes,
             long&nbsp;offset)</code>
<div class="block">Write a sequence of bytes at the given offset in a file.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#writeFull-java.nio.ByteBuffer-java.nio.channels.FileChannel-long-">writeFull</a></span>(java.nio.ByteBuffer&nbsp;srcBuffer,
         java.nio.channels.FileChannel&nbsp;dstChannel,
         long&nbsp;position)</code>
<div class="block">Attempts to write buf completely from start until end, at the given
 position in the destination fileChannel.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#writePage-long-byte:A-boolean-">writePage</a></span>(long&nbsp;pageNumber,
         byte[]&nbsp;pageData,
         boolean&nbsp;syncPage)</code>
<div class="block">Write a page from the supplied array.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#writePage0-long-byte:A-boolean-">writePage0</a></span>(long&nbsp;pageNumber,
          byte[]&nbsp;pageData,
          boolean&nbsp;syncPage)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.derby.impl.store.raw.data.RAFContainer">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.derby.impl.store.raw.data.<a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html" title="class in org.apache.derby.impl.store.raw.data">RAFContainer</a></h3>
<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#backupContainer-org.apache.derby.impl.store.raw.data.BaseContainerHandle-java.lang.String-">backupContainer</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#clean-boolean-">clean</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#encryptOrDecryptContainer-org.apache.derby.impl.store.raw.data.BaseContainerHandle-java.lang.String-boolean-">encryptOrDecryptContainer</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#flushAll--">flushAll</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#getFileName-org.apache.derby.iapi.store.raw.ContainerKey-boolean-boolean-boolean-">getFileName</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#getRandomAccessFile-org.apache.derby.io.StorageFile-">getRandomAccessFile</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#isDirty--">isDirty</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#preAllocate-long-int-">preAllocate</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#privGetFileName-org.apache.derby.iapi.store.raw.ContainerKey-boolean-boolean-boolean-">privGetFileName</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#removeContainer-org.apache.derby.iapi.store.raw.log.LogInstant-boolean-">removeContainer</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#removeFile-org.apache.derby.io.StorageFile-">removeFile</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#reopenContainer-org.apache.derby.iapi.store.raw.ContainerKey-">reopenContainer</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#run--">run</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#truncatePages-long-">truncatePages</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#updatePageArray-long-byte:A-byte:A-boolean-">updatePageArray</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.derby.impl.store.raw.data.FileContainer">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.derby.impl.store.raw.data.<a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html" title="class in org.apache.derby.impl.store.raw.data">FileContainer</a></h3>
<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#bumpContainerVersion-org.apache.derby.iapi.store.raw.log.LogInstant-">bumpContainerVersion</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#canUpdate--">canUpdate</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#clearIdentity--">clearIdentity</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#clearPreallocThreshold--">clearPreallocThreshold</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#compressContainer-org.apache.derby.iapi.store.raw.xact.RawTransaction-org.apache.derby.impl.store.raw.data.BaseContainerHandle-">compressContainer</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#createIdent-org.apache.derby.iapi.store.raw.ContainerKey-java.lang.Object-">createIdent</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#createIdentity-java.lang.Object-java.lang.Object-">createIdentity</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#deallocatePage-org.apache.derby.impl.store.raw.data.BaseContainerHandle-org.apache.derby.impl.store.raw.data.BasePage-">deallocatePage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#decryptPage-byte:A-int-">decryptPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#doPreAllocatePages-long-int-">doPreAllocatePages</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#dropContainer-org.apache.derby.iapi.store.raw.log.LogInstant-boolean-">dropContainer</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#encryptPage-byte:A-int-byte:A-boolean-">encryptPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getAllocPage-long-">getAllocPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getAnyPage-org.apache.derby.impl.store.raw.data.BaseContainerHandle-long-">getAnyPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getContainerProperties-java.util.Properties-">getContainerProperties</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getContainerVersion--">getContainerVersion</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getContextService--">getContextService</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getEmbryonicPage-java.io.DataInput-">getEmbryonicPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getEncryptionBuffer--">getEncryptionBuffer</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getEstimatedPageCount-org.apache.derby.impl.store.raw.data.BaseContainerHandle-int-">getEstimatedPageCount</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getEstimatedRowCount-int-">getEstimatedRowCount</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getFirstHeadPage-org.apache.derby.impl.store.raw.data.BaseContainerHandle-boolean-">getFirstHeadPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getHeadPage-org.apache.derby.impl.store.raw.data.BaseContainerHandle-long-boolean-">getHeadPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getLastPageNumber-org.apache.derby.impl.store.raw.data.BaseContainerHandle-">getLastPageNumber</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getLatchedPage-org.apache.derby.impl.store.raw.data.BaseContainerHandle-long-">getLatchedPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getMinimumRecordSize--">getMinimumRecordSize</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getNextHeadPage-org.apache.derby.impl.store.raw.data.BaseContainerHandle-long-boolean-">getNextHeadPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getPage-org.apache.derby.impl.store.raw.data.BaseContainerHandle-long-boolean-">getPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getPageForCompress-org.apache.derby.impl.store.raw.data.BaseContainerHandle-int-long-">getPageForCompress</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getPageForInsert-org.apache.derby.impl.store.raw.data.BaseContainerHandle-int-">getPageForInsert</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getPageSize--">getPageSize</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getReusableRecordIdSequenceNumber--">getReusableRecordIdSequenceNumber</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getSpaceInfo-org.apache.derby.impl.store.raw.data.BaseContainerHandle-">getSpaceInfo</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getSpareSpace--">getSpareSpace</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getTypeFormatId--">getTypeFormatId</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#incrementReusableRecordIdSequenceNumber--">incrementReusableRecordIdSequenceNumber</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#initPage-org.apache.derby.impl.store.raw.data.BaseContainerHandle-org.apache.derby.iapi.store.raw.PageKey-org.apache.derby.impl.store.raw.data.PageCreationArgs-long-boolean-boolean-">initPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#latchPage-org.apache.derby.impl.store.raw.data.BaseContainerHandle-org.apache.derby.impl.store.raw.data.BasePage-boolean-">latchPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#letGo-org.apache.derby.impl.store.raw.data.BaseContainerHandle-">letGo</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#logCreateContainerInfo--">logCreateContainerInfo</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#newPage-org.apache.derby.impl.store.raw.data.BaseContainerHandle-org.apache.derby.iapi.store.raw.xact.RawTransaction-org.apache.derby.impl.store.raw.data.BaseContainerHandle-boolean-">newPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#preDirty-boolean-">preDirty</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#prepareForBulkLoad-org.apache.derby.impl.store.raw.data.BaseContainerHandle-int-">prepareForBulkLoad</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#readHeader-byte:A-">readHeader</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#reCreatePageForRedoRecovery-org.apache.derby.impl.store.raw.data.BaseContainerHandle-int-long-long-">reCreatePageForRedoRecovery</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#setDirty-boolean-">setDirty</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#setEstimatedRowCount-long-int-">setEstimatedRowCount</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#setIdent-org.apache.derby.iapi.store.raw.ContainerKey-">setIdent</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#setIdentity-java.lang.Object-">setIdentity</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#trackUnfilledPage-long-boolean-">trackUnfilledPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#updateEstimatedRowCount-int-">updateEstimatedRowCount</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#writeHeader-java.lang.Object-byte:A-">writeHeader</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#writeHeader-java.lang.Object-org.apache.derby.io.StorageRandomAccessFile-boolean-byte:A-">writeHeader</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.derby.impl.store.raw.data.BaseContainer">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.derby.impl.store.raw.data.<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html" title="class in org.apache.derby.impl.store.raw.data">BaseContainer</a></h3>
<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#addPage-org.apache.derby.impl.store.raw.data.BaseContainerHandle-boolean-">addPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#compressContainer-org.apache.derby.impl.store.raw.data.BaseContainerHandle-">compressContainer</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#fillInIdentity-org.apache.derby.iapi.store.raw.ContainerKey-">fillInIdentity</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#getAllocPage-org.apache.derby.impl.store.raw.data.BaseContainerHandle-long-boolean-">getAllocPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#getAnyPage-org.apache.derby.impl.store.raw.data.BaseContainerHandle-long-boolean-">getAnyPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#getCommittedDropState--">getCommittedDropState</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#getContainerId--">getContainerId</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#getContainerStatus--">getContainerStatus</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#getDeallocLock-org.apache.derby.impl.store.raw.data.BaseContainerHandle-org.apache.derby.iapi.store.raw.RecordHandle-boolean-boolean-">getDeallocLock</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#getDroppedState--">getDroppedState</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#getFirstPage-org.apache.derby.impl.store.raw.data.BaseContainerHandle-">getFirstPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#getIdentity--">getIdentity</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#getNextPage-org.apache.derby.impl.store.raw.data.BaseContainerHandle-long-">getNextPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#getSegmentId--">getSegmentId</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#isReusableRecordId--">isReusableRecordId</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#lockAttributes-int-java.util.Hashtable-">lockAttributes</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#lockerAlwaysCompatible--">lockerAlwaysCompatible</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#lockEvent-org.apache.derby.iapi.services.locks.Latch-">lockEvent</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#removePage-org.apache.derby.impl.store.raw.data.BaseContainerHandle-org.apache.derby.impl.store.raw.data.BasePage-">removePage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#requestCompatible-java.lang.Object-java.lang.Object-">requestCompatible</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#setCommittedDropState-boolean-">setCommittedDropState</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#setDroppedState-boolean-">setDroppedState</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#setReusableRecordIdState-boolean-">setReusableRecordIdState</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#truncate-org.apache.derby.impl.store.raw.data.BaseContainerHandle-">truncate</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#unlockEvent-org.apache.derby.iapi.services.locks.Latch-">unlockEvent</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseContainer.html#use-org.apache.derby.impl.store.raw.data.BaseContainerHandle-boolean-boolean-">use</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.derby.iapi.services.cache.Cacheable">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.apache.derby.iapi.services.cache.<a href="../../../../../../../org/apache/derby/iapi/services/cache/Cacheable.html" title="interface in org.apache.derby.iapi.services.cache">Cacheable</a></h3>
<code><a href="../../../../../../../org/apache/derby/iapi/services/cache/Cacheable.html#getIdentity--">getIdentity</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="ourChannel">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ourChannel</h4>
<pre>private&nbsp;java.nio.channels.FileChannel ourChannel</pre>
<div class="block">This channel will be retrieved from RAFContainer's fileData
 member when fileData is set. We wrap a couple of RAFContainer's methods
 to accomplish this.</div>
</li>
</ul>
<a name="channelCleanupMonitor">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>channelCleanupMonitor</h4>
<pre>private final&nbsp;java.lang.Object channelCleanupMonitor</pre>
</li>
</ul>
<a name="threadsInPageIO">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>threadsInPageIO</h4>
<pre>private volatile&nbsp;int threadsInPageIO</pre>
</li>
</ul>
<a name="restoreChannelInProgress">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreChannelInProgress</h4>
<pre>private volatile&nbsp;boolean restoreChannelInProgress</pre>
</li>
</ul>
<a name="giveUpIO">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>giveUpIO</h4>
<pre>private&nbsp;boolean giveUpIO</pre>
</li>
</ul>
<a name="giveUpIOm">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>giveUpIOm</h4>
<pre>private final&nbsp;java.lang.Object giveUpIOm</pre>
</li>
</ul>
<a name="iosInProgress">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>iosInProgress</h4>
<pre>private&nbsp;int iosInProgress</pre>
<div class="block">For debugging - will be incremented when an IO is started, decremented
 when it is done. Should be == 0 when container state is changed.</div>
</li>
</ul>
<a name="currentIdentity">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>currentIdentity</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/raw/ContainerKey.html" title="class in org.apache.derby.iapi.store.raw">ContainerKey</a> currentIdentity</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="RAFContainer4-org.apache.derby.impl.store.raw.data.BaseDataFileFactory-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>RAFContainer4</h4>
<pre>public&nbsp;RAFContainer4(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseDataFileFactory.html" title="class in org.apache.derby.impl.store.raw.data">BaseDataFileFactory</a>&nbsp;factory)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getChannel-org.apache.derby.io.StorageRandomAccessFile-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getChannel</h4>
<pre>private&nbsp;java.nio.channels.FileChannel&nbsp;getChannel(<a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a>&nbsp;file)</pre>
<div class="block">Return the <code>FileChannel</code> for the specified
 <code>StorageRandomAccessFile</code> if it is a <code>RandomAccessFile</code>.
 Otherwise, return <code>null</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>file</code> - the file to get the channel for</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a <code>FileChannel</code> if <code>file</code> is an instance of
 <code>RandomAccessFile</code>, <code>null</code> otherwise</dd>
</dl>
</li>
</ul>
<a name="getChannel--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getChannel</h4>
<pre>private&nbsp;java.nio.channels.FileChannel&nbsp;getChannel()</pre>
<div class="block"><p>
 Return the file channel for the current value of the <code>fileData</code>
 field. If <code>fileData</code> doesn't support file channels, return
 <code>null</code>.
 </p>

 <p>
 Callers of this method must synchronize on the container object since
 two shared fields (<code>fileData</code> and <code>ourChannel</code>) are
 accessed.
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a <code>FileChannel</code> object, if supported, or <code>null</code></dd>
</dl>
</li>
</ul>
<a name="openContainer-org.apache.derby.iapi.store.raw.ContainerKey-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openContainer</h4>
<pre>boolean&nbsp;openContainer(<a href="../../../../../../../org/apache/derby/iapi/store/raw/ContainerKey.html" title="class in org.apache.derby.iapi.store.raw">ContainerKey</a>&nbsp;newIdentity)
               throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#openContainer-org.apache.derby.iapi.store.raw.ContainerKey-">FileContainer</a></code></span></div>
<div class="block">Open a container.
 <p>
 Longer descrption of routine.
 <p>
 Open a container. Open the file that maps to this container, if the
 file does not exist then we assume the container was never created.
 If the file exists but we have trouble opening it then we throw some 
 exception.

 <BR> MT - single thread required - Enforced by cache manager.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#openContainer-org.apache.derby.iapi.store.raw.ContainerKey-">openContainer</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html" title="class in org.apache.derby.impl.store.raw.data">RAFContainer</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="createContainer-org.apache.derby.iapi.store.raw.ContainerKey-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createContainer</h4>
<pre>void&nbsp;createContainer(<a href="../../../../../../../org/apache/derby/iapi/store/raw/ContainerKey.html" title="class in org.apache.derby.iapi.store.raw">ContainerKey</a>&nbsp;newIdentity)
              throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">override of RAFContainer#createContainer</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#createContainer-org.apache.derby.iapi.store.raw.ContainerKey-">createContainer</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html" title="class in org.apache.derby.impl.store.raw.data">RAFContainer</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Derby Standard error policy</dd>
</dl>
</li>
</ul>
<a name="reopen--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reopen</h4>
<pre>private&nbsp;void&nbsp;reopen()
             throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">When the existing channel (<code>ourChannel</code>) has been closed due to
 interrupt, we need to reopen the underlying RAF to get a fresh channel
 so we can resume IO.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="closeContainer--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeContainer</h4>
<pre>void&nbsp;closeContainer()</pre>
<div class="block">override of RAFContainer#closeContainer</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#closeContainer--">closeContainer</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html" title="class in org.apache.derby.impl.store.raw.data">RAFContainer</a></code></dd>
</dl>
</li>
</ul>
<a name="readPage-long-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readPage</h4>
<pre>protected&nbsp;void&nbsp;readPage(long&nbsp;pageNumber,
                        byte[]&nbsp;pageData)
                 throws java.io.IOException,
                        <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Read a page into the supplied array.
  <p/>
  override of RAFContainer#readPage
  <p/>
  <BR> MT - thread safe</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#readPage-long-byte:A-">readPage</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html" title="class in org.apache.derby.impl.store.raw.data">RAFContainer</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - exception reading page</dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="readPage-long-byte:A-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readPage</h4>
<pre>private&nbsp;void&nbsp;readPage(long&nbsp;pageNumber,
                      byte[]&nbsp;pageData,
                      long&nbsp;offset)
               throws java.io.IOException,
                      <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Read a page into the supplied array.
  <p/>
  override of RAFContainer#readPage
  <p/>
  <BR> MT - thread safe</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pageNumber</code> - the page number to read data from, or -1 (called from
                    getEmbryonicPage)</dd>
<dd><code>pageData</code> - the buffer to read data into</dd>
<dd><code>offset</code> - -1 normally (not used since offset is computed from
                   pageNumber), but used if pageNumber == -1
                   (getEmbryonicPage)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - exception reading page</dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="readPage0-long-byte:A-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readPage0</h4>
<pre>private&nbsp;void&nbsp;readPage0(long&nbsp;pageNumber,
                       byte[]&nbsp;pageData,
                       long&nbsp;offset)
                throws java.io.IOException,
                       <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="writePage-long-byte:A-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writePage</h4>
<pre>protected&nbsp;void&nbsp;writePage(long&nbsp;pageNumber,
                         byte[]&nbsp;pageData,
                         boolean&nbsp;syncPage)
                  throws java.io.IOException,
                         <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Write a page from the supplied array.
  <p/>
  override of RAFContainer#writePage
  <p/>
  <BR> MT - thread safe</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html#writePage-long-byte:A-boolean-">writePage</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html" title="class in org.apache.derby.impl.store.raw.data">RAFContainer</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
<dd><code>java.io.IOException</code> - IO error accessing page</dd>
</dl>
</li>
</ul>
<a name="handleClosedChannel-java.nio.channels.ClosedChannelException-boolean-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>handleClosedChannel</h4>
<pre>private&nbsp;void&nbsp;handleClosedChannel(java.nio.channels.ClosedChannelException&nbsp;e,
                                 boolean&nbsp;stealthMode,
                                 int&nbsp;retries)
                          throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block"><p>
 This method handles what to do when, during a NIO operation we receive a
 <code>ClosedChannelException</code>. Note the specialization hierarchy:
 </p>
 <p>
 <code>ClosedChannelException</code> -&gt; <code>AsynchronousCloseException</code> -&gt;
 <code>ClosedByInterruptException</code>
 </p>
 <p>
 If <code>e</code> is a ClosedByInterruptException, we normally start
 container recovery, i.e. we need to reopen the random access file so we
 get get a new interruptible channel and continue IO.
 </p>
 <p>
 If <code>e</code> is a <code>AsynchronousCloseException</code> or a plain <code>ClosedChannelException</code>, the behavior depends of <code>stealthMode</code>:
 </p>
 <p>
 If <code>stealthMode == false</code>, the method will wait for
 another thread tp finish recovering the IO channel before returning.
 </p>
 <p>
 If <code>stealthMode == true</code>, the method throws <code>InterruptDetectedException</code>, allowing retry at a higher level in the
 code.  The reason for this is that we sometimes need to release monitors
 on objects needed by the recovery thread.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>e</code> - Should be an instance of <code>ClosedChannelException</code>.</dd>
<dd><code>stealthMode</code> - If <code>true</code>, do retry at a higher level</dd>
<dd><code>retries</code> - Give up waiting for another thread to reopen the channel
                when <code>retries</code> reaches 0. Only applicable if <code>stealthMode == false</code>.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/util/InterruptDetectedException.html" title="class in org.apache.derby.iapi.util">InterruptDetectedException</a></code> - if retry at higher level is required
         <code>stealthMode == true</code>.</dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - standard error policy, incl. when we give up
                           waiting for another thread to reopen channel</dd>
</dl>
</li>
</ul>
<a name="awaitRestoreChannel-java.lang.Exception-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>awaitRestoreChannel</h4>
<pre>private&nbsp;void&nbsp;awaitRestoreChannel(java.lang.Exception&nbsp;e,
                                 boolean&nbsp;stealthMode)
                          throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Use when seeing an exception during IO and when another thread is
 presumably doing the recovery.
 <p/>
 If <code>stealthMode == false</code>, wait for another thread to recover the
 container after an interrupt. If <code>stealthMode == true</code>, throw
 internal exception <code>InterruptDetectedException</code> to do retry from
 higher in the stack.
 <p/>
 If <code>stealthMode == false</code>, maximum wait time for the container to
 become available again is determined by the product <code>InterruptStatus.MAX_INTERRUPT_RETRIES *
 InterruptStatus.INTERRUPT_RETRY_SLEEP</code>.
 There is a chance this thread will not see any recovery occuring (yet),
 in which case it waits for a bit and just returns, so the caller must
 retry IO until success.
 <p/>
 If for some reason the recovering thread has given up on resurrecting
 the container, cf <code>#giveUpIO</code>, the method throws <code>FILE_IO_INTERRUPTED</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>e</code> - the exception we saw during IO</dd>
<dd><code>stealthMode</code> - true if the thread doing IO in stealth mode</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - <code>InterruptDetectedException</code> and normal
                            error policy</dd>
</dl>
</li>
</ul>
<a name="recoverContainerAfterInterrupt-java.lang.String-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoverContainerAfterInterrupt</h4>
<pre>private&nbsp;boolean&nbsp;recoverContainerAfterInterrupt(java.lang.String&nbsp;whence,
                                               boolean&nbsp;stealthMode)
                                        throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Use this when the thread has received a ClosedByInterruptException (or,
 prior to JDK 1.7 it may also be AsynchronousCloseException - a bug)
 exception during IO and its interruped flag is also set. This makes this
 thread a likely candicate to do container recovery, unless another
 thread started it already, cf. return value.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>whence</code> - caller site (debug info)</dd>
<dd><code>stealthMode</code> - don't update threadsInPageIO if true</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if we did recovery, false if we saw someone else do it and
 abstained</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="writePage0-long-byte:A-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writePage0</h4>
<pre>private&nbsp;void&nbsp;writePage0(long&nbsp;pageNumber,
                        byte[]&nbsp;pageData,
                        boolean&nbsp;syncPage)
                 throws java.io.IOException,
                        <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="writeAtOffset-org.apache.derby.io.StorageRandomAccessFile-byte:A-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeAtOffset</h4>
<pre>void&nbsp;writeAtOffset(<a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a>&nbsp;file,
                   byte[]&nbsp;bytes,
                   long&nbsp;offset)
            throws java.io.IOException,
                   <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Write a sequence of bytes at the given offset in a file.  This method
 operates in <em>stealth mode</em>, see doc for <a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer4.html#handleClosedChannel-java.nio.channels.ClosedChannelException-boolean-int-"><code>handleClosedChannel</code></a>.
 This presumes that IO retry happens at a higher level, i.e. the
 caller(s) must be prepared to handle <code>InterruptDetectedException</code>.
 <p/>
 This method overrides FileContainer#writeAtOffset.
 <p/></div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#writeAtOffset-org.apache.derby.io.StorageRandomAccessFile-byte:A-long-">writeAtOffset</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html" title="class in org.apache.derby.impl.store.raw.data">FileContainer</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>file</code> - the file to write to</dd>
<dd><code>bytes</code> - the bytes to write</dd>
<dd><code>offset</code> - the offset to start writing at</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O error occurs while writing</dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Derby Standard error policy</dd>
</dl>
</li>
</ul>
<a name="getEmbryonicPage-org.apache.derby.io.StorageRandomAccessFile-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEmbryonicPage</h4>
<pre>byte[]&nbsp;getEmbryonicPage(<a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a>&nbsp;file,
                        long&nbsp;offset)
                 throws java.io.IOException,
                        <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Read an embryonic page (that is, a section of the first alloc page that
 is so large that we know all the borrowed space is included in it) from
 the specified offset in a <code>StorageRandomAccessFile</code>.
 <p/>
 override of FileContainer#getEmbryonicPage
 <p/></div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html#getEmbryonicPage-org.apache.derby.io.StorageRandomAccessFile-long-">getEmbryonicPage</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html" title="class in org.apache.derby.impl.store.raw.data">FileContainer</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>file</code> - the file to read from</dd>
<dd><code>offset</code> - where to start reading (normally
 <code>FileContainer.FIRST_ALLOC_PAGE_OFFSET</code>)</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a byte array containing the embryonic page</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O error occurs while reading</dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - if thread is interrupted.</dd>
</dl>
</li>
</ul>
<a name="readFull-java.nio.ByteBuffer-java.nio.channels.FileChannel-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readFull</h4>
<pre>private&nbsp;void&nbsp;readFull(java.nio.ByteBuffer&nbsp;dstBuffer,
                      java.nio.channels.FileChannel&nbsp;srcChannel,
                      long&nbsp;position)
               throws java.io.IOException,
                      <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Attempts to fill buf completely from start until it's full.
 <p/>
 FileChannel has no readFull() method, so we roll our own.
 <p/></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dstBuffer</code> - buffer to read into</dd>
<dd><code>srcChannel</code> - channel to read from</dd>
<dd><code>position</code> - file position from where to read</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O error occurs while reading</dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - If thread is interrupted.</dd>
</dl>
</li>
</ul>
<a name="writeFull-java.nio.ByteBuffer-java.nio.channels.FileChannel-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeFull</h4>
<pre>private&nbsp;void&nbsp;writeFull(java.nio.ByteBuffer&nbsp;srcBuffer,
                       java.nio.channels.FileChannel&nbsp;dstChannel,
                       long&nbsp;position)
                throws java.io.IOException</pre>
<div class="block">Attempts to write buf completely from start until end, at the given
 position in the destination fileChannel.
 <p/>
 FileChannel has no writeFull() method, so we roll our own.
 <p/></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>srcBuffer</code> - buffer to write</dd>
<dd><code>dstChannel</code> - channel to write to</dd>
<dd><code>position</code> - file position to start writing at</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O error occurs while writing</dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - If thread is interrupted.</dd>
</dl>
</li>
</ul>
<a name="debugTrace-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>debugTrace</h4>
<pre>private static&nbsp;void&nbsp;debugTrace(java.lang.String&nbsp;msg)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RAFContainer.html" title="class in org.apache.derby.impl.store.raw.data"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/RawField.html" title="class in org.apache.derby.impl.store.raw.data"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/impl/store/raw/data/RAFContainer4.html" target="_top">Frames</a></li>
<li><a href="RAFContainer4.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
