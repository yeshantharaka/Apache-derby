<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:05:19 IST 2017 -->
<title>StoredPage (Apache Derby V10.13 Internals)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="StoredPage (Apache Derby V10.13 Internals)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10,"i30":9,"i31":10,"i32":10,"i33":10,"i34":10,"i35":10,"i36":10,"i37":10,"i38":10,"i39":10,"i40":10,"i41":10,"i42":10,"i43":10,"i44":10,"i45":10,"i46":10,"i47":10,"i48":10,"i49":10,"i50":10,"i51":10,"i52":10,"i53":10,"i54":10,"i55":10,"i56":10,"i57":10,"i58":10,"i59":10,"i60":10,"i61":10,"i62":10,"i63":10,"i64":10,"i65":10,"i66":10,"i67":9,"i68":10,"i69":10,"i70":10,"i71":10,"i72":10,"i73":10,"i74":10,"i75":10,"i76":10,"i77":10,"i78":10,"i79":10,"i80":10,"i81":10,"i82":10,"i83":10,"i84":10,"i85":10,"i86":10,"i87":10,"i88":10,"i89":10,"i90":10,"i91":10,"i92":10,"i93":10,"i94":10,"i95":10,"i96":10,"i97":10,"i98":10,"i99":10,"i100":10,"i101":10,"i102":10,"i103":10,"i104":10,"i105":10,"i106":10,"i107":10,"i108":10,"i109":10,"i110":10,"i111":10,"i112":10,"i113":10,"i114":10,"i115":10,"i116":10,"i117":10,"i118":10,"i119":10,"i120":10,"i121":10,"i122":10,"i123":10,"i124":10,"i125":10,"i126":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredFieldHeader.html" title="class in org.apache.derby.impl.store.raw.data"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/impl/store/raw/data/StoredPage.html" target="_top">Frames</a></li>
<li><a href="StoredPage.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derby.impl.store.raw.data</div>
<h2 title="Class StoredPage" class="title">Class StoredPage</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">org.apache.derby.impl.store.raw.data.BasePage</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html" title="class in org.apache.derby.impl.store.raw.data">org.apache.derby.impl.store.raw.data.CachedPage</a></li>
<li>
<ul class="inheritance">
<li>org.apache.derby.impl.store.raw.data.StoredPage</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../../org/apache/derby/iapi/services/cache/Cacheable.html" title="interface in org.apache.derby.iapi.services.cache">Cacheable</a>, <a href="../../../../../../../org/apache/derby/iapi/services/io/TypedFormat.html" title="interface in org.apache.derby.iapi.services.io">TypedFormat</a>, <a href="../../../../../../../org/apache/derby/iapi/services/monitor/DerbyObserver.html" title="interface in org.apache.derby.iapi.services.monitor">DerbyObserver</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html" title="interface in org.apache.derby.iapi.store.raw">Page</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../../../../org/apache/derby/impl/store/raw/data/AllocPage.html" title="class in org.apache.derby.impl.store.raw.data">AllocPage</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">StoredPage</span>
extends <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html" title="class in org.apache.derby.impl.store.raw.data">CachedPage</a></pre>
<div class="block">StoredPage is a sub class of CachedPage that stores page data in a
    fixed size byte array and is designed to be written out to a file
    through a DataInput/DataOutput interface. A StoredPage can exist
    in its clean or dirty state without the FileContainer it was created
    from being in memory.

  <P><B>Page Format</B><BR>
  The page is broken into five sections
  <PRE>
  +----------+-------------+-------------------+-------------------+----------+
  | formatId | page header | records           | slot offset table | checksum |
  +----------+-------------+-------------------+-------------------+----------+
  </PRE>
  <BR><B>FormatId</B><BR>
  The formatId is a 4 bytes array, it contains the format Id of this page.
  <BR><B>Page Header</B><BR>
  The page header is a fixed size, 56 bytes 
  <PRE>
  1 byte  boolean           is page an overflow page
  1 byte  byte              page status (a field maintained in base page)
  8 bytes long              pageVersion (a field maintained in base page)
  2 bytes unsigned short    number of slots in slot offset table
  4 bytes integer           next record identifier
  4 bytes integer           generation number of this page (Future Use)
  4 bytes integer           previous generation of this page (Future Use)
  8 bytes bipLocation       the location of the beforeimage page (Future Use)
  2 bytes unsigned short    number of deleted rows on page. (new release 2.0)
  2 bytes unsigned short    % of the page to keep free for updates
  2 bytes short             spare for future use
  4 bytes long              spare for future use (encryption uses to write 
                                                  random bytes here).
  8 bytes long              spare for future use
  8 bytes long              spare for future use

  </PRE>

  Note that spare space has been guaranteed to be writen with "0", so
  that future use of field should not either not use "0" as a valid data 
  item or pick 0 as a valid default value so that on the fly upgrade can 
  assume that 0 means field was never assigned.

  <BR><B>Records</B>
  The records section contains zero or more records, the format of each record
  follows.
  minimumRecordSize is the minimum user record size, excluding the space we
  use for the record header and field headers.  When a record is inserted, it
  is stored in a space at least as large as the sum of the minimumRecordSize
  and total header size.
        For example,
            If minimumRecordSize is 10 bytes,
            the user record is 7 bytes,
            we used 5 bytes for record and field headers,
            this record will take (10 + 5) bytes of space, extra 3 bytes is 
            put into reserve.

            If minimumRecordSize is 10 bytes,
            user record is 17 bytes,
            we used 5 bytes for record and field headers,
            this record will take (17 + 5) bytes of space, no reserve space 
            here.

  minimumRecordSize is defined by user on per container basis.
  The default for minimumRecordSize is set to 1.

  This implementation always keeps occupied bytes at the low end of the record 
  section.  Thus removing (purging) a record moves all other records down, and
  their slots are also moved down.
  A page has no empty slot (an empty page has no slot)

   <BR><B>Record and Field Format</B>

  Record Header format is defined in the StoredRecordHeader class.
  
<PRE>   
  <BR><B>Fields</B>

  1 byte    Boolean - is null, if true no more data follows.
  4 bytes   Integer - length of field that follows (excludes these four bytes).

  StoredPage will use the static method provided by StoredFieldHeader
  to read/write field status and field data length.

  Field Header format is defined in the StoredFieldHeader class.
  <data>

  </PRE>
    <BR><B>Slot Offset Table</B><BR>
    The slot offset table is a table of 6 or 12 bytes per record, depending on
    the pageSize being less or greater than 64K:
    2 bytes (unsigned short) or 4 bytes (int) page offset for the record that
    is assigned to the slot, and 2 bytes (unsigned short) or 4 bytes (int) 
    for the length of the record on this page.
    2 bytes (unsigned short) or 4 bytes (int) for the length of the reserved 
    number of bytes for this record on this page.
    First slot is slot 0.  The slot table grows backwards. Slots are never
    left empty.
    <BR><B>Checksum</B><BR>
    8 bytes of a java.util.zip.CRC32 checksum of the entire's page contents 
    without the 8 bytes representing the checksum.

    <P><B>Page Access</B>
    The page data is accessed in this class by one of three methods.
    <OL>
    <LI>As a byte array using pageData (field in cachedPage). This is the 
    fastest.
    <LI>As an ArrayInputStream (rawDataIn) and ArrayOutputStream (rawDataOut),
    this is used to set limits on any one reading the page logically.
    <LI>Logically through rawDataIn (ArrayInputStream) and 
    logicalDataOut (FormatIdOutputStream), this provides the methods to write
    logical data (e.g. booleans and integers etc.) and the ObjectInput
    and ObjectOutput interfaces for DataValueDescriptor's. These logical
    streams are constructed using the array streams.
    </OL></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>CRC32</code>, 
<a href="../../../../../../../org/apache/derby/iapi/services/io/ArrayInputStream.html" title="class in org.apache.derby.iapi.services.io"><code>ArrayInputStream</code></a>, 
<a href="../../../../../../../org/apache/derby/iapi/services/io/ArrayOutputStream.html" title="class in org.apache.derby.iapi.services.io"><code>ArrayOutputStream</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../../org/apache/derby/impl/store/raw/data/ByteHolder.html" title="interface in org.apache.derby.impl.store.raw.data">ByteHolder</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#bh">bh</a></span></code>
<div class="block">In memory buffer used as scratch space for streaming columns.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#bipLocation">bipLocation</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.zip.CRC32</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#checksum">checksum</a></span></code>
<div class="block">holder for the checksum.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#CHECKSUM_SIZE">CHECKSUM_SIZE</a></span></code>
<div class="block">Size of the checksum stored on the page.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#COLUMN_CREATE_NULL">COLUMN_CREATE_NULL</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#COLUMN_FIRST">COLUMN_FIRST</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#COLUMN_LONG">COLUMN_LONG</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#COLUMN_NONE">COLUMN_NONE</a></span></code>
<div class="block">Constants used in call to logColumn.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#deletedRowCount">deletedRowCount</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#firstFreeByte">firstFreeByte</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#FORMAT_NUMBER">FORMAT_NUMBER</a></span></code>
<div class="block">static final Fields of the class</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#freeSpace">freeSpace</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#generation">generation</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#headerOutOfDate">headerOutOfDate</a></span></code>
<div class="block">Is the header in the byte array out of date wrt the fields.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#isOverflowPage">isOverflowPage</a></span></code>
<div class="block">The page header is a fixed size, 56 bytes, following are variables used
 to access the fields in the header:
 
  1 byte  boolean isOverflowPage  is page an overflow page
  1 byte  byte    pageStatus      page status (field in base page)
  8 bytes long    pageVersion     page version (field in base page)
  2 bytes ushort  slotsInUse      number of slots in slot offset table
  4 bytes integer nextId          next record identifier
  4 bytes integer generation      generation number of this page(FUTURE USE)
  4 bytes integer prevGeneration  previous generation of page (FUTURE USE)
  8 bytes long    bipLocation     the location of the BI page (FUTURE USE)
  2 bytes ushort  deletedRowCount number of deleted rows on page.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#LARGE_SLOT_SIZE">LARGE_SLOT_SIZE</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatIdOutputStream.html" title="class in org.apache.derby.iapi.services.io">FormatIdOutputStream</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#logicalDataOut">logicalDataOut</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#maxFieldSize">maxFieldSize</a></span></code>
<div class="block">maxFieldSize is a worst case calculation for the size of a record
 on an empty page, with a single field, but still allow room for 
 an overflow pointer if another field is to be added.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#minimumRecordSize">minimumRecordSize</a></span></code>
<div class="block">Minimum space to reserve for record portion length of row.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#nextId">nextId</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#OVERFLOW_POINTER_SIZE">OVERFLOW_POINTER_SIZE</a></span></code>
<div class="block">OVERFLOW_POINTER_SIZE - Number of bytes to reserve for overflow pointer
 
 The overflow pointer is the pointer that the takes the place of the 
 last column of a row if the row can't fit on the page.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#OVERFLOW_PTR_FIELD_SIZE">OVERFLOW_PTR_FIELD_SIZE</a></span></code>
<div class="block">OVERFLOW_PTR_FIELD_SIZE - Number of bytes of an overflow field
 
 This is the length to reserve for either a column or row overflow
 pointer field.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#overflowRecordHeader">overflowRecordHeader</a></span></code>
<div class="block">Scratch variable used when you need a overflowRecordHeader.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#PAGE_HEADER_OFFSET">PAGE_HEADER_OFFSET</a></span></code>
<div class="block">Start of page, formatId must fit in 4 bytes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#PAGE_HEADER_SIZE">PAGE_HEADER_SIZE</a></span></code>
<div class="block">Fixed size of the page header</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#PAGE_VERSION_OFFSET">PAGE_VERSION_OFFSET</a></span></code>
<div class="block">offset of the page version number</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#prevGeneration">prevGeneration</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../../org/apache/derby/iapi/services/io/ArrayInputStream.html" title="class in org.apache.derby.iapi.services.io">ArrayInputStream</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#rawDataIn">rawDataIn</a></span></code>
<div class="block">Input streams used to read/write bytes to/from the page byte array.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../../../org/apache/derby/iapi/services/io/ArrayOutputStream.html" title="class in org.apache.derby.iapi.services.io">ArrayOutputStream</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#rawDataOut">rawDataOut</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#RECORD_SPACE_OFFSET">RECORD_SPACE_OFFSET</a></span></code>
<div class="block">Start of the record storage area.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#slotEntrySize">slotEntrySize</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#slotFieldSize">slotFieldSize</a></span></code>
<div class="block">slot field and slot entry size.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#slotsInUse">slotsInUse</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#slotTableOffsetToFirstEntry">slotTableOffsetToFirstEntry</a></span></code>
<div class="block">Offset of the first entry in the slot table.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#slotTableOffsetToFirstRecordLengthField">slotTableOffsetToFirstRecordLengthField</a></span></code>
<div class="block">Offset of the record length entry in the 1st slot table entry.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#slotTableOffsetToFirstReservedSpaceField">slotTableOffsetToFirstReservedSpaceField</a></span></code>
<div class="block">Offset of the reserved space length entry in the 1st slot table entry.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#SMALL_SLOT_SIZE">SMALL_SLOT_SIZE</a></span></code>
<div class="block">SMALL_SLOT_SIZE are for pages smaller than 64K,
 LARGE_SLOT_SIZE is for pages bigger than 64K.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#spareSpace">spareSpace</a></span></code>
<div class="block">% of page to keep free for updates.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#totalSpace">totalSpace</a></span></code>
<div class="block">total usable space on a page.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#userRowSize">userRowSize</a></span></code>
<div class="block">scratch variable used to keep track of the total user size for the row.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.derby.impl.store.raw.data.CachedPage">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.derby.impl.store.raw.data.<a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html" title="class in org.apache.derby.impl.store.raw.data">CachedPage</a></h3>
<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#alreadyReadPage">alreadyReadPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#containerCache">containerCache</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#dataFactory">dataFactory</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#initialRowCount">initialRowCount</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#isDirty">isDirty</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#PAGE_FORMAT_ID_SIZE">PAGE_FORMAT_ID_SIZE</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#pageCache">pageCache</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#pageData">pageData</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#preDirty">preDirty</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#WRITE_NO_SYNC">WRITE_NO_SYNC</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#WRITE_SYNC">WRITE_SYNC</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.derby.impl.store.raw.data.BasePage">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.derby.impl.store.raw.data.<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></h3>
<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#identity">identity</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#inClean">inClean</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#INIT_PAGE_OVERFLOW">INIT_PAGE_OVERFLOW</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#INIT_PAGE_REUSE">INIT_PAGE_REUSE</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#INIT_PAGE_REUSE_RECORDID">INIT_PAGE_REUSE_RECORDID</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#INVALID_PAGE">INVALID_PAGE</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#LOG_RECORD_DEFAULT">LOG_RECORD_DEFAULT</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#LOG_RECORD_FOR_PURGE">LOG_RECORD_FOR_PURGE</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#LOG_RECORD_FOR_UPDATE">LOG_RECORD_FOR_UPDATE</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#owner">owner</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#preLatch">preLatch</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#VALID_PAGE">VALID_PAGE</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.derby.iapi.store.raw.Page">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;org.apache.derby.iapi.store.raw.<a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html" title="interface in org.apache.derby.iapi.store.raw">Page</a></h3>
<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#DIAG_BYTES_FREE">DIAG_BYTES_FREE</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#DIAG_BYTES_RESERVED">DIAG_BYTES_RESERVED</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#DIAG_MAXROWSIZE">DIAG_MAXROWSIZE</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#DIAG_MINIMUM_REC_SIZE">DIAG_MINIMUM_REC_SIZE</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#DIAG_MINROWSIZE">DIAG_MINROWSIZE</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#DIAG_NUMOVERFLOWED">DIAG_NUMOVERFLOWED</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#DIAG_PAGE_SIZE">DIAG_PAGE_SIZE</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#DIAG_PAGEOVERHEAD">DIAG_PAGEOVERHEAD</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#DIAG_RESERVED_SPACE">DIAG_RESERVED_SPACE</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#DIAG_ROWSIZE">DIAG_ROWSIZE</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#DIAG_SLOTTABLE_SIZE">DIAG_SLOTTABLE_SIZE</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#FIRST_SLOT_NUMBER">FIRST_SLOT_NUMBER</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#INSERT_CONDITIONAL">INSERT_CONDITIONAL</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#INSERT_DEFAULT">INSERT_DEFAULT</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#INSERT_FOR_SPLIT">INSERT_FOR_SPLIT</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#INSERT_INITIAL">INSERT_INITIAL</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#INSERT_OVERFLOW">INSERT_OVERFLOW</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#INSERT_UNDO_WITH_PURGE">INSERT_UNDO_WITH_PURGE</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#INVALID_SLOT_NUMBER">INVALID_SLOT_NUMBER</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#StoredPage--">StoredPage</a></span>()</code>
<div class="block">Simple no-arg constructor for StoredPage.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#addSlotEntry-int-int-int-int-">addSlotEntry</a></span>(int&nbsp;slot,
            int&nbsp;recordOffset,
            int&nbsp;recordPortionLength,
            int&nbsp;reservedSpace)</code>
<div class="block">Insert a new slot entry into the current slot array.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#allowInsert--">allowInsert</a></span>()</code>
<div class="block">Is there enough space on the page to insert a minimum size row?</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#appendOverflowFieldHeader-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-org.apache.derby.iapi.store.raw.RecordHandle-">appendOverflowFieldHeader</a></span>(<a href="../../../../../../../org/apache/derby/iapi/services/io/DynamicByteArrayOutputStream.html" title="class in org.apache.derby.iapi.services.io">DynamicByteArrayOutputStream</a>&nbsp;logBuffer,
                         <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;overflowHandle)</code>
<div class="block">Append an overflow pointer to a partly logged row,
                to point to a long column that just been logged.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#calculateSlotFieldSize-int-">calculateSlotFieldSize</a></span>(int&nbsp;pageSize)</code>
<div class="block">Calculate the slot field size from the page size.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#checkRowReservedSpace-int-">checkRowReservedSpace</a></span>(int&nbsp;slot)</code>
<div class="block">See if reserved space should be reclaimed for the input row.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#cleanPage--">cleanPage</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#clearAllSpace--">clearAllSpace</a></span>()</code>
<div class="block">Initialize the freeSpace count and set the firstFreeByte on page</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#clearSection-int-int-">clearSection</a></span>(int&nbsp;offset,
            int&nbsp;length)</code>
<div class="block">Zero out a portion of the page.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#compactRecord-org.apache.derby.iapi.store.raw.xact.RawTransaction-int-int-">compactRecord</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/RawTransaction.html" title="class in org.apache.derby.iapi.store.raw.xact">RawTransaction</a>&nbsp;t,
             int&nbsp;slot,
             int&nbsp;id)</code>
<div class="block">Subclass implementation of compactRecord.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#compressPage-int-int-">compressPage</a></span>(int&nbsp;startByte,
            int&nbsp;endByte)</code>
<div class="block">Compress out the space specified by startByte and endByte.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#createOutStreams--">createOutStreams</a></span>()</code>
<div class="block">Create the output streams.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#createPage-org.apache.derby.iapi.store.raw.PageKey-org.apache.derby.impl.store.raw.data.PageCreationArgs-">createPage</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/PageKey.html" title="class in org.apache.derby.iapi.store.raw">PageKey</a>&nbsp;newIdentity,
          <a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageCreationArgs.html" title="class in org.apache.derby.impl.store.raw.data">PageCreationArgs</a>&nbsp;args)</code>
<div class="block">Create a new StoredPage.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#createSpaceForUpdate-int-int-int-int-">createSpaceForUpdate</a></span>(int&nbsp;slot,
                    int&nbsp;offset,
                    int&nbsp;oldLength,
                    int&nbsp;newLength)</code>
<div class="block">Create the space to update a portion of a record.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/PageTimeStamp.html" title="interface in org.apache.derby.iapi.store.raw">PageTimeStamp</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#currentTimeStamp--">currentTimeStamp</a></span>()</code>
<div class="block">Get a time stamp for this page</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#doUpdateAtSlot-org.apache.derby.iapi.store.raw.xact.RawTransaction-int-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-">doUpdateAtSlot</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/RawTransaction.html" title="class in org.apache.derby.iapi.store.raw.xact">RawTransaction</a>&nbsp;t,
              int&nbsp;slot,
              int&nbsp;id,
              java.lang.Object[]&nbsp;row,
              <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;validColumns)</code>
<div class="block">Perform an update.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#entireRecordOnPage-int-">entireRecordOnPage</a></span>(int&nbsp;slot)</code>
<div class="block">Is entire record on the page?</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#equalTimeStamp-org.apache.derby.iapi.store.raw.PageTimeStamp-">equalTimeStamp</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/PageTimeStamp.html" title="interface in org.apache.derby.iapi.store.raw">PageTimeStamp</a>&nbsp;ts)</code>
<div class="block">compare given PageVersion with pageVersion on page</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#expandPage-int-int-">expandPage</a></span>(int&nbsp;startOffset,
          int&nbsp;requiredBytes)</code>
<div class="block">Free up required bytes by shifting rows "down" the page.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#fetchNumFieldsAtSlot-int-">fetchNumFieldsAtSlot</a></span>(int&nbsp;slot)</code>
<div class="block">Get the number of fields on the row at slot</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getCurrentFreeSpace--">getCurrentFreeSpace</a></span>()</code>
<div class="block">The current free space on the page.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getFieldOffset-int-int-">getFieldOffset</a></span>(int&nbsp;slot,
              int&nbsp;fieldNumber)</code>
<div class="block">Get the offset of the field header of the given field for
        the record in the given slot.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getIsOverflow-int-">getIsOverflow</a></span>(int&nbsp;slot)</code>&nbsp;</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getMaxDataLength-int-int-">getMaxDataLength</a></span>(int&nbsp;spaceAvailable,
                int&nbsp;overflowThreshold)</code>
<div class="block">return the max datalength allowed with the space available</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getMaxFreeSpace--">getMaxFreeSpace</a></span>()</code>
<div class="block">The maximum free space on this page possible.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getNewOverflowPage--">getNewOverflowPage</a></span>()</code>
<div class="block">Get an empty overflow page.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getNextColumnPiece-int-">getNextColumnPiece</a></span>(int&nbsp;slot)</code>
<div class="block">Return the next recordHandle in a long column chain.</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html" title="class in org.apache.derby.impl.store.raw.data">StoredPage</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getOverflowPage-long-">getOverflowPage</a></span>(long&nbsp;pageNumber)</code>
<div class="block">Get the overflow page for a record that has already overflowed.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getOverflowPageForInsert-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-">getOverflowPageForInsert</a></span>(int&nbsp;currentSlot,
                        java.lang.Object[]&nbsp;row,
                        <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;validColumns)</code>
<div class="block">Get a overflow page that potentially can handle a new overflowed record.</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getOverflowPageForInsert-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-int-">getOverflowPageForInsert</a></span>(int&nbsp;currentSlot,
                        java.lang.Object[]&nbsp;row,
                        <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;validColumns,
                        int&nbsp;startColumn)</code>&nbsp;</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getOverFlowRecordHeader--">getOverFlowRecordHeader</a></span>()</code>
<div class="block">get scratch space for over flow record header.</div>
</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getOverflowSlot-org.apache.derby.impl.store.raw.data.BasePage-org.apache.derby.impl.store.raw.data.StoredRecordHeader-">getOverflowSlot</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a>&nbsp;overflowPage,
               <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;recordHeader)</code>
<div class="block">Get the overflow slot for a record that has already overflowed.</div>
</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>(package private) java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getPageDumpString--">getPageDumpString</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i32" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getPageSize--">getPageSize</a></span>()</code>
<div class="block">Get the full size of the page.</div>
</td>
</tr>
<tr id="i33" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getRecordLength-int-">getRecordLength</a></span>(int&nbsp;slot)</code>
<div class="block">Get the stored length of a record.</div>
</td>
</tr>
<tr id="i34" class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getRecordOffset-int-">getRecordOffset</a></span>(int&nbsp;slot)</code>
<div class="block">Get the page offset of the record associated with the input slot.</div>
</td>
</tr>
<tr id="i35" class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getRecordPortionLength-int-">getRecordPortionLength</a></span>(int&nbsp;slot)</code>
<div class="block">Return length of row on this page.</div>
</td>
</tr>
<tr id="i36" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getReservedCount-int-">getReservedCount</a></span>(int&nbsp;slot)</code>
<div class="block">Return reserved length of row on this page.</div>
</td>
</tr>
<tr id="i37" class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getSlotOffset-int-">getSlotOffset</a></span>(int&nbsp;slot)</code>
<div class="block">Get the page offset of a given slot entry.</div>
</td>
</tr>
<tr id="i38" class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getSlotsInUse--">getSlotsInUse</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i39" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getTotalSpace-int-">getTotalSpace</a></span>(int&nbsp;slot)</code>
<div class="block">Return the total number of bytes used, reserved, or wasted by the
 record at this slot.</div>
</td>
</tr>
<tr id="i40" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#getTypeFormatId--">getTypeFormatId</a></span>()</code>
<div class="block">Return my format identifier.</div>
</td>
</tr>
<tr id="i41" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#handleIncompleteLogRow-int-int-org.apache.derby.iapi.services.io.FormatableBitSet-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-">handleIncompleteLogRow</a></span>(int&nbsp;slot,
                      int&nbsp;startColumn,
                      <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;columnList,
                      <a href="../../../../../../../org/apache/derby/iapi/services/io/DynamicByteArrayOutputStream.html" title="class in org.apache.derby.iapi.services.io">DynamicByteArrayOutputStream</a>&nbsp;out)</code>
<div class="block">Handle an update of a record portion that is incomplete.</div>
</td>
</tr>
<tr id="i42" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#initFromData-org.apache.derby.impl.store.raw.data.FileContainer-org.apache.derby.iapi.store.raw.PageKey-">initFromData</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html" title="class in org.apache.derby.impl.store.raw.data">FileContainer</a>&nbsp;myContainer,
            <a href="../../../../../../../org/apache/derby/iapi/store/raw/PageKey.html" title="class in org.apache.derby.iapi.store.raw">PageKey</a>&nbsp;newIdentity)</code>
<div class="block">Initialize the page from values in the page buffer.</div>
</td>
</tr>
<tr id="i43" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#initialize--">initialize</a></span>()</code>
<div class="block">Initialize the StoredPage.</div>
</td>
</tr>
<tr id="i44" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#initPage-org.apache.derby.iapi.store.raw.log.LogInstant-byte-int-boolean-boolean-">initPage</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant,
        byte&nbsp;status,
        int&nbsp;recordId,
        boolean&nbsp;overflow,
        boolean&nbsp;reuse)</code>
<div class="block">Initialize the page.</div>
</td>
</tr>
<tr id="i45" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#initSlotTable-org.apache.derby.iapi.store.raw.PageKey-">initSlotTable</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/PageKey.html" title="class in org.apache.derby.iapi.store.raw">PageKey</a>&nbsp;newIdentity)</code>
<div class="block">Initialize the in-memory slot table.</div>
</td>
</tr>
<tr id="i46" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#initSpace--">initSpace</a></span>()</code>
<div class="block">initialize the in memory variables associated with space maintenance.</div>
</td>
</tr>
<tr id="i47" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#insertAtSlot-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-org.apache.derby.iapi.store.access.conglomerate.LogicalUndo-byte-int-">insertAtSlot</a></span>(int&nbsp;slot,
            java.lang.Object[]&nbsp;row,
            <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;validColumns,
            <a href="../../../../../../../org/apache/derby/iapi/store/access/conglomerate/LogicalUndo.html" title="interface in org.apache.derby.iapi.store.access.conglomerate">LogicalUndo</a>&nbsp;undo,
            byte&nbsp;insertFlag,
            int&nbsp;overflowThreshold)</code>
<div class="block">Override insertAtSlot to provide long row support.</div>
</td>
</tr>
<tr id="i48" class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#internalDeletedRecordCount--">internalDeletedRecordCount</a></span>()</code>
<div class="block">get record count without checking for latch</div>
</td>
</tr>
<tr id="i49" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#isColumnOrphaned-org.apache.derby.impl.store.raw.data.StoredRecordHeader-int-long-long-">isColumnOrphaned</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;recordHeader,
                int&nbsp;columnId,
                long&nbsp;oldPageId,
                long&nbsp;oldRecordId)</code>
<div class="block">See if there is a orphaned long colum chain or not.</div>
</td>
</tr>
<tr id="i50" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#isLong-int-int-">isLong</a></span>(int&nbsp;fieldSize,
      int&nbsp;overflowThreshold)</code>
<div class="block">return whether the field has exceeded the max threshold for this page
        it compares the fieldSize with the largest possible field for this page</div>
</td>
</tr>
<tr id="i51" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#isOverflowPage--">isOverflowPage</a></span>()</code>
<div class="block">Return true if the page is an overflow page, false if not.</div>
</td>
</tr>
<tr id="i52" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#logAction-org.apache.derby.iapi.store.raw.log.LogInstant-">logAction</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant)</code>&nbsp;</td>
</tr>
<tr id="i53" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#logColumn-int-int-java.lang.Object-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-int-">logColumn</a></span>(int&nbsp;slot,
         int&nbsp;fieldId,
         java.lang.Object&nbsp;column,
         <a href="../../../../../../../org/apache/derby/iapi/services/io/DynamicByteArrayOutputStream.html" title="class in org.apache.derby.iapi.services.io">DynamicByteArrayOutputStream</a>&nbsp;out,
         int&nbsp;overflowThreshold)</code>
<div class="block">Log a Storable to a stream.</div>
</td>
</tr>
<tr id="i54" class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#logColumn-java.lang.Object:A-int-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-int-int-int-">logColumn</a></span>(java.lang.Object[]&nbsp;row,
         int&nbsp;arrayPosition,
         <a href="../../../../../../../org/apache/derby/iapi/services/io/DynamicByteArrayOutputStream.html" title="class in org.apache.derby.iapi.services.io">DynamicByteArrayOutputStream</a>&nbsp;out,
         int&nbsp;spaceAvailable,
         int&nbsp;columnFlag,
         int&nbsp;overflowThreshold)</code>
<div class="block">Log column from input row to the given output stream.</div>
</td>
</tr>
<tr id="i55" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#logField-int-int-java.io.OutputStream-">logField</a></span>(int&nbsp;slot,
        int&nbsp;fieldNumber,
        java.io.OutputStream&nbsp;out)</code>
<div class="block">Log a field to the ObjectOutput stream.</div>
</td>
</tr>
<tr id="i56" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#logLongColumn-int-int-java.lang.Object-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-">logLongColumn</a></span>(int&nbsp;slot,
             int&nbsp;recordId,
             java.lang.Object&nbsp;column,
             <a href="../../../../../../../org/apache/derby/iapi/services/io/DynamicByteArrayOutputStream.html" title="class in org.apache.derby.iapi.services.io">DynamicByteArrayOutputStream</a>&nbsp;out)</code>
<div class="block">Log a long column into a DataOuput.</div>
</td>
</tr>
<tr id="i57" class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#logOverflowField-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-int-long-int-">logOverflowField</a></span>(<a href="../../../../../../../org/apache/derby/iapi/services/io/DynamicByteArrayOutputStream.html" title="class in org.apache.derby.iapi.services.io">DynamicByteArrayOutputStream</a>&nbsp;out,
                int&nbsp;spaceAvailable,
                long&nbsp;overflowPage,
                int&nbsp;overflowId)</code>&nbsp;</td>
</tr>
<tr id="i58" class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#logOverflowRecord-int-int-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-">logOverflowRecord</a></span>(int&nbsp;slot,
                 int&nbsp;spaceAvailable,
                 <a href="../../../../../../../org/apache/derby/iapi/services/io/DynamicByteArrayOutputStream.html" title="class in org.apache.derby.iapi.services.io">DynamicByteArrayOutputStream</a>&nbsp;out)</code>
<div class="block">Create and write a long row header to the log stream.</div>
</td>
</tr>
<tr id="i59" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#logRecord-int-int-int-org.apache.derby.iapi.services.io.FormatableBitSet-java.io.OutputStream-org.apache.derby.iapi.store.raw.RecordHandle-">logRecord</a></span>(int&nbsp;slot,
         int&nbsp;flag,
         int&nbsp;recordId,
         <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;validColumns,
         java.io.OutputStream&nbsp;out,
         <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;headRowHandle)</code>
<div class="block">Log a record to the ObjectOutput stream.</div>
</td>
</tr>
<tr id="i60" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#logRecordDataPortion-int-int-org.apache.derby.impl.store.raw.data.StoredRecordHeader-org.apache.derby.iapi.services.io.FormatableBitSet-java.io.OutputStream-org.apache.derby.iapi.store.raw.RecordHandle-">logRecordDataPortion</a></span>(int&nbsp;slot,
                    int&nbsp;flag,
                    <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;recordHeader,
                    <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;validColumns,
                    java.io.OutputStream&nbsp;out,
                    <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;headRowHandle)</code>&nbsp;</td>
</tr>
<tr id="i61" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#logRow-int-boolean-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-int-byte-int-int-int-">logRow</a></span>(int&nbsp;slot,
      boolean&nbsp;forInsert,
      int&nbsp;recordId,
      java.lang.Object[]&nbsp;row,
      <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;validColumns,
      <a href="../../../../../../../org/apache/derby/iapi/services/io/DynamicByteArrayOutputStream.html" title="class in org.apache.derby.iapi.services.io">DynamicByteArrayOutputStream</a>&nbsp;out,
      int&nbsp;startColumn,
      byte&nbsp;insertFlag,
      int&nbsp;realStartColumn,
      int&nbsp;realSpaceOnPage,
      int&nbsp;overflowThreshold)</code>
<div class="block">Log a row into the StoreOuput stream.</div>
</td>
</tr>
<tr id="i62" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#moveRecordForCompressAtSlot-int-java.lang.Object:A-org.apache.derby.iapi.store.raw.RecordHandle:A-org.apache.derby.iapi.store.raw.RecordHandle:A-">moveRecordForCompressAtSlot</a></span>(int&nbsp;slot,
                           java.lang.Object[]&nbsp;row,
                           <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>[]&nbsp;old_handle,
                           <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>[]&nbsp;new_handle)</code>
<div class="block">Move record to a page toward the beginning of the file.</div>
</td>
</tr>
<tr id="i63" class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#moveSavedDataToPage-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-int-int-">moveSavedDataToPage</a></span>(<a href="../../../../../../../org/apache/derby/iapi/services/io/DynamicByteArrayOutputStream.html" title="class in org.apache.derby.iapi.services.io">DynamicByteArrayOutputStream</a>&nbsp;savedData,
                   int&nbsp;unusedSpace,
                   int&nbsp;pageOffset)</code>&nbsp;</td>
</tr>
<tr id="i64" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#newRecordId--">newRecordId</a></span>()</code>
<div class="block">Create a new record handle.</div>
</td>
</tr>
<tr id="i65" class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#newRecordId-int-">newRecordId</a></span>(int&nbsp;recordId)</code>
<div class="block">Create a new record id based on current one passed in.</div>
</td>
</tr>
<tr id="i66" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#newRecordIdAndBump--">newRecordIdAndBump</a></span>()</code>
<div class="block">Create a new record handle, and bump the id.</div>
</td>
</tr>
<tr id="i67" class="rowColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#pagedataToHexDump-byte:A-">pagedataToHexDump</a></span>(byte[]&nbsp;data)</code>
<div class="block">Provide a hex dump of the data in the in memory version of the page.</div>
</td>
</tr>
<tr id="i68" class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#pageHeaderToString--">pageHeaderToString</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i69" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#purgeColumnChains-org.apache.derby.iapi.store.raw.xact.RawTransaction-int-org.apache.derby.iapi.store.raw.RecordHandle-">purgeColumnChains</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/RawTransaction.html" title="class in org.apache.derby.iapi.store.raw.xact">RawTransaction</a>&nbsp;t,
                 int&nbsp;slot,
                 <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;headRowHandle)</code>
<div class="block">purge long columns chains which eminate from this page.</div>
</td>
</tr>
<tr id="i70" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#purgeOneColumnChain-long-int-">purgeOneColumnChain</a></span>(long&nbsp;overflowPageId,
                   int&nbsp;overflowRecordId)</code>
<div class="block">Purge the column chain that starts at overflowPageId, overflowRecordId
 
 Purge just the column chain that starts at the input address.</div>
</td>
</tr>
<tr id="i71" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#purgeOverflowAtSlot-int-org.apache.derby.iapi.store.raw.RecordHandle-boolean-">purgeOverflowAtSlot</a></span>(int&nbsp;slot,
                   <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;headRowHandle,
                   boolean&nbsp;needDataLogged)</code>
<div class="block">Purge one row on an overflow page.</div>
</td>
</tr>
<tr id="i72" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#purgeRecord-org.apache.derby.iapi.store.raw.log.LogInstant-int-int-">purgeRecord</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant,
           int&nbsp;slot,
           int&nbsp;recordId)</code>
<div class="block">purgeRecord from page.</div>
</td>
</tr>
<tr id="i73" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#purgeRowPieces-org.apache.derby.iapi.store.raw.xact.RawTransaction-int-org.apache.derby.iapi.store.raw.RecordHandle-boolean-">purgeRowPieces</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/RawTransaction.html" title="class in org.apache.derby.iapi.store.raw.xact">RawTransaction</a>&nbsp;t,
              int&nbsp;slot,
              <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;headRowHandle,
              boolean&nbsp;needDataLogged)</code>
<div class="block">Purge all the overflow columns and overflow rows of the record at slot.</div>
</td>
</tr>
<tr id="i74" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#qualifyRecordFromRow-java.lang.Object:A-org.apache.derby.iapi.store.access.Qualifier:A:A-">qualifyRecordFromRow</a></span>(java.lang.Object[]&nbsp;row,
                    <a href="../../../../../../../org/apache/derby/iapi/store/access/Qualifier.html" title="interface in org.apache.derby.iapi.store.access">Qualifier</a>[][]&nbsp;qual_list)</code>
<div class="block">Process the qualifier list on the row, return true if it qualifies.</div>
</td>
</tr>
<tr id="i75" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#qualifyRecordFromSlot-java.lang.Object:A-int-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.impl.store.raw.data.StoredRecordHeader-org.apache.derby.iapi.store.raw.RecordHandle-">qualifyRecordFromSlot</a></span>(java.lang.Object[]&nbsp;row,
                     int&nbsp;offset_to_row_data,
                     <a href="../../../../../../../org/apache/derby/iapi/store/raw/FetchDescriptor.html" title="class in org.apache.derby.iapi.store.raw">FetchDescriptor</a>&nbsp;fetchDesc,
                     <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;recordHeader,
                     <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;recordToLock)</code>
<div class="block">Process the list of qualifiers on the row in the stream.</div>
</td>
</tr>
<tr id="i76" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#readOneColumnFromPage-java.lang.Object:A-int-int-org.apache.derby.impl.store.raw.data.StoredRecordHeader-org.apache.derby.iapi.store.raw.RecordHandle-">readOneColumnFromPage</a></span>(java.lang.Object[]&nbsp;row,
                     int&nbsp;colid,
                     int&nbsp;offset_to_field_data,
                     <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;recordHeader,
                     <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;recordToLock)</code>
<div class="block">Read just one column from stream into row.</div>
</td>
</tr>
<tr id="i77" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#readPageHeader--">readPageHeader</a></span>()</code>
<div class="block">Read the page header from the page array.</div>
</td>
</tr>
<tr id="i78" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#readRecordFromArray-java.lang.Object:A-int-int:A-int:A-org.apache.derby.iapi.services.io.ArrayInputStream-org.apache.derby.impl.store.raw.data.StoredRecordHeader-org.apache.derby.iapi.store.raw.RecordHandle-">readRecordFromArray</a></span>(java.lang.Object[]&nbsp;row,
                   int&nbsp;max_colid,
                   int[]&nbsp;vCols,
                   int[]&nbsp;mCols,
                   <a href="../../../../../../../org/apache/derby/iapi/services/io/ArrayInputStream.html" title="class in org.apache.derby.iapi.services.io">ArrayInputStream</a>&nbsp;dataIn,
                   <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;recordHeader,
                   <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;recordToLock)</code>&nbsp;</td>
</tr>
<tr id="i79" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#readRecordFromStream-java.lang.Object:A-int-int:A-int:A-org.apache.derby.iapi.services.io.LimitObjectInput-org.apache.derby.impl.store.raw.data.StoredRecordHeader-org.apache.derby.iapi.store.raw.RecordHandle-">readRecordFromStream</a></span>(java.lang.Object[]&nbsp;row,
                    int&nbsp;max_colid,
                    int[]&nbsp;vCols,
                    int[]&nbsp;mCols,
                    <a href="../../../../../../../org/apache/derby/iapi/services/io/LimitObjectInput.html" title="interface in org.apache.derby.iapi.services.io">LimitObjectInput</a>&nbsp;dataIn,
                    <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;recordHeader,
                    <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;recordToLock)</code>
<div class="block">restore a record from a stream.</div>
</td>
</tr>
<tr id="i80" class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#recordHeaderOnDemand-int-">recordHeaderOnDemand</a></span>(int&nbsp;slot)</code>
<div class="block">create the record header for the specific slot.</div>
</td>
</tr>
<tr id="i81" class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#recordToString-int-">recordToString</a></span>(int&nbsp;slot)</code>&nbsp;</td>
</tr>
<tr id="i82" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#releaseExclusive--">releaseExclusive</a></span>()</code>
<div class="block">Ensure that the page is released from the cache when it is unlatched.</div>
</td>
</tr>
<tr id="i83" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#removeOrphanedColumnChain-org.apache.derby.impl.store.raw.data.ReclaimSpace-org.apache.derby.iapi.store.raw.ContainerHandle-">removeOrphanedColumnChain</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/ReclaimSpace.html" title="class in org.apache.derby.impl.store.raw.data">ReclaimSpace</a>&nbsp;work,
                         <a href="../../../../../../../org/apache/derby/iapi/store/raw/ContainerHandle.html" title="interface in org.apache.derby.iapi.store.raw">ContainerHandle</a>&nbsp;containerHdl)</code>
<div class="block">Remove a column chain that may have been orphaned by an update.</div>
</td>
</tr>
<tr id="i84" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#removeSlotEntry-int-">removeSlotEntry</a></span>(int&nbsp;slot)</code>
<div class="block">Remove slot entry from slot array.</div>
</td>
</tr>
<tr id="i85" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#reserveSpaceForSlot-org.apache.derby.iapi.store.raw.log.LogInstant-int-int-">reserveSpaceForSlot</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant,
                   int&nbsp;slot,
                   int&nbsp;spaceToReserve)</code>
<div class="block">reserveSpaceForSlot
        This method will reserve at least specified "spaceToReserve" bytes for the record
        in the slot.</div>
</td>
</tr>
<tr id="i86" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#resetOutputStream--">resetOutputStream</a></span>()</code>
<div class="block">Reset the logical output stream.</div>
</td>
</tr>
<tr id="i87" class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#restoreLongRecordFromSlot-java.lang.Object:A-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.iapi.store.raw.RecordHandle-org.apache.derby.impl.store.raw.data.StoredRecordHeader-">restoreLongRecordFromSlot</a></span>(java.lang.Object[]&nbsp;row,
                         <a href="../../../../../../../org/apache/derby/iapi/store/raw/FetchDescriptor.html" title="class in org.apache.derby.iapi.store.raw">FetchDescriptor</a>&nbsp;fetchDesc,
                         <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;recordToLock,
                         <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;parent_recordHeader)</code>&nbsp;</td>
</tr>
<tr id="i88" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#restorePortionLongColumn-org.apache.derby.impl.store.raw.data.OverflowInputStream-">restorePortionLongColumn</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/OverflowInputStream.html" title="class in org.apache.derby.impl.store.raw.data">OverflowInputStream</a>&nbsp;fetchStream)</code>
<div class="block">Restore a portion of a long column.</div>
</td>
</tr>
<tr id="i89" class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#restoreRecordFromSlot-int-java.lang.Object:A-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.iapi.store.raw.RecordHandle-org.apache.derby.impl.store.raw.data.StoredRecordHeader-boolean-">restoreRecordFromSlot</a></span>(int&nbsp;slot,
                     java.lang.Object[]&nbsp;row,
                     <a href="../../../../../../../org/apache/derby/iapi/store/raw/FetchDescriptor.html" title="class in org.apache.derby.iapi.store.raw">FetchDescriptor</a>&nbsp;fetchDesc,
                     <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;recordToLock,
                     <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;recordHeader,
                     boolean&nbsp;isHeadRow)</code>
<div class="block">Read the record at the given slot into the given row.</div>
</td>
</tr>
<tr id="i90" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#restoreRecordFromStream-org.apache.derby.iapi.services.io.LimitObjectInput-java.lang.Object:A-">restoreRecordFromStream</a></span>(<a href="../../../../../../../org/apache/derby/iapi/services/io/LimitObjectInput.html" title="interface in org.apache.derby.iapi.services.io">LimitObjectInput</a>&nbsp;in,
                       java.lang.Object[]&nbsp;row)</code>
<div class="block">Restore a storable row from a LimitInputStream.</div>
</td>
</tr>
<tr id="i91" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#setDeleteStatus-org.apache.derby.iapi.store.raw.log.LogInstant-int-boolean-">setDeleteStatus</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant,
               int&nbsp;slot,
               boolean&nbsp;delete)</code>
<div class="block">Set the deleted status</div>
</td>
</tr>
<tr id="i92" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#setOutputStream-java.io.OutputStream-">setOutputStream</a></span>(java.io.OutputStream&nbsp;out)</code>
<div class="block">Tie the logical output stream to a passed in OutputStream.</div>
</td>
</tr>
<tr id="i93" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#setPageStatus-org.apache.derby.iapi.store.raw.log.LogInstant-byte-">setPageStatus</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant,
             byte&nbsp;status)</code>
<div class="block">Set page status</div>
</td>
</tr>
<tr id="i94" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#setRecordOffset-int-int-">setRecordOffset</a></span>(int&nbsp;slot,
               int&nbsp;recordOffset)</code>
<div class="block">Set the page offset of the record associated with the input slot.</div>
</td>
</tr>
<tr id="i95" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#setReservedSpace-org.apache.derby.iapi.store.raw.log.LogInstant-int-int-">setReservedSpace</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant,
                int&nbsp;slot,
                int&nbsp;value)</code>
<div class="block">Set the row reserved space.</div>
</td>
</tr>
<tr id="i96" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#setSlotEntry-int-int-int-int-">setSlotEntry</a></span>(int&nbsp;slot,
            int&nbsp;recordOffset,
            int&nbsp;recordPortionLength,
            int&nbsp;reservedSpace)</code>
<div class="block">Set up a new slot entry.</div>
</td>
</tr>
<tr id="i97" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#setTimeStamp-org.apache.derby.iapi.store.raw.PageTimeStamp-">setTimeStamp</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/PageTimeStamp.html" title="interface in org.apache.derby.iapi.store.raw">PageTimeStamp</a>&nbsp;ts)</code>
<div class="block">Set given pageVersion to be the as what is on this page</div>
</td>
</tr>
<tr id="i98" class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#shiftRemainingData-int-int-int-int-">shiftRemainingData</a></span>(int&nbsp;slot,
                  int&nbsp;offset,
                  int&nbsp;oldLength,
                  int&nbsp;newLength)</code>
<div class="block">Shift data within a record to account for an update.</div>
</td>
</tr>
<tr id="i99" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#shrinkPage-int-int-">shrinkPage</a></span>(int&nbsp;startOffset,
          int&nbsp;shrinkBytes)</code>
<div class="block">Shrink page.</div>
</td>
</tr>
<tr id="i100" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#skipField-java.io.ObjectInput-">skipField</a></span>(java.io.ObjectInput&nbsp;in)</code>
<div class="block">Skip a field header and its data on the given stream.</div>
</td>
</tr>
<tr id="i101" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#skipRecord-java.io.ObjectInput-">skipRecord</a></span>(java.io.ObjectInput&nbsp;in)</code>&nbsp;</td>
</tr>
<tr id="i102" class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#spaceForCopy-int-int-">spaceForCopy</a></span>(int&nbsp;spaceNeeded,
            int&nbsp;source_id)</code>
<div class="block">Does this page have enough space to move the row to it.</div>
</td>
</tr>
<tr id="i103" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#spaceForCopy-int-int:A-">spaceForCopy</a></span>(int&nbsp;num_rows,
            int[]&nbsp;spaceNeeded)</code>
<div class="block">Does this page have enough space to insert the input rows?</div>
</td>
</tr>
<tr id="i104" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#spaceForInsert--">spaceForInsert</a></span>()</code>
<div class="block">Is there minimal space for insert?</div>
</td>
</tr>
<tr id="i105" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#spaceForInsert-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-int-">spaceForInsert</a></span>(java.lang.Object[]&nbsp;row,
              <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;validColumns,
              int&nbsp;overflowThreshold)</code>
<div class="block">Is row guaranteed to be inserted successfully on this page?</div>
</td>
</tr>
<tr id="i106" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#spaceForInsert-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-int-int-int-">spaceForInsert</a></span>(java.lang.Object[]&nbsp;row,
              <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;validColumns,
              int&nbsp;spaceNeeded,
              int&nbsp;startColumn,
              int&nbsp;overflowThreshold)</code>
<div class="block">Is row guaranteed to be inserted successfully on this page?</div>
</td>
</tr>
<tr id="i107" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#storeField-org.apache.derby.iapi.store.raw.log.LogInstant-int-int-java.io.ObjectInput-">storeField</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant,
          int&nbsp;slot,
          int&nbsp;fieldNumber,
          java.io.ObjectInput&nbsp;in)</code>
<div class="block">storeField</div>
</td>
</tr>
<tr id="i108" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#storeRecord-org.apache.derby.iapi.store.raw.log.LogInstant-int-boolean-java.io.ObjectInput-">storeRecord</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant,
           int&nbsp;slot,
           boolean&nbsp;insert,
           java.io.ObjectInput&nbsp;in)</code>
<div class="block">Store a record at the given slot.</div>
</td>
</tr>
<tr id="i109" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#storeRecordForInsert-int-java.io.ObjectInput-">storeRecordForInsert</a></span>(int&nbsp;slot,
                    java.io.ObjectInput&nbsp;in)</code>&nbsp;</td>
</tr>
<tr id="i110" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#storeRecordForUpdate-int-java.io.ObjectInput-">storeRecordForUpdate</a></span>(int&nbsp;slot,
                    java.io.ObjectInput&nbsp;in)</code>&nbsp;</td>
</tr>
<tr id="i111" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#toString--">toString</a></span>()</code>
<div class="block">debugging, print this page</div>
</td>
</tr>
<tr id="i112" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#toUncheckedString--">toUncheckedString</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i113" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#unfilled--">unfilled</a></span>()</code>
<div class="block">Is this page unfilled?</div>
</td>
</tr>
<tr id="i114" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#updateChecksum--">updateChecksum</a></span>()</code>
<div class="block">Recalculate checksum and write it to the page array.</div>
</td>
</tr>
<tr id="i115" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#updateFieldAtSlot-int-int-java.lang.Object-org.apache.derby.iapi.store.access.conglomerate.LogicalUndo-">updateFieldAtSlot</a></span>(int&nbsp;slot,
                 int&nbsp;fieldId,
                 java.lang.Object&nbsp;newValue,
                 <a href="../../../../../../../org/apache/derby/iapi/store/access/conglomerate/LogicalUndo.html" title="interface in org.apache.derby.iapi.store.access.conglomerate">LogicalUndo</a>&nbsp;undo)</code>
<div class="block">Update field at specified slot</div>
</td>
</tr>
<tr id="i116" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#updateFieldOverflowDetails-org.apache.derby.iapi.store.raw.RecordHandle-org.apache.derby.iapi.store.raw.RecordHandle-">updateFieldOverflowDetails</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;handle,
                          <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;overflowHandle)</code>
<div class="block">Update the overflow pointer for a long column

                <BR> MT - latched - page latch must be held</div>
</td>
</tr>
<tr id="i117" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#updateOverflowDetails-org.apache.derby.iapi.store.raw.RecordHandle-org.apache.derby.iapi.store.raw.RecordHandle-">updateOverflowDetails</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;handle,
                     <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;overflowHandle)</code>
<div class="block">Update a record handle to point to an overflowed record portion.</div>
</td>
</tr>
<tr id="i118" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#updateOverflowDetails-org.apache.derby.impl.store.raw.data.StoredPage-org.apache.derby.iapi.store.raw.RecordHandle-org.apache.derby.iapi.store.raw.RecordHandle-">updateOverflowDetails</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html" title="class in org.apache.derby.impl.store.raw.data">StoredPage</a>&nbsp;handlePage,
                     <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;handle,
                     <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;overflowHandle)</code>&nbsp;</td>
</tr>
<tr id="i119" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#updateOverflowed-org.apache.derby.iapi.store.raw.xact.RawTransaction-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-org.apache.derby.impl.store.raw.data.StoredRecordHeader-">updateOverflowed</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/RawTransaction.html" title="class in org.apache.derby.iapi.store.raw.xact">RawTransaction</a>&nbsp;t,
                int&nbsp;slot,
                java.lang.Object[]&nbsp;row,
                <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;validColumns,
                <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;recordHeader)</code>
<div class="block">Update an already overflowed record.</div>
</td>
</tr>
<tr id="i120" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#updatePageHeader--">updatePageHeader</a></span>()</code>
<div class="block">Update the page header in the page array.</div>
</td>
</tr>
<tr id="i121" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#updatePageVersion--">updatePageVersion</a></span>()</code>
<div class="block">Update the page version number in the byte array</div>
</td>
</tr>
<tr id="i122" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#updateRecordPortionLength-int-int-int-">updateRecordPortionLength</a></span>(int&nbsp;slot,
                         int&nbsp;delta,
                         int&nbsp;reservedDelta)</code>
<div class="block">Update the length of data stored on this page for this record
 
 Update both the record length "field" and the reserved space "field"
 of the slot table entry associated with "slot".</div>
</td>
</tr>
<tr id="i123" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#usePageBuffer-byte:A-">usePageBuffer</a></span>(byte[]&nbsp;pageBuffer)</code>
<div class="block">use this passed in page buffer as this object's page data.</div>
</td>
</tr>
<tr id="i124" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#validateChecksum-org.apache.derby.iapi.store.raw.PageKey-">validateChecksum</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/PageKey.html" title="class in org.apache.derby.iapi.store.raw">PageKey</a>&nbsp;id)</code>
<div class="block">Validate the check sum on the page.</div>
</td>
</tr>
<tr id="i125" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#writeFormatId-org.apache.derby.iapi.store.raw.PageKey-">writeFormatId</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/PageKey.html" title="class in org.apache.derby.iapi.store.raw">PageKey</a>&nbsp;identity)</code>
<div class="block">Write out the format id of this page</div>
</td>
</tr>
<tr id="i126" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html#writePage-org.apache.derby.iapi.store.raw.PageKey-">writePage</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/PageKey.html" title="class in org.apache.derby.iapi.store.raw">PageKey</a>&nbsp;identity)</code>
<div class="block">Write information about page from variables into page byte array.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.derby.impl.store.raw.data.CachedPage">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.derby.impl.store.raw.data.<a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html" title="class in org.apache.derby.impl.store.raw.data">CachedPage</a></h3>
<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#clean-boolean-">clean</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#clearIdentity--">clearIdentity</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#createIdentity-java.lang.Object-java.lang.Object-">createIdentity</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#getPageArray--">getPageArray</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#isActuallyDirty--">isActuallyDirty</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#isDirty--">isDirty</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#preDirty--">preDirty</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#setContainerRowCount-long-">setContainerRowCount</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#setDirty--">setDirty</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#setFactory-org.apache.derby.impl.store.raw.data.BaseDataFileFactory-">setFactory</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#setIdentity-java.lang.Object-">setIdentity</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#setPageArray-int-">setPageArray</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.derby.impl.store.raw.data.BasePage">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.derby.impl.store.raw.data.<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></h3>
<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#bumpPageVersion--">bumpPageVersion</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#bumpRecordCount-int-">bumpRecordCount</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#cleanPageForReuse--">cleanPageForReuse</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#clearLastLogInstant--">clearLastLogInstant</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#compactRecord-org.apache.derby.iapi.store.raw.RecordHandle-">compactRecord</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#copyAndPurge-org.apache.derby.iapi.store.raw.Page-int-int-int-">copyAndPurge</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#deallocatePage--">deallocatePage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#deleteAtSlot-int-boolean-org.apache.derby.iapi.store.access.conglomerate.LogicalUndo-">deleteAtSlot</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#fetchFieldFromSlot-int-int-java.lang.Object-">fetchFieldFromSlot</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#fetchFromSlot-org.apache.derby.iapi.store.raw.RecordHandle-int-java.lang.Object:A-org.apache.derby.iapi.store.raw.FetchDescriptor-boolean-">fetchFromSlot</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#fetchNumFields-org.apache.derby.iapi.store.raw.RecordHandle-">fetchNumFields</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#fillInIdentity-org.apache.derby.iapi.store.raw.PageKey-">fillInIdentity</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#findRecordById-int-int-">findRecordById</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#getAuxObject--">getAuxObject</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#getHeaderAtSlot-int-">getHeaderAtSlot</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#getIdentity--">getIdentity</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#getInvalidRecordHandle--">getInvalidRecordHandle</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#getLastLogInstant--">getLastLogInstant</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#getNextSlotNumber-org.apache.derby.iapi.store.raw.RecordHandle-">getNextSlotNumber</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#getPageId--">getPageId</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#getPageKey--">getPageKey</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#getPageNumber--">getPageNumber</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#getPageStatus--">getPageStatus</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#getPageVersion--">getPageVersion</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#getRecordHandle-int-">getRecordHandle</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#getRecordHandleAtSlot-int-">getRecordHandleAtSlot</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#getSlotNumber-org.apache.derby.iapi.store.raw.RecordHandle-">getSlotNumber</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#initializeHeaders-int-">initializeHeaders</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#initPage-int-long-">initPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#insert-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-byte-int-">insert</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#insertAllowOverflow-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-int-byte-int-org.apache.derby.iapi.store.raw.RecordHandle-">insertAllowOverflow</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#insertLongColumn-org.apache.derby.impl.store.raw.data.BasePage-org.apache.derby.impl.store.raw.data.LongColumnException-byte-">insertLongColumn</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#insertNoOverflow-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-org.apache.derby.iapi.store.access.conglomerate.LogicalUndo-byte-int-">insertNoOverflow</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#internalNonDeletedRecordCount--">internalNonDeletedRecordCount</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#isDeletedAtSlot-int-">isDeletedAtSlot</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#isDeletedOnPage-int-">isDeletedOnPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#isLatched--">isLatched</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#isRepositionNeeded-long-">isRepositionNeeded</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#makeRecordHandle-int-">makeRecordHandle</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#MakeRecordHandle-org.apache.derby.iapi.store.raw.PageKey-int-">MakeRecordHandle</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#nonDeletedRecordCount--">nonDeletedRecordCount</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#purgeAtSlot-int-int-boolean-">purgeAtSlot</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#recordCount--">recordCount</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#recordExists-org.apache.derby.iapi.store.raw.RecordHandle-boolean-">recordExists</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#removeAndShiftDown-int-">removeAndShiftDown</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#setAuxObject-org.apache.derby.iapi.store.raw.AuxObject-">setAuxObject</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#setDeleteStatus-int-boolean-">setDeleteStatus</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#setExclusive-org.apache.derby.impl.store.raw.data.BaseContainerHandle-">setExclusive</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#setExclusiveNoWait-org.apache.derby.impl.store.raw.data.BaseContainerHandle-">setExclusiveNoWait</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#setHeaderAtSlot-int-org.apache.derby.impl.store.raw.data.StoredRecordHeader-">setHeaderAtSlot</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#setPageStatus-byte-">setPageStatus</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#setPageVersion-long-">setPageVersion</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#setRepositionNeeded--">setRepositionNeeded</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#shiftUp-int-">shiftUp</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#shouldReclaimSpace-int-int-">shouldReclaimSpace</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#slotTableToString--">slotTableToString</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#unlatch--">unlatch</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#update-org.apache.derby.iapi.services.monitor.DerbyObservable-java.lang.Object-">update</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#updateAtSlot-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-">updateAtSlot</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#updateLastLogInstant-org.apache.derby.iapi.store.raw.log.LogInstant-">updateLastLogInstant</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.derby.iapi.services.cache.Cacheable">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.apache.derby.iapi.services.cache.<a href="../../../../../../../org/apache/derby/iapi/services/cache/Cacheable.html" title="interface in org.apache.derby.iapi.services.cache">Cacheable</a></h3>
<code><a href="../../../../../../../org/apache/derby/iapi/services/cache/Cacheable.html#getIdentity--">getIdentity</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="FORMAT_NUMBER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FORMAT_NUMBER</h4>
<pre>public static final&nbsp;int FORMAT_NUMBER</pre>
<div class="block">static final Fields of the class</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.data.StoredPage.FORMAT_NUMBER">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="PAGE_HEADER_OFFSET">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PAGE_HEADER_OFFSET</h4>
<pre>protected static final&nbsp;int PAGE_HEADER_OFFSET</pre>
<div class="block">Start of page, formatId must fit in 4 bytes.
 <p>
 where the page header starts - page format is mandated by cached page</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.data.StoredPage.PAGE_HEADER_OFFSET">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="PAGE_HEADER_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PAGE_HEADER_SIZE</h4>
<pre>protected static final&nbsp;int PAGE_HEADER_SIZE</pre>
<div class="block">Fixed size of the page header</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.data.StoredPage.PAGE_HEADER_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="RECORD_SPACE_OFFSET">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>RECORD_SPACE_OFFSET</h4>
<pre>protected static final&nbsp;int RECORD_SPACE_OFFSET</pre>
<div class="block">Start of the record storage area.
 <p>
 Note: a subclass may change the start of the record storage area.  
 Don't always count on this number.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.data.StoredPage.RECORD_SPACE_OFFSET">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="PAGE_VERSION_OFFSET">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PAGE_VERSION_OFFSET</h4>
<pre>protected static final&nbsp;int PAGE_VERSION_OFFSET</pre>
<div class="block">offset of the page version number</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.data.StoredPage.PAGE_VERSION_OFFSET">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="SMALL_SLOT_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SMALL_SLOT_SIZE</h4>
<pre>protected static final&nbsp;int SMALL_SLOT_SIZE</pre>
<div class="block">SMALL_SLOT_SIZE are for pages smaller than 64K,
 LARGE_SLOT_SIZE is for pages bigger than 64K.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.data.StoredPage.SMALL_SLOT_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="LARGE_SLOT_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LARGE_SLOT_SIZE</h4>
<pre>protected static final&nbsp;int LARGE_SLOT_SIZE</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.data.StoredPage.LARGE_SLOT_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="CHECKSUM_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CHECKSUM_SIZE</h4>
<pre>protected static final&nbsp;int CHECKSUM_SIZE</pre>
<div class="block">Size of the checksum stored on the page.

 The checksum is stored in the last 8 bytes of the page, the slot table
 grows backward up the page starting at the end of the page just before
 the checksum.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.data.StoredPage.CHECKSUM_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="OVERFLOW_POINTER_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>OVERFLOW_POINTER_SIZE</h4>
<pre>protected static final&nbsp;int OVERFLOW_POINTER_SIZE</pre>
<div class="block">OVERFLOW_POINTER_SIZE - Number of bytes to reserve for overflow pointer
 
 The overflow pointer is the pointer that the takes the place of the 
 last column of a row if the row can't fit on the page.  The pointer
 then points to another page where the next column of the row can be
 found.  The overflow pointer can be bigger than a row, so when 
 overflowing a row the code must overflow enough columns so that there
 is enough free space to write the row.  Note this means that the
 minimum space a row can take on a page must allow for at least the
 size of the overflow pointers so that if the row is updated it can 
 write the over flow pointer.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.data.StoredPage.OVERFLOW_POINTER_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="OVERFLOW_PTR_FIELD_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>OVERFLOW_PTR_FIELD_SIZE</h4>
<pre>protected static final&nbsp;int OVERFLOW_PTR_FIELD_SIZE</pre>
<div class="block">OVERFLOW_PTR_FIELD_SIZE - Number of bytes of an overflow field
 
 This is the length to reserve for either a column or row overflow
 pointer field.  It includes the size of the field header plus the 
 maxium length of the overflow pointer (it could be shorter due to
 compressed storage).

 The calcualtion is:

 OVERFLOW_PTR_FIELD_SIZE = 
     OVERFLOW_POINTER_SIZE + 
     sizeof(status byte) + 
     sizeof(field length field for a field which is just an overflow ptr)</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.data.StoredPage.OVERFLOW_PTR_FIELD_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="bh">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bh</h4>
<pre><a href="../../../../../../../org/apache/derby/impl/store/raw/data/ByteHolder.html" title="interface in org.apache.derby.impl.store.raw.data">ByteHolder</a> bh</pre>
<div class="block">In memory buffer used as scratch space for streaming columns.</div>
</li>
</ul>
<a name="COLUMN_NONE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>COLUMN_NONE</h4>
<pre>protected static final&nbsp;int COLUMN_NONE</pre>
<div class="block">Constants used in call to logColumn.
 <p>
 Action taken in this routine is determined by the kind of column as
 specified in the columnFlag:
     COLUMN_NONE   - the column is insignificant
     COLUMN_FIRST  - this is the first column in a logRow() call
     COLUMN_LONG   - this is a known long column, therefore we will 
                     store part of the column on the current page and 
                     overflow the rest if necessary.
     COLUMN_CREATE_NULL   - the column was recently added.
                  it doesn't actually exist in the on-disk row yet.
                  we will need to put a null in it as soon as possible.
                  see DERBY-5679.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.data.StoredPage.COLUMN_NONE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="COLUMN_FIRST">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>COLUMN_FIRST</h4>
<pre>protected static final&nbsp;int COLUMN_FIRST</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.data.StoredPage.COLUMN_FIRST">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="COLUMN_LONG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>COLUMN_LONG</h4>
<pre>protected static final&nbsp;int COLUMN_LONG</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.data.StoredPage.COLUMN_LONG">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="COLUMN_CREATE_NULL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>COLUMN_CREATE_NULL</h4>
<pre>protected static final&nbsp;int COLUMN_CREATE_NULL</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.data.StoredPage.COLUMN_CREATE_NULL">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="maxFieldSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maxFieldSize</h4>
<pre>private&nbsp;int maxFieldSize</pre>
<div class="block">maxFieldSize is a worst case calculation for the size of a record
 on an empty page, with a single field, but still allow room for 
 an overflow pointer if another field is to be added.  See initSpace().
 maxFieldSize is a worst case calculation for the size of a record
 
 This is used as the threshold for a long column.
 
 maxFieldSize = 
      totalSpace - slotEntrySize - 16 - OVERFLOW_POINTER_SIZE;</div>
</li>
</ul>
<a name="isOverflowPage">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isOverflowPage</h4>
<pre>private&nbsp;boolean isOverflowPage</pre>
<div class="block">The page header is a fixed size, 56 bytes, following are variables used
 to access the fields in the header:
 <p>
  1 byte  boolean isOverflowPage  is page an overflow page
  1 byte  byte    pageStatus      page status (field in base page)
  8 bytes long    pageVersion     page version (field in base page)
  2 bytes ushort  slotsInUse      number of slots in slot offset table
  4 bytes integer nextId          next record identifier
  4 bytes integer generation      generation number of this page(FUTURE USE)
  4 bytes integer prevGeneration  previous generation of page (FUTURE USE)
  8 bytes long    bipLocation     the location of the BI page (FUTURE USE)
  2 bytes ushort  deletedRowCount number of deleted rows on page.(rel 2.0)
  2 bytes long                    spare for future use
  4 bytes long                    spare (encryption writes random bytes)
  8 bytes long                    spare for future use
  8 bytes long                    spare for future use

  Note that spare space has been guaranteed to be writen with "0", so
  that future use of field should not either not use "0" as a valid data 
  item or pick 0 as a valid default value so that on the fly upgrade can 
  assume that 0 means field was never assigned.</div>
</li>
</ul>
<a name="slotsInUse">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>slotsInUse</h4>
<pre>private&nbsp;int slotsInUse</pre>
</li>
</ul>
<a name="nextId">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nextId</h4>
<pre>private&nbsp;int nextId</pre>
</li>
</ul>
<a name="generation">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generation</h4>
<pre>private&nbsp;int generation</pre>
</li>
</ul>
<a name="prevGeneration">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prevGeneration</h4>
<pre>private&nbsp;int prevGeneration</pre>
</li>
</ul>
<a name="bipLocation">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bipLocation</h4>
<pre>private&nbsp;long bipLocation</pre>
</li>
</ul>
<a name="deletedRowCount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deletedRowCount</h4>
<pre>private&nbsp;int deletedRowCount</pre>
</li>
</ul>
<a name="headerOutOfDate">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>headerOutOfDate</h4>
<pre>private&nbsp;boolean headerOutOfDate</pre>
<div class="block">Is the header in the byte array out of date wrt the fields.
 <p>
 this field must be set to true whenever one of the above header fields 
 is modified.  Ie any of (isOverflowPage, slotsInUse, nextId, generation,
 prevGeneration, bipLocation, deletedRowCount)</div>
</li>
</ul>
<a name="checksum">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checksum</h4>
<pre>private&nbsp;java.util.zip.CRC32 checksum</pre>
<div class="block">holder for the checksum.</div>
</li>
</ul>
<a name="minimumRecordSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>minimumRecordSize</h4>
<pre>protected&nbsp;int minimumRecordSize</pre>
<div class="block">Minimum space to reserve for record portion length of row.
 <p>
 minimumRecordSize is stored in the container handle.  It is used to 
 reserve minimum space for recordPortionLength.  Default is 1.  To
 get the value from the container handle: 
 myContainer.getMinimumRecordSize();

 minimumRecordSize is the minimum user record size, excluding the space we
 use for the record header and field headers.  When a record is inserted,
 it is stored in a space at least as large as the sum of the 
 minimumRecordSize and total header size.

 For example,
 If minimumRecordSize is 10 bytes,
     the user record is 7 bytes,
     we used 5 bytes for record and field headers,
     this record will take (10 + 5) bytes of space, extra 3 bytes is 
     put into reserve.

 If minimumRecordSize is 10 bytes,
     user record is 17 bytes,
     we used 5 bytes for record and field headers,
     this record will take (17 + 5) bytes of space, no reserve space 
     here.

 minimumRecordSize is defined by user on per container basis.
 The default for minimumRecordSize is set to 1.</div>
</li>
</ul>
<a name="userRowSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>userRowSize</h4>
<pre>private&nbsp;int userRowSize</pre>
<div class="block">scratch variable used to keep track of the total user size for the row.
 the information is used by logRow to maintain minimumRecordSize
 on Page.  minimumRecordSize is only considered for main data pages,
 therefore, the page must be latched during an insert operation.</div>
</li>
</ul>
<a name="slotFieldSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>slotFieldSize</h4>
<pre>private&nbsp;int slotFieldSize</pre>
<div class="block">slot field and slot entry size.
 <p>
 The size of these fields is dependant on the page size.
 These 2 variables should be set when pageSize is determined, and should
 not be changed for that page.

 Each slot entry contains 3 fields (slotOffet, recordPortionLength and
 reservedSpace) for the record the slot is pointing to.
 slotFieldSize is the size for each of the slot field.
 slotEntrySize is the total space used for a single slot entry.</div>
</li>
</ul>
<a name="slotEntrySize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>slotEntrySize</h4>
<pre>private&nbsp;int slotEntrySize</pre>
</li>
</ul>
<a name="slotTableOffsetToFirstEntry">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>slotTableOffsetToFirstEntry</h4>
<pre>private&nbsp;int slotTableOffsetToFirstEntry</pre>
<div class="block">Offset of the first entry in the slot table.
 <p>
 Offset table is located at end of page, just before checksum.  It
 grows backward as an array from this point toward the middle of the
 page.
 <p>
 slotTableOffsetToFirstEntry is the offset to the beginning of the
 first entry (slot[0]) in the slot table.  This allows the following
 math to get to the offset of N'th entry in the slot table:

     offset of slot[N] = slotTableOffsetToFirstEntry + (N * slotEntrySize)</div>
</li>
</ul>
<a name="slotTableOffsetToFirstRecordLengthField">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>slotTableOffsetToFirstRecordLengthField</h4>
<pre>private&nbsp;int slotTableOffsetToFirstRecordLengthField</pre>
<div class="block">Offset of the record length entry in the 1st slot table entry.
 <p>
 Offset table is located at end of page, just before checksum.  It
 grows backward as an array from this point toward the middle of the
 page.  The record length is stored as the second "field" of the 
 slot table entry.
 <p>
 slotTableOffsetToFirstRecordLengthField is the offset to the beginning 
 of the record length field in the first entry (slot[0]) in the slot 
 table.  This allows the following
 math to get to the record length field of N'th entry in the slot table:

     offset of record length of slot[N] slot entry = 
         slotTableOffsetToFirstRecordLengthField + (N * slotEntrySize)</div>
</li>
</ul>
<a name="slotTableOffsetToFirstReservedSpaceField">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>slotTableOffsetToFirstReservedSpaceField</h4>
<pre>private&nbsp;int slotTableOffsetToFirstReservedSpaceField</pre>
<div class="block">Offset of the reserved space length entry in the 1st slot table entry.
 <p>
 Offset table is located at end of page, just before checksum.  It
 grows backward as an array from this point toward the middle of the
 page.  The reserved space length is stored as the third "field" of the 
 slot table entry.
 <p>
 slotTableOffsetToFirstReservedSpaceField is the offset to the beginning 
 of the reserved space field in the first entry (slot[0]) in the slot 
 table.  This allows the following
 math to get to the reserved space field of N'th entry in the slot table:

     offset of reserved space of slot[N] slot entry = 
         slotTableOffsetToFirstReservedSpaceField + (N * slotEntrySize)</div>
</li>
</ul>
<a name="totalSpace">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>totalSpace</h4>
<pre>protected&nbsp;int totalSpace</pre>
<div class="block">total usable space on a page.
 <p>
 This is the space not taken by page hdr, page table, and existing
 slot entries/rows.</div>
</li>
</ul>
<a name="freeSpace">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>freeSpace</h4>
<pre>protected&nbsp;int freeSpace</pre>
</li>
</ul>
<a name="firstFreeByte">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>firstFreeByte</h4>
<pre>private&nbsp;int firstFreeByte</pre>
</li>
</ul>
<a name="spareSpace">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>spareSpace</h4>
<pre>protected&nbsp;int spareSpace</pre>
<div class="block">% of page to keep free for updates.
 <p>
 How much of a head page should be reserved as "free" so that the space
 can be used by update which expands the row without needing to overflow
 it.  1 means save 1% of the free space for expansion.</div>
</li>
</ul>
<a name="overflowRecordHeader">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>overflowRecordHeader</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a> overflowRecordHeader</pre>
<div class="block">Scratch variable used when you need a overflowRecordHeader.  Declared
 globally so that object is only allocated once per page.</div>
</li>
</ul>
<a name="rawDataIn">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rawDataIn</h4>
<pre>protected&nbsp;<a href="../../../../../../../org/apache/derby/iapi/services/io/ArrayInputStream.html" title="class in org.apache.derby.iapi.services.io">ArrayInputStream</a> rawDataIn</pre>
<div class="block">Input streams used to read/write bytes to/from the page byte array.</div>
</li>
</ul>
<a name="rawDataOut">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rawDataOut</h4>
<pre>protected&nbsp;<a href="../../../../../../../org/apache/derby/iapi/services/io/ArrayOutputStream.html" title="class in org.apache.derby.iapi.services.io">ArrayOutputStream</a> rawDataOut</pre>
</li>
</ul>
<a name="logicalDataOut">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>logicalDataOut</h4>
<pre>protected&nbsp;<a href="../../../../../../../org/apache/derby/iapi/services/io/FormatIdOutputStream.html" title="class in org.apache.derby.iapi.services.io">FormatIdOutputStream</a> logicalDataOut</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="StoredPage--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>StoredPage</h4>
<pre>public&nbsp;StoredPage()</pre>
<div class="block">Simple no-arg constructor for StoredPage.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getTypeFormatId--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTypeFormatId</h4>
<pre>public&nbsp;int&nbsp;getTypeFormatId()</pre>
<div class="block">Return my format identifier.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The identifier. (A UUID stuffed in an array
          of 16 bytes).</dd>
</dl>
</li>
</ul>
<a name="getOverFlowRecordHeader--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOverFlowRecordHeader</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;getOverFlowRecordHeader()
                                            throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">get scratch space for over flow record header.
 <p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="initialize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialize</h4>
<pre>protected&nbsp;void&nbsp;initialize()</pre>
<div class="block">Initialize the StoredPage.
 <p>
 Initialize the object, ie. perform work normally perfomed in constructor.
 Called by setIdentity() and createIdentity() - the Cacheable interfaces
 which are used to move a page in/out of cache.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#initialize--">initialize</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html" title="class in org.apache.derby.impl.store.raw.data">CachedPage</a></code></dd>
</dl>
</li>
</ul>
<a name="createOutStreams--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createOutStreams</h4>
<pre>private&nbsp;void&nbsp;createOutStreams()</pre>
<div class="block">Create the output streams.
 <p>
 Create the output streams, these are created on demand
 to avoid creating unrequired objects for pages that are
 never modified during their lifetime in the cache.
 <p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="setOutputStream-java.io.OutputStream-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setOutputStream</h4>
<pre>private&nbsp;void&nbsp;setOutputStream(java.io.OutputStream&nbsp;out)</pre>
<div class="block">Tie the logical output stream to a passed in OutputStream.
 <p>
 Tie the logical output stream to a passed in OutputStream with
 no limit as to the number of bytes that can be written.</div>
</li>
</ul>
<a name="resetOutputStream--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resetOutputStream</h4>
<pre>private&nbsp;void&nbsp;resetOutputStream()</pre>
<div class="block">Reset the logical output stream.
 <p>
 Reset the logical output stream (logicalDataOut) to be attached
 to the page array stream as is the norm, no limits are placed 
 on any writes.</div>
</li>
</ul>
<a name="usePageBuffer-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>usePageBuffer</h4>
<pre>protected&nbsp;void&nbsp;usePageBuffer(byte[]&nbsp;pageBuffer)</pre>
<div class="block">use this passed in page buffer as this object's page data.
 <p>
 The page content may not have been read in from disk yet.
 For pagesize smaller than 64K:
      Size of the record offset stored in a slot (unsigned short)
      Size of the record portion length stored in a slot (unsigned short)
      Size of the record portion length stored in a slot (unsigned short)
  For pagesize greater than 64K, but less than 2gig:
      Size of the record offset stored in a slot (int)
      Size of the record portion length stored in a slot (int)
      Size of the record portion length stored in a slot (int)
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#usePageBuffer-byte:A-">usePageBuffer</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html" title="class in org.apache.derby.impl.store.raw.data">CachedPage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pageBuffer</code> - The array of bytes to use as the page buffer.</dd>
</dl>
</li>
</ul>
<a name="calculateSlotFieldSize-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateSlotFieldSize</h4>
<pre>private&nbsp;int&nbsp;calculateSlotFieldSize(int&nbsp;pageSize)</pre>
<div class="block">Calculate the slot field size from the page size.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pageSize</code> - page size in bytes</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>slot field size in bytes</dd>
</dl>
</li>
</ul>
<a name="createPage-org.apache.derby.iapi.store.raw.PageKey-org.apache.derby.impl.store.raw.data.PageCreationArgs-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createPage</h4>
<pre>protected&nbsp;void&nbsp;createPage(<a href="../../../../../../../org/apache/derby/iapi/store/raw/PageKey.html" title="class in org.apache.derby.iapi.store.raw">PageKey</a>&nbsp;newIdentity,
                          <a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageCreationArgs.html" title="class in org.apache.derby.impl.store.raw.data">PageCreationArgs</a>&nbsp;args)
                   throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Create a new StoredPage.
 <p>
 Make this object represent a new page (ie. a page that never existed
 before, as opposed to reading in an existing page from disk).
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#createPage-org.apache.derby.iapi.store.raw.PageKey-org.apache.derby.impl.store.raw.data.PageCreationArgs-">createPage</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html" title="class in org.apache.derby.impl.store.raw.data">CachedPage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newIdentity</code> - The key describing page (segment,container,page).</dd>
<dd><code>args</code> - information stored about the page, once in the 
                      container header and passed in through the object.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="initFromData-org.apache.derby.impl.store.raw.data.FileContainer-org.apache.derby.iapi.store.raw.PageKey-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initFromData</h4>
<pre>protected&nbsp;void&nbsp;initFromData(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html" title="class in org.apache.derby.impl.store.raw.data">FileContainer</a>&nbsp;myContainer,
                            <a href="../../../../../../../org/apache/derby/iapi/store/raw/PageKey.html" title="class in org.apache.derby.iapi.store.raw">PageKey</a>&nbsp;newIdentity)
                     throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Initialize the page from values in the page buffer.
 <p>
 Initialize in memory structure using the buffer in pageData.  This
 is how a StoredPage object is intialized to represent page read in
 from disk.
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#initFromData-org.apache.derby.impl.store.raw.data.FileContainer-org.apache.derby.iapi.store.raw.PageKey-">initFromData</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html" title="class in org.apache.derby.impl.store.raw.data">CachedPage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>myContainer</code> - The container to read the page in from.</dd>
<dd><code>newIdentity</code> - The key representing page being read in (segment,
                      container, page number)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - If the page cannot be read correctly, 
                              or is inconsistent.</dd>
</dl>
</li>
</ul>
<a name="validateChecksum-org.apache.derby.iapi.store.raw.PageKey-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>validateChecksum</h4>
<pre>protected&nbsp;void&nbsp;validateChecksum(<a href="../../../../../../../org/apache/derby/iapi/store/raw/PageKey.html" title="class in org.apache.derby.iapi.store.raw">PageKey</a>&nbsp;id)
                         throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Validate the check sum on the page.
 <p>
 Compare the check sum stored in the page on disk with the checksum
 calculated from the bytes on the page.
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - The key that describes the page.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="updateChecksum--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateChecksum</h4>
<pre>protected&nbsp;void&nbsp;updateChecksum()
                       throws java.io.IOException</pre>
<div class="block">Recalculate checksum and write it to the page array.
 <p>
 Recalculate the checksum of the page, and write the result back into
 the last bytes of the page.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if writing to end of array fails.</dd>
</dl>
</li>
</ul>
<a name="writePage-org.apache.derby.iapi.store.raw.PageKey-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writePage</h4>
<pre>protected&nbsp;void&nbsp;writePage(<a href="../../../../../../../org/apache/derby/iapi/store/raw/PageKey.html" title="class in org.apache.derby.iapi.store.raw">PageKey</a>&nbsp;identity)
                  throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Write information about page from variables into page byte array.
 <p>
 This routine insures that all information about the page is reflected
 in the page byte buffer.  This involves moving information from local
 variables into encoded version on the page in page header and checksum.
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#writePage-org.apache.derby.iapi.store.raw.PageKey-">writePage</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html" title="class in org.apache.derby.impl.store.raw.data">CachedPage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>identity</code> - The key of this page.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="writeFormatId-org.apache.derby.iapi.store.raw.PageKey-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeFormatId</h4>
<pre>protected&nbsp;void&nbsp;writeFormatId(<a href="../../../../../../../org/apache/derby/iapi/store/raw/PageKey.html" title="class in org.apache.derby.iapi.store.raw">PageKey</a>&nbsp;identity)
                      throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Write out the format id of this page</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#writeFormatId-org.apache.derby.iapi.store.raw.PageKey-">writeFormatId</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html" title="class in org.apache.derby.impl.store.raw.data">CachedPage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>identity</code> - The key of this page.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="releaseExclusive--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>releaseExclusive</h4>
<pre>protected&nbsp;void&nbsp;releaseExclusive()</pre>
<div class="block">Ensure that the page is released from the cache when it is unlatched.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html#releaseExclusive--">releaseExclusive</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/CachedPage.html" title="class in org.apache.derby.impl.store.raw.data">CachedPage</a></code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#releaseExclusive--"><code>BasePage.releaseExclusive()</code></a></dd>
</dl>
</li>
</ul>
<a name="getTotalSpace-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTotalSpace</h4>
<pre>public&nbsp;int&nbsp;getTotalSpace(int&nbsp;slot)
                  throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Return the total number of bytes used, reserved, or wasted by the
 record at this slot.
 <p>
 The amount of space the record on this slot is currently taking on the 
 page.

 If there is any reserve space or wasted space, count that in also
 Do NOT count the slot entry size
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#getTotalSpace-int-">getTotalSpace</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - look at row at this slot.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of bytes used by the row at slot "slot".</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="spaceForInsert--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>spaceForInsert</h4>
<pre>public&nbsp;boolean&nbsp;spaceForInsert()
                       throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Is there minimal space for insert?
 <p>
 Does quick calculation to see if average size row on this page could
 be inserted on the page.  This is done because the actual row size
 being inserted isn't known until we actually copy the columns from
 their object form into their on disk form which is expensive.  So
 we use this calculation so that in the normal case we only do one 
 copy of the row directly onto the page.
 <p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if we think the page will allow an insert, false otherwise.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="spaceForInsert-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>spaceForInsert</h4>
<pre>public&nbsp;boolean&nbsp;spaceForInsert(java.lang.Object[]&nbsp;row,
                              <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;validColumns,
                              int&nbsp;overflowThreshold)
                       throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Is row guaranteed to be inserted successfully on this page?
 <p>
 Return true if this record is guaranteed to be inserted successfully 
 using insert() or insertAtSlot(). This guarantee is only valid while
 the row remains unchanged and the page latch is held.
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>row</code> - The row to check for insert.</dd>
<dd><code>validColumns</code> - bit map to interpret valid columns in row.</dd>
<dd><code>overflowThreshold</code> - The percentage of the page to use for the
                              insert.  100 means use 100% of the page,
                              50 means use 50% of page (ie. make sure
                              2 rows fit per page).</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>bolean indicating if row can be inserted on this page.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="spaceForInsert-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>spaceForInsert</h4>
<pre>private&nbsp;boolean&nbsp;spaceForInsert(java.lang.Object[]&nbsp;row,
                               <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;validColumns,
                               int&nbsp;spaceNeeded,
                               int&nbsp;startColumn,
                               int&nbsp;overflowThreshold)
                        throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Is row guaranteed to be inserted successfully on this page?
 <p>
 Return true if this record is guaranteed to be inserted successfully 
 using insert() or insertAtSlot(). This guarantee is only valid while
 the row remains unchanged and the page latch is held.
 <p>
 This is a private call only used when calculating whether an overflow
 page can be used to insert part of an overflow row/column.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>row</code> - The row to check for insert.</dd>
<dd><code>validColumns</code> - bit map to interpret valid columns in row.</dd>
<dd><code>overflowThreshold</code> - The percentage of the page to use for the
                              insert.  100 means use 100% of the page,
                              50 means use 50% of page (ie. make sure
                              2 rows fit per page).</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>bolean indicating if row can be inserted on this page.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="unfilled--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unfilled</h4>
<pre>public&nbsp;boolean&nbsp;unfilled()</pre>
<div class="block">Is this page unfilled?
 <p>
 Returns true if page is relatively unfilled, 
 which means the page is &lt; 1/2 full and has enough space to insert an
 "average" sized row onto the page.
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#unfilled--">unfilled</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if page is relatively unfilled.</dd>
</dl>
</li>
</ul>
<a name="allowInsert--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allowInsert</h4>
<pre>public&nbsp;boolean&nbsp;allowInsert()</pre>
<div class="block">Is there enough space on the page to insert a minimum size row?
 <p>
 Calculate whether there is enough space on the page to insert a 
 minimum size row.  The calculation includes maintaining the required
 reserved space on the page for existing rows to grow on the page.
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#allowInsert--">allowInsert</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>boolean indicating if a minimum sized row can be inserted.</dd>
</dl>
</li>
</ul>
<a name="spaceForCopy-int-int:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>spaceForCopy</h4>
<pre>public&nbsp;boolean&nbsp;spaceForCopy(int&nbsp;num_rows,
                            int[]&nbsp;spaceNeeded)</pre>
<div class="block">Does this page have enough space to insert the input rows?
 <p>
 Can the rows with lengths spaceNeeded[0..num_rows-1] be copied onto
 this page?
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#spaceForCopy-int-int:A-">spaceForCopy</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>num_rows</code> - number of rows to check for.</dd>
<dd><code>spaceNeeded</code> - array of lengths of the rows to insert.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the sum of the lengths will fit on the page.</dd>
</dl>
</li>
</ul>
<a name="spaceForCopy-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>spaceForCopy</h4>
<pre>protected&nbsp;boolean&nbsp;spaceForCopy(int&nbsp;spaceNeeded,
                               int&nbsp;source_id)</pre>
<div class="block">Does this page have enough space to move the row to it.
 <p>
 Calculate if a row of length "spaceNeeded" with current record id
 "source_id" will fit on this page.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>spaceNeeded</code> - length of the row encoded with source_id record id.</dd>
<dd><code>source_id</code> - record id of the row being moved.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the record will fit on this page, after being given a
         new record id as the next id on this page.</dd>
</dl>
</li>
</ul>
<a name="restoreRecordFromSlot-int-java.lang.Object:A-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.iapi.store.raw.RecordHandle-org.apache.derby.impl.store.raw.data.StoredRecordHeader-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreRecordFromSlot</h4>
<pre>protected&nbsp;boolean&nbsp;restoreRecordFromSlot(int&nbsp;slot,
                                        java.lang.Object[]&nbsp;row,
                                        <a href="../../../../../../../org/apache/derby/iapi/store/raw/FetchDescriptor.html" title="class in org.apache.derby.iapi.store.raw">FetchDescriptor</a>&nbsp;fetchDesc,
                                        <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;recordToLock,
                                        <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;recordHeader,
                                        boolean&nbsp;isHeadRow)
                                 throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Read the record at the given slot into the given row.
 <P>
 This reads and initializes the columns in the row array from the raw 
 bytes stored in the page associated with the given slot.  If validColumns
 is non-null then it will only read those columns indicated by the bit
 set, otherwise it will try to read into every column in row[].  
 <P>
 If there are more columns than entries in row[] then it just stops after
 every entry in row[] is full.
 <P>
 If there are more entries in row[] than exist on disk, the requested 
 excess columns will be set to null by calling the column's object's
 restoreToNull() routine (ie.  ((Object) column).restoreToNull() ).
 <P>
 If a qualifier list is provided then the row will only be read from
 disk if all of the qualifiers evaluate true.  Some of the columns may
 have been read into row[] in the process of evaluating the qualifier.
 <p>
 This routine should only be called on the head portion of a row, it
 will call a utility routine to read the rest of the row if it is a
 long row.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#restoreRecordFromSlot-int-java.lang.Object:A-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.iapi.store.raw.RecordHandle-org.apache.derby.impl.store.raw.data.StoredRecordHeader-boolean-">restoreRecordFromSlot</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - the slot number</dd>
<dd><code>row</code> - (out)         filled in sparse row</dd>
<dd><code>fetchDesc</code> - Information describing fetch, including what
                          columns to fetch and qualifiers.</dd>
<dd><code>recordToLock</code> - the record handle for the row at top level,
                          and is used in OverflowInputStream to lock the 
                          row for Blobs/Clobs.</dd>
<dd><code>isHeadRow</code> - The row on this page includes the head record
                          handle.  Will be false for the overflow portions
                          of a "long" row, where columns of a row span
                          multiple pages.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>false if a qualifier_list is provided and the row does not 
          qualifier (no row read in that case), else true.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="restoreLongRecordFromSlot-java.lang.Object:A-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.iapi.store.raw.RecordHandle-org.apache.derby.impl.store.raw.data.StoredRecordHeader-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreLongRecordFromSlot</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;restoreLongRecordFromSlot(java.lang.Object[]&nbsp;row,
                                                     <a href="../../../../../../../org/apache/derby/iapi/store/raw/FetchDescriptor.html" title="class in org.apache.derby.iapi.store.raw">FetchDescriptor</a>&nbsp;fetchDesc,
                                                     <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;recordToLock,
                                                     <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;parent_recordHeader)
                                              throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="newRecordId--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newRecordId</h4>
<pre>public&nbsp;int&nbsp;newRecordId()</pre>
<div class="block">Create a new record handle.
 <p>
 Return the next record id for allocation.  Callers of this interface
 expect the next id to get bumped some where else - probably by
 storeRecordForInsert().
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#newRecordId--">newRecordId</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The next id to assing to a row.</dd>
</dl>
</li>
</ul>
<a name="newRecordIdAndBump--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newRecordIdAndBump</h4>
<pre>public&nbsp;int&nbsp;newRecordIdAndBump()</pre>
<div class="block">Create a new record handle, and bump the id.
 <p>
 Create a new record handle, and bump the id while holding the latch
 so that no other user can ever see this record id.  This will lead
 to unused record id's in the case where an insert fails because there
 is not enough space on the page.
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#newRecordIdAndBump--">newRecordIdAndBump</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The next id to assing to a row.</dd>
</dl>
</li>
</ul>
<a name="newRecordId-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newRecordId</h4>
<pre>protected&nbsp;int&nbsp;newRecordId(int&nbsp;recordId)</pre>
<div class="block">Create a new record id based on current one passed in.
 <p>
 This interface is used for the "copy" insert interface of raw store
 where multiple rows are inserted into a page in a single logged 
 operation.  We don't want to bump the id until the operation is logged
 so we just allocated each id in order and then bump the next id at
 the end of the operation.
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#newRecordId-int-">newRecordId</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>recordId</code> - The id caller just used, return the next one.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the next id based on the input id.</dd>
</dl>
</li>
</ul>
<a name="isOverflowPage--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isOverflowPage</h4>
<pre>public&nbsp;boolean&nbsp;isOverflowPage()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#isOverflowPage--">BasePage</a></code></span></div>
<div class="block">Return true if the page is an overflow page, false if not.
                For implementation that don't have overflow pages, return false.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#isOverflowPage--">isOverflowPage</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
</dl>
</li>
</ul>
<a name="getPageSize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPageSize</h4>
<pre>public final&nbsp;int&nbsp;getPageSize()</pre>
<div class="block">Get the full size of the page.</div>
</li>
</ul>
<a name="clearSection-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearSection</h4>
<pre>protected final&nbsp;void&nbsp;clearSection(int&nbsp;offset,
                                  int&nbsp;length)</pre>
<div class="block">Zero out a portion of the page.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>offset</code> - position of first byte to clear</dd>
<dd><code>length</code> - how many bytes to clear</dd>
</dl>
</li>
</ul>
<a name="getMaxFreeSpace--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxFreeSpace</h4>
<pre>protected&nbsp;int&nbsp;getMaxFreeSpace()</pre>
<div class="block">The maximum free space on this page possible.
 <p>
 The the maximum amount of space that can be used on the page
 for the records and the slot offset table.
 NOTE: subclass may have overwitten it to report less freeSpace</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the maximum free space on this page possible.</dd>
</dl>
</li>
</ul>
<a name="getCurrentFreeSpace--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentFreeSpace</h4>
<pre>protected&nbsp;int&nbsp;getCurrentFreeSpace()</pre>
<div class="block">The current free space on the page.</div>
</li>
</ul>
<a name="readPageHeader--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readPageHeader</h4>
<pre>private&nbsp;void&nbsp;readPageHeader()
                     throws java.io.IOException</pre>
<div class="block">Read the page header from the page array.
 <p>
 Read the page header from byte form in the page array into in memory
 variables.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="updatePageHeader--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updatePageHeader</h4>
<pre>private&nbsp;void&nbsp;updatePageHeader()
                       throws java.io.IOException</pre>
<div class="block">Update the page header in the page array.
 <p>
 Write the bytes of the page header, taking the values from those 
 in the in memory variables.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="updatePageVersion--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updatePageVersion</h4>
<pre>private&nbsp;void&nbsp;updatePageVersion()
                        throws java.io.IOException</pre>
<div class="block">Update the page version number in the byte array</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="getSlotOffset-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSlotOffset</h4>
<pre>private&nbsp;int&nbsp;getSlotOffset(int&nbsp;slot)</pre>
<div class="block">Get the page offset of a given slot entry.
 <p>
 Get the page offset of a slot entry, this is not the offset of
 the record stored in the slot, but the offset of the actual slot.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - The array entry of the slot to find.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The page offset of a given slot entry.</dd>
</dl>
</li>
</ul>
<a name="getRecordOffset-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRecordOffset</h4>
<pre>private&nbsp;int&nbsp;getRecordOffset(int&nbsp;slot)</pre>
<div class="block">Get the page offset of the record associated with the input slot.
 <p>
 This is the actual offset on the page of the beginning of the record.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - The array entry of the slot to find.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The page offset of the record associated with the input slot.</dd>
</dl>
</li>
</ul>
<a name="setRecordOffset-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRecordOffset</h4>
<pre>private&nbsp;void&nbsp;setRecordOffset(int&nbsp;slot,
                             int&nbsp;recordOffset)
                      throws java.io.IOException</pre>
<div class="block">Set the page offset of the record associated with the input slot.
 <p>
 This is the actual offset on the page of the beginning of the record.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - The array entry of the slot to set.</dd>
<dd><code>recordOffset</code> - the new offset to set.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="getRecordPortionLength-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRecordPortionLength</h4>
<pre>protected&nbsp;int&nbsp;getRecordPortionLength(int&nbsp;slot)
                              throws java.io.IOException</pre>
<div class="block">Return length of row on this page.
 <p>
 Return the total length of data and header stored on this page for 
 this record.  This length is stored as the second "field" of the
 slot table entry.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - the slot of the row to look up the length of.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The length of the row on this page.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="getReservedCount-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReservedCount</h4>
<pre>public&nbsp;int&nbsp;getReservedCount(int&nbsp;slot)
                     throws java.io.IOException</pre>
<div class="block">Return reserved length of row on this page.
 <p>
 Return the reserved length of this record.  
 This length is stored as the third "field" of the slot table entry.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#getReservedCount-int-">getReservedCount</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - the slot of the row to look up the length of.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The reserved length of the row on this page.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - Thrown by InputStream methods potential I/O errors</dd>
</dl>
</li>
</ul>
<a name="updateRecordPortionLength-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateRecordPortionLength</h4>
<pre>private&nbsp;void&nbsp;updateRecordPortionLength(int&nbsp;slot,
                                       int&nbsp;delta,
                                       int&nbsp;reservedDelta)
                                throws java.io.IOException</pre>
<div class="block">Update the length of data stored on this page for this record
 <p>
 Update both the record length "field" and the reserved space "field"
 of the slot table entry associated with "slot".  This length is stored 
 as the second "field" of the slot table entry.  The changes to these
 2 fields are represented as the delta to apply to each field as input
 in "delta" and "reservedDelta."
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - the slot of the record to set.</dd>
<dd><code>delta</code> - The amount the record length changed.</dd>
<dd><code>reservedDelta</code> - The amount the reserved length changed.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="initSlotTable-org.apache.derby.iapi.store.raw.PageKey-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initSlotTable</h4>
<pre>private&nbsp;void&nbsp;initSlotTable(<a href="../../../../../../../org/apache/derby/iapi/store/raw/PageKey.html" title="class in org.apache.derby.iapi.store.raw">PageKey</a>&nbsp;newIdentity)
                    throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Initialize the in-memory slot table.
 <p>
 Initialize the in-memory slot table, ie. that of our super-class 
 BasePage.  Go through all the records on the page and set the 
 freeSpace and firstFreeByte on page.
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newIdentity</code> - The identity of the page we are trying to 
                      initialize, since we are in the middle of trying
                      to build the page existing info in the class is
                      not set up yet (like getIdentity()).</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="setSlotEntry-int-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSlotEntry</h4>
<pre>private&nbsp;void&nbsp;setSlotEntry(int&nbsp;slot,
                          int&nbsp;recordOffset,
                          int&nbsp;recordPortionLength,
                          int&nbsp;reservedSpace)
                   throws java.io.IOException</pre>
<div class="block">Set up a new slot entry.
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - the slot to initialize.</dd>
<dd><code>recordOffset</code> - the offset on the page to find the record.</dd>
<dd><code>recordPortionLength</code> - the actual length of record+hdr on page.</dd>
<dd><code>reservedSpace</code> - the reserved length associated with record.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="addSlotEntry-int-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addSlotEntry</h4>
<pre>private&nbsp;void&nbsp;addSlotEntry(int&nbsp;slot,
                          int&nbsp;recordOffset,
                          int&nbsp;recordPortionLength,
                          int&nbsp;reservedSpace)
                   throws java.io.IOException</pre>
<div class="block">Insert a new slot entry into the current slot array.
 <p>
 Shift the existing slots from slot to (slotsInUse - 1) up by one.
 Up here means from low slot to high slot (e.g from slot 2 to slot 3).
 Our slot table grows backward so we have to be careful here.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - Position the new slot will take</dd>
<dd><code>recordOffset</code> - Offset of the record for the new slot</dd>
<dd><code>recordPortionLength</code> - Length of the record stored in the new slot</dd>
<dd><code>reservedSpace</code> - Length of reserved space of record in slot</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="removeSlotEntry-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeSlotEntry</h4>
<pre>private&nbsp;void&nbsp;removeSlotEntry(int&nbsp;slot)
                      throws java.io.IOException</pre>
<div class="block">Remove slot entry from slot array.
 <p>
 Remove a storage slot at slot. Shift the existing slots from
 slot+1 to (slotsInUse - 1) down by one..
 Down here means from high slot to low slot (e.g from slot 3 to slot 2)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - The slot to delete.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="recordHeaderOnDemand-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recordHeaderOnDemand</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;recordHeaderOnDemand(int&nbsp;slot)</pre>
<div class="block">create the record header for the specific slot.
 <p>
 Create a new record header object, initialize it, and add it
 to the array of cache'd record headers on this page.  Finally return
 reference to the initialized record header.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#recordHeaderOnDemand-int-">recordHeaderOnDemand</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - return record header of this slot.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The record header for the specific slot.</dd>
</dl>
</li>
</ul>
<a name="entireRecordOnPage-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>entireRecordOnPage</h4>
<pre>public&nbsp;boolean&nbsp;entireRecordOnPage(int&nbsp;slot)
                           throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Is entire record on the page?
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#entireRecordOnPage-int-">entireRecordOnPage</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - Check record at this slot.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the entire record at slot is on this page, 
         i.e, no overflow row or long columns.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="purgeOverflowAtSlot-int-org.apache.derby.iapi.store.raw.RecordHandle-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>purgeOverflowAtSlot</h4>
<pre>protected&nbsp;void&nbsp;purgeOverflowAtSlot(int&nbsp;slot,
                                   <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;headRowHandle,
                                   boolean&nbsp;needDataLogged)
                            throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Purge one row on an overflow page.  
 <p>
 HeadRowHandle is the recordHandle pointing to the head row piece.
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - slot number of row to purge.</dd>
<dd><code>headRowHandle</code> - recordHandle of the head row piece.</dd>
<dd><code>needDataLogged</code> - when true data is logged for purges otherwise just headers.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="purgeOneColumnChain-long-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>purgeOneColumnChain</h4>
<pre>private&nbsp;void&nbsp;purgeOneColumnChain(long&nbsp;overflowPageId,
                                 int&nbsp;overflowRecordId)
                          throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Purge the column chain that starts at overflowPageId, overflowRecordId
 <p>
 Purge just the column chain that starts at the input address.
 The long column chain is pointed at by a field in a row.  The long
 column is then chained as a sequence of "rows", the last column then
 points to the next segment of the chain on each page.
 Long columns chains currently are only one row per page so the next
 slot of a row in a long row chain should always be the first slot.
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>overflowPageId</code> - The page where the long column chain starts.</dd>
<dd><code>overflowRecordId</code> - The record id where long column chain starts.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="purgeColumnChains-org.apache.derby.iapi.store.raw.xact.RawTransaction-int-org.apache.derby.iapi.store.raw.RecordHandle-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>purgeColumnChains</h4>
<pre>private&nbsp;void&nbsp;purgeColumnChains(<a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/RawTransaction.html" title="class in org.apache.derby.iapi.store.raw.xact">RawTransaction</a>&nbsp;t,
                               int&nbsp;slot,
                               <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;headRowHandle)
                        throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">purge long columns chains which eminate from this page.
 <p>
 Purge all the long column chains emanating from the record on this slot
 of this page.  The headRowHandle is the record handle of the head row
 piece of this row - if this page is the head row, then headRowHandle is
 the record handle at the slot.  Otherwise, headRowHandle points to a
 row on a different page, i.e., the head page.
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>t</code> - The raw transaction doing the purging.</dd>
<dd><code>slot</code> - The slot of the row to purge.</dd>
<dd><code>headRowHandle</code> - The RecordHandle of the head row.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="purgeRowPieces-org.apache.derby.iapi.store.raw.xact.RawTransaction-int-org.apache.derby.iapi.store.raw.RecordHandle-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>purgeRowPieces</h4>
<pre>protected&nbsp;void&nbsp;purgeRowPieces(<a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/RawTransaction.html" title="class in org.apache.derby.iapi.store.raw.xact">RawTransaction</a>&nbsp;t,
                              int&nbsp;slot,
                              <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;headRowHandle,
                              boolean&nbsp;needDataLogged)
                       throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Purge all the overflow columns and overflow rows of the record at slot.
 <p>
 Purge all the overflow columns and overflow rows of the record at slot.
 This is called by BasePage.purgeAtSlot, the head row piece is purged
 there. 
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#purgeRowPieces-org.apache.derby.iapi.store.raw.xact.RawTransaction-int-org.apache.derby.iapi.store.raw.RecordHandle-boolean-">purgeRowPieces</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>t</code> - The raw transaction doing the purging.</dd>
<dd><code>slot</code> - The slot of the row to purge.</dd>
<dd><code>headRowHandle</code> - The RecordHandle of the head row.</dd>
<dd><code>needDataLogged</code> - when true data is logged for purges otherwise just headers.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="removeOrphanedColumnChain-org.apache.derby.impl.store.raw.data.ReclaimSpace-org.apache.derby.iapi.store.raw.ContainerHandle-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeOrphanedColumnChain</h4>
<pre>void&nbsp;removeOrphanedColumnChain(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/ReclaimSpace.html" title="class in org.apache.derby.impl.store.raw.data">ReclaimSpace</a>&nbsp;work,
                               <a href="../../../../../../../org/apache/derby/iapi/store/raw/ContainerHandle.html" title="interface in org.apache.derby.iapi.store.raw">ContainerHandle</a>&nbsp;containerHdl)
                        throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Remove a column chain that may have been orphaned by an update.  
 <p>
 Remove a column chain that may have been orphaned by an update.  This
 is executed as a post commit operation.  This page is the head page of
 the row which used to point to the column chain in question.  The
 location of the orphaned column chain is in the ReclaimSpace record.
 <BR>
 MT - latched.  No lock will be gotten, the head record must already be
 locked exclusive with no outstanding changes that can be rolled back.
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>work</code> - object describing the chain to remove.</dd>
<dd><code>containerHdl</code> - open container handle to use to remove chain.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="isColumnOrphaned-org.apache.derby.impl.store.raw.data.StoredRecordHeader-int-long-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isColumnOrphaned</h4>
<pre>private&nbsp;boolean&nbsp;isColumnOrphaned(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;recordHeader,
                                 int&nbsp;columnId,
                                 long&nbsp;oldPageId,
                                 long&nbsp;oldRecordId)
                          throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                                 java.io.IOException</pre>
<div class="block">See if there is a orphaned long colum chain or not.  
 <p>
 See if there is a orphaned long colum chain or not.  This is a helper
 function for removeOrphanedChain.  This page, which may be a head page
 or overflow page, contains the column specified in columnId.  It used to
 point to a long column chain at oldPageId and oldRecordId.  Returns true
 if it no longer points to that long column chain.
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>recordHeader</code> - record header which used to point at the long column</dd>
<dd><code>columnId</code> - column id of the long column in head.</dd>
<dd><code>oldPageId</code> - the page id where the long column used to be.</dd>
<dd><code>oldRecordId</code> - the record id where the long column used to be.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if page no longer points to the long column chain.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="getNextColumnPiece-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNextColumnPiece</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;getNextColumnPiece(int&nbsp;slot)
                                 throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Return the next recordHandle in a long column chain.
 <p>
 Return a recordHandle pointing to the next piece of the column chain.
 This page must be an overflow page that is in a column chain.  If this
 is the last piece of the overflow colum, return null.
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - The slot of the current long column piece.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The next record handle in a long column chain.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="initSpace--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initSpace</h4>
<pre>private&nbsp;void&nbsp;initSpace()</pre>
<div class="block">initialize the in memory variables associated with space maintenance.
 <p>
 Get the total available space on an empty page.
 initSlotTable() must be called after the page has been read in.</div>
</li>
</ul>
<a name="clearAllSpace--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearAllSpace</h4>
<pre>private&nbsp;void&nbsp;clearAllSpace()</pre>
<div class="block">Initialize the freeSpace count and set the firstFreeByte on page</div>
</li>
</ul>
<a name="compressPage-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compressPage</h4>
<pre>private&nbsp;void&nbsp;compressPage(int&nbsp;startByte,
                          int&nbsp;endByte)
                   throws java.io.IOException</pre>
<div class="block">Compress out the space specified by startByte and endByte.
 <p>
 As part of moving rows, updating rows, purging rows compact the space
 left between rows.
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>startByte</code> - compress out space starting at startByte offset</dd>
<dd><code>endByte</code> - compress out space ending   at endByte   offset</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="expandPage-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>expandPage</h4>
<pre>protected&nbsp;void&nbsp;expandPage(int&nbsp;startOffset,
                          int&nbsp;requiredBytes)
                   throws java.io.IOException</pre>
<div class="block">Free up required bytes by shifting rows "down" the page.
 <p>
 Expand page, move all the data from start Offset down the page by
 the amount required to free up the required bytes.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>startOffset</code> - offset on page to begin the shift</dd>
<dd><code>requiredBytes</code> - the number of bytes that must be freed.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If IOException is raised during the page mod.</dd>
</dl>
</li>
</ul>
<a name="shrinkPage-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shrinkPage</h4>
<pre>private&nbsp;void&nbsp;shrinkPage(int&nbsp;startOffset,
                        int&nbsp;shrinkBytes)
                 throws java.io.IOException</pre>
<div class="block">Shrink page. 
 <p>
 move all the data from start Offset up the page by the amount shrunk.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>startOffset</code> - offset on page to begin the shift</dd>
<dd><code>shrinkBytes</code> - the number of bytes that must be moved.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - some IOException is raised during the page mod,
                          (unlikely as this is just writing to array).</dd>
</dl>
</li>
</ul>
<a name="getRecordLength-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRecordLength</h4>
<pre>public&nbsp;int&nbsp;getRecordLength(int&nbsp;slot)
                    throws java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#getRecordLength-int-">BasePage</a></code></span></div>
<div class="block">Get the stored length of a record. This must match the amount of data
                written by logColumn and logField.

                <BR> MT - latched - page latch must be held</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#getRecordLength-int-">getRecordLength</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="getIsOverflow-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIsOverflow</h4>
<pre>protected&nbsp;boolean&nbsp;getIsOverflow(int&nbsp;slot)
                         throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="logRow-int-boolean-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-int-byte-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logRow</h4>
<pre>public&nbsp;int&nbsp;logRow(int&nbsp;slot,
                  boolean&nbsp;forInsert,
                  int&nbsp;recordId,
                  java.lang.Object[]&nbsp;row,
                  <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;validColumns,
                  <a href="../../../../../../../org/apache/derby/iapi/services/io/DynamicByteArrayOutputStream.html" title="class in org.apache.derby.iapi.services.io">DynamicByteArrayOutputStream</a>&nbsp;out,
                  int&nbsp;startColumn,
                  byte&nbsp;insertFlag,
                  int&nbsp;realStartColumn,
                  int&nbsp;realSpaceOnPage,
                  int&nbsp;overflowThreshold)
           throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                  java.io.IOException</pre>
<div class="block">Log a row into the StoreOuput stream.
 <p>
 Write the row in its record format to the stream. Record format is a 
 record header followed by each field with its field header. See this 
 class's description for the specifics of these headers.

 startColumn is used to specified which column for this logRow to 
 start logging.  When realStartColumn is specified, that means part of 
 the row has already been logged.  startColumn here indicates that the 
 first column was logged in the logBuffer, need to continue log the rest
 of the row starting at realStartColumn.

 This is used when a longColumn is encountered during a long row.
 After done logging the long column, we need to continue logging the 
 rest of the row.
 A -1 value for realStartColumn, means that it is not significant.

 logRow will not throw an noSpaceOnPage exception, if it is an overflow 
 page, and the record we are inserting is the only record on the page.
 We are supporting rows expanding multiple pages through this mechanism.

 logRow expects row to be a sparse row.
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#logRow-int-boolean-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-int-byte-int-int-int-">logRow</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - the slot of the row being logged.</dd>
<dd><code>forInsert</code> - this is logging an insert (not update/delete).</dd>
<dd><code>recordId</code> - record id of the row being logged.</dd>
<dd><code>row</code> - actual data of row in object form.  If row is
                          null then we are logging an overflow pointer.</dd>
<dd><code>validColumns</code> - bit map describing valid columns in row.</dd>
<dd><code>out</code> - stream to log to.</dd>
<dd><code>startColumn</code> - what column to start with (see above for detail)</dd>
<dd><code>insertFlag</code> - flag indicating mode we are in, 
                              INSERT_DEFAULT - default insert
                              INSERT_SPLIT   - splitting a row/column 
                                               across pages.</dd>
<dd><code>realStartColumn</code> - If -1 ignore variable, else part of row has
                          already been logged, and should continue with
                          this column.</dd>
<dd><code>realSpaceOnPage</code> - Use this as space on page if realStartColumn
                          is not -1.</dd>
<dd><code>overflowThreshold</code> - How much of the page to use before deciding
                          to overflow a row.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the "realStartColumn" value, -1 if not a long row.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - RESOLVE</dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#logRow-int-boolean-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-int-byte-int-int-int-"><code>BasePage.logRow(int, boolean, int, java.lang.Object[], org.apache.derby.iapi.services.io.FormatableBitSet, org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream, int, byte, int, int, int)</code></a></dd>
</dl>
</li>
</ul>
<a name="handleIncompleteLogRow-int-int-org.apache.derby.iapi.services.io.FormatableBitSet-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>handleIncompleteLogRow</h4>
<pre>private&nbsp;void&nbsp;handleIncompleteLogRow(int&nbsp;slot,
                                    int&nbsp;startColumn,
                                    <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;columnList,
                                    <a href="../../../../../../../org/apache/derby/iapi/services/io/DynamicByteArrayOutputStream.html" title="class in org.apache.derby.iapi.services.io">DynamicByteArrayOutputStream</a>&nbsp;out)
                             throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Handle an update of a record portion that is incomplete.
 <p>
 Handle an update of a record portion that is incomplete.
 Ie. Columns have expanded that require other columns to move
 off the page into a new portion.
 <P> 
 This method works out of the columns that need to be moved which are not
 being updated and makes a copy of their data. It then throws an 
 exception with this data, much like the long column exception which will
 then allow the original insert to complete.  
 <P> 
 If no columns need to be saved (ie all the ones that would move are 
 being updated) then no exception is thrown, logRow() will return and the
 update completes normally.
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - slot of the current update.</dd>
<dd><code>startColumn</code> - column to start at, handles start in middle of row</dd>
<dd><code>columnList</code> - bit map indicating which columns are being updated.</dd>
<dd><code>out</code> - place to lot to.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="restoreRecordFromStream-org.apache.derby.iapi.services.io.LimitObjectInput-java.lang.Object:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreRecordFromStream</h4>
<pre>public&nbsp;void&nbsp;restoreRecordFromStream(<a href="../../../../../../../org/apache/derby/iapi/services/io/LimitObjectInput.html" title="interface in org.apache.derby.iapi.services.io">LimitObjectInput</a>&nbsp;in,
                                    java.lang.Object[]&nbsp;row)
                             throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                                    java.io.IOException</pre>
<div class="block">Restore a storable row from a LimitInputStream.
 <p>
 Restore a storable row from an LimitInputStream - user must supply two 
 streams on top of the same data, one implements ObjectInput interface 
 that knows how to restore the object, the other one implements 
 LimitInputStream.
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#restoreRecordFromStream-org.apache.derby.iapi.services.io.LimitObjectInput-java.lang.Object:A-">restoreRecordFromStream</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>in</code> - the limit input stream</dd>
<dd><code>row</code> - (IN/OUT) row that is to be restored 
                     (sparse representation)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
<dd><code>java.io.IOException</code> - object exceeds the available data in the stream.</dd>
</dl>
</li>
</ul>
<a name="qualifyRecordFromRow-java.lang.Object:A-org.apache.derby.iapi.store.access.Qualifier:A:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>qualifyRecordFromRow</h4>
<pre>private&nbsp;boolean&nbsp;qualifyRecordFromRow(java.lang.Object[]&nbsp;row,
                                     <a href="../../../../../../../org/apache/derby/iapi/store/access/Qualifier.html" title="interface in org.apache.derby.iapi.store.access">Qualifier</a>[][]&nbsp;qual_list)
                              throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Process the qualifier list on the row, return true if it qualifies.
 <p>
 A two dimensional array is to be used to pass around a AND's and OR's in
 conjunctive normal form.  The top slot of the 2 dimensional array is 
 optimized for the more frequent where no OR's are present.  The first 
 array slot is always a list of AND's to be treated as described above 
 for single dimensional AND qualifier arrays.  The subsequent slots are 
 to be treated as AND'd arrays or OR's.  Thus the 2 dimensional array 
 qual[][] argument is to be treated as the following, note if 
 qual.length = 1 then only the first array is valid and it is and an 
 array of and clauses:

 (qual[0][0] and qual[0][0] ... and qual[0][qual[0].length - 1])
 and
 (qual[1][0] or  qual[1][1] ... or  qual[1][qual[1].length - 1])
 and
 (qual[2][0] or  qual[2][1] ... or  qual[2][qual[2].length - 1])
 ...
 and
 (qual[qual.length - 1][0] or  qual[1][1] ... or  qual[1][2])</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>row</code> - The row being qualified.</dd>
<dd><code>qual_list</code> - 2 dimensional array representing conjunctive
                          normal form of simple qualifiers.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the row qualifies.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="readOneColumnFromPage-java.lang.Object:A-int-int-org.apache.derby.impl.store.raw.data.StoredRecordHeader-org.apache.derby.iapi.store.raw.RecordHandle-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readOneColumnFromPage</h4>
<pre>private final&nbsp;void&nbsp;readOneColumnFromPage(java.lang.Object[]&nbsp;row,
                                         int&nbsp;colid,
                                         int&nbsp;offset_to_field_data,
                                         <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;recordHeader,
                                         <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;recordToLock)
                                  throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                                         java.io.IOException</pre>
<div class="block">Read just one column from stream into row.
 <p>
 The routine reads just one column from the row, it is mostly code
 taken from readRecordFromStream, but highly optimized to just get
 one column from a non-overflow row.  It can only be called to read
 a row from the pageData array as it directly accesses the page array
 to avoid the Stream overhead while processing non-user data which
 does not need the limit functionality.
 <p>
 It is expected that this code will be called to read in a column 
 associated with a qualifiers which are applied one column at a time, 
 and has been specialized to proved the greatest peformance for 
 processing qualifiers.  This kind of access is done when scanning
 large datasets while applying qualifiers and thus any performance
 gain at this low level is multiplied by the large number of rows that
 may be iterated over.
 <p>
 The column is read into the object located in row[qual_colid].</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>row</code> - col is read into object in row[qual_colid].</dd>
<dd><code>offset_to_field_data</code> - offset in bytes from top of page to field</dd>
<dd><code>colid</code> - the column id to read, colid N is row[N]</dd>
<dd><code>recordHeader</code> - record header of row to read column from.</dd>
<dd><code>recordToLock</code> - record handle to lock, 
                              used by overflow column code.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="qualifyRecordFromSlot-java.lang.Object:A-int-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.impl.store.raw.data.StoredRecordHeader-org.apache.derby.iapi.store.raw.RecordHandle-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>qualifyRecordFromSlot</h4>
<pre>private final&nbsp;boolean&nbsp;qualifyRecordFromSlot(java.lang.Object[]&nbsp;row,
                                            int&nbsp;offset_to_row_data,
                                            <a href="../../../../../../../org/apache/derby/iapi/store/raw/FetchDescriptor.html" title="class in org.apache.derby.iapi.store.raw">FetchDescriptor</a>&nbsp;fetchDesc,
                                            <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;recordHeader,
                                            <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;recordToLock)
                                     throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                                            java.io.IOException</pre>
<div class="block">Process the list of qualifiers on the row in the stream.
 <p>
 The rawDataIn stream is expected to be positioned after the record 
 header.
 <p>
 Check all qualifiers in the qualifier array against row.  Return true
 if all compares specified by the qualifier array return true, else
 return false.
 <p>
 This routine assumes client caller has already checked if the row
 is deleted or not.  The row that it get's is expected to match
 the partial column list of the scan.  
 <p>
 On entering this routine the stream should be positioned to the
 beginning of the row data, just after the row header.  On exit
 the stream will also be positioned there.

 A two dimensional array is to be used to pass around a AND's and OR's in
 conjunctive normal form.  The top slot of the 2 dimensional array is 
 optimized for the more frequent where no OR's are present.  The first 
 array slot is always a list of AND's to be treated as described above 
 for single dimensional AND qualifier arrays.  The subsequent slots are 
 to be treated as AND'd arrays or OR's.  Thus the 2 dimensional array 
 qual[][] argument is to be treated as the following, note if 
 qual.length = 1 then only the first array is valid and it is and an 
 array of and clauses:

 (qual[0][0] and qual[0][0] ... and qual[0][qual[0].length - 1])
 and
 (qual[1][0] or  qual[1][1] ... or  qual[1][qual[1].length - 1])
 and
 (qual[2][0] or  qual[2][1] ... or  qual[2][qual[2].length - 1])
 ...
 and
 (qual[qual.length - 1][0] or  qual[1][1] ... or  qual[1][2])</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>row</code> - restore row into this object array.</dd>
<dd><code>offset_to_row_data</code> - offset in bytes from top of page to row</dd>
<dd><code>fetchDesc</code> - Description of fetch including which cols
                              and qualifiers.</dd>
<dd><code>recordHeader</code> - The record header of the row, it was read 
                              in from stream and dataIn is positioned 
                              after it.</dd>
<dd><code>recordToLock</code> - The head row to use for locking, used to 
                              lock head row of overflow columns/rows.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Whether or not the row input qualifies.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="readRecordFromStream-java.lang.Object:A-int-int:A-int:A-org.apache.derby.iapi.services.io.LimitObjectInput-org.apache.derby.impl.store.raw.data.StoredRecordHeader-org.apache.derby.iapi.store.raw.RecordHandle-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readRecordFromStream</h4>
<pre>private final&nbsp;boolean&nbsp;readRecordFromStream(java.lang.Object[]&nbsp;row,
                                           int&nbsp;max_colid,
                                           int[]&nbsp;vCols,
                                           int[]&nbsp;mCols,
                                           <a href="../../../../../../../org/apache/derby/iapi/services/io/LimitObjectInput.html" title="interface in org.apache.derby.iapi.services.io">LimitObjectInput</a>&nbsp;dataIn,
                                           <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;recordHeader,
                                           <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;recordToLock)
                                    throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                                           java.io.IOException</pre>
<div class="block">restore a record from a stream.
 <p>
 The rawDataIn stream is expected to be positioned after the record 
 header.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>row</code> - restore row into this object array.</dd>
<dd><code>max_colid</code> - The maximum numbered column id that will be 
                          requested by caller.  It should be:
                            min(row.length - 1, maximum bit set in vCols)
                          It is used to stop the inner most loop from 
                          looking at more columns in the row.</dd>
<dd><code>vCols</code> - If not null, bit map indicates valid cols.</dd>
<dd><code>mCols</code> - If not null, int array indicates columns already
                          read in from the stream.  A non-zero entry 
                          means the column has already been read in.</dd>
<dd><code>dataIn</code> - restore row from this stream.</dd>
<dd><code>recordHeader</code> - The record header of the row, it was read in 
                          from stream and dataIn is positioned after it.</dd>
<dd><code>recordToLock</code> - The head row to use for locking, used to lock 
                          head row of overflow columns/rows.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The identifier to be used to open the conglomerate later.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="readRecordFromArray-java.lang.Object:A-int-int:A-int:A-org.apache.derby.iapi.services.io.ArrayInputStream-org.apache.derby.impl.store.raw.data.StoredRecordHeader-org.apache.derby.iapi.store.raw.RecordHandle-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readRecordFromArray</h4>
<pre>private final&nbsp;boolean&nbsp;readRecordFromArray(java.lang.Object[]&nbsp;row,
                                          int&nbsp;max_colid,
                                          int[]&nbsp;vCols,
                                          int[]&nbsp;mCols,
                                          <a href="../../../../../../../org/apache/derby/iapi/services/io/ArrayInputStream.html" title="class in org.apache.derby.iapi.services.io">ArrayInputStream</a>&nbsp;dataIn,
                                          <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;recordHeader,
                                          <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;recordToLock)
                                   throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                                          java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="restorePortionLongColumn-org.apache.derby.impl.store.raw.data.OverflowInputStream-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restorePortionLongColumn</h4>
<pre>public&nbsp;void&nbsp;restorePortionLongColumn(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/OverflowInputStream.html" title="class in org.apache.derby.impl.store.raw.data">OverflowInputStream</a>&nbsp;fetchStream)
                              throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                                     java.io.IOException</pre>
<div class="block">Restore a portion of a long column.
 <p>
 Restore a portion of a long column - user must supply two streams on top
 of the same data, one implements ObjectInput interface that knows how to
 restore the object, the other one implements LimitInputStream.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#restorePortionLongColumn-org.apache.derby.impl.store.raw.data.OverflowInputStream-">restorePortionLongColumn</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>fetchStream</code> - the stream to read the next portion of long col from</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="logColumn-int-int-java.lang.Object-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logColumn</h4>
<pre>public&nbsp;void&nbsp;logColumn(int&nbsp;slot,
                      int&nbsp;fieldId,
                      java.lang.Object&nbsp;column,
                      <a href="../../../../../../../org/apache/derby/iapi/services/io/DynamicByteArrayOutputStream.html" title="class in org.apache.derby.iapi.services.io">DynamicByteArrayOutputStream</a>&nbsp;out,
                      int&nbsp;overflowThreshold)
               throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                      java.io.IOException</pre>
<div class="block">Log a Storable to a stream.
 <p>
 Log a Storable into a stream.  This is used by update field operations
 <P>
 Write the column in its field format to the stream. Field format is a 
 field header followed the data of the column as defined by the data 
 itself.  See this class's description for the specifics of the header.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#logColumn-int-int-java.lang.Object-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-int-">logColumn</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - slot of the current record</dd>
<dd><code>fieldId</code> - field number of the column being updated</dd>
<dd><code>column</code> - column version of the field.</dd>
<dd><code>out</code> - Where to write the logged form.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
<dd><code>java.io.IOException</code> - RESOLVE</dd>
</dl>
</li>
</ul>
<a name="logLongColumn-int-int-java.lang.Object-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logLongColumn</h4>
<pre>public&nbsp;int&nbsp;logLongColumn(int&nbsp;slot,
                         int&nbsp;recordId,
                         java.lang.Object&nbsp;column,
                         <a href="../../../../../../../org/apache/derby/iapi/services/io/DynamicByteArrayOutputStream.html" title="class in org.apache.derby.iapi.services.io">DynamicByteArrayOutputStream</a>&nbsp;out)
                  throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                         java.io.IOException</pre>
<div class="block">Log a long column into a DataOuput.
 <p>
 Log a long column into a DataOuput.  This is used by insert operations
 <P>
 Write the column in its field format to the stream. Field format is a 
 field header followed the data of the column as defined by the data 
 itself.  See this class's description for the specifics of the header.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#logLongColumn-int-int-java.lang.Object-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-">logLongColumn</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - slot of the row with the column</dd>
<dd><code>recordId</code> - record id of the</dd>
<dd><code>column</code> - the object form of the column to log</dd>
<dd><code>out</code> - where to log to the column to.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
<dd><code>java.io.IOException</code> - I/O exception from writing to an array.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#logColumn-int-int-java.lang.Object-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-int-"><code>BasePage.logColumn(int, int, java.lang.Object, org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream, int)</code></a></dd>
</dl>
</li>
</ul>
<a name="logColumn-java.lang.Object:A-int-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logColumn</h4>
<pre>private&nbsp;int&nbsp;logColumn(java.lang.Object[]&nbsp;row,
                      int&nbsp;arrayPosition,
                      <a href="../../../../../../../org/apache/derby/iapi/services/io/DynamicByteArrayOutputStream.html" title="class in org.apache.derby.iapi.services.io">DynamicByteArrayOutputStream</a>&nbsp;out,
                      int&nbsp;spaceAvailable,
                      int&nbsp;columnFlag,
                      int&nbsp;overflowThreshold)
               throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                      java.io.IOException</pre>
<div class="block">Log column from input row to the given output stream.
 <p>
 Read data from row[arrayPosition], and write the column data in
 raw store page format to the given column.  Along the way determine
 if the column will fit on the current page.
 <p>
 Action taken in this routine is determined by the kind of column as
 specified in the columnFlag:
     COLUMN_NONE   - the column is insignificant
     COLUMN_FIRST  - this is the first column in a logRow() call
     COLUMN_LONG   - this is a known long column, therefore we will 
                     store part of the column on the current page and 
                     overflow the rest if necessary.
 <p>
 Upon entry to this routine logicalDataOut is tied to the 
 DynamicByteArrayOutputStream out.
 <BR>
 If a column is a long column and it does not totally fit on the current
 page, then a LongColumnException is thrown.  We package up info about
 the current long column in the partially filled in exception so that
 callers can take correct action.  The column will now be set a as a
 stream.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>row</code> - array of column from which to read the column from.</dd>
<dd><code>arrayPosition</code> - The array position of column to be reading from row.</dd>
<dd><code>out</code> - The stream to write the raw store page format of the
                      the column to.</dd>
<dd><code>spaceAvailable</code> - The number of bytes available on the page for
                          this column, this may differ from current page
                          as it may include bytes used by previous 
                          columns.</dd>
<dd><code>columnFlag</code> - one of: COLUMN_NONE, COLUMN_FIRST, or COLUMN_LONG.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The spaceAvailable after accounting for space for this column.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/LongColumnException.html" title="class in org.apache.derby.impl.store.raw.data">LongColumnException</a></code> - Thrown if column will not fit on a 
                                  single page. See notes above</dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="logOverflowRecord-int-int-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logOverflowRecord</h4>
<pre>private&nbsp;int&nbsp;logOverflowRecord(int&nbsp;slot,
                              int&nbsp;spaceAvailable,
                              <a href="../../../../../../../org/apache/derby/iapi/services/io/DynamicByteArrayOutputStream.html" title="class in org.apache.derby.iapi.services.io">DynamicByteArrayOutputStream</a>&nbsp;out)
                       throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                              java.io.IOException</pre>
<div class="block">Create and write a long row header to the log stream.
 <p>
 Called to log a new overflow record, will check for space available
 and throw an exception if the record header will not fit on the page.
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - slot of record to log.</dd>
<dd><code>spaceAvailable</code> - spaceAvaliable on page.</dd>
<dd><code>out</code> - stream to log the record to.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>-1</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="logOverflowField-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-int-long-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logOverflowField</h4>
<pre>private&nbsp;int&nbsp;logOverflowField(<a href="../../../../../../../org/apache/derby/iapi/services/io/DynamicByteArrayOutputStream.html" title="class in org.apache.derby.iapi.services.io">DynamicByteArrayOutputStream</a>&nbsp;out,
                             int&nbsp;spaceAvailable,
                             long&nbsp;overflowPage,
                             int&nbsp;overflowId)
                      throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                             java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="logRecord-int-int-int-org.apache.derby.iapi.services.io.FormatableBitSet-java.io.OutputStream-org.apache.derby.iapi.store.raw.RecordHandle-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logRecord</h4>
<pre>public&nbsp;void&nbsp;logRecord(int&nbsp;slot,
                      int&nbsp;flag,
                      int&nbsp;recordId,
                      <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;validColumns,
                      java.io.OutputStream&nbsp;out,
                      <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;headRowHandle)
               throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                      java.io.IOException</pre>
<div class="block">Log a record to the ObjectOutput stream.
 <p>
 Write out the complete on-page record to the store stream.  Data is 
 preceeded by a  compressed int that gives the length of the following 
 data.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#logRecord-int-int-int-org.apache.derby.iapi.services.io.FormatableBitSet-java.io.OutputStream-org.apache.derby.iapi.store.raw.RecordHandle-">logRecord</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - Slot number the record is stored in.</dd>
<dd><code>flag</code> - LOG_RECORD_*, the reason for logging the record.</dd>
<dd><code>recordId</code> - Record identifier of the record.</dd>
<dd><code>validColumns</code> - which columns needs to be logged</dd>
<dd><code>out</code> - Where to write the logged form.</dd>
<dd><code>headRowHandle</code> - the recordHandle of the head row piece, used
                                                for post commit cleanup for update.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
<dd><code>java.io.IOException</code> - on error writing to log stream.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#logRecord-int-int-int-org.apache.derby.iapi.services.io.FormatableBitSet-java.io.OutputStream-org.apache.derby.iapi.store.raw.RecordHandle-"><code>BasePage.logRecord(int, int, int, org.apache.derby.iapi.services.io.FormatableBitSet, java.io.OutputStream, org.apache.derby.iapi.store.raw.RecordHandle)</code></a></dd>
</dl>
</li>
</ul>
<a name="logRecordDataPortion-int-int-org.apache.derby.impl.store.raw.data.StoredRecordHeader-org.apache.derby.iapi.services.io.FormatableBitSet-java.io.OutputStream-org.apache.derby.iapi.store.raw.RecordHandle-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logRecordDataPortion</h4>
<pre>private&nbsp;void&nbsp;logRecordDataPortion(int&nbsp;slot,
                                  int&nbsp;flag,
                                  <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;recordHeader,
                                  <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;validColumns,
                                  java.io.OutputStream&nbsp;out,
                                  <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;headRowHandle)
                           throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                                  java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="logField-int-int-java.io.OutputStream-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logField</h4>
<pre>public&nbsp;void&nbsp;logField(int&nbsp;slot,
                     int&nbsp;fieldNumber,
                     java.io.OutputStream&nbsp;out)
              throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                     java.io.IOException</pre>
<div class="block">Log a field to the ObjectOutput stream.
        <P>
        Find the field in the record and then write out the complete
        field, i.e. header and data.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#logField-int-int-java.io.OutputStream-">logField</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - Slot number the record is stored in.</dd>
<dd><code>fieldNumber</code> - Number of the field (starts at 0).</dd>
<dd><code>out</code> - Where to write the logged form.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
<dd><code>java.io.IOException</code> - RESOLVE</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#logField-int-int-java.io.OutputStream-"><code>BasePage.logField(int, int, java.io.OutputStream)</code></a></dd>
</dl>
</li>
</ul>
<a name="insertAtSlot-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-org.apache.derby.iapi.store.access.conglomerate.LogicalUndo-byte-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertAtSlot</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;insertAtSlot(int&nbsp;slot,
                                 java.lang.Object[]&nbsp;row,
                                 <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;validColumns,
                                 <a href="../../../../../../../org/apache/derby/iapi/store/access/conglomerate/LogicalUndo.html" title="interface in org.apache.derby.iapi.store.access.conglomerate">LogicalUndo</a>&nbsp;undo,
                                 byte&nbsp;insertFlag,
                                 int&nbsp;overflowThreshold)
                          throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Override insertAtSlot to provide long row support.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#insertAtSlot-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-org.apache.derby.iapi.store.access.conglomerate.LogicalUndo-byte-int-">insertAtSlot</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html" title="interface in org.apache.derby.iapi.store.raw">Page</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#insertAtSlot-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-org.apache.derby.iapi.store.access.conglomerate.LogicalUndo-byte-int-">insertAtSlot</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - The specified slot</dd>
<dd><code>row</code> - The row version of the data</dd>
<dd><code>validColumns</code> - a bit map of which columns in the row is valid.  
                      ValidColumns will not be changed by RawStore.</dd>
<dd><code>undo</code> - if logical undo may be necessary, a function pointer
                      to the access code where the logical undo logic 
                      resides. Null if logical undo is not necessary.</dd>
<dd><code>insertFlag</code> - if INSERT_UNDO_WITH_PURGE set, then the undo of this
                      insert will purge the row rather than mark it as 
                      deleted, which is the default bahavior for 
                      insertAtSlot and insert.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A RecordHandle representing the new record, or null if the row 
         will not fit on a non-empty page.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#insertAtSlot-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-org.apache.derby.iapi.store.access.conglomerate.LogicalUndo-byte-int-"><code>Page.insertAtSlot(int, java.lang.Object[], org.apache.derby.iapi.services.io.FormatableBitSet, org.apache.derby.iapi.store.access.conglomerate.LogicalUndo, byte, int)</code></a></dd>
</dl>
</li>
</ul>
<a name="updateFieldAtSlot-int-int-java.lang.Object-org.apache.derby.iapi.store.access.conglomerate.LogicalUndo-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateFieldAtSlot</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;updateFieldAtSlot(int&nbsp;slot,
                                      int&nbsp;fieldId,
                                      java.lang.Object&nbsp;newValue,
                                      <a href="../../../../../../../org/apache/derby/iapi/store/access/conglomerate/LogicalUndo.html" title="interface in org.apache.derby.iapi.store.access.conglomerate">LogicalUndo</a>&nbsp;undo)
                               throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Update field at specified slot</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#updateFieldAtSlot-int-int-java.lang.Object-org.apache.derby.iapi.store.access.conglomerate.LogicalUndo-">updateFieldAtSlot</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html" title="interface in org.apache.derby.iapi.store.raw">Page</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#updateFieldAtSlot-int-int-java.lang.Object-org.apache.derby.iapi.store.access.conglomerate.LogicalUndo-">updateFieldAtSlot</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - is the slot number</dd>
<dd><code>fieldId</code> - is the column id</dd>
<dd><code>newValue</code> - has the new colum value to be stored in the record</dd>
<dd><code>undo</code> - if logical undo may be necessary, a function pointer to the
                access code where the logical undo logic resides. Null if logical undo
                is not necessary.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a Handle to the updated record.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#updateFieldAtSlot-int-int-java.lang.Object-org.apache.derby.iapi.store.access.conglomerate.LogicalUndo-"><code>Page.updateFieldAtSlot(int, int, java.lang.Object, org.apache.derby.iapi.store.access.conglomerate.LogicalUndo)</code></a></dd>
</dl>
</li>
</ul>
<a name="fetchNumFieldsAtSlot-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetchNumFieldsAtSlot</h4>
<pre>public&nbsp;int&nbsp;fetchNumFieldsAtSlot(int&nbsp;slot)
                         throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Get the number of fields on the row at slot</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#fetchNumFieldsAtSlot-int-">fetchNumFieldsAtSlot</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html" title="interface in org.apache.derby.iapi.store.raw">Page</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#fetchNumFieldsAtSlot-int-">fetchNumFieldsAtSlot</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - is the slot number</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the number of fields in the record</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html#fetchNumFieldsAtSlot-int-"><code>Page.fetchNumFieldsAtSlot(int)</code></a></dd>
</dl>
</li>
</ul>
<a name="moveRecordForCompressAtSlot-int-java.lang.Object:A-org.apache.derby.iapi.store.raw.RecordHandle:A-org.apache.derby.iapi.store.raw.RecordHandle:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>moveRecordForCompressAtSlot</h4>
<pre>public&nbsp;int&nbsp;moveRecordForCompressAtSlot(int&nbsp;slot,
                                       java.lang.Object[]&nbsp;row,
                                       <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>[]&nbsp;old_handle,
                                       <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>[]&nbsp;new_handle)
                                throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Move record to a page toward the beginning of the file.
 <p>
 As part of compressing the table records need to be moved from the
 end of the file toward the beginning of the file.  Only the 
 contiguous set of free pages at the very end of the file can
 be given back to the OS.  This call is used to purge the row from
 the current page, insert it into a previous page, and return the
 new row location 
 Mark the record identified by position as deleted. The record may be 
 undeleted sometime later using undelete() by any transaction that sees 
 the record.
 <p>
 The interface is optimized to work on a number of rows at a time, 
 optimally processing all rows on the page at once.  The call will 
 process either all rows on the page, or the number of slots in the
 input arrays - whichever is smaller.
 <B>Locking Policy</B>
 <P>
 MUST be called with table locked, no locks are requested.  Because
 it is called with table locks the call will go ahead and purge any
 row which is marked deleted.  It will also use purge rather than
 delete to remove the old row after it moves it to a new page.  This
 is ok since the table lock insures that no other transaction will
 use space on the table before this transaction commits.

 <BR>
 A page latch on the new page will be requested and released.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - slot of original row to move.</dd>
<dd><code>row</code> - a row template to hold all columns of row.</dd>
<dd><code>old_handle</code> - An array to be filled in by the call with the 
                       old handles of all rows moved.</dd>
<dd><code>new_handle</code> - An array to be filled in by the call with the 
                       new handles of all rows moved.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the number of rows processed.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/iapi/store/raw/LockingPolicy.html" title="interface in org.apache.derby.iapi.store.raw"><code>LockingPolicy</code></a></dd>
</dl>
</li>
</ul>
<a name="logAction-org.apache.derby.iapi.store.raw.log.LogInstant-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logAction</h4>
<pre>public&nbsp;void&nbsp;logAction(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant)
               throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="cleanPage--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cleanPage</h4>
<pre>private&nbsp;void&nbsp;cleanPage()</pre>
</li>
</ul>
<a name="initPage-org.apache.derby.iapi.store.raw.log.LogInstant-byte-int-boolean-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initPage</h4>
<pre>public&nbsp;void&nbsp;initPage(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant,
                     byte&nbsp;status,
                     int&nbsp;recordId,
                     boolean&nbsp;overflow,
                     boolean&nbsp;reuse)
              throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Initialize the page.  

        If reuse, then 
        Clean up any in memory or on disk structure to ready the page for reuse.
        This is not only reusing the page buffer, but reusing a free page 
        which may or may not be cleaned up the the client of raw store when it 
        was deallocated.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#initPage-org.apache.derby.iapi.store.raw.log.LogInstant-byte-int-boolean-boolean-">initPage</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Derby Standard Error Policy</dd>
</dl>
</li>
</ul>
<a name="setPageStatus-org.apache.derby.iapi.store.raw.log.LogInstant-byte-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPageStatus</h4>
<pre>public&nbsp;void&nbsp;setPageStatus(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant,
                          byte&nbsp;status)
                   throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Set page status</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#setPageStatus-org.apache.derby.iapi.store.raw.log.LogInstant-byte-">setPageStatus</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>instant</code> - the log instant of the log record</dd>
<dd><code>status</code> - the page status</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Derby Standard Error Policy</dd>
</dl>
</li>
</ul>
<a name="setReservedSpace-org.apache.derby.iapi.store.raw.log.LogInstant-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setReservedSpace</h4>
<pre>public&nbsp;void&nbsp;setReservedSpace(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant,
                             int&nbsp;slot,
                             int&nbsp;value)
                      throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                             java.io.IOException</pre>
<div class="block">Set the row reserved space.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#setReservedSpace-org.apache.derby.iapi.store.raw.log.LogInstant-int-int-">setReservedSpace</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Derby Standard Error Policy</dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="storeRecord-org.apache.derby.iapi.store.raw.log.LogInstant-int-boolean-java.io.ObjectInput-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storeRecord</h4>
<pre>public&nbsp;void&nbsp;storeRecord(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant,
                        int&nbsp;slot,
                        boolean&nbsp;insert,
                        java.io.ObjectInput&nbsp;in)
                 throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                        java.io.IOException</pre>
<div class="block">Store a record at the given slot.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#storeRecord-org.apache.derby.iapi.store.raw.log.LogInstant-int-boolean-java.io.ObjectInput-">storeRecord</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
<dd><code>java.io.IOException</code> - RESOLVE</dd>
</dl>
</li>
</ul>
<a name="storeRecordForInsert-int-java.io.ObjectInput-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storeRecordForInsert</h4>
<pre>private&nbsp;void&nbsp;storeRecordForInsert(int&nbsp;slot,
                                  java.io.ObjectInput&nbsp;in)
                           throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                                  java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="storeRecordForUpdate-int-java.io.ObjectInput-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storeRecordForUpdate</h4>
<pre>private&nbsp;void&nbsp;storeRecordForUpdate(int&nbsp;slot,
                                  java.io.ObjectInput&nbsp;in)
                           throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                                  java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="moveSavedDataToPage-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>moveSavedDataToPage</h4>
<pre>private&nbsp;int&nbsp;moveSavedDataToPage(<a href="../../../../../../../org/apache/derby/iapi/services/io/DynamicByteArrayOutputStream.html" title="class in org.apache.derby.iapi.services.io">DynamicByteArrayOutputStream</a>&nbsp;savedData,
                                int&nbsp;unusedSpace,
                                int&nbsp;pageOffset)</pre>
</li>
</ul>
<a name="createSpaceForUpdate-int-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createSpaceForUpdate</h4>
<pre>private&nbsp;void&nbsp;createSpaceForUpdate(int&nbsp;slot,
                                  int&nbsp;offset,
                                  int&nbsp;oldLength,
                                  int&nbsp;newLength)
                           throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                                  java.io.IOException</pre>
<div class="block">Create the space to update a portion of a record.
        This method ensures there is enough room to replace the
        old data of length oldLength at the given offset, with the new data of length
        newLength. This method does put any new data on the page, it moves old data around
        and zeros out any old data when newLength &lt; oldLength. This method does
        update the information in the slot table.

        The passed in offset is the correct place to put the data
        when this method returns, ie. it only moves data that
        has an offset greater then this.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
<dd><code>java.io.IOException</code> - RESOLVE</dd>
</dl>
</li>
</ul>
<a name="storeField-org.apache.derby.iapi.store.raw.log.LogInstant-int-int-java.io.ObjectInput-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storeField</h4>
<pre>public&nbsp;void&nbsp;storeField(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant,
                       int&nbsp;slot,
                       int&nbsp;fieldNumber,
                       java.io.ObjectInput&nbsp;in)
                throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                       java.io.IOException</pre>
<div class="block">storeField</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#storeField-org.apache.derby.iapi.store.raw.log.LogInstant-int-int-java.io.ObjectInput-">storeField</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
<dd><code>java.io.IOException</code> - RESOLVE</dd>
</dl>
</li>
</ul>
<a name="reserveSpaceForSlot-org.apache.derby.iapi.store.raw.log.LogInstant-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reserveSpaceForSlot</h4>
<pre>public&nbsp;void&nbsp;reserveSpaceForSlot(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant,
                                int&nbsp;slot,
                                int&nbsp;spaceToReserve)
                         throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                                java.io.IOException</pre>
<div class="block">reserveSpaceForSlot
        This method will reserve at least specified "spaceToReserve" bytes for the record
        in the slot.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#reserveSpaceForSlot-org.apache.derby.iapi.store.raw.log.LogInstant-int-int-">reserveSpaceForSlot</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
<dd><code>java.io.IOException</code> - RESOLVE</dd>
</dl>
</li>
</ul>
<a name="skipField-java.io.ObjectInput-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>skipField</h4>
<pre>public&nbsp;void&nbsp;skipField(java.io.ObjectInput&nbsp;in)
               throws java.io.IOException</pre>
<div class="block">Skip a field header and its data on the given stream.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#skipField-java.io.ObjectInput-">skipField</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - corrupt stream</dd>
</dl>
</li>
</ul>
<a name="skipRecord-java.io.ObjectInput-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>skipRecord</h4>
<pre>public&nbsp;void&nbsp;skipRecord(java.io.ObjectInput&nbsp;in)
                throws java.io.IOException</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#skipRecord-java.io.ObjectInput-">skipRecord</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="shiftRemainingData-int-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shiftRemainingData</h4>
<pre>private&nbsp;int&nbsp;shiftRemainingData(int&nbsp;slot,
                               int&nbsp;offset,
                               int&nbsp;oldLength,
                               int&nbsp;newLength)
                        throws java.io.IOException</pre>
<div class="block">Shift data within a record to account for an update.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>offset</code> - Offset where the update starts, need not be on a field boundry.</dd>
<dd><code>oldLength</code> - length of the data being replaced</dd>
<dd><code>newLength</code> - length of the data replacing the old data</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the length of the data in the record after the replaced data.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="setDeleteStatus-org.apache.derby.iapi.store.raw.log.LogInstant-int-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDeleteStatus</h4>
<pre>public&nbsp;void&nbsp;setDeleteStatus(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant,
                            int&nbsp;slot,
                            boolean&nbsp;delete)
                     throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                            java.io.IOException</pre>
<div class="block">Set the deleted status</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#setDeleteStatus-org.apache.derby.iapi.store.raw.log.LogInstant-int-boolean-">setDeleteStatus</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dd><code>slot</code> - the slot to delete or undelete</dd>
<dd><code>delete</code> - set delete status to this value</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
<dd><code>java.io.IOException</code> - RESOLVE</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#setDeleteStatus-int-boolean-"><code>BasePage.setDeleteStatus(int, boolean)</code></a></dd>
</dl>
</li>
</ul>
<a name="internalDeletedRecordCount--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>internalDeletedRecordCount</h4>
<pre>protected&nbsp;int&nbsp;internalDeletedRecordCount()</pre>
<div class="block">get record count without checking for latch</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#internalDeletedRecordCount--">internalDeletedRecordCount</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
</dl>
</li>
</ul>
<a name="purgeRecord-org.apache.derby.iapi.store.raw.log.LogInstant-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>purgeRecord</h4>
<pre>public&nbsp;void&nbsp;purgeRecord(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant,
                        int&nbsp;slot,
                        int&nbsp;recordId)
                 throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                        java.io.IOException</pre>
<div class="block">purgeRecord from page.  Move following slots up by one.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#purgeRecord-org.apache.derby.iapi.store.raw.log.LogInstant-int-int-">purgeRecord</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dd><code>slot</code> - the slot to purge</dd>
<dd><code>recordId</code> - the id of the record that is to be purged</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
<dd><code>java.io.IOException</code> - RESOLVE</dd>
</dl>
</li>
</ul>
<a name="getFieldOffset-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFieldOffset</h4>
<pre>private&nbsp;int&nbsp;getFieldOffset(int&nbsp;slot,
                           int&nbsp;fieldNumber)
                    throws java.io.IOException</pre>
<div class="block">Get the offset of the field header of the given field for
        the record in the given slot.

        Field number is the absolute number for the complete record, not just this portion.
        E.g. if this is a record portion that starts at field 3 and has 6 fields
        then the second field on this *page* has field number 4.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="currentTimeStamp--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>currentTimeStamp</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/raw/PageTimeStamp.html" title="interface in org.apache.derby.iapi.store.raw">PageTimeStamp</a>&nbsp;currentTimeStamp()</pre>
<div class="block">Get a time stamp for this page</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>page time stamp</dd>
</dl>
</li>
</ul>
<a name="setTimeStamp-org.apache.derby.iapi.store.raw.PageTimeStamp-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setTimeStamp</h4>
<pre>public&nbsp;void&nbsp;setTimeStamp(<a href="../../../../../../../org/apache/derby/iapi/store/raw/PageTimeStamp.html" title="interface in org.apache.derby.iapi.store.raw">PageTimeStamp</a>&nbsp;ts)
                  throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Set given pageVersion to be the as what is on this page</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - given time stamp is null or is not a time
        stamp implementation this page knows how to deal with</dd>
</dl>
</li>
</ul>
<a name="equalTimeStamp-org.apache.derby.iapi.store.raw.PageTimeStamp-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>equalTimeStamp</h4>
<pre>public&nbsp;boolean&nbsp;equalTimeStamp(<a href="../../../../../../../org/apache/derby/iapi/store/raw/PageTimeStamp.html" title="interface in org.apache.derby.iapi.store.raw">PageTimeStamp</a>&nbsp;ts)
                       throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">compare given PageVersion with pageVersion on page</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ts</code> - the page version gotton from this page via a currentTimeStamp
                or setTimeStamp call earlier</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the same</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - given time stamp not gotton from this page</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/iapi/store/raw/PageTimeStamp.html" title="interface in org.apache.derby.iapi.store.raw"><code>PageTimeStamp</code></a></dd>
</dl>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;java.lang.String&nbsp;toString()</pre>
<div class="block">debugging, print this page</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</li>
</ul>
<a name="toUncheckedString--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toUncheckedString</h4>
<pre>public&nbsp;java.lang.String&nbsp;toUncheckedString()</pre>
</li>
</ul>
<a name="pagedataToHexDump-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pagedataToHexDump</h4>
<pre>private static&nbsp;java.lang.String&nbsp;pagedataToHexDump(byte[]&nbsp;data)</pre>
<div class="block">Provide a hex dump of the data in the in memory version of the page.
 <p>
 The output looks like:

 00000000: 4d5a 9000 0300 0000 0400 0000 ffff 0000  MZ..............
 00000010: b800 0000 0000 0000 4000 0000 0000 0000  ........@.......
 00000020: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00000030: 0000 0000 0000 0000 0000 0000 8000 0000  ................
 00000040: 0e1f ba0e 00b4 09cd 21b8 014c cd21 5468  ........!..L.!Th
 00000050: 6973 2070 726f 6772 616d 2063 616e 6e6f  is program canno
 00000060: 7420 6265 2072 756e 2069 6e20 444f 5320  t be run in DOS 
 00000070: 6d6f 6465 2e0d 0a24 0000 0000 0000 0050  mode...$.......P
 00000080: 4500 004c 0109 008b abfd 3000 0000 0000  E..L......0.....
 00000090: 0000 00e0 000e 210b 0102 3700 3405 0000  ......!...7.4...
 000000a0: 8401 0000 6400 0000 6004 0000 1000 0000  ....d...`.......
 000000b0: 5005 0000 0008 6000 1000 0000 0200 0001  P.....`.........
 000000c0: 0000 0000 0000 0004 0000 0000 0000 0000  ................
 000000d0: 9007 0000 0400 0009 a207 0002 0000 0000  ................
 000000e0: 0010 0000 1000 0000 0010 0000 1000 0000  ................
 000000f0: 0000 0010 0000 0000 6006 00ef 8100 0000  ........`.......
 00000100: 5006 00e6 0c00 0000 0007 00d0 0400 0000  P...............
 00000110: 0000 0000 0000 0000 0000 0000 0000 0000  ................
 00000120: 1007 00c8 7100 0000 0000 0000 0000 0000  ....q...........
 00000130: 0000 0000 0000 0000 0000 0000 0000 0000  ................

 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>data</code> - array of bytes to dump.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The string with the hex dump in it.</dd>
</dl>
</li>
</ul>
<a name="pageHeaderToString--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pageHeaderToString</h4>
<pre>private&nbsp;java.lang.String&nbsp;pageHeaderToString()</pre>
</li>
</ul>
<a name="getPageDumpString--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPageDumpString</h4>
<pre>java.lang.String&nbsp;getPageDumpString()</pre>
</li>
</ul>
<a name="recordToString-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recordToString</h4>
<pre>private&nbsp;java.lang.String&nbsp;recordToString(int&nbsp;slot)</pre>
</li>
</ul>
<a name="getOverflowPage-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOverflowPage</h4>
<pre>protected&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html" title="class in org.apache.derby.impl.store.raw.data">StoredPage</a>&nbsp;getOverflowPage(long&nbsp;pageNumber)
                              throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Get the overflow page for a record that has already overflowed.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="getNewOverflowPage--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNewOverflowPage</h4>
<pre>protected&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a>&nbsp;getNewOverflowPage()
                               throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Get an empty overflow page.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#getNewOverflowPage--">getNewOverflowPage</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="getOverflowSlot-org.apache.derby.impl.store.raw.data.BasePage-org.apache.derby.impl.store.raw.data.StoredRecordHeader-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOverflowSlot</h4>
<pre>protected static&nbsp;int&nbsp;getOverflowSlot(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a>&nbsp;overflowPage,
                                     <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;recordHeader)
                              throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Get the overflow slot for a record that has already overflowed.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="getOverflowPageForInsert-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOverflowPageForInsert</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a>&nbsp;getOverflowPageForInsert(int&nbsp;currentSlot,
                                         java.lang.Object[]&nbsp;row,
                                         <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;validColumns)
                                  throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Get a overflow page that potentially can handle a new overflowed record.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="getOverflowPageForInsert-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOverflowPageForInsert</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a>&nbsp;getOverflowPageForInsert(int&nbsp;currentSlot,
                                         java.lang.Object[]&nbsp;row,
                                         <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;validColumns,
                                         int&nbsp;startColumn)
                                  throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#getOverflowPageForInsert-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-int-">getOverflowPageForInsert</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="updateOverflowed-org.apache.derby.iapi.store.raw.xact.RawTransaction-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-org.apache.derby.impl.store.raw.data.StoredRecordHeader-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateOverflowed</h4>
<pre>protected&nbsp;void&nbsp;updateOverflowed(<a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/RawTransaction.html" title="class in org.apache.derby.iapi.store.raw.xact">RawTransaction</a>&nbsp;t,
                                int&nbsp;slot,
                                java.lang.Object[]&nbsp;row,
                                <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;validColumns,
                                <a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data">StoredRecordHeader</a>&nbsp;recordHeader)
                         throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Update an already overflowed record.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - Slot of the original record on its original page</dd>
<dd><code>row</code> - new version of the data</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="updateOverflowDetails-org.apache.derby.iapi.store.raw.RecordHandle-org.apache.derby.iapi.store.raw.RecordHandle-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateOverflowDetails</h4>
<pre>public&nbsp;void&nbsp;updateOverflowDetails(<a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;handle,
                                  <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;overflowHandle)
                           throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Update a record handle to point to an overflowed record portion.
        Note that the record handle need not be the current page.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#updateOverflowDetails-org.apache.derby.iapi.store.raw.RecordHandle-org.apache.derby.iapi.store.raw.RecordHandle-">updateOverflowDetails</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>handle</code> - handle of the record for long row</dd>
<dd><code>overflowHandle</code> - the overflow (continuation) pointer for the long row</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="updateOverflowDetails-org.apache.derby.impl.store.raw.data.StoredPage-org.apache.derby.iapi.store.raw.RecordHandle-org.apache.derby.iapi.store.raw.RecordHandle-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateOverflowDetails</h4>
<pre>private&nbsp;void&nbsp;updateOverflowDetails(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredPage.html" title="class in org.apache.derby.impl.store.raw.data">StoredPage</a>&nbsp;handlePage,
                                   <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;handle,
                                   <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;overflowHandle)
                            throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="updateFieldOverflowDetails-org.apache.derby.iapi.store.raw.RecordHandle-org.apache.derby.iapi.store.raw.RecordHandle-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateFieldOverflowDetails</h4>
<pre>public&nbsp;void&nbsp;updateFieldOverflowDetails(<a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;handle,
                                       <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;overflowHandle)
                                throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#updateFieldOverflowDetails-org.apache.derby.iapi.store.raw.RecordHandle-org.apache.derby.iapi.store.raw.RecordHandle-">BasePage</a></code></span></div>
<div class="block">Update the overflow pointer for a long column

                <BR> MT - latched - page latch must be held</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#updateFieldOverflowDetails-org.apache.derby.iapi.store.raw.RecordHandle-org.apache.derby.iapi.store.raw.RecordHandle-">updateFieldOverflowDetails</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>handle</code> - handle of the record for long row</dd>
<dd><code>overflowHandle</code> - the overflow (continuation) pointer for the long row</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="appendOverflowFieldHeader-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-org.apache.derby.iapi.store.raw.RecordHandle-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>appendOverflowFieldHeader</h4>
<pre>public&nbsp;int&nbsp;appendOverflowFieldHeader(<a href="../../../../../../../org/apache/derby/iapi/services/io/DynamicByteArrayOutputStream.html" title="class in org.apache.derby.iapi.services.io">DynamicByteArrayOutputStream</a>&nbsp;logBuffer,
                                     <a href="../../../../../../../org/apache/derby/iapi/store/raw/RecordHandle.html" title="interface in org.apache.derby.iapi.store.raw">RecordHandle</a>&nbsp;overflowHandle)
                              throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                                     java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#appendOverflowFieldHeader-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-org.apache.derby.iapi.store.raw.RecordHandle-">BasePage</a></code></span></div>
<div class="block">Append an overflow pointer to a partly logged row,
                to point to a long column that just been logged.

                <BR> MT - latched - page latch must be held</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#appendOverflowFieldHeader-org.apache.derby.iapi.services.io.DynamicByteArrayOutputStream-org.apache.derby.iapi.store.raw.RecordHandle-">appendOverflowFieldHeader</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>logBuffer</code> - The buffer that contains the partially logged row.</dd>
<dd><code>overflowHandle</code> - the overflow (continuation) pointer
                                                                to the beginning of the long column</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="getSlotsInUse--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSlotsInUse</h4>
<pre>protected&nbsp;int&nbsp;getSlotsInUse()</pre>
</li>
</ul>
<a name="getMaxDataLength-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxDataLength</h4>
<pre>private&nbsp;int&nbsp;getMaxDataLength(int&nbsp;spaceAvailable,
                             int&nbsp;overflowThreshold)</pre>
<div class="block">return the max datalength allowed with the space available</div>
</li>
</ul>
<a name="isLong-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isLong</h4>
<pre>private&nbsp;boolean&nbsp;isLong(int&nbsp;fieldSize,
                       int&nbsp;overflowThreshold)</pre>
<div class="block">return whether the field has exceeded the max threshold for this page
        it compares the fieldSize with the largest possible field for this page</div>
</li>
</ul>
<a name="doUpdateAtSlot-org.apache.derby.iapi.store.raw.xact.RawTransaction-int-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doUpdateAtSlot</h4>
<pre>public&nbsp;void&nbsp;doUpdateAtSlot(<a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/RawTransaction.html" title="class in org.apache.derby.iapi.store.raw.xact">RawTransaction</a>&nbsp;t,
                           int&nbsp;slot,
                           int&nbsp;id,
                           java.lang.Object[]&nbsp;row,
                           <a href="../../../../../../../org/apache/derby/iapi/services/io/FormatableBitSet.html" title="class in org.apache.derby.iapi.services.io">FormatableBitSet</a>&nbsp;validColumns)
                    throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Perform an update.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#doUpdateAtSlot-org.apache.derby.iapi.store.raw.xact.RawTransaction-int-int-java.lang.Object:A-org.apache.derby.iapi.services.io.FormatableBitSet-">doUpdateAtSlot</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby policy</dd>
</dl>
</li>
</ul>
<a name="checkRowReservedSpace-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkRowReservedSpace</h4>
<pre>private&nbsp;boolean&nbsp;checkRowReservedSpace(int&nbsp;slot)
                               throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">See if reserved space should be reclaimed for the input row.
 <p>
 See if the row on this page has reserved space that should be shrunk 
 once the update commits.  Will only indicate space should be reclaimed
 if at least RawTransaction.MINIMUM_RECORD_SIZE_DEFAULT bytes can be
 reclaimed.  
 <p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if space should be reclaimed from this row post commit.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="compactRecord-org.apache.derby.iapi.store.raw.xact.RawTransaction-int-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>compactRecord</h4>
<pre>protected&nbsp;void&nbsp;compactRecord(<a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/RawTransaction.html" title="class in org.apache.derby.iapi.store.raw.xact">RawTransaction</a>&nbsp;t,
                             int&nbsp;slot,
                             int&nbsp;id)
                      throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#compactRecord-org.apache.derby.iapi.store.raw.xact.RawTransaction-int-int-">BasePage</a></code></span></div>
<div class="block">Subclass implementation of compactRecord.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#compactRecord-org.apache.derby.iapi.store.raw.xact.RawTransaction-int-int-">compactRecord</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html#compactRecord-org.apache.derby.iapi.store.raw.RecordHandle-"><code>BasePage.compactRecord(org.apache.derby.iapi.store.raw.RecordHandle)</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredFieldHeader.html" title="class in org.apache.derby.impl.store.raw.data"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/StoredRecordHeader.html" title="class in org.apache.derby.impl.store.raw.data"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/impl/store/raw/data/StoredPage.html" target="_top">Frames</a></li>
<li><a href="StoredPage.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
