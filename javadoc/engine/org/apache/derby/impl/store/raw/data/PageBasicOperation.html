<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:05:19 IST 2017 -->
<title>PageBasicOperation (Apache Derby V10.13 Internals)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PageBasicOperation (Apache Derby V10.13 Internals)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":6,"i13":10,"i14":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageActions.html" title="interface in org.apache.derby.impl.store.raw.data"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageCreationArgs.html" title="class in org.apache.derby.impl.store.raw.data"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/impl/store/raw/data/PageBasicOperation.html" target="_top">Frames</a></li>
<li><a href="PageBasicOperation.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derby.impl.store.raw.data</div>
<h2 title="Class PageBasicOperation" class="title">Class PageBasicOperation</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.derby.impl.store.raw.data.PageBasicOperation</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.io.Externalizable, java.io.Serializable, <a href="../../../../../../../org/apache/derby/iapi/services/io/Formatable.html" title="interface in org.apache.derby.iapi.services.io">Formatable</a>, <a href="../../../../../../../org/apache/derby/iapi/services/io/TypedFormat.html" title="interface in org.apache.derby.iapi.services.io">TypedFormat</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html" title="interface in org.apache.derby.iapi.store.raw">Loggable</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/RePreparable.html" title="interface in org.apache.derby.iapi.store.raw">RePreparable</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../../../../org/apache/derby/impl/store/raw/data/LogicalPageOperation.html" title="class in org.apache.derby.impl.store.raw.data">LogicalPageOperation</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/LogicalUndoOperation.html" title="class in org.apache.derby.impl.store.raw.data">LogicalUndoOperation</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/PhysicalPageOperation.html" title="class in org.apache.derby.impl.store.raw.data">PhysicalPageOperation</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/PhysicalUndoOperation.html" title="class in org.apache.derby.impl.store.raw.data">PhysicalUndoOperation</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/SetReservedSpaceOperation.html" title="class in org.apache.derby.impl.store.raw.data">SetReservedSpaceOperation</a></dd>
</dl>
<hr>
<br>
<pre>abstract class <span class="typeNameLabel">PageBasicOperation</span>
extends java.lang.Object
implements <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html" title="interface in org.apache.derby.iapi.store.raw">Loggable</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/RePreparable.html" title="interface in org.apache.derby.iapi.store.raw">RePreparable</a></pre>
<div class="block">A PageBasicOperation changed the content of a page, this is the root class of all
        page oriented operation. Each PageBasicOperation record change(s)
        that apply to <B>one and only one page</B>.  The pageID that is changed
        must be recorded in the log operation - in other words, redo
        must be physical (or more correctly, in Gray's term, physiological, since
        changes are logical <B>within</B> a page).
        <BR>Undo can be logical, but the undo logic must be hidden in
        generateUndo. By the time a compensation operation is logged as a
        LogOperation, the page that needs roll back must be determined.

        <PRE></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html" title="interface in org.apache.derby.iapi.store.raw"><code>Loggable</code></a></dd>
<table cellpadding=2 cellspacing=2><tr><td>Format ID</td><td>no format id, an abstract class.</td></tr>
<tr><td>Purpose</td><td>provide methods for logical undo</td></tr>
<tr><td>Upgrade</td><td></td></tr>
<tr><td>Disk Layout</td><td>pageId(PageKey)			the page this operation applies to
		pageVersion(CompressedLong)	the page version this operation applied to
		OptionalData	none</td></tr></table></dt>

</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../../../org/apache/derby/iapi/store/raw/data/RawContainerHandle.html" title="interface in org.apache.derby.iapi.store.raw.data">RawContainerHandle</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#containerHdl">containerHdl</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#foundHere">foundHere</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#page">page</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/iapi/store/raw/PageKey.html" title="class in org.apache.derby.iapi.store.raw">PageKey</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#pageId">pageId</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#pageVersion">pageVersion</a></span></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.derby.iapi.store.raw.Loggable">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;org.apache.derby.iapi.store.raw.<a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html" title="interface in org.apache.derby.iapi.store.raw">Loggable</a></h3>
<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#ABORT">ABORT</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#BI_LOG">BI_LOG</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#CHECKSUM">CHECKSUM</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#COMMIT">COMMIT</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#COMPENSATION">COMPENSATION</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#FILE_RESOURCE">FILE_RESOURCE</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#FIRST">FIRST</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#LAST">LAST</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#PREPARE">PREPARE</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#RAWSTORE">RAWSTORE</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#XA_NEEDLOCK">XA_NEEDLOCK</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#PageBasicOperation--">PageBasicOperation</a></span>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#PageBasicOperation-org.apache.derby.impl.store.raw.data.BasePage-">PageBasicOperation</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a>&nbsp;page)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#findpage-org.apache.derby.iapi.store.raw.Transaction-">findpage</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a>&nbsp;xact)</code>
<div class="block">Find the page the operation applies to and latch it, this only
            uses the segmentId, containerId, and pageId stored in this log
                record to find the page.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html" title="interface in org.apache.derby.iapi.store.raw">Page</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#getPage--">getPage</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#getPageForRedoRecovery-org.apache.derby.iapi.store.raw.Transaction-">getPageForRedoRecovery</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a>&nbsp;xact)</code>
<div class="block">Subclass (e.g., init page) that wishes to do something about missing
                pages in load tran should override this method to return the page</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../../org/apache/derby/iapi/store/raw/PageKey.html" title="class in org.apache.derby.iapi.store.raw">PageKey</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#getPageId--">getPageId</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#getPageVersion--">getPageVersion</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/iapi/util/ByteArray.html" title="class in org.apache.derby.iapi.util">ByteArray</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#getPreparedLog--">getPreparedLog</a></span>()</code>
<div class="block">the default for optional data is set to null.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#group--">group</a></span>()</code>
<div class="block">A page operation is a RAWSTORE log record</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#needsRedo-org.apache.derby.iapi.store.raw.Transaction-">needsRedo</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a>&nbsp;xact)</code>
<div class="block">Returns true if this op should be redone during recovery redo,
            if so, get and latched the page.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#readExternal-java.io.ObjectInput-">readExternal</a></span>(java.io.ObjectInput&nbsp;in)</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#reclaimPrepareLocks-org.apache.derby.iapi.store.raw.Transaction-org.apache.derby.iapi.store.raw.LockingPolicy-">reclaimPrepareLocks</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a>&nbsp;t,
                   <a href="../../../../../../../org/apache/derby/iapi/store/raw/LockingPolicy.html" title="interface in org.apache.derby.iapi.store.raw">LockingPolicy</a>&nbsp;locking_policy)</code>
<div class="block">reclaim locks associated with the changes in this log record.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#releaseResource-org.apache.derby.iapi.store.raw.Transaction-">releaseResource</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a>&nbsp;xact)</code>
<div class="block">Release latched page and any other resources acquired during a previous
                findpage, safe to call multiple times.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#resetPageNumber-long-">resetPageNumber</a></span>(long&nbsp;pageNumber)</code>
<div class="block">Reset the pageNumber</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#restoreMe-org.apache.derby.iapi.store.raw.Transaction-org.apache.derby.impl.store.raw.data.BasePage-org.apache.derby.iapi.store.raw.log.LogInstant-org.apache.derby.iapi.services.io.LimitObjectInput-">restoreMe</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a>&nbsp;xact,
         <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a>&nbsp;undoPage,
         <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;CLRinstant,
         <a href="../../../../../../../org/apache/derby/iapi/services/io/LimitObjectInput.html" title="interface in org.apache.derby.iapi.services.io">LimitObjectInput</a>&nbsp;in)</code>
<div class="block">Undo the change indicated by this log operation and optional data.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#toString--">toString</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#writeExternal-java.io.ObjectOutput-">writeExternal</a></span>(java.io.ObjectOutput&nbsp;out)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.derby.iapi.store.raw.Loggable">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.apache.derby.iapi.store.raw.<a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html" title="interface in org.apache.derby.iapi.store.raw">Loggable</a></h3>
<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#doMe-org.apache.derby.iapi.store.raw.Transaction-org.apache.derby.iapi.store.raw.log.LogInstant-org.apache.derby.iapi.services.io.LimitObjectInput-">doMe</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.derby.iapi.services.io.TypedFormat">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.apache.derby.iapi.services.io.<a href="../../../../../../../org/apache/derby/iapi/services/io/TypedFormat.html" title="interface in org.apache.derby.iapi.services.io">TypedFormat</a></h3>
<code><a href="../../../../../../../org/apache/derby/iapi/services/io/TypedFormat.html#getTypeFormatId--">getTypeFormatId</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="pageId">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pageId</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/raw/PageKey.html" title="class in org.apache.derby.iapi.store.raw">PageKey</a> pageId</pre>
</li>
</ul>
<a name="pageVersion">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pageVersion</h4>
<pre>private&nbsp;long pageVersion</pre>
</li>
</ul>
<a name="page">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>page</h4>
<pre>protected transient&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a> page</pre>
</li>
</ul>
<a name="containerHdl">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>containerHdl</h4>
<pre>protected transient&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/raw/data/RawContainerHandle.html" title="interface in org.apache.derby.iapi.store.raw.data">RawContainerHandle</a> containerHdl</pre>
</li>
</ul>
<a name="foundHere">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>foundHere</h4>
<pre>protected transient&nbsp;boolean foundHere</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="PageBasicOperation-org.apache.derby.impl.store.raw.data.BasePage-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PageBasicOperation</h4>
<pre>PageBasicOperation(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a>&nbsp;page)</pre>
</li>
</ul>
<a name="PageBasicOperation--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>PageBasicOperation</h4>
<pre>PageBasicOperation()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="toString--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;java.lang.String&nbsp;toString()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</li>
</ul>
<a name="writeExternal-java.io.ObjectOutput-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeExternal</h4>
<pre>public&nbsp;void&nbsp;writeExternal(java.io.ObjectOutput&nbsp;out)
                   throws java.io.IOException</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>writeExternal</code>&nbsp;in interface&nbsp;<code>java.io.Externalizable</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="readExternal-java.io.ObjectInput-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readExternal</h4>
<pre>public&nbsp;void&nbsp;readExternal(java.io.ObjectInput&nbsp;in)
                  throws java.io.IOException,
                         java.lang.ClassNotFoundException</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>readExternal</code>&nbsp;in interface&nbsp;<code>java.io.Externalizable</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code>java.lang.ClassNotFoundException</code></dd>
</dl>
</li>
</ul>
<a name="needsRedo-org.apache.derby.iapi.store.raw.Transaction-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>needsRedo</h4>
<pre>public final&nbsp;boolean&nbsp;needsRedo(<a href="../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a>&nbsp;xact)
                        throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Returns true if this op should be redone during recovery redo,
            if so, get and latched the page.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#needsRedo-org.apache.derby.iapi.store.raw.Transaction-">needsRedo</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html" title="interface in org.apache.derby.iapi.store.raw">Loggable</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>xact</code> - The transaction trying to redo this operation</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if operation needs redoing, false if not.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby policy.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#releaseResource-org.apache.derby.iapi.store.raw.Transaction-"><code>Loggable.releaseResource(org.apache.derby.iapi.store.raw.Transaction)</code></a></dd>
</dl>
</li>
</ul>
<a name="releaseResource-org.apache.derby.iapi.store.raw.Transaction-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>releaseResource</h4>
<pre>public&nbsp;void&nbsp;releaseResource(<a href="../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a>&nbsp;xact)</pre>
<div class="block">Release latched page and any other resources acquired during a previous
                findpage, safe to call multiple times.

                In this RawStore implementataion, resource is acquired by a log
                operation in one of two places
                <nl>
                <li> during runtime or recovery undo in PageOperation.generateUndo()
                <li> during recovery redo in PageBasicOperation.needsRedo()
                </nl></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#releaseResource-org.apache.derby.iapi.store.raw.Transaction-">releaseResource</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html" title="interface in org.apache.derby.iapi.store.raw">Loggable</a></code></dd>
</dl>
</li>
</ul>
<a name="group--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>group</h4>
<pre>public&nbsp;int&nbsp;group()</pre>
<div class="block">A page operation is a RAWSTORE log record</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#group--">group</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html" title="interface in org.apache.derby.iapi.store.raw">Loggable</a></code></dd>
</dl>
</li>
</ul>
<a name="getPreparedLog--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPreparedLog</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/derby/iapi/util/ByteArray.html" title="class in org.apache.derby.iapi.util">ByteArray</a>&nbsp;getPreparedLog()
                         throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">the default for optional data is set to null.  If an operation has optional data,
                the operation need to prepare the optional data for this method.

                WARNING: If a log operation extends this class, and the operation has optional data,
                it MUST overwrite this method to return a ByteArray that contains the optional data.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#getPreparedLog--">getPreparedLog</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html" title="interface in org.apache.derby.iapi.store.raw">Loggable</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby policy.</dd>
</dl>
</li>
</ul>
<a name="reclaimPrepareLocks-org.apache.derby.iapi.store.raw.Transaction-org.apache.derby.iapi.store.raw.LockingPolicy-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reclaimPrepareLocks</h4>
<pre>public&nbsp;void&nbsp;reclaimPrepareLocks(<a href="../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a>&nbsp;t,
                                <a href="../../../../../../../org/apache/derby/iapi/store/raw/LockingPolicy.html" title="interface in org.apache.derby.iapi.store.raw">LockingPolicy</a>&nbsp;locking_policy)
                         throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">reclaim locks associated with the changes in this log record.
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/RePreparable.html#reclaimPrepareLocks-org.apache.derby.iapi.store.raw.Transaction-org.apache.derby.iapi.store.raw.LockingPolicy-">reclaimPrepareLocks</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/RePreparable.html" title="interface in org.apache.derby.iapi.store.raw">RePreparable</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="resetPageNumber-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resetPageNumber</h4>
<pre>protected final&nbsp;void&nbsp;resetPageNumber(long&nbsp;pageNumber)</pre>
<div class="block">Reset the pageNumber</div>
</li>
</ul>
<a name="getPageId--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPageId</h4>
<pre>protected final&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/raw/PageKey.html" title="class in org.apache.derby.iapi.store.raw">PageKey</a>&nbsp;getPageId()</pre>
</li>
</ul>
<a name="findpage-org.apache.derby.iapi.store.raw.Transaction-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findpage</h4>
<pre>public final&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a>&nbsp;findpage(<a href="../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a>&nbsp;xact)
                        throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Find the page the operation applies to and latch it, this only
            uses the segmentId, containerId, and pageId stored in this log
                record to find the page.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>null if container is dropped and committed (possibly
                stubbified), else return the latched page</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby policy.</dd>
</dl>
</li>
</ul>
<a name="getPageForRedoRecovery-org.apache.derby.iapi.store.raw.Transaction-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPageForRedoRecovery</h4>
<pre>protected&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a>&nbsp;getPageForRedoRecovery(<a href="../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a>&nbsp;xact)
                                   throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Subclass (e.g., init page) that wishes to do something about missing
                pages in load tran should override this method to return the page</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Derby Standard error policy</dd>
</dl>
</li>
</ul>
<a name="getPage--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPage</h4>
<pre>public final&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/raw/Page.html" title="interface in org.apache.derby.iapi.store.raw">Page</a>&nbsp;getPage()</pre>
</li>
</ul>
<a name="getPageVersion--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPageVersion</h4>
<pre>public final&nbsp;long&nbsp;getPageVersion()</pre>
</li>
</ul>
<a name="restoreMe-org.apache.derby.iapi.store.raw.Transaction-org.apache.derby.impl.store.raw.data.BasePage-org.apache.derby.iapi.store.raw.log.LogInstant-org.apache.derby.iapi.services.io.LimitObjectInput-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>restoreMe</h4>
<pre>public abstract&nbsp;void&nbsp;restoreMe(<a href="../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a>&nbsp;xact,
                               <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a>&nbsp;undoPage,
                               <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;CLRinstant,
                               <a href="../../../../../../../org/apache/derby/iapi/services/io/LimitObjectInput.html" title="interface in org.apache.derby.iapi.services.io">LimitObjectInput</a>&nbsp;in)
                        throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                               java.io.IOException</pre>
<div class="block">Undo the change indicated by this log operation and optional data.
                The page the undo should apply to is the latched undoPage.
                The undoPage must be the same page as the doMe page and the undo
                operation must restore the before image of the row that changed.  

                <BR> this can only be used under special circumstances: namely
                table level locking, and no internal or nested transaction, and all
                operations are rollec back with restoreMe instead of undoMe.

                <BR><B>This method is here to support BeforeImageLogging</B></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>xact</code> - the Transaction doing the rollback</dd>
<dd><code>undoPage</code> - the page to rollback changes on</dd>
<dd><code>CLRinstant</code> - the log instant of this (PageUndo) operation</dd>
<dd><code>in</code> - optional data for the rollback operation</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - Can be thrown by any of the methods of ObjectInput.</dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby policy.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageActions.html" title="interface in org.apache.derby.impl.store.raw.data"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageCreationArgs.html" title="class in org.apache.derby.impl.store.raw.data"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/impl/store/raw/data/PageBasicOperation.html" target="_top">Frames</a></li>
<li><a href="PageBasicOperation.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
