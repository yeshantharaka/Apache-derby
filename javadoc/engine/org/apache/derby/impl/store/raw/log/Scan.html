<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:05:21 IST 2017 -->
<title>Scan (Apache Derby V10.13 Internals)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Scan (Apache Derby V10.13 Internals)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/log/ReadOnly.html" title="class in org.apache.derby.impl.store.raw.log"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/log/StreamLogScan.html" title="interface in org.apache.derby.impl.store.raw.log"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/impl/store/raw/log/Scan.html" target="_top">Frames</a></li>
<li><a href="Scan.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derby.impl.store.raw.log</div>
<h2 title="Class Scan" class="title">Class Scan</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.derby.impl.store.raw.log.Scan</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogScan.html" title="interface in org.apache.derby.iapi.store.raw.log">LogScan</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/log/StreamLogScan.html" title="interface in org.apache.derby.impl.store.raw.log">StreamLogScan</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">Scan</span>
extends java.lang.Object
implements <a href="../../../../../../../org/apache/derby/impl/store/raw/log/StreamLogScan.html" title="interface in org.apache.derby.impl.store.raw.log">StreamLogScan</a></pre>
<div class="block">Scan the the log which is implemented by a series of log files.n
                This log scan knows how to move across log file if it is positioned at
                the boundary of a log file and needs to getNextRecord.

        <PRE>
        4 bytes - length of user data, i.e. N
        8 bytes - long representing log instant
        N bytes of supplied data
        4 bytes - length of user data, i.e. N
        </PRE></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static byte</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#BACKWARD">BACKWARD</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static byte</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#BACKWARD_FROM_LOG_END">BACKWARD_FROM_LOG_END</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#currentInstant">currentInstant</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#currentLogFileLength">currentLogFileLength</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#currentLogFileNumber">currentLogFileNumber</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static byte</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#FORWARD">FORWARD</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#fuzzyLogEnd">fuzzyLogEnd</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#knownGoodLogEnd">knownGoodLogEnd</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html" title="class in org.apache.derby.impl.store.raw.log">LogToFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#logFactory">logFactory</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#scan">scan</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private byte</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#scanDirection">scanDirection</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#stopAt">stopAt</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#Scan-org.apache.derby.impl.store.raw.log.LogToFile-long-org.apache.derby.iapi.store.raw.log.LogInstant-byte-">Scan</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html" title="class in org.apache.derby.impl.store.raw.log">LogToFile</a>&nbsp;logFactory,
    long&nbsp;startAt,
    <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;stopAt,
    byte&nbsp;direction)</code>
<div class="block">For backward scan, we expect a scan positioned at the end of the next log record.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#close--">close</a></span>()</code>
<div class="block">Close the scan.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#getInstant--">getInstant</a></span>()</code>
<div class="block">Return the log instant (as an integer) the scan is currently on - this is the log
                instant of the log record that was returned by getNextRecord.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#getLogInstant--">getLogInstant</a></span>()</code>
<div class="block">Return the log instant the scan is currently on - this is the log
                instant of the log record that was returned by getNextRecord.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#getLogRecordEnd--">getLogRecordEnd</a></span>()</code>
<div class="block">Return the log instant at the end of the log record on the current
                LogFile in the form of a log instant.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogRecord.html" title="class in org.apache.derby.impl.store.raw.log">LogRecord</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#getNextRecord-org.apache.derby.iapi.services.io.ArrayInputStream-org.apache.derby.iapi.store.raw.xact.TransactionId-int-">getNextRecord</a></span>(<a href="../../../../../../../org/apache/derby/iapi/services/io/ArrayInputStream.html" title="class in org.apache.derby.iapi.services.io">ArrayInputStream</a>&nbsp;input,
             <a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/TransactionId.html" title="interface in org.apache.derby.iapi.store.raw.xact">TransactionId</a>&nbsp;tranId,
             int&nbsp;groupmask)</code>
<div class="block">Read the next log record.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogRecord.html" title="class in org.apache.derby.impl.store.raw.log">LogRecord</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#getNextRecordBackward-org.apache.derby.iapi.services.io.ArrayInputStream-org.apache.derby.iapi.store.raw.xact.TransactionId-int-">getNextRecordBackward</a></span>(<a href="../../../../../../../org/apache/derby/iapi/services/io/ArrayInputStream.html" title="class in org.apache.derby.iapi.services.io">ArrayInputStream</a>&nbsp;input,
                     <a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/TransactionId.html" title="interface in org.apache.derby.iapi.store.raw.xact">TransactionId</a>&nbsp;tranId,
                     int&nbsp;groupmask)</code>
<div class="block">Read the previous log record.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogRecord.html" title="class in org.apache.derby.impl.store.raw.log">LogRecord</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#getNextRecordForward-org.apache.derby.iapi.services.io.ArrayInputStream-org.apache.derby.iapi.store.raw.xact.TransactionId-int-">getNextRecordForward</a></span>(<a href="../../../../../../../org/apache/derby/iapi/services/io/ArrayInputStream.html" title="class in org.apache.derby.iapi.services.io">ArrayInputStream</a>&nbsp;input,
                    <a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/TransactionId.html" title="interface in org.apache.derby.iapi.store.raw.xact">TransactionId</a>&nbsp;tranId,
                    int&nbsp;groupmask)</code>
<div class="block">Read the next log record.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#isLogEndFuzzy--">isLogEndFuzzy</a></span>()</code>
<div class="block">returns true if there is partially writen log records before the crash 
           in the last log file.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/Scan.html#resetPosition-org.apache.derby.iapi.store.raw.log.LogInstant-">resetPosition</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant)</code>
<div class="block">Reset the scan to the given LogInstant.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="FORWARD">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FORWARD</h4>
<pre>public static final&nbsp;byte FORWARD</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.log.Scan.FORWARD">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="BACKWARD">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BACKWARD</h4>
<pre>public static final&nbsp;byte BACKWARD</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.log.Scan.BACKWARD">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="BACKWARD_FROM_LOG_END">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BACKWARD_FROM_LOG_END</h4>
<pre>public static final&nbsp;byte BACKWARD_FROM_LOG_END</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.log.Scan.BACKWARD_FROM_LOG_END">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="scan">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scan</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a> scan</pre>
</li>
</ul>
<a name="logFactory">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logFactory</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html" title="class in org.apache.derby.impl.store.raw.log">LogToFile</a> logFactory</pre>
</li>
</ul>
<a name="currentLogFileNumber">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>currentLogFileNumber</h4>
<pre>private&nbsp;long currentLogFileNumber</pre>
</li>
</ul>
<a name="currentLogFileLength">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>currentLogFileLength</h4>
<pre>private&nbsp;long currentLogFileLength</pre>
</li>
</ul>
<a name="knownGoodLogEnd">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>knownGoodLogEnd</h4>
<pre>private&nbsp;long knownGoodLogEnd</pre>
</li>
</ul>
<a name="currentInstant">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>currentInstant</h4>
<pre>private&nbsp;long currentInstant</pre>
</li>
</ul>
<a name="stopAt">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stopAt</h4>
<pre>private&nbsp;long stopAt</pre>
</li>
</ul>
<a name="scanDirection">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scanDirection</h4>
<pre>private&nbsp;byte scanDirection</pre>
</li>
</ul>
<a name="fuzzyLogEnd">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>fuzzyLogEnd</h4>
<pre>private&nbsp;boolean fuzzyLogEnd</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Scan-org.apache.derby.impl.store.raw.log.LogToFile-long-org.apache.derby.iapi.store.raw.log.LogInstant-byte-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Scan</h4>
<pre>public&nbsp;Scan(<a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html" title="class in org.apache.derby.impl.store.raw.log">LogToFile</a>&nbsp;logFactory,
            long&nbsp;startAt,
            <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;stopAt,
            byte&nbsp;direction)
     throws java.io.IOException,
            <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">For backward scan, we expect a scan positioned at the end of the next log record.
                For forward scan, we expect a scan positioned at the beginning of the next log record.

                For forward flushed scan, we expect stopAt to be the instant for the
                   first not-flushed log record. Like any forward scan, we expect a scan
                   positioned at the beginning of the next log record.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
<dd><code>java.io.IOException</code> - cannot access the log at the new position.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getNextRecord-org.apache.derby.iapi.services.io.ArrayInputStream-org.apache.derby.iapi.store.raw.xact.TransactionId-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNextRecord</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogRecord.html" title="class in org.apache.derby.impl.store.raw.log">LogRecord</a>&nbsp;getNextRecord(<a href="../../../../../../../org/apache/derby/iapi/services/io/ArrayInputStream.html" title="class in org.apache.derby.iapi.services.io">ArrayInputStream</a>&nbsp;input,
                               <a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/TransactionId.html" title="interface in org.apache.derby.iapi.store.raw.xact">TransactionId</a>&nbsp;tranId,
                               int&nbsp;groupmask)
                        throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Read the next log record.
                Switching log to a previous log file if necessary, 
                Resize the input stream byte array if necessary.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/log/StreamLogScan.html#getNextRecord-org.apache.derby.iapi.services.io.ArrayInputStream-org.apache.derby.iapi.store.raw.xact.TransactionId-int-">getNextRecord</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/log/StreamLogScan.html" title="interface in org.apache.derby.impl.store.raw.log">StreamLogScan</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>input</code> - the ArrayInputStream to put the log record</dd>
<dd><code>tranId</code> - if non-null, only log record that equals tranId 
                            will be returned.  If null, log records are not 
                            filtered on transaction Id.</dd>
<dd><code>groupmask</code> - if non-zero, only log record whose Loggable's group
                            value is included in the groupmask is returned.  
                            groupmask can be a bit wise OR of many Loggable 
                            groups.  If zero, log records are not filtered on 
                            the Loggable's group.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the next LogRecord, or null if the end of the
                scan has been reached.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/impl/store/raw/log/StreamLogScan.html#getNextRecord-org.apache.derby.iapi.services.io.ArrayInputStream-org.apache.derby.iapi.store.raw.xact.TransactionId-int-"><code>StreamLogScan.getNextRecord(org.apache.derby.iapi.services.io.ArrayInputStream, org.apache.derby.iapi.store.raw.xact.TransactionId, int)</code></a></dd>
</dl>
</li>
</ul>
<a name="getNextRecordBackward-org.apache.derby.iapi.services.io.ArrayInputStream-org.apache.derby.iapi.store.raw.xact.TransactionId-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNextRecordBackward</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogRecord.html" title="class in org.apache.derby.impl.store.raw.log">LogRecord</a>&nbsp;getNextRecordBackward(<a href="../../../../../../../org/apache/derby/iapi/services/io/ArrayInputStream.html" title="class in org.apache.derby.iapi.services.io">ArrayInputStream</a>&nbsp;input,
                                        <a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/TransactionId.html" title="interface in org.apache.derby.iapi.store.raw.xact">TransactionId</a>&nbsp;tranId,
                                        int&nbsp;groupmask)
                                 throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                                        java.io.IOException,
                                        java.lang.ClassNotFoundException</pre>
<div class="block">Read the previous log record.
                Switching log to a previous log file if necessary, 
                Resize the input stream byte array if necessary.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the previous LogRecord, or null if the end of the
                scan has been reached.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
<dd><code>java.io.IOException</code></dd>
<dd><code>java.lang.ClassNotFoundException</code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/impl/store/raw/log/StreamLogScan.html#getNextRecord-org.apache.derby.iapi.services.io.ArrayInputStream-org.apache.derby.iapi.store.raw.xact.TransactionId-int-"><code>Side effects include: 
				on a successful read, setting currentInstant.
				on a log file switch, setting currentLogFileNumber.</code></a></dd>
</dl>
</li>
</ul>
<a name="getNextRecordForward-org.apache.derby.iapi.services.io.ArrayInputStream-org.apache.derby.iapi.store.raw.xact.TransactionId-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNextRecordForward</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogRecord.html" title="class in org.apache.derby.impl.store.raw.log">LogRecord</a>&nbsp;getNextRecordForward(<a href="../../../../../../../org/apache/derby/iapi/services/io/ArrayInputStream.html" title="class in org.apache.derby.iapi.services.io">ArrayInputStream</a>&nbsp;input,
                                       <a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/TransactionId.html" title="interface in org.apache.derby.iapi.store.raw.xact">TransactionId</a>&nbsp;tranId,
                                       int&nbsp;groupmask)
                                throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                                       java.io.IOException,
                                       java.lang.ClassNotFoundException</pre>
<div class="block">Read the next log record.
                Switching log to a previous log file if necessary, 
                Resize the input stream byte array if necessary.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the next LogRecord, or null if the end of the
                scan has been reached.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
<dd><code>java.io.IOException</code></dd>
<dd><code>java.lang.ClassNotFoundException</code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/impl/store/raw/log/StreamLogScan.html#getNextRecord-org.apache.derby.iapi.services.io.ArrayInputStream-org.apache.derby.iapi.store.raw.xact.TransactionId-int-"><code>Side effects include: 
				on a successful read, setting currentInstant, knownGoodLogEnd
				on a log file switch, setting currentLogFileNumber, currentLogFileLength.
				on detecting a fuzzy log end that needs clearing, it will call
				logFactory to clear the fuzzy log end.</code></a></dd>
</dl>
</li>
</ul>
<a name="resetPosition-org.apache.derby.iapi.store.raw.log.LogInstant-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resetPosition</h4>
<pre>public&nbsp;void&nbsp;resetPosition(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant)
                   throws java.io.IOException,
                          <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Reset the scan to the given LogInstant.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/log/StreamLogScan.html#resetPosition-org.apache.derby.iapi.store.raw.log.LogInstant-">resetPosition</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/log/StreamLogScan.html" title="interface in org.apache.derby.impl.store.raw.log">StreamLogScan</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>instant</code> - the position to reset to</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - scan cannot access the log at the new position.</dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="getInstant--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInstant</h4>
<pre>public&nbsp;long&nbsp;getInstant()</pre>
<div class="block">Return the log instant (as an integer) the scan is currently on - this is the log
                instant of the log record that was returned by getNextRecord.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/log/StreamLogScan.html#getInstant--">getInstant</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/log/StreamLogScan.html" title="interface in org.apache.derby.impl.store.raw.log">StreamLogScan</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>INVALID_LOG_INSTANT if no records have been returned yet or
                the scan has completed.</dd>
</dl>
</li>
</ul>
<a name="getLogRecordEnd--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLogRecordEnd</h4>
<pre>public&nbsp;long&nbsp;getLogRecordEnd()</pre>
<div class="block">Return the log instant at the end of the log record on the current
                LogFile in the form of a log instant.
        After the scan has been closed, the end of the last log record will be
        returned except when the scan ended in an empty log file.  In that
        case, the start of this empty log file will be returned.  (This is
        done to make sure new log records are inserted into the newest log
        file.)</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/log/StreamLogScan.html#getLogRecordEnd--">getLogRecordEnd</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/log/StreamLogScan.html" title="interface in org.apache.derby.impl.store.raw.log">StreamLogScan</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>INVALID_LOG_INSTANT if this is not a FORWARD scan or, no
                record have been returned yet or the scan has completed.</dd>
</dl>
</li>
</ul>
<a name="isLogEndFuzzy--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isLogEndFuzzy</h4>
<pre>public&nbsp;boolean&nbsp;isLogEndFuzzy()</pre>
<div class="block">returns true if there is partially writen log records before the crash 
           in the last log file. Partiall wrires are identified during forward 
           redo scans for log recovery.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/log/StreamLogScan.html#isLogEndFuzzy--">isLogEndFuzzy</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/log/StreamLogScan.html" title="interface in org.apache.derby.impl.store.raw.log">StreamLogScan</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if  fuzzy log end found during forward scan, this happens
           if there was a partially written log records before the crash.</dd>
</dl>
</li>
</ul>
<a name="getLogInstant--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLogInstant</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;getLogInstant()</pre>
<div class="block">Return the log instant the scan is currently on - this is the log
                instant of the log record that was returned by getNextRecord.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/log/StreamLogScan.html#getLogInstant--">getLogInstant</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/log/StreamLogScan.html" title="interface in org.apache.derby.impl.store.raw.log">StreamLogScan</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>null if no records have been returned yet or the scan has
                completed.</dd>
</dl>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block">Close the scan.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/log/StreamLogScan.html#close--">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/log/StreamLogScan.html" title="interface in org.apache.derby.impl.store.raw.log">StreamLogScan</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/log/ReadOnly.html" title="class in org.apache.derby.impl.store.raw.log"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/log/StreamLogScan.html" title="interface in org.apache.derby.impl.store.raw.log"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/impl/store/raw/log/Scan.html" target="_top">Frames</a></li>
<li><a href="Scan.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
