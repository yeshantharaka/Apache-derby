<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:05:21 IST 2017 -->
<title>LogToFile (Apache Derby V10.13 Internals)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="LogToFile (Apache Derby V10.13 Internals)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":9,"i29":10,"i30":10,"i31":10,"i32":10,"i33":10,"i34":10,"i35":10,"i36":9,"i37":10,"i38":10,"i39":10,"i40":10,"i41":10,"i42":10,"i43":10,"i44":10,"i45":10,"i46":10,"i47":10,"i48":10,"i49":10,"i50":10,"i51":10,"i52":10,"i53":10,"i54":9,"i55":9,"i56":10,"i57":10,"i58":10,"i59":10,"i60":10,"i61":10,"i62":9,"i63":10,"i64":10,"i65":10,"i66":10,"i67":10,"i68":10,"i69":10,"i70":10,"i71":10,"i72":10,"i73":10,"i74":10,"i75":10,"i76":10,"i77":10,"i78":10,"i79":10,"i80":10,"i81":10,"i82":10,"i83":10,"i84":10,"i85":10,"i86":10,"i87":10,"i88":10,"i89":10,"i90":10,"i91":10,"i92":10,"i93":10,"i94":10,"i95":10,"i96":10,"i97":10,"i98":10,"i99":10,"i100":10,"i101":10,"i102":10,"i103":10,"i104":10,"i105":10,"i106":10,"i107":10,"i108":10,"i109":10,"i110":10,"i111":10,"i112":10,"i113":10,"i114":10,"i115":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogRecord.html" title="class in org.apache.derby.impl.store.raw.log"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/log/ReadOnly.html" title="class in org.apache.derby.impl.store.raw.log"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/impl/store/raw/log/LogToFile.html" target="_top">Frames</a></li>
<li><a href="LogToFile.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derby.impl.store.raw.log</div>
<h2 title="Class LogToFile" class="title">Class LogToFile</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.derby.impl.store.raw.log.LogToFile</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.security.PrivilegedExceptionAction&lt;java.lang.Object&gt;, <a href="../../../../../../../org/apache/derby/iapi/services/daemon/Serviceable.html" title="interface in org.apache.derby.iapi.services.daemon">Serviceable</a>, <a href="../../../../../../../org/apache/derby/iapi/services/monitor/ModuleControl.html" title="interface in org.apache.derby.iapi.services.monitor">ModuleControl</a>, <a href="../../../../../../../org/apache/derby/iapi/services/monitor/ModuleSupportable.html" title="interface in org.apache.derby.iapi.services.monitor">ModuleSupportable</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Corruptable.html" title="interface in org.apache.derby.iapi.store.raw">Corruptable</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></dd>
</dl>
<hr>
<br>
<pre>public final class <span class="typeNameLabel">LogToFile</span>
extends java.lang.Object
implements <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a>, <a href="../../../../../../../org/apache/derby/iapi/services/monitor/ModuleControl.html" title="interface in org.apache.derby.iapi.services.monitor">ModuleControl</a>, <a href="../../../../../../../org/apache/derby/iapi/services/monitor/ModuleSupportable.html" title="interface in org.apache.derby.iapi.services.monitor">ModuleSupportable</a>, <a href="../../../../../../../org/apache/derby/iapi/services/daemon/Serviceable.html" title="interface in org.apache.derby.iapi.services.daemon">Serviceable</a>, java.security.PrivilegedExceptionAction&lt;java.lang.Object&gt;</pre>
<div class="block">This is an implementation of the log using a non-circular file system file.
        No support for incremental log backup or media recovery.
        Only crash recovery is supported.  
        <P>
        The 'log' is a stream of log records.  The 'log' is implemented as
        a series of numbered log files.  These numbered log files are logically
        continuous so a transaction can have log records that span multiple log files.
        A single log record cannot span more then one log file.  The log file number
        is monotonically increasing.
        <P>
        The log belongs to a log factory of a RawStore.  In the current implementation,
        each RawStore only has one log factory, so each RawStore only has one log
        (which composed of multiple log files).
        At any given time, a log factory only writes new log records to one log file,
        this log file is called the 'current log file'.
        <P>
        A log file is named log<em>logNumber</em>.dat
        <P>
        Everytime a checkpoint is taken, a new log file is created and all subsequent
        log records will go to the new log file.  After a checkpoint is taken, old
        and useless log files will be deleted.
        <P>
        RawStore exposes a checkpoint method which clients can call, or a checkpoint is
        taken automatically by the RawStore when
        <OL>
        <LI> the log file grows beyond a certain size (configurable, default 100K bytes)
        <LI> RawStore is shutdown and a checkpoint hasn't been done "for a while"
        <LI> RawStore is recovered and a checkpoint hasn't been done "for a while"
        </OL>
        <P>
        This LogFactory is responsible for the formats of 2 kinds of file: the log
        file and the log control file.  And it is responsible for the format of the
        log record wrapper.
        <P> <PRE>

        Format of log control file</div>
<dl><table cellpadding=2 cellspacing=2><tr><td>Format ID</td><td>FILE_STREAM_LOG_FILE</td></tr>FILE_STREAM_LOG_FILE</td></tr>none.  The format is implied by the FILE_STREAM_LOG_FILE</td></tr>
<tr><td>Purpose</td><td>The log control file contains information about which log files
	are present and where the last checkpoint log record is located.</td></tr>The log file contains log record which record all the changes
	to the database.  The complete transaction log is composed of a series of
	log files.</td></tr>The log record wrapper provides information for the log scan.</td></tr>
<tr><td>Upgrade</td><td></td></tr></td></tr></td></tr>
<tr><td>Disk Layout</td><td>int format id
		int obsolete log file version
		long the log instant (LogCounter) of the last completed checkpoint
		   (logfile counter, position)
		int Derby major version
		int Derby minor version
		int subversion revision/build number
		byte Flags (beta flag (0 or 1), test durability flag (0 or 1))
		byte spare (0)
		byte spare (0)
		byte spare (0)
		long spare (value set to 0)
		long checksum for control data written</td></tr>int format id - 	the format Id of this log file
		int obsolete log file version - not used
		long log file number - this number orders the log files in a
						series to form the complete transaction log
		long prevLogRecord - log instant of the previous log record, in the
				previous log file. 

		[log record wrapper]* one or more log records with wrapper

		int endMarker - value of zero.  The beginning of a log record wrapper
				is the length of the log record, therefore it is never zero
		[int fuzzy end]* zero or more int's of value 0, in case this log file
				has been recovered and any incomplete log record set to zero.</td></tr>length(int) length of the log record (for forward scan)
		instant(long) LogInstant of the log record
		logRecord(byte[length]) byte array that is written by the FileLogger
		length(int) length of the log record (for backward scan)</td></tr></table></dt>

</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#action">action</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#activeFile">activeFile</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#activePerms">activePerms</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#allowedToReadFileNumber">allowedToReadFileNumber</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#backupInProgress">backupInProgress</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#bootTimeLogFileNumber">bootTimeLogFileNumber</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#CHECKPOINT_INTERVAL_MAX">CHECKPOINT_INTERVAL_MAX</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#CHECKPOINT_INTERVAL_MIN">CHECKPOINT_INTERVAL_MIN</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/iapi/services/daemon/DaemonService.html" title="interface in org.apache.derby.iapi.services.daemon">DaemonService</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#checkpointDaemon">checkpointDaemon</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#checkpointDaemonCalled">checkpointDaemonCalled</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#checkpointInstant">checkpointInstant</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#checkpointInterval">checkpointInterval</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.zip.CRC32</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#checksum">checksum</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#corrupt">corrupt</a></span></code>
<div class="block">If not null then something is corrupt in the raw store and this represents the original error.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/impl/store/raw/log/CheckpointOperation.html" title="class in org.apache.derby.impl.store.raw.log">CheckpointOperation</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#currentCheckpoint">currentCheckpoint</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#databaseEncrypted">databaseEncrypted</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#dataDirectory">dataDirectory</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../../org/apache/derby/iapi/store/raw/data/DataFactory.html" title="interface in org.apache.derby.iapi.store.raw.data">DataFactory</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#dataFactory">dataFactory</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#DBG_FLAG">DBG_FLAG</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#DEFAULT_CHECKPOINT_INTERVAL">DEFAULT_CHECKPOINT_INTERVAL</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#DEFAULT_LOG_ARCHIVE_DIRECTORY">DEFAULT_LOG_ARCHIVE_DIRECTORY</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#DEFAULT_LOG_BUFFER_SIZE">DEFAULT_LOG_BUFFER_SIZE</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#DEFAULT_LOG_SWITCH_INTERVAL">DEFAULT_LOG_SWITCH_INTERVAL</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#DUMP_LOG_FROM_LOG_FILE">DUMP_LOG_FROM_LOG_FILE</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#DUMP_LOG_ONLY">DUMP_LOG_ONLY</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#endPosition">endPosition</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#fid">fid</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#firstLog">firstLog</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#firstLogFileNumber">firstLogFileNumber</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#inCheckpoint">inCheckpoint</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#inLogSwitch">inLogSwitch</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#inRedo">inRedo</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#inReplicationMasterMode">inReplicationMasterMode</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#inReplicationSlaveMode">inReplicationSlaveMode</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#inReplicationSlavePreMode">inReplicationSlavePreMode</a></span></code>
<div class="block">True if the database has been booted in replication slave pre
 mode, effectively turning off writes to the log file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#INT_LENGTH">INT_LENGTH</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static byte</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#IS_BETA_FLAG">IS_BETA_FLAG</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static byte</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#IS_DURABILITY_TESTMODE_NO_SYNC_FLAG">IS_DURABILITY_TESTMODE_NO_SYNC_FLAG</a></span></code>
<div class="block">When the derby.system.durability property is set to 'test', the store 
 system will not force sync calls in the following cases
 - for the log file at each commit
 - for the log file before data page is forced to disk
 - for page allocation when file is grown
 - for data writes during checkpoint
 This means it is possible that the recovery system may not work properly,
 committed transactions may be lost, and/or database may not
 be in a consistent state.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#isFrozen">isFrozen</a></span></code>
<div class="block">If frozen, don't allow anything on disk to change.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#isWriteSynced">isWriteSynced</a></span></code>
<div class="block">Note: Why logging system support file sync and write sync ?</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../../org/apache/derby/iapi/services/info/ProductVersionHolder.html" title="class in org.apache.derby.iapi.services.info">ProductVersionHolder</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#jbmsVersion">jbmsVersion</a></span></code>
<div class="block">Product Version information.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#jvmSyncErrorChecked">jvmSyncErrorChecked</a></span></code>
<div class="block">Status for whether the check on the sync error on some JVMs has been
 done or not.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#keepAllLogs">keepAllLogs</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#lastFlush">lastFlush</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#LOG_BUFFER_SIZE_MAX">LOG_BUFFER_SIZE_MAX</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#LOG_BUFFER_SIZE_MIN">LOG_BUFFER_SIZE_MIN</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#LOG_FILE_HEADER_PREVIOUS_LOG_INSTANT_OFFSET">LOG_FILE_HEADER_PREVIOUS_LOG_INSTANT_OFFSET</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#LOG_FILE_HEADER_SIZE">LOG_FILE_HEADER_SIZE</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#LOG_RECORD_OVERHEAD">LOG_RECORD_OVERHEAD</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#LOG_SWITCH_INTERVAL_MAX">LOG_SWITCH_INTERVAL_MAX</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#LOG_SWITCH_INTERVAL_MIN">LOG_SWITCH_INTERVAL_MIN</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#LOG_SYNC_STATISTICS">LOG_SYNC_STATISTICS</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#logArchived">logArchived</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#logBeingFlushed">logBeingFlushed</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#logBufferSize">logBufferSize</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#logDevice">logDevice</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#logFileNumber">logFileNumber</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#logFileToBackup">logFileToBackup</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#logNotSynced">logNotSynced</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogAccessFile.html" title="class in org.apache.derby.impl.store.raw.log">LogAccessFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#logOut">logOut</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/io/WritableStorageFactory.html" title="interface in org.apache.derby.io">WritableStorageFactory</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#logStorageFactory">logStorageFactory</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#logSwitchInterval">logSwitchInterval</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#logSwitchRequired">logSwitchRequired</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#logWrittenFromLastCheckPoint">logWrittenFromLastCheckPoint</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/iapi/store/replication/master/MasterFactory.html" title="interface in org.apache.derby.iapi.store.replication.master">MasterFactory</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#masterFactory">masterFactory</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#maxLogFileNumber">maxLogFileNumber</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#mon_flushCalls">mon_flushCalls</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#mon_LogSyncStatistics">mon_LogSyncStatistics</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#mon_numBytesToLog">mon_numBytesToLog</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#mon_numLogFlushWaits">mon_numLogFlushWaits</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#mon_syncCalls">mon_syncCalls</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#myClientNumber">myClientNumber</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#OBSOLETE_LOG_VERSION_NUMBER">OBSOLETE_LOG_VERSION_NUMBER</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#onDiskBeta">onDiskBeta</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#onDiskMajorVersion">onDiskMajorVersion</a></span></code>
<div class="block">On disk database version information.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#onDiskMinorVersion">onDiskMinorVersion</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/iapi/store/raw/RawStoreFactory.html" title="interface in org.apache.derby.iapi.store.raw">RawStoreFactory</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#rawStoreFactory">rawStoreFactory</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#ReadOnlyDB">ReadOnlyDB</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#recoveryNeeded">recoveryNeeded</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#replicationSlaveException">replicationSlaveException</a></span></code>
<div class="block">If this exception is set while in replication slave mode, the 
 exception will be thrown by the thread doing recovery will.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#slaveRecoveryMonitor">slaveRecoveryMonitor</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#stopped">stopped</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#TEST_LOG_FULL">TEST_LOG_FULL</a></span></code>
<div class="block">Set to true if we want to simulate a log full condition</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#TEST_LOG_INCOMPLETE_LOG_WRITE">TEST_LOG_INCOMPLETE_LOG_WRITE</a></span></code>
<div class="block">Set to true if we want the upcoming log record to be only partially
          written.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#TEST_LOG_PARTIAL_LOG_WRITE_NUM_BYTES">TEST_LOG_PARTIAL_LOG_WRITE_NUM_BYTES</a></span></code>
<div class="block">Set to the number of bytes we want the next log record to actually write
          out, only used when TEST_LOG_INCOMPLETE_LOG_WRITE is on.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#TEST_LOG_SWITCH_LOG">TEST_LOG_SWITCH_LOG</a></span></code>
<div class="block">Set to true if we want the checkpoint to only switch the log but not
          actually do the checkpoint</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#test_logWritten">test_logWritten</a></span></code>
<div class="block">DEBUG test only</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#TEST_MAX_LOGFILE_NUMBER">TEST_MAX_LOGFILE_NUMBER</a></span></code>
<div class="block">Set to true if we want to simulate max possible log file number is 
 being used.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#test_numRecordToFillLog">test_numRecordToFillLog</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#TEST_RECORD_TO_FILL_LOG">TEST_RECORD_TO_FILL_LOG</a></span></code>
<div class="block">Set to the number of log record we want to write before the log is
          simulated to be full.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#TEST_SWITCH_LOG_FAIL1">TEST_SWITCH_LOG_FAIL1</a></span></code>
<div class="block">Set to true if we want to simulate a log full condition while switching log</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#TEST_SWITCH_LOG_FAIL2">TEST_SWITCH_LOG_FAIL2</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.io.File</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#toFile">toFile</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#wasDBInDurabilityTestModeNoSync">wasDBInDurabilityTestModeNoSync</a></span></code>
<div class="block">keeps track of if the database was booted previously at any time with 
 derby.system.durability=test</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.derby.iapi.store.raw.log.LogFactory">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;org.apache.derby.iapi.store.raw.log.<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></h3>
<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#LOG_DIRECTORY_NAME">LOG_DIRECTORY_NAME</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#MODULE">MODULE</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#RT_READONLY">RT_READONLY</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#RUNTIME_ATTRIBUTES">RUNTIME_ATTRIBUTES</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.derby.iapi.services.daemon.Serviceable">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;org.apache.derby.iapi.services.daemon.<a href="../../../../../../../org/apache/derby/iapi/services/daemon/Serviceable.html" title="interface in org.apache.derby.iapi.services.daemon">Serviceable</a></h3>
<code><a href="../../../../../../../org/apache/derby/iapi/services/daemon/Serviceable.html#DONE">DONE</a>, <a href="../../../../../../../org/apache/derby/iapi/services/daemon/Serviceable.html#REQUEUE">REQUEUE</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#LogToFile--">LogToFile</a></span>()</code>
<div class="block">MT- not needed for constructor</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#abortLogBackup--">abortLogBackup</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#appendLogRecord-byte:A-int-int-byte:A-int-int-">appendLogRecord</a></span>(byte[]&nbsp;data,
               int&nbsp;offset,
               int&nbsp;length,
               byte[]&nbsp;optionalData,
               int&nbsp;optionalDataOffset,
               int&nbsp;optionalDataLength)</code>
<div class="block">Append length bytes of data to the log prepended by a long log instant
                and followed by 4 bytes of length information.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#backupLogFiles-java.io.File-long-">backupLogFiles</a></span>(java.io.File&nbsp;toDir,
              long&nbsp;lastLogFileToBackup)</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#boot-boolean-java.util.Properties-">boot</a></span>(boolean&nbsp;create,
    java.util.Properties&nbsp;startParams)</code>
<div class="block">Boot up the log factory.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#canSupport-java.util.Properties-">canSupport</a></span>(java.util.Properties&nbsp;startParams)</code>
<div class="block">See if this implementation can support any attributes that are listed in properties.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#checkCorrupt--">checkCorrupt</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#checkForReplication-org.apache.derby.impl.store.raw.log.LogAccessFile-">checkForReplication</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogAccessFile.html" title="class in org.apache.derby.impl.store.raw.log">LogAccessFile</a>&nbsp;log)</code>
<div class="block">Used by LogAccessFile to check if it should take the
 replication master role, and thereby send log records to the
 MasterFactory.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#checkJvmSyncError-org.apache.derby.io.StorageFile-">checkJvmSyncError</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;logFile)</code>
<div class="block">In Java 1.4.2 and newer rws and rwd modes for RandomAccessFile
 are supported.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#checkpoint-org.apache.derby.iapi.store.raw.RawStoreFactory-org.apache.derby.iapi.store.raw.data.DataFactory-org.apache.derby.iapi.store.raw.xact.TransactionFactory-boolean-">checkpoint</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/RawStoreFactory.html" title="interface in org.apache.derby.iapi.store.raw">RawStoreFactory</a>&nbsp;rsf,
          <a href="../../../../../../../org/apache/derby/iapi/store/raw/data/DataFactory.html" title="interface in org.apache.derby.iapi.store.raw.data">DataFactory</a>&nbsp;df,
          <a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/TransactionFactory.html" title="interface in org.apache.derby.iapi.store.raw.xact">TransactionFactory</a>&nbsp;tf,
          boolean&nbsp;wait)</code>
<div class="block">Checkpoint the rawStore.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#checkpointInRFR-org.apache.derby.iapi.store.raw.log.LogInstant-long-long-org.apache.derby.iapi.store.raw.data.DataFactory-">checkpointInRFR</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;cinstant,
               long&nbsp;redoLWM,
               long&nbsp;undoLWM,
               <a href="../../../../../../../org/apache/derby/iapi/store/raw/data/DataFactory.html" title="interface in org.apache.derby.iapi.store.raw.data">DataFactory</a>&nbsp;df)</code>
<div class="block">redo a checkpoint during rollforward recovery</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#checkpointWithTran-org.apache.derby.iapi.store.raw.xact.RawTransaction-org.apache.derby.iapi.store.raw.RawStoreFactory-org.apache.derby.iapi.store.raw.data.DataFactory-org.apache.derby.iapi.store.raw.xact.TransactionFactory-boolean-">checkpointWithTran</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/RawTransaction.html" title="class in org.apache.derby.iapi.store.raw.xact">RawTransaction</a>&nbsp;cptran,
                  <a href="../../../../../../../org/apache/derby/iapi/store/raw/RawStoreFactory.html" title="interface in org.apache.derby.iapi.store.raw">RawStoreFactory</a>&nbsp;rsf,
                  <a href="../../../../../../../org/apache/derby/iapi/store/raw/data/DataFactory.html" title="interface in org.apache.derby.iapi.store.raw.data">DataFactory</a>&nbsp;df,
                  <a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/TransactionFactory.html" title="interface in org.apache.derby.iapi.store.raw.xact">TransactionFactory</a>&nbsp;tf,
                  boolean&nbsp;wait)</code>
<div class="block">checkpoint with pre-start transaction</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#checkVersion-int-int-">checkVersion</a></span>(int&nbsp;requiredMajorVersion,
            int&nbsp;requiredMinorVersion)</code>
<div class="block">Check to see if a database has been upgraded to the required
           level in order to use a store feature.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#checkVersion-int-int-java.lang.String-">checkVersion</a></span>(int&nbsp;requiredMajorVersion,
            int&nbsp;requiredMinorVersion,
            java.lang.String&nbsp;feature)</code>
<div class="block">Check to see if a database has been upgraded to the required
  level in order to use a store feature.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#createDataWarningFile--">createDataWarningFile</a></span>()</code>
<div class="block">Create readme file in log directory warning users against touching
  any files in the directory</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#createLogDirectory--">createLogDirectory</a></span>()</code>
<div class="block">Create the directory where transaction log should go.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#currentInstant--">currentInstant</a></span>()</code>
<div class="block">Get the current log instant - this is the log instant of the Next log
                record to be written out
                 MT - This method is synchronized to ensure that it always points to
                the end of a log record, not the middle of one.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#databaseEncrypted--">databaseEncrypted</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#decrypt-byte:A-int-int-byte:A-int-">decrypt</a></span>(byte[]&nbsp;ciphertext,
       int&nbsp;offset,
       int&nbsp;length,
       byte[]&nbsp;cleartext,
       int&nbsp;outputOffset)</code>&nbsp;</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#deleteLogFileAfterCheckpointLogFile--">deleteLogFileAfterCheckpointLogFile</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#deleteObsoleteLogfiles--">deleteObsoleteLogfiles</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#deleteOnlineArchivedLogFiles--">deleteOnlineArchivedLogFiles</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#disableLogArchiveMode--">disableLogArchiveMode</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#enableLogArchiveMode--">enableLogArchiveMode</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#encrypt-byte:A-int-int-byte:A-int-">encrypt</a></span>(byte[]&nbsp;cleartext,
       int&nbsp;offset,
       int&nbsp;length,
       byte[]&nbsp;ciphertext,
       int&nbsp;outputOffset)</code>&nbsp;</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#endLogBackup-java.io.File-">endLogBackup</a></span>(java.io.File&nbsp;toDir)</code>&nbsp;</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#endPosition--">endPosition</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#failoverSlave--">failoverSlave</a></span>()</code>
<div class="block">Used to make the slave stop appending log records, complete recovery 
 and boot the database.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/impl/store/raw/log/CheckpointOperation.html" title="class in org.apache.derby.impl.store.raw.log">CheckpointOperation</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#findCheckpoint-long-org.apache.derby.impl.store.raw.log.FileLogger-">findCheckpoint</a></span>(long&nbsp;checkpointInstant,
              <a href="../../../../../../../org/apache/derby/impl/store/raw/log/FileLogger.html" title="class in org.apache.derby.impl.store.raw.log">FileLogger</a>&nbsp;logger)</code>&nbsp;</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>private static java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#findServiceModule-java.lang.Object-java.lang.String-">findServiceModule</a></span>(java.lang.Object&nbsp;serviceModule,
                 java.lang.String&nbsp;factoryInterface)</code>
<div class="block">Privileged startup.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#firstLogInstant--">firstLogInstant</a></span>()</code>
<div class="block">Get the first valid log instant - this is the beginning of the first
                log file

                MT- synchronized on this</div>
</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#flush-org.apache.derby.iapi.store.raw.log.LogInstant-">flush</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;where)</code>
<div class="block">Flush all unwritten log record up to the log instance indicated to disk
                and sync.</div>
</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#flush-long-long-">flush</a></span>(long&nbsp;fileNumber,
     long&nbsp;wherePosition)</code>
<div class="block">Flush the log such that the log record written with the instant 
        wherePosition is guaranteed to be on disk.</div>
</td>
</tr>
<tr id="i32" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#flushAll--">flushAll</a></span>()</code>
<div class="block">Flush all unwritten log record to disk and sync.</div>
</td>
</tr>
<tr id="i33" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#flushBuffer-long-long-">flushBuffer</a></span>(long&nbsp;fileNumber,
           long&nbsp;wherePosition)</code>
<div class="block">Flush all unwritten log record up to the log instance indicated to disk
                without syncing.</div>
</td>
</tr>
<tr id="i34" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#freezePersistentStore--">freezePersistentStore</a></span>()</code>
<div class="block">Backup restore - stop sending log record to the log stream</div>
</td>
</tr>
<tr id="i35" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getCanonicalLogPath--">getCanonicalLogPath</a></span>()</code>
<div class="block">Return the canonical directory of the PARENT of the log directory.</div>
</td>
</tr>
<tr id="i36" class="altColor">
<td class="colFirst"><code>private static <a href="../../../../../../../org/apache/derby/iapi/services/context/ContextService.html" title="class in org.apache.derby.iapi.services.context">ContextService</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getContextService--">getContextService</a></span>()</code>
<div class="block">Privileged lookup of the ContextService.</div>
</td>
</tr>
<tr id="i37" class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getControlFileName--">getControlFileName</a></span>()</code>
<div class="block">Return the control file name 

                 MT- read only</div>
</td>
</tr>
<tr id="i38" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getEncryptedDataLength-int-">getEncryptedDataLength</a></span>(int&nbsp;length)</code>
<div class="block">returns the length that will make the data to be multiple of encryption
           block size based on the given length.</div>
</td>
</tr>
<tr id="i39" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getEncryptionBlockSize--">getEncryptionBlockSize</a></span>()</code>
<div class="block">return the encryption block size used during encrypted db creation</div>
</td>
</tr>
<tr id="i40" class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getFirstLogNeeded-org.apache.derby.impl.store.raw.log.CheckpointOperation-">getFirstLogNeeded</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/raw/log/CheckpointOperation.html" title="class in org.apache.derby.impl.store.raw.log">CheckpointOperation</a>&nbsp;checkpoint)</code>
<div class="block">Return the "oldest" log file still needed by recovery.</div>
</td>
</tr>
<tr id="i41" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getFirstUnflushedInstant--">getFirstUnflushedInstant</a></span>()</code>
<div class="block">Get the instant of the first record which was not
          flushed.</div>
</td>
</tr>
<tr id="i42" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getFirstUnflushedInstantAsLong--">getFirstUnflushedInstantAsLong</a></span>()</code>
<div class="block">Get the log instant long value of the first log record that has not 
 been flushed.</div>
</td>
</tr>
<tr id="i43" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getLogDirectory--">getLogDirectory</a></span>()</code>
<div class="block">Return the location of the log directory.</div>
</td>
</tr>
<tr id="i44" class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getLogDirPath-org.apache.derby.io.StorageFile-">getLogDirPath</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;logDir)</code>&nbsp;</td>
</tr>
<tr id="i45" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getLogFactoryProperties-org.apache.derby.iapi.services.property.PersistentSet-">getLogFactoryProperties</a></span>(<a href="../../../../../../../org/apache/derby/iapi/services/property/PersistentSet.html" title="interface in org.apache.derby.iapi.services.property">PersistentSet</a>&nbsp;set)</code>
<div class="block">Get JBMS properties relevant to the log factory</div>
</td>
</tr>
<tr id="i46" class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getLogFileAtBeginning-long-">getLogFileAtBeginning</a></span>(long&nbsp;filenumber)</code>
<div class="block">Open a log file and position the file at the beginning.</div>
</td>
</tr>
<tr id="i47" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getLogFileAtPosition-long-">getLogFileAtPosition</a></span>(long&nbsp;logInstant)</code>
<div class="block">Get a read-only handle to the log file positioned at the stated position

         MT- read only</div>
</td>
</tr>
<tr id="i48" class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getLogFileName-long-">getLogFileName</a></span>(long&nbsp;filenumber)</code>
<div class="block">Given a log file number, return its file name 

                 MT- read only</div>
</td>
</tr>
<tr id="i49" class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getLogFileNumber--">getLogFileNumber</a></span>()</code>
<div class="block">Return the current log file number.</div>
</td>
</tr>
<tr id="i50" class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getLogFileToSimulateCorruption-long-">getLogFileToSimulateCorruption</a></span>(long&nbsp;filenum)</code>
<div class="block">Get the log file to Simulate a log corruption 
 FOR UNIT TESTING USAGE ONLY</div>
</td>
</tr>
<tr id="i51" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/Logger.html" title="interface in org.apache.derby.iapi.store.raw.log">Logger</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getLogger--">getLogger</a></span>()</code>
<div class="block">MT- not needed</div>
</td>
</tr>
<tr id="i52" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getLogStorageFactory--">getLogStorageFactory</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i53" class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getMirrorControlFileName--">getMirrorControlFileName</a></span>()</code>
<div class="block">Return the mirror control file name 

                 MT- read only</div>
</td>
</tr>
<tr id="i54" class="altColor">
<td class="colFirst"><code>private static <a href="../../../../../../../org/apache/derby/iapi/services/monitor/ModuleFactory.html" title="interface in org.apache.derby.iapi.services.monitor">ModuleFactory</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getMonitor--">getMonitor</a></span>()</code>
<div class="block">Privileged Monitor lookup.</div>
</td>
</tr>
<tr id="i55" class="rowColor">
<td class="colFirst"><code>private static java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getServiceModule-java.lang.Object-java.lang.String-">getServiceModule</a></span>(java.lang.Object&nbsp;serviceModule,
                java.lang.String&nbsp;factoryInterface)</code>
<div class="block">Privileged module lookup.</div>
</td>
</tr>
<tr id="i56" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#getTypeFormatId--">getTypeFormatId</a></span>()</code>
<div class="block">Return my format identifier.</div>
</td>
</tr>
<tr id="i57" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#initializeReplicationSlaveRole--">initializeReplicationSlaveRole</a></span>()</code>
<div class="block">Initializes logOut so that log received from the replication
 master can be appended to the log file.</div>
</td>
</tr>
<tr id="i58" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#initLogFile-org.apache.derby.io.StorageRandomAccessFile-long-long-">initLogFile</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a>&nbsp;newlog,
           long&nbsp;number,
           long&nbsp;prevLogRecordEndInstant)</code>
<div class="block">Initialize the log to the correct format with the given version and
                log file number.</div>
</td>
</tr>
<tr id="i59" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#inReplicationMasterMode--">inReplicationMasterMode</a></span>()</code>
<div class="block">Used to determine if the replication master mode has been started,
 and the logging for unlogged operations needs to be enabled.</div>
</td>
</tr>
<tr id="i60" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#inRFR--">inRFR</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i61" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#isCheckpointInLastLogFile--">isCheckpointInLastLogFile</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i62" class="altColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#isFullUpgrade-java.util.Properties-java.lang.String-">isFullUpgrade</a></span>(java.util.Properties&nbsp;startParams,
             java.lang.String&nbsp;oldVersionInfo)</code>
<div class="block">Privileged startup.</div>
</td>
</tr>
<tr id="i63" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#logArchived--">logArchived</a></span>()</code>
<div class="block">Backup restore - is the log being archived to some directory?</div>
</td>
</tr>
<tr id="i64" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#logErrMsg-java.lang.String-">logErrMsg</a></span>(java.lang.String&nbsp;msg)</code>
<div class="block">Print error message to user about the log
                MT - not needed, informational only</div>
</td>
</tr>
<tr id="i65" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#logErrMsg-java.lang.Throwable-">logErrMsg</a></span>(java.lang.Throwable&nbsp;t)</code>
<div class="block">Print error message to user about the log
                MT - not needed, informational only</div>
</td>
</tr>
<tr id="i66" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#logErrMsgForDurabilityTestModeNoSync--">logErrMsgForDurabilityTestModeNoSync</a></span>()</code>
<div class="block">In case of boot errors, and if database is either booted
 with derby.system.durability=test or was previously at any time booted in
 this mode, mention in the error message that the error is probably 
 because the derby.system.durability was set.</div>
</td>
</tr>
<tr id="i67" class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#logtest_appendPartialLogRecord-byte:A-int-int-byte:A-int-int-">logtest_appendPartialLogRecord</a></span>(byte[]&nbsp;data,
                              int&nbsp;offset,
                              int&nbsp;length,
                              byte[]&nbsp;optionalData,
                              int&nbsp;optionalDataOffset,
                              int&nbsp;optionalDataLength)</code>
<div class="block">Writes out a partial log record - takes the appendLogRecord.</div>
</td>
</tr>
<tr id="i68" class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#markCorrupt-org.apache.derby.iapi.error.StandardException-">markCorrupt</a></span>(<a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>&nbsp;originalError)</code>
<div class="block">Once the log factory is marked as corrupt then the raw store will
 shut down.</div>
</td>
</tr>
<tr id="i69" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogScan.html" title="interface in org.apache.derby.iapi.store.raw.log">LogScan</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#openBackwardsScan-org.apache.derby.iapi.store.raw.log.LogInstant-">openBackwardsScan</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;stopAt)</code>
<div class="block">Scan backward from end of log.</div>
</td>
</tr>
<tr id="i70" class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogScan.html" title="interface in org.apache.derby.iapi.store.raw.log">LogScan</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#openBackwardsScan-long-org.apache.derby.iapi.store.raw.log.LogInstant-">openBackwardsScan</a></span>(long&nbsp;startAt,
                 <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;stopAt)</code>
<div class="block">Scan backward from start position.</div>
</td>
</tr>
<tr id="i71" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/ScanHandle.html" title="interface in org.apache.derby.iapi.store.raw">ScanHandle</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#openFlushedScan-org.apache.derby.iapi.store.access.DatabaseInstant-int-">openFlushedScan</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/access/DatabaseInstant.html" title="interface in org.apache.derby.iapi.store.access">DatabaseInstant</a>&nbsp;start,
               int&nbsp;groupsIWant)</code>
<div class="block">Get a ScanHandle to scan flushed records from the log.</div>
</td>
</tr>
<tr id="i72" class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogScan.html" title="interface in org.apache.derby.iapi.store.raw.log">LogScan</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#openForwardsFlushedScan-org.apache.derby.iapi.store.raw.log.LogInstant-">openForwardsFlushedScan</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;startAt)</code>
<div class="block">Open a forward scan of the transaction log.</div>
</td>
</tr>
<tr id="i73" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogScan.html" title="interface in org.apache.derby.iapi.store.raw.log">LogScan</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#openForwardsScan-org.apache.derby.iapi.store.raw.log.LogInstant-org.apache.derby.iapi.store.raw.log.LogInstant-">openForwardsScan</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;startAt,
                <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;stopAt)</code>
<div class="block">Get a forwards scan</div>
</td>
</tr>
<tr id="i74" class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogScan.html" title="interface in org.apache.derby.iapi.store.raw.log">LogScan</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#openForwardsScan-long-org.apache.derby.iapi.store.raw.log.LogInstant-">openForwardsScan</a></span>(long&nbsp;startAt,
                <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;stopAt)</code>
<div class="block">Scan Forward from start position.</div>
</td>
</tr>
<tr id="i75" class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#openLogFileInWriteMode-org.apache.derby.io.StorageFile-">openLogFileInWriteMode</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;logFile)</code>
<div class="block">open the given log file name for writes; if file can not be 
 be opened in write sync mode then disable the write sync mode and 
 open the file in "rw" mode.</div>
</td>
</tr>
<tr id="i76" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#performWork-org.apache.derby.iapi.services.context.ContextManager-">performWork</a></span>(<a href="../../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&nbsp;context)</code>
<div class="block">Do whatever it is that you want the daemon to do for you.</div>
</td>
</tr>
<tr id="i77" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#preAllocateNewLogFile-org.apache.derby.io.StorageRandomAccessFile-">preAllocateNewLogFile</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a>&nbsp;log)</code>&nbsp;</td>
</tr>
<tr id="i78" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#printErrorStack-java.lang.Throwable-">printErrorStack</a></span>(java.lang.Throwable&nbsp;t)</code>
<div class="block">print stack trace from the Throwable including
 its nested exceptions</div>
</td>
</tr>
<tr id="i79" class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#privCanWrite-org.apache.derby.io.StorageFile-">privCanWrite</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)</code>&nbsp;</td>
</tr>
<tr id="i80" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#privCopyFile-java.io.File-org.apache.derby.io.StorageFile-">privCopyFile</a></span>(java.io.File&nbsp;from,
            <a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;to)</code>&nbsp;</td>
</tr>
<tr id="i81" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#privCopyFile-org.apache.derby.io.StorageFile-java.io.File-">privCopyFile</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;from,
            java.io.File&nbsp;to)</code>&nbsp;</td>
</tr>
<tr id="i82" class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#privDelete-org.apache.derby.io.StorageFile-">privDelete</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)</code>&nbsp;</td>
</tr>
<tr id="i83" class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#privExists-org.apache.derby.io.StorageFile-">privExists</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)</code>&nbsp;</td>
</tr>
<tr id="i84" class="altColor">
<td class="colFirst"><code>private java.io.OutputStreamWriter</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#privGetOutputStreamWriter-org.apache.derby.io.StorageFile-">privGetOutputStreamWriter</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)</code>&nbsp;</td>
</tr>
<tr id="i85" class="rowColor">
<td class="colFirst"><code>private java.lang.String[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#privList-java.io.File-">privList</a></span>(java.io.File&nbsp;file)</code>&nbsp;</td>
</tr>
<tr id="i86" class="altColor">
<td class="colFirst"><code>private java.lang.String[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#privList-org.apache.derby.io.StorageFile-">privList</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)</code>&nbsp;</td>
</tr>
<tr id="i87" class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#privMkdirs-org.apache.derby.io.StorageFile-">privMkdirs</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)</code>&nbsp;</td>
</tr>
<tr id="i88" class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#privRandomAccessFile-org.apache.derby.io.StorageFile-java.lang.String-">privRandomAccessFile</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file,
                    java.lang.String&nbsp;perms)</code>&nbsp;</td>
</tr>
<tr id="i89" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#privRemoveDirectory-org.apache.derby.io.StorageFile-">privRemoveDirectory</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)</code>&nbsp;</td>
</tr>
<tr id="i90" class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#readControlFile-org.apache.derby.io.StorageFile-java.util.Properties-">readControlFile</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;logControlFileName,
               java.util.Properties&nbsp;startParams)</code>&nbsp;</td>
</tr>
<tr id="i91" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#recover-org.apache.derby.iapi.store.raw.data.DataFactory-org.apache.derby.iapi.store.raw.xact.TransactionFactory-">recover</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/data/DataFactory.html" title="interface in org.apache.derby.iapi.store.raw.data">DataFactory</a>&nbsp;df,
       <a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/TransactionFactory.html" title="interface in org.apache.derby.iapi.store.raw.xact">TransactionFactory</a>&nbsp;tf)</code>
<div class="block">Recover the rawStore to a consistent state using the log.</div>
</td>
</tr>
<tr id="i92" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#restoreLogs-java.util.Properties-">restoreLogs</a></span>(java.util.Properties&nbsp;properties)</code>
<div class="block">This function restores logs based on the  following attributes
 are specified on connection URL:
 Attribute.CREATE_FROM (Create database from backup if it does not exist)
 Attribute.RESTORE_FROM (Delete the whole database if it exists and then 
 restore it from backup)
 Attribute.ROLL_FORWARD_RECOVERY_FROM:(Perform Rollforward Recovery;
 except for the log directory everything else is replaced by the copy from
 backup. log files in the backup are copied to the existing online log 
 directory.</div>
</td>
</tr>
<tr id="i93" class="rowColor">
<td class="colFirst"><code>java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#run--">run</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i94" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#runBooleanAction-int-org.apache.derby.io.StorageFile-">runBooleanAction</a></span>(int&nbsp;action,
                <a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)</code>&nbsp;</td>
</tr>
<tr id="i95" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#serviceASAP--">serviceASAP</a></span>()</code>
<div class="block">If this work should be done as soon as possible, then return true.</div>
</td>
</tr>
<tr id="i96" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#serviceImmediately--">serviceImmediately</a></span>()</code>
<div class="block">If this work should be done immediately on the user thread then return true.</div>
</td>
</tr>
<tr id="i97" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#setDatabaseEncrypted-boolean-boolean-">setDatabaseEncrypted</a></span>(boolean&nbsp;isEncrypted,
                    boolean&nbsp;flushLog)</code>
<div class="block">Sets whether the database is encrypted, all the transaction log has
 to be encrypted, and flush the log if requested.</div>
</td>
</tr>
<tr id="i98" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#setEndPosition-long-">setEndPosition</a></span>(long&nbsp;newPosition)</code>
<div class="block">set the endPosition of the log and make sure the new position won't spill off the end of the log</div>
</td>
</tr>
<tr id="i99" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#setRawStoreFactory-org.apache.derby.iapi.store.raw.RawStoreFactory-">setRawStoreFactory</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/RawStoreFactory.html" title="interface in org.apache.derby.iapi.store.raw">RawStoreFactory</a>&nbsp;rsf)</code>
<div class="block">Make log factory aware of which raw store factory it belongs to</div>
</td>
</tr>
<tr id="i100" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#startLogBackup-java.io.File-">startLogBackup</a></span>(java.io.File&nbsp;toDir)</code>&nbsp;</td>
</tr>
<tr id="i101" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#startNewLogFile--">startNewLogFile</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i102" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#startReplicationMasterRole-org.apache.derby.iapi.store.replication.master.MasterFactory-">startReplicationMasterRole</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/replication/master/MasterFactory.html" title="interface in org.apache.derby.iapi.store.replication.master">MasterFactory</a>&nbsp;masterFactory)</code>
<div class="block">Make this LogFactory pass log records to the MasterFactory
 every time a log record is appended to the log on disk, and
 notify the MasterFactory when a log disk flush has taken place.</div>
</td>
</tr>
<tr id="i103" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#stop--">stop</a></span>()</code>
<div class="block">Stop the log factory
                 MT- caller provide synchronization
                (RESOLVE: this should be called AFTER dataFactory and transFactory are
                stopped)</div>
</td>
</tr>
<tr id="i104" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#stopReplicationMasterRole--">stopReplicationMasterRole</a></span>()</code>
<div class="block">Stop this LogFactory from passing log records to the
 MasterFactory and from notifying the MasterFactory when a log
 disk flush has taken place.</div>
</td>
</tr>
<tr id="i105" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#stopReplicationSlaveRole--">stopReplicationSlaveRole</a></span>()</code>
<div class="block">Stop the slave functionality for this LogFactory.</div>
</td>
</tr>
<tr id="i106" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#switchLogFile--">switchLogFile</a></span>()</code>
<div class="block">Switch to the next log file if possible.</div>
</td>
</tr>
<tr id="i107" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#syncFile-org.apache.derby.io.StorageRandomAccessFile-">syncFile</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a>&nbsp;raf)</code>
<div class="block">Utility routine to call sync() on the input file descriptor.</div>
</td>
</tr>
<tr id="i108" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#testLogFull--">testLogFull</a></span>()</code>
<div class="block">Simulate a log full condition

                if TEST_LOG_FULL is set to true, then the property
                TEST_RECORD_TO_FILL_LOG indicates the number of times this function is
                call before an IOException simulating a log full condition is raised.</div>
</td>
</tr>
<tr id="i109" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#toString--">toString</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i110" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#truncateLog-org.apache.derby.impl.store.raw.log.CheckpointOperation-">truncateLog</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/raw/log/CheckpointOperation.html" title="class in org.apache.derby.impl.store.raw.log">CheckpointOperation</a>&nbsp;checkpoint)</code>
<div class="block">Get rid of old and unnecessary log files

                 MT- only one truncate log is allowed to be taking place at any
                given time.</div>
</td>
</tr>
<tr id="i111" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#truncateLog-long-">truncateLog</a></span>(long&nbsp;firstLogNeeded)</code>
<div class="block">Get rid of old and unnecessary log files</div>
</td>
</tr>
<tr id="i112" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#unfreezePersistentStore--">unfreezePersistentStore</a></span>()</code>
<div class="block">Backup restore - start sending log record to the log stream</div>
</td>
</tr>
<tr id="i113" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#verifyLogFormat-org.apache.derby.io.StorageFile-long-">verifyLogFormat</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;logFileName,
               long&nbsp;number)</code>
<div class="block">Verify that we the log file is of the right format and of the right
                version and log file number.</div>
</td>
</tr>
<tr id="i114" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#verifyLogFormat-org.apache.derby.io.StorageRandomAccessFile-long-">verifyLogFormat</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a>&nbsp;log,
               long&nbsp;number)</code>
<div class="block">Verify that we the log file is of the right format and of the right
                version and log file number.</div>
</td>
</tr>
<tr id="i115" class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogToFile.html#writeControlFile-org.apache.derby.io.StorageFile-long-">writeControlFile</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;logControlFileName,
                long&nbsp;value)</code>
<div class="block">Carefully write out this value to the control file.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="INT_LENGTH">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>INT_LENGTH</h4>
<pre>private static final&nbsp;long INT_LENGTH</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.log.LogToFile.INT_LENGTH">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="fid">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fid</h4>
<pre>private static&nbsp;int fid</pre>
</li>
</ul>
<a name="LOG_FILE_HEADER_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG_FILE_HEADER_SIZE</h4>
<pre>public static final&nbsp;int LOG_FILE_HEADER_SIZE</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.log.LogToFile.LOG_FILE_HEADER_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="LOG_FILE_HEADER_PREVIOUS_LOG_INSTANT_OFFSET">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG_FILE_HEADER_PREVIOUS_LOG_INSTANT_OFFSET</h4>
<pre>protected static final&nbsp;int LOG_FILE_HEADER_PREVIOUS_LOG_INSTANT_OFFSET</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.log.LogToFile.LOG_FILE_HEADER_PREVIOUS_LOG_INSTANT_OFFSET">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="LOG_RECORD_OVERHEAD">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG_RECORD_OVERHEAD</h4>
<pre>public static final&nbsp;int LOG_RECORD_OVERHEAD</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.log.LogToFile.LOG_RECORD_OVERHEAD">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DBG_FLAG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DBG_FLAG</h4>
<pre>public static final&nbsp;java.lang.String DBG_FLAG</pre>
</li>
</ul>
<a name="DUMP_LOG_ONLY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DUMP_LOG_ONLY</h4>
<pre>public static final&nbsp;java.lang.String DUMP_LOG_ONLY</pre>
</li>
</ul>
<a name="DUMP_LOG_FROM_LOG_FILE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DUMP_LOG_FROM_LOG_FILE</h4>
<pre>public static final&nbsp;java.lang.String DUMP_LOG_FROM_LOG_FILE</pre>
</li>
</ul>
<a name="LOG_SYNC_STATISTICS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG_SYNC_STATISTICS</h4>
<pre>protected static final&nbsp;java.lang.String LOG_SYNC_STATISTICS</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.log.LogToFile.LOG_SYNC_STATISTICS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="OBSOLETE_LOG_VERSION_NUMBER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>OBSOLETE_LOG_VERSION_NUMBER</h4>
<pre>private static final&nbsp;int OBSOLETE_LOG_VERSION_NUMBER</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.log.LogToFile.OBSOLETE_LOG_VERSION_NUMBER">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DEFAULT_LOG_SWITCH_INTERVAL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_LOG_SWITCH_INTERVAL</h4>
<pre>private static final&nbsp;int DEFAULT_LOG_SWITCH_INTERVAL</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.log.LogToFile.DEFAULT_LOG_SWITCH_INTERVAL">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="LOG_SWITCH_INTERVAL_MIN">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG_SWITCH_INTERVAL_MIN</h4>
<pre>private static final&nbsp;int LOG_SWITCH_INTERVAL_MIN</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.log.LogToFile.LOG_SWITCH_INTERVAL_MIN">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="LOG_SWITCH_INTERVAL_MAX">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG_SWITCH_INTERVAL_MAX</h4>
<pre>private static final&nbsp;int LOG_SWITCH_INTERVAL_MAX</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.log.LogToFile.LOG_SWITCH_INTERVAL_MAX">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="CHECKPOINT_INTERVAL_MIN">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CHECKPOINT_INTERVAL_MIN</h4>
<pre>private static final&nbsp;int CHECKPOINT_INTERVAL_MIN</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.log.LogToFile.CHECKPOINT_INTERVAL_MIN">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="CHECKPOINT_INTERVAL_MAX">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CHECKPOINT_INTERVAL_MAX</h4>
<pre>private static final&nbsp;int CHECKPOINT_INTERVAL_MAX</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.log.LogToFile.CHECKPOINT_INTERVAL_MAX">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DEFAULT_CHECKPOINT_INTERVAL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_CHECKPOINT_INTERVAL</h4>
<pre>private static final&nbsp;int DEFAULT_CHECKPOINT_INTERVAL</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.log.LogToFile.DEFAULT_CHECKPOINT_INTERVAL">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DEFAULT_LOG_BUFFER_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_LOG_BUFFER_SIZE</h4>
<pre>private static final&nbsp;int DEFAULT_LOG_BUFFER_SIZE</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.log.LogToFile.DEFAULT_LOG_BUFFER_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="LOG_BUFFER_SIZE_MIN">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG_BUFFER_SIZE_MIN</h4>
<pre>private static final&nbsp;int LOG_BUFFER_SIZE_MIN</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.log.LogToFile.LOG_BUFFER_SIZE_MIN">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="LOG_BUFFER_SIZE_MAX">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG_BUFFER_SIZE_MAX</h4>
<pre>private static final&nbsp;int LOG_BUFFER_SIZE_MAX</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.log.LogToFile.LOG_BUFFER_SIZE_MAX">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="logBufferSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logBufferSize</h4>
<pre>private&nbsp;int logBufferSize</pre>
</li>
</ul>
<a name="IS_BETA_FLAG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>IS_BETA_FLAG</h4>
<pre>private static final&nbsp;byte IS_BETA_FLAG</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.log.LogToFile.IS_BETA_FLAG">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="IS_DURABILITY_TESTMODE_NO_SYNC_FLAG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>IS_DURABILITY_TESTMODE_NO_SYNC_FLAG</h4>
<pre>private static final&nbsp;byte IS_DURABILITY_TESTMODE_NO_SYNC_FLAG</pre>
<div class="block">When the derby.system.durability property is set to 'test', the store 
 system will not force sync calls in the following cases
 - for the log file at each commit
 - for the log file before data page is forced to disk
 - for page allocation when file is grown
 - for data writes during checkpoint
 This means it is possible that the recovery system may not work properly,
 committed transactions may be lost, and/or database may not
 be in a consistent state.
 In order that we recognize this case that the database was previously
 at any time booted in this mode, this value is written out
 into the log control file. This will help prevent us from 
 wasting time to resolve issues in such cases.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/iapi/reference/Property.html#DURABILITY_PROPERTY"><code>This value is written as part of the log control file flags byte.</code></a>, 
<a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.log.LogToFile.IS_DURABILITY_TESTMODE_NO_SYNC_FLAG">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="wasDBInDurabilityTestModeNoSync">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>wasDBInDurabilityTestModeNoSync</h4>
<pre>private static&nbsp;boolean wasDBInDurabilityTestModeNoSync</pre>
<div class="block">keeps track of if the database was booted previously at any time with 
 derby.system.durability=test</div>
</li>
</ul>
<a name="DEFAULT_LOG_ARCHIVE_DIRECTORY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_LOG_ARCHIVE_DIRECTORY</h4>
<pre>private static final&nbsp;java.lang.String DEFAULT_LOG_ARCHIVE_DIRECTORY</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.log.LogToFile.DEFAULT_LOG_ARCHIVE_DIRECTORY">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="logSwitchInterval">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logSwitchInterval</h4>
<pre>private&nbsp;int logSwitchInterval</pre>
</li>
</ul>
<a name="checkpointInterval">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkpointInterval</h4>
<pre>private&nbsp;int checkpointInterval</pre>
</li>
</ul>
<a name="dataDirectory">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataDirectory</h4>
<pre>java.lang.String dataDirectory</pre>
</li>
</ul>
<a name="logStorageFactory">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logStorageFactory</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/io/WritableStorageFactory.html" title="interface in org.apache.derby.io">WritableStorageFactory</a> logStorageFactory</pre>
</li>
</ul>
<a name="logBeingFlushed">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logBeingFlushed</h4>
<pre>private&nbsp;boolean logBeingFlushed</pre>
</li>
</ul>
<a name="logOut">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logOut</h4>
<pre>protected&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogAccessFile.html" title="class in org.apache.derby.impl.store.raw.log">LogAccessFile</a> logOut</pre>
</li>
</ul>
<a name="firstLog">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>firstLog</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a> firstLog</pre>
</li>
</ul>
<a name="endPosition">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>endPosition</h4>
<pre>protected&nbsp;long endPosition</pre>
</li>
</ul>
<a name="lastFlush">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastFlush</h4>
<pre>long lastFlush</pre>
</li>
</ul>
<a name="logFileNumber">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logFileNumber</h4>
<pre>long logFileNumber</pre>
</li>
</ul>
<a name="bootTimeLogFileNumber">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bootTimeLogFileNumber</h4>
<pre>long bootTimeLogFileNumber</pre>
</li>
</ul>
<a name="firstLogFileNumber">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>firstLogFileNumber</h4>
<pre>long firstLogFileNumber</pre>
</li>
</ul>
<a name="maxLogFileNumber">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maxLogFileNumber</h4>
<pre>private&nbsp;long maxLogFileNumber</pre>
</li>
</ul>
<a name="currentCheckpoint">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>currentCheckpoint</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/raw/log/CheckpointOperation.html" title="class in org.apache.derby.impl.store.raw.log">CheckpointOperation</a> currentCheckpoint</pre>
</li>
</ul>
<a name="checkpointInstant">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkpointInstant</h4>
<pre>long checkpointInstant</pre>
</li>
</ul>
<a name="checkpointDaemon">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkpointDaemon</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/iapi/services/daemon/DaemonService.html" title="interface in org.apache.derby.iapi.services.daemon">DaemonService</a> checkpointDaemon</pre>
</li>
</ul>
<a name="myClientNumber">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>myClientNumber</h4>
<pre>private&nbsp;int myClientNumber</pre>
</li>
</ul>
<a name="checkpointDaemonCalled">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkpointDaemonCalled</h4>
<pre>private volatile&nbsp;boolean checkpointDaemonCalled</pre>
</li>
</ul>
<a name="logWrittenFromLastCheckPoint">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logWrittenFromLastCheckPoint</h4>
<pre>private&nbsp;long logWrittenFromLastCheckPoint</pre>
</li>
</ul>
<a name="rawStoreFactory">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rawStoreFactory</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/raw/RawStoreFactory.html" title="interface in org.apache.derby.iapi.store.raw">RawStoreFactory</a> rawStoreFactory</pre>
</li>
</ul>
<a name="dataFactory">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataFactory</h4>
<pre>protected&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/raw/data/DataFactory.html" title="interface in org.apache.derby.iapi.store.raw.data">DataFactory</a> dataFactory</pre>
</li>
</ul>
<a name="ReadOnlyDB">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ReadOnlyDB</h4>
<pre>protected&nbsp;boolean ReadOnlyDB</pre>
</li>
</ul>
<a name="masterFactory">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>masterFactory</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/replication/master/MasterFactory.html" title="interface in org.apache.derby.iapi.store.replication.master">MasterFactory</a> masterFactory</pre>
</li>
</ul>
<a name="inReplicationMasterMode">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inReplicationMasterMode</h4>
<pre>private&nbsp;boolean inReplicationMasterMode</pre>
</li>
</ul>
<a name="inReplicationSlaveMode">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inReplicationSlaveMode</h4>
<pre>private&nbsp;boolean inReplicationSlaveMode</pre>
</li>
</ul>
<a name="replicationSlaveException">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replicationSlaveException</h4>
<pre>private volatile&nbsp;<a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a> replicationSlaveException</pre>
<div class="block">If this exception is set while in replication slave mode, the 
 exception will be thrown by the thread doing recovery will. 
 Effectively, this will shut down the database.</div>
</li>
</ul>
<a name="inReplicationSlavePreMode">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inReplicationSlavePreMode</h4>
<pre>private&nbsp;boolean inReplicationSlavePreMode</pre>
<div class="block">True if the database has been booted in replication slave pre
 mode, effectively turning off writes to the log file.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/iapi/store/replication/slave/SlaveFactory.html" title="interface in org.apache.derby.iapi.store.replication.slave"><code>SlaveFactory</code></a></dd>
</dl>
</li>
</ul>
<a name="slaveRecoveryMonitor">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>slaveRecoveryMonitor</h4>
<pre>private&nbsp;java.lang.Object slaveRecoveryMonitor</pre>
</li>
</ul>
<a name="allowedToReadFileNumber">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allowedToReadFileNumber</h4>
<pre>private&nbsp;long allowedToReadFileNumber</pre>
</li>
</ul>
<a name="keepAllLogs">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>keepAllLogs</h4>
<pre>private&nbsp;boolean keepAllLogs</pre>
</li>
</ul>
<a name="databaseEncrypted">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>databaseEncrypted</h4>
<pre>private&nbsp;boolean databaseEncrypted</pre>
</li>
</ul>
<a name="recoveryNeeded">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoveryNeeded</h4>
<pre>private&nbsp;boolean recoveryNeeded</pre>
</li>
</ul>
<a name="inCheckpoint">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inCheckpoint</h4>
<pre>private&nbsp;boolean inCheckpoint</pre>
</li>
</ul>
<a name="inRedo">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inRedo</h4>
<pre>private&nbsp;boolean inRedo</pre>
</li>
</ul>
<a name="inLogSwitch">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inLogSwitch</h4>
<pre>private&nbsp;boolean inLogSwitch</pre>
</li>
</ul>
<a name="stopped">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stopped</h4>
<pre>private&nbsp;boolean stopped</pre>
</li>
</ul>
<a name="logDevice">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logDevice</h4>
<pre>java.lang.String logDevice</pre>
</li>
</ul>
<a name="logNotSynced">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logNotSynced</h4>
<pre>private&nbsp;boolean logNotSynced</pre>
</li>
</ul>
<a name="logArchived">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logArchived</h4>
<pre>private volatile&nbsp;boolean logArchived</pre>
</li>
</ul>
<a name="logSwitchRequired">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logSwitchRequired</h4>
<pre>private&nbsp;boolean logSwitchRequired</pre>
</li>
</ul>
<a name="test_logWritten">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_logWritten</h4>
<pre>int test_logWritten</pre>
<div class="block">DEBUG test only</div>
</li>
</ul>
<a name="test_numRecordToFillLog">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_numRecordToFillLog</h4>
<pre>int test_numRecordToFillLog</pre>
</li>
</ul>
<a name="mon_flushCalls">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mon_flushCalls</h4>
<pre>private&nbsp;int mon_flushCalls</pre>
</li>
</ul>
<a name="mon_syncCalls">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mon_syncCalls</h4>
<pre>private&nbsp;int mon_syncCalls</pre>
</li>
</ul>
<a name="mon_numLogFlushWaits">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mon_numLogFlushWaits</h4>
<pre>private&nbsp;int mon_numLogFlushWaits</pre>
</li>
</ul>
<a name="mon_LogSyncStatistics">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mon_LogSyncStatistics</h4>
<pre>private&nbsp;boolean mon_LogSyncStatistics</pre>
</li>
</ul>
<a name="mon_numBytesToLog">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mon_numBytesToLog</h4>
<pre>private&nbsp;int mon_numBytesToLog</pre>
</li>
</ul>
<a name="corrupt">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>corrupt</h4>
<pre>protected volatile&nbsp;<a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a> corrupt</pre>
<div class="block">If not null then something is corrupt in the raw store and this represents the original error.</div>
</li>
</ul>
<a name="isFrozen">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isFrozen</h4>
<pre>private&nbsp;boolean isFrozen</pre>
<div class="block">If frozen, don't allow anything on disk to change.</div>
</li>
</ul>
<a name="jbmsVersion">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>jbmsVersion</h4>
<pre><a href="../../../../../../../org/apache/derby/iapi/services/info/ProductVersionHolder.html" title="class in org.apache.derby.iapi.services.info">ProductVersionHolder</a> jbmsVersion</pre>
<div class="block">Product Version information. Invarient after boot.</div>
</li>
</ul>
<a name="onDiskMajorVersion">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onDiskMajorVersion</h4>
<pre>private&nbsp;int onDiskMajorVersion</pre>
<div class="block">On disk database version information. When running in soft upgrade this version
                may be different to jbmsVersion.</div>
</li>
</ul>
<a name="onDiskMinorVersion">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onDiskMinorVersion</h4>
<pre>private&nbsp;int onDiskMinorVersion</pre>
</li>
</ul>
<a name="onDiskBeta">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onDiskBeta</h4>
<pre>private&nbsp;boolean onDiskBeta</pre>
</li>
</ul>
<a name="checksum">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checksum</h4>
<pre>private&nbsp;java.util.zip.CRC32 checksum</pre>
</li>
</ul>
<a name="isWriteSynced">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isWriteSynced</h4>
<pre>private&nbsp;boolean isWriteSynced</pre>
<div class="block">Note: Why logging system support file sync and write sync ?
 Note : The reason to support file and write sync of logs is 
 there was no support to do write sync until jdk1.4 and then
 there was write sync jvm bug in jdk1.4.1, only in jdk1.4.2 write 
 sync(rws and rwd modes) mechanism can be used correctly.
 Default in JVMS &gt;= jdk1.4.2 is write sync(see the boot method for jvm checks).

 Write sync mechanism support is added  for performance reasons. 
 On commits, logging system has to make sure the log for committed
 transaction is on disk. With out write  sync , log is written to the 
 disk and then fsync() is used on commits to make log is written to the 
 disk for sure. On most of the OS , fsync() calls are expensive. 
 On heavy commit oriented systems, file sync make the system run slow.
 This problem is solved by using write sync on preallocated log file. 
 write sync is much faster than doing write and file sync to a file. 
 File should be preallocated for write syncs to perform better than
 the file sync method. Whenever a new log file is created, 
 logSwitchInterval size is preallocated by writing zeros after file after the header.</div>
</li>
</ul>
<a name="jvmSyncErrorChecked">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>jvmSyncErrorChecked</h4>
<pre>private&nbsp;boolean jvmSyncErrorChecked</pre>
<div class="block">Status for whether the check on the sync error on some JVMs has been
 done or not. See the checkJvmSyncError method for details.</div>
</li>
</ul>
<a name="logFileToBackup">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logFileToBackup</h4>
<pre>private volatile&nbsp;long logFileToBackup</pre>
</li>
</ul>
<a name="backupInProgress">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>backupInProgress</h4>
<pre>private volatile&nbsp;boolean backupInProgress</pre>
</li>
</ul>
<a name="TEST_LOG_SWITCH_LOG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TEST_LOG_SWITCH_LOG</h4>
<pre>public static final&nbsp;java.lang.String TEST_LOG_SWITCH_LOG</pre>
<div class="block">Set to true if we want the checkpoint to only switch the log but not
          actually do the checkpoint</div>
</li>
</ul>
<a name="TEST_LOG_INCOMPLETE_LOG_WRITE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TEST_LOG_INCOMPLETE_LOG_WRITE</h4>
<pre>public static final&nbsp;java.lang.String TEST_LOG_INCOMPLETE_LOG_WRITE</pre>
<div class="block">Set to true if we want the upcoming log record to be only partially
          written.  The database is corrupted if not immediately shutdown.
          Set TEST_LOG_PARTIAL_LOG_WRITE_NUM_BYTES to the number of bytes to write
          out, default is 1 byte.</div>
</li>
</ul>
<a name="TEST_LOG_PARTIAL_LOG_WRITE_NUM_BYTES">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TEST_LOG_PARTIAL_LOG_WRITE_NUM_BYTES</h4>
<pre>public static final&nbsp;java.lang.String TEST_LOG_PARTIAL_LOG_WRITE_NUM_BYTES</pre>
<div class="block">Set to the number of bytes we want the next log record to actually write
          out, only used when TEST_LOG_INCOMPLETE_LOG_WRITE is on.  Default is 1
          byte.</div>
</li>
</ul>
<a name="TEST_LOG_FULL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TEST_LOG_FULL</h4>
<pre>public static final&nbsp;java.lang.String TEST_LOG_FULL</pre>
<div class="block">Set to true if we want to simulate a log full condition</div>
</li>
</ul>
<a name="TEST_SWITCH_LOG_FAIL1">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TEST_SWITCH_LOG_FAIL1</h4>
<pre>public static final&nbsp;java.lang.String TEST_SWITCH_LOG_FAIL1</pre>
<div class="block">Set to true if we want to simulate a log full condition while switching log</div>
</li>
</ul>
<a name="TEST_SWITCH_LOG_FAIL2">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TEST_SWITCH_LOG_FAIL2</h4>
<pre>public static final&nbsp;java.lang.String TEST_SWITCH_LOG_FAIL2</pre>
</li>
</ul>
<a name="TEST_RECORD_TO_FILL_LOG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TEST_RECORD_TO_FILL_LOG</h4>
<pre>public static final&nbsp;java.lang.String TEST_RECORD_TO_FILL_LOG</pre>
<div class="block">Set to the number of log record we want to write before the log is
          simulated to be full.</div>
</li>
</ul>
<a name="TEST_MAX_LOGFILE_NUMBER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TEST_MAX_LOGFILE_NUMBER</h4>
<pre>public static final&nbsp;java.lang.String TEST_MAX_LOGFILE_NUMBER</pre>
<div class="block">Set to true if we want to simulate max possible log file number is 
 being used.</div>
</li>
</ul>
<a name="action">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>action</h4>
<pre>private&nbsp;int action</pre>
</li>
</ul>
<a name="activeFile">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>activeFile</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a> activeFile</pre>
</li>
</ul>
<a name="toFile">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toFile</h4>
<pre>private&nbsp;java.io.File toFile</pre>
</li>
</ul>
<a name="activePerms">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>activePerms</h4>
<pre>private&nbsp;java.lang.String activePerms</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="LogToFile--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>LogToFile</h4>
<pre>public&nbsp;LogToFile()</pre>
<div class="block">MT- not needed for constructor</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getTypeFormatId--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTypeFormatId</h4>
<pre>public&nbsp;int&nbsp;getTypeFormatId()</pre>
<div class="block">Return my format identifier.</div>
</li>
</ul>
<a name="markCorrupt-org.apache.derby.iapi.error.StandardException-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markCorrupt</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>&nbsp;markCorrupt(<a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>&nbsp;originalError)</pre>
<div class="block">Once the log factory is marked as corrupt then the raw store will
 shut down.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Corruptable.html#markCorrupt-org.apache.derby.iapi.error.StandardException-">markCorrupt</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Corruptable.html" title="interface in org.apache.derby.iapi.store.raw">Corruptable</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Must always return its parameter.</dd>
</dl>
</li>
</ul>
<a name="checkCorrupt--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkCorrupt</h4>
<pre>private&nbsp;void&nbsp;checkCorrupt()
                   throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="getLogger--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLogger</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/Logger.html" title="interface in org.apache.derby.iapi.store.raw.log">Logger</a>&nbsp;getLogger()</pre>
<div class="block">MT- not needed</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#getLogger--">getLogger</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
</dl>
</li>
</ul>
<a name="setRawStoreFactory-org.apache.derby.iapi.store.raw.RawStoreFactory-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRawStoreFactory</h4>
<pre>public&nbsp;void&nbsp;setRawStoreFactory(<a href="../../../../../../../org/apache/derby/iapi/store/raw/RawStoreFactory.html" title="interface in org.apache.derby.iapi.store.raw">RawStoreFactory</a>&nbsp;rsf)</pre>
<div class="block">Make log factory aware of which raw store factory it belongs to</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#setRawStoreFactory-org.apache.derby.iapi.store.raw.RawStoreFactory-">setRawStoreFactory</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
</dl>
</li>
</ul>
<a name="recover-org.apache.derby.iapi.store.raw.data.DataFactory-org.apache.derby.iapi.store.raw.xact.TransactionFactory-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recover</h4>
<pre>public&nbsp;void&nbsp;recover(<a href="../../../../../../../org/apache/derby/iapi/store/raw/data/DataFactory.html" title="interface in org.apache.derby.iapi.store.raw.data">DataFactory</a>&nbsp;df,
                    <a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/TransactionFactory.html" title="interface in org.apache.derby.iapi.store.raw.xact">TransactionFactory</a>&nbsp;tf)
             throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Recover the rawStore to a consistent state using the log.

                <P>
                In this implementation, the log is a stream of log records stored in
                one or more flat files.  Recovery is done in 2 passes: redo and undo.
                <BR> <B>Redo pass</B>
                <BR> In the redo pass, reconstruct the state of the rawstore by
                repeating exactly what happened before as recorded in the log.
                <BR><B>Undo pass</B>
                <BR> In the undo pass, all incomplete transactions are rolled back in
                the order from the most recently started to the oldest.

                <P>MT - synchronization provided by caller - RawStore boot.
                This method is guaranteed to be the only method being called and can
                assume single thread access on all fields.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#recover-org.apache.derby.iapi.store.raw.data.DataFactory-org.apache.derby.iapi.store.raw.xact.TransactionFactory-">recover</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>df</code> - - the data factory</dd>
<dd><code>tf</code> - - the transaction factory</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#needsRedo-org.apache.derby.iapi.store.raw.Transaction-"><code>Loggable.needsRedo(org.apache.derby.iapi.store.raw.Transaction)</code></a>, 
<a href="../../../../../../../org/apache/derby/impl/store/raw/log/FileLogger.html#redo-org.apache.derby.iapi.store.raw.xact.RawTransaction-org.apache.derby.iapi.store.raw.xact.TransactionFactory-org.apache.derby.impl.store.raw.log.StreamLogScan-long-long-"><code>FileLogger.redo(org.apache.derby.iapi.store.raw.xact.RawTransaction, org.apache.derby.iapi.store.raw.xact.TransactionFactory, org.apache.derby.impl.store.raw.log.StreamLogScan, long, long)</code></a></dd>
</dl>
</li>
</ul>
<a name="checkpoint-org.apache.derby.iapi.store.raw.RawStoreFactory-org.apache.derby.iapi.store.raw.data.DataFactory-org.apache.derby.iapi.store.raw.xact.TransactionFactory-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkpoint</h4>
<pre>public&nbsp;boolean&nbsp;checkpoint(<a href="../../../../../../../org/apache/derby/iapi/store/raw/RawStoreFactory.html" title="interface in org.apache.derby.iapi.store.raw">RawStoreFactory</a>&nbsp;rsf,
                          <a href="../../../../../../../org/apache/derby/iapi/store/raw/data/DataFactory.html" title="interface in org.apache.derby.iapi.store.raw.data">DataFactory</a>&nbsp;df,
                          <a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/TransactionFactory.html" title="interface in org.apache.derby.iapi.store.raw.xact">TransactionFactory</a>&nbsp;tf,
                          boolean&nbsp;wait)
                   throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Checkpoint the rawStore.

                <P> MT- Only one checkpoint is to be taking place at any given time.

                <P> The steps of a checkpoint are

                <OL>
                <LI> switch to a new log file if possible
                <PRE>
                        freeze the log (for the transition to a new log file)
                                flush current log file
                                create and flush the new log file (with file number 1 higher
                than the previous log file). The new log file becomes the
                current log file.
                        unfreeze the log
                </PRE>
                <LI> start checkpoint transaction
                <LI> gather interesting information about the rawStore:
                                        the current log instant (redoLWM)
                                        the earliest active transaction begin tran log record 
                    instant (undoLWM), all the truncation LWM set by clients 
                    of raw store (replication)
                <LI> clean the buffer cache 
                <LI> log the next checkpoint log record, which contains 
                                (repPoint, undoLWM, redoLWM) and commit checkpoint transaction.
                <LI> synchronously write the control file containing the next checkpoint
                                log record log instant
                <LI> the new checkpoint becomes the current checkpoint.
                                Somewhere near the beginning of each log file should be a
                                checkpoint log record (not guarenteed to be there)
                <LI> see if the log can be truncated

                <P>
                The earliest useful log record is determined by the repPoint and the 
        undoLWM, whichever is earlier. 
                <P>
                Every log file whose log file number is smaller than the earliest 
        useful log record's log file number can be deleted.

                <P><PRE>
                        Transactions can be at the following states w/r to a checkpoint -
                        consider the log as a continous stream and not as series of log 
            files for the sake of clarity.  
                        |(BT)-------(ET)| marks the begin and end of a transaction.
                        .                          checkpoint started
                        .       |__undoLWM          |
                        .       V                   |___redoLWM
                        .                           |___TruncationLWM
                        .                           |
                        .                           V
                        1 |-----------------|
                        2       |--------------------------------|
                        3           |-------|
                        4               |--------------------------------------(end of log)
                        5                                       |-^-|
                        .                                   Checkpoint Log Record
                        ---A---&gt;|&lt;-------B---------&gt;|&lt;-------------C-----------
                </PRE>

                <P>
                There are only 3 periods of interest : <BR>
                        A) before undoLWM,  B) between undo and redo LWM, C) after redoLWM.

                <P>
                Transaction 1 started in A and terminates in B.<BR>
                        During redo, we should only see log records and endXact from this
                        transaction in the first phase (between undoLWM and redoLWM).  No
                        beginXact log record for this transaction will be seen.

                <P>
                Transaction 2 started in B (right on the undoLWM) and terminated in C.<BR>
                        Any transaction that terminates in C must have a beginXact at or 
            after undoLWM.  In other words, no transaction can span A, B and C.
                        During redo, we will see beginXact, other log records and endXact 
            for this transaction.

                <P>
                Transaction 3 started in B and ended in B.<BR>
                        During redo, we will see beginXact, other log records and endXact 
            for this transaction.

                <P>
                Transaction 4 begins in B and never ends.<BR>
                        During redo, we will see beginXact, other log records.
                        In undo, this loser transaction will be rolled back.

                <P>
                Transaction 5 is the transaction taking the checkpoint.<BR>
                    The checkpoint action started way back in time but the checkpoint
                        log record is only written after the buffer cache has been flushed.

                <P>
                Note that if any time elapse between taking the undoLWM and the
                        redoLWM, then it will create a 4th period of interest.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#checkpoint-org.apache.derby.iapi.store.raw.RawStoreFactory-org.apache.derby.iapi.store.raw.data.DataFactory-org.apache.derby.iapi.store.raw.xact.TransactionFactory-boolean-">checkpoint</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rsf</code> - The RawStoreFactory to use to do the checkpoint.</dd>
<dd><code>df</code> - The DataFactory to use to do the checkpoint.</dd>
<dd><code>tf</code> - The TransactionFactory to use to do the checkpoint.</dd>
<dd><code>wait</code> - If an existing checkpoint is in progress, then if
                            wait=true then this routine will wait for the 
                            checkpoint to complete and the do another checkpoint
                            and wait for it to finish before returning.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if checkpoint is successful,  Will return false if wait
                is false and the routine finds another thread executing a 
                checkpoint.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - - encounter exception while doing 
                                       checkpoint.</dd>
</dl>
</li>
</ul>
<a name="checkpointWithTran-org.apache.derby.iapi.store.raw.xact.RawTransaction-org.apache.derby.iapi.store.raw.RawStoreFactory-org.apache.derby.iapi.store.raw.data.DataFactory-org.apache.derby.iapi.store.raw.xact.TransactionFactory-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkpointWithTran</h4>
<pre>private&nbsp;boolean&nbsp;checkpointWithTran(<a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/RawTransaction.html" title="class in org.apache.derby.iapi.store.raw.xact">RawTransaction</a>&nbsp;cptran,
                                   <a href="../../../../../../../org/apache/derby/iapi/store/raw/RawStoreFactory.html" title="interface in org.apache.derby.iapi.store.raw">RawStoreFactory</a>&nbsp;rsf,
                                   <a href="../../../../../../../org/apache/derby/iapi/store/raw/data/DataFactory.html" title="interface in org.apache.derby.iapi.store.raw.data">DataFactory</a>&nbsp;df,
                                   <a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/TransactionFactory.html" title="interface in org.apache.derby.iapi.store.raw.xact">TransactionFactory</a>&nbsp;tf,
                                   boolean&nbsp;wait)
                            throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">checkpoint with pre-start transaction</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rsf</code> - The RawStoreFactory to use to do the checkpoint.</dd>
<dd><code>df</code> - The DataFactory to use to do the checkpoint.</dd>
<dd><code>tf</code> - The TransactionFactory to use to do the checkpoint.</dd>
<dd><code>wait</code> - If an existing checkpoint is in progress, then if
                            wait=true then this routine will wait for the 
                            checkpoint to complete and the do another checkpoint
                            and wait for it to finish before returning.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Derby Standard Error Policy</dd>
</dl>
</li>
</ul>
<a name="flush-org.apache.derby.iapi.store.raw.log.LogInstant-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flush</h4>
<pre>public&nbsp;void&nbsp;flush(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;where)
           throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Flush all unwritten log record up to the log instance indicated to disk
                and sync.
                Also check to see if database is frozen or corrupt.

                <P>MT - not needed, wrapper method</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#flush-org.apache.derby.iapi.store.raw.log.LogInstant-">flush</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>where</code> - flush log up to here</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="flushAll--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flushAll</h4>
<pre>public&nbsp;void&nbsp;flushAll()
              throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Flush all unwritten log record to disk and sync.
                Also check to see if database is frozen or corrupt.

                <P>MT - not needed, wrapper method</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="verifyLogFormat-org.apache.derby.io.StorageFile-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifyLogFormat</h4>
<pre>private&nbsp;boolean&nbsp;verifyLogFormat(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;logFileName,
                                long&nbsp;number)
                         throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Verify that we the log file is of the right format and of the right
                version and log file number.

                <P>MT - not needed, no global variables used</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>logFileName</code> - the name of the log file</dd>
<dd><code>number</code> - the log file number</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the log file is of the current version and of the
                correct format</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="verifyLogFormat-org.apache.derby.io.StorageRandomAccessFile-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifyLogFormat</h4>
<pre>private&nbsp;boolean&nbsp;verifyLogFormat(<a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a>&nbsp;log,
                                long&nbsp;number)
                         throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Verify that we the log file is of the right format and of the right
                version and log file number.  The log file position is set to the
                beginning.

                <P>MT - MT-unsafe, caller must synchronize</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>log</code> - the log file</dd>
<dd><code>number</code> - the log file number</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the log file is of the current version and of the
                correct format</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="initLogFile-org.apache.derby.io.StorageRandomAccessFile-long-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initLogFile</h4>
<pre>private&nbsp;boolean&nbsp;initLogFile(<a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a>&nbsp;newlog,
                            long&nbsp;number,
                            long&nbsp;prevLogRecordEndInstant)
                     throws java.io.IOException,
                            <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Initialize the log to the correct format with the given version and
                log file number.  The new log file must be empty.  After initializing,
                the file is synchronously written to disk.

                <P>MT - synchornization provided by caller</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newlog</code> - the new log file to be initialized</dd>
<dd><code>number</code> - the log file number</dd>
<dd><code>prevLogRecordEndInstant</code> - the end position of the  previous log record</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the log file is empty, else false.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if new log file cannot be accessed or initialized</dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="switchLogFile--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>switchLogFile</h4>
<pre>public&nbsp;void&nbsp;switchLogFile()
                   throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Switch to the next log file if possible.

                <P>MT - log factory is single threaded thru a log file switch, the log
                is frozen for the duration of the switch</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="flushBuffer-long-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flushBuffer</h4>
<pre>private&nbsp;void&nbsp;flushBuffer(long&nbsp;fileNumber,
                         long&nbsp;wherePosition)
                  throws java.io.IOException,
                         <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Flush all unwritten log record up to the log instance indicated to disk
                without syncing.

                <P>MT - not needed, wrapper method</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>wherePosition</code> - flush log up to here</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - Failed to flush to the log</dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="truncateLog-org.apache.derby.impl.store.raw.log.CheckpointOperation-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>truncateLog</h4>
<pre>private&nbsp;void&nbsp;truncateLog(<a href="../../../../../../../org/apache/derby/impl/store/raw/log/CheckpointOperation.html" title="class in org.apache.derby.impl.store.raw.log">CheckpointOperation</a>&nbsp;checkpoint)</pre>
<div class="block">Get rid of old and unnecessary log files

                <P> MT- only one truncate log is allowed to be taking place at any
                given time.  Synchronized on this.</div>
</li>
</ul>
<a name="truncateLog-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>truncateLog</h4>
<pre>private&nbsp;void&nbsp;truncateLog(long&nbsp;firstLogNeeded)</pre>
<div class="block">Get rid of old and unnecessary log files</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>firstLogNeeded</code> - The log file number of the oldest log file
 needed for recovery.</dd>
</dl>
</li>
</ul>
<a name="getFirstLogNeeded-org.apache.derby.impl.store.raw.log.CheckpointOperation-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFirstLogNeeded</h4>
<pre>private&nbsp;long&nbsp;getFirstLogNeeded(<a href="../../../../../../../org/apache/derby/impl/store/raw/log/CheckpointOperation.html" title="class in org.apache.derby.impl.store.raw.log">CheckpointOperation</a>&nbsp;checkpoint)</pre>
<div class="block">Return the "oldest" log file still needed by recovery. 
 <p>
 Returns the log file that contains the undoLWM, ie. the oldest
 log record of all uncommitted transactions in the given checkpoint.
 
 If no checkpoint is given then returns -1, indicating all log records
 may be necessary.</div>
</li>
</ul>
<a name="writeControlFile-org.apache.derby.io.StorageFile-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeControlFile</h4>
<pre>boolean&nbsp;writeControlFile(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;logControlFileName,
                         long&nbsp;value)
                  throws java.io.IOException,
                         <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Carefully write out this value to the control file.
        We do safe write of this data by writing the data 
        into two files every time we write the control data.
        we write checksum at the end of the file, so if by
        chance system crashes while writing into the file,
        using the checksum we find that the control file
        is hosed then we  use the mirror file, which will have
        the control data written at last check point.

                see comment at beginning of file for log control file format.

                <P> MT- synchronized by caller</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="readControlFile-org.apache.derby.io.StorageFile-java.util.Properties-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readControlFile</h4>
<pre>private&nbsp;long&nbsp;readControlFile(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;logControlFileName,
                             java.util.Properties&nbsp;startParams)
                      throws java.io.IOException,
                             <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="createLogDirectory--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createLogDirectory</h4>
<pre>private&nbsp;void&nbsp;createLogDirectory()
                         throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Create the directory where transaction log should go.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Error Policy</dd>
</dl>
</li>
</ul>
<a name="createDataWarningFile--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createDataWarningFile</h4>
<pre>public&nbsp;void&nbsp;createDataWarningFile()
                           throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Create readme file in log directory warning users against touching
  any files in the directory</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#createDataWarningFile--">createDataWarningFile</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="getLogDirectory--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLogDirectory</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;getLogDirectory()
                            throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#getLogDirectory--">LogFactory</a></code></span></div>
<div class="block">Return the location of the log directory.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#getLogDirectory--">getLogDirectory</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby Error Policy</dd>
</dl>
</li>
</ul>
<a name="getCanonicalLogPath--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCanonicalLogPath</h4>
<pre>public&nbsp;java.lang.String&nbsp;getCanonicalLogPath()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#getCanonicalLogPath--">LogFactory</a></code></span></div>
<div class="block">Return the canonical directory of the PARENT of the log directory.  The
                log directory live in the "log" subdirectory of this path.  If the log
                is at the default location (underneath the database directory), this
                returns null.  Should only be called after the log factory is booted.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#getCanonicalLogPath--">getCanonicalLogPath</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
</dl>
</li>
</ul>
<a name="getControlFileName--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getControlFileName</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;getControlFileName()
                                throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Return the control file name 

                <P> MT- read only</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="getMirrorControlFileName--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMirrorControlFileName</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;getMirrorControlFileName()
                                      throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Return the mirror control file name 

                <P> MT- read only</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="getLogFileName-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLogFileName</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;getLogFileName(long&nbsp;filenumber)
                            throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Given a log file number, return its file name 

                <P> MT- read only</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="findCheckpoint-long-org.apache.derby.impl.store.raw.log.FileLogger-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findCheckpoint</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/raw/log/CheckpointOperation.html" title="class in org.apache.derby.impl.store.raw.log">CheckpointOperation</a>&nbsp;findCheckpoint(long&nbsp;checkpointInstant,
                                           <a href="../../../../../../../org/apache/derby/impl/store/raw/log/FileLogger.html" title="class in org.apache.derby.impl.store.raw.log">FileLogger</a>&nbsp;logger)
                                    throws java.io.IOException,
                                           <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                                           java.lang.ClassNotFoundException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
<dd><code>java.lang.ClassNotFoundException</code></dd>
</dl>
</li>
</ul>
<a name="openBackwardsScan-long-org.apache.derby.iapi.store.raw.log.LogInstant-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openBackwardsScan</h4>
<pre>protected&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogScan.html" title="interface in org.apache.derby.iapi.store.raw.log">LogScan</a>&nbsp;openBackwardsScan(long&nbsp;startAt,
                                    <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;stopAt)
                             throws java.io.IOException,
                                    <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Scan backward from start position.

                <P> MT- read only</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - cannot access the log</dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="openBackwardsScan-org.apache.derby.iapi.store.raw.log.LogInstant-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openBackwardsScan</h4>
<pre>protected&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogScan.html" title="interface in org.apache.derby.iapi.store.raw.log">LogScan</a>&nbsp;openBackwardsScan(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;stopAt)
                             throws java.io.IOException,
                                    <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Scan backward from end of log.
                <P> MT- read only</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - cannot access the log</dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="openFlushedScan-org.apache.derby.iapi.store.access.DatabaseInstant-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openFlushedScan</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/raw/ScanHandle.html" title="interface in org.apache.derby.iapi.store.raw">ScanHandle</a>&nbsp;openFlushedScan(<a href="../../../../../../../org/apache/derby/iapi/store/access/DatabaseInstant.html" title="interface in org.apache.derby.iapi.store.access">DatabaseInstant</a>&nbsp;start,
                                  int&nbsp;groupsIWant)
                           throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#openFlushedScan-org.apache.derby.iapi.store.access.DatabaseInstant-int-">LogFactory</a></code></span></div>
<div class="block">Get a ScanHandle to scan flushed records from the log.

                <P> MT- read only</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#openFlushedScan-org.apache.derby.iapi.store.access.DatabaseInstant-int-">openFlushedScan</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>start</code> - - the LogInstant where we start our scan. null means
                start at the beginning of the log. This function raises an error
                if startAt is a LogInstant which is not in the log.</dd>
<dd><code>groupsIWant</code> - - log record groups the scanner wants.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the LogScan.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Ooops.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#openFlushedScan-org.apache.derby.iapi.store.access.DatabaseInstant-int-"><code>LogFactory.openFlushedScan(org.apache.derby.iapi.store.access.DatabaseInstant, int)</code></a></dd>
</dl>
</li>
</ul>
<a name="openForwardsScan-long-org.apache.derby.iapi.store.raw.log.LogInstant-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openForwardsScan</h4>
<pre>protected&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogScan.html" title="interface in org.apache.derby.iapi.store.raw.log">LogScan</a>&nbsp;openForwardsScan(long&nbsp;startAt,
                                   <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;stopAt)
                            throws java.io.IOException,
                                   <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Scan Forward from start position.

                <P> MT- read only</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>startAt</code> - - if startAt == INVALID_LOG_INSTANT,
                        start from the beginning of the log. Otherwise, start scan from startAt.</dd>
<dd><code>stopAt</code> - - if not null, stop at this log instant (inclusive).
                        Otherwise, stop at the end of the log</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - cannot access the log</dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="getLogFileAtBeginning-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLogFileAtBeginning</h4>
<pre>protected&nbsp;<a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a>&nbsp;getLogFileAtBeginning(long&nbsp;filenumber)
                                                 throws java.io.IOException,
                                                        <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Open a log file and position the file at the beginning.
                Used by scan to switch to the next log file

                <P> MT- read only </p>

                <p> When the database is in slave replication mode only:
                Assumes that only recover() will call this method after
                initializeReplicationSlaveRole() has been called, and until slave
                replication has ended. If this changes, the current
                implementation will fail.</p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
<dd><code>java.io.IOException</code> - cannot access the log at the new position.</dd>
</dl>
</li>
</ul>
<a name="getLogFileAtPosition-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLogFileAtPosition</h4>
<pre>protected&nbsp;<a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a>&nbsp;getLogFileAtPosition(long&nbsp;logInstant)
                                                throws java.io.IOException,
                                                       <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Get a read-only handle to the log file positioned at the stated position

        <P> MT- read only</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>null if file does not exist or of the wrong format</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - cannot access the log at the new position.</dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="canSupport-java.util.Properties-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>canSupport</h4>
<pre>public&nbsp;boolean&nbsp;canSupport(java.util.Properties&nbsp;startParams)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/services/monitor/ModuleSupportable.html#canSupport-java.util.Properties-">ModuleSupportable</a></code></span></div>
<div class="block">See if this implementation can support any attributes that are listed in properties.
                This call may be made on a newly created instance before the
                boot() method has been called, or after the boot method has
                been called for a running module.
                <P>
                The module can check for attributes in the properties to
                see if it can fulfill the required behaviour. E.g. the raw
                store may define an attribute called RawStore.Recoverable.
                If a temporary raw store is required the property RawStore.recoverable=false
                would be added to the properties before calling bootServiceModule. If a
                raw store cannot support this attribute its canSupport method would
                return null. Also see the Monitor class's prologue to see how the
                identifier is used in looking up properties.
                <BR><B>Actually a better way maybe to have properties of the form
                RawStore.Attributes.mandatory=recoverable,smallfootprint and
                RawStore.Attributes.requested=oltp,fast
                </B></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/services/monitor/ModuleSupportable.html#canSupport-java.util.Properties-">canSupport</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/services/monitor/ModuleSupportable.html" title="interface in org.apache.derby.iapi.services.monitor">ModuleSupportable</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if this instance can be used, false otherwise.</dd>
</dl>
</li>
</ul>
<a name="boot-boolean-java.util.Properties-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>boot</h4>
<pre>public&nbsp;void&nbsp;boot(boolean&nbsp;create,
                 java.util.Properties&nbsp;startParams)
          throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Boot up the log factory.
                <P> MT- caller provide synchronization</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/services/monitor/ModuleControl.html#boot-boolean-java.util.Properties-">boot</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/services/monitor/ModuleControl.html" title="interface in org.apache.derby.iapi.services.monitor">ModuleControl</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - log factory cannot start up</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/iapi/services/monitor/Monitor.html" title="class in org.apache.derby.iapi.services.monitor"><code>Monitor</code></a>, 
<a href="../../../../../../../org/apache/derby/iapi/services/monitor/ModuleFactory.html" title="interface in org.apache.derby.iapi.services.monitor"><code>ModuleFactory</code></a></dd>
</dl>
</li>
</ul>
<a name="getLogStorageFactory--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLogStorageFactory</h4>
<pre>private&nbsp;void&nbsp;getLogStorageFactory()
                           throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="stop--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stop</h4>
<pre>public&nbsp;void&nbsp;stop()</pre>
<div class="block">Stop the log factory
                <P> MT- caller provide synchronization
                (RESOLVE: this should be called AFTER dataFactory and transFactory are
                stopped)</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/services/monitor/ModuleControl.html#stop--">stop</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/services/monitor/ModuleControl.html" title="interface in org.apache.derby.iapi.services.monitor">ModuleControl</a></code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/iapi/services/monitor/Monitor.html" title="class in org.apache.derby.iapi.services.monitor"><code>Monitor</code></a>, 
<a href="../../../../../../../org/apache/derby/iapi/services/monitor/ModuleFactory.html" title="interface in org.apache.derby.iapi.services.monitor"><code>ModuleFactory</code></a></dd>
</dl>
</li>
</ul>
<a name="deleteObsoleteLogfiles--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteObsoleteLogfiles</h4>
<pre>private&nbsp;void&nbsp;deleteObsoleteLogfiles()</pre>
</li>
</ul>
<a name="serviceASAP--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>serviceASAP</h4>
<pre>public&nbsp;boolean&nbsp;serviceASAP()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/services/daemon/Serviceable.html#serviceASAP--">Serviceable</a></code></span></div>
<div class="block">If this work should be done as soon as possible, then return true.  
                If it doesn't make any difference if it is done sooner rather than
                later, then return false.  

                The difference is whether or not the daemon service will be notified to
                work on this when this work is enqueued or subscribed, in case the
                serviceable work is put together but not sent to the daemon service
                directly, like in post commit processing

                <P>MT - MT safe</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/services/daemon/Serviceable.html#serviceASAP--">serviceASAP</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/services/daemon/Serviceable.html" title="interface in org.apache.derby.iapi.services.daemon">Serviceable</a></code></dd>
</dl>
</li>
</ul>
<a name="serviceImmediately--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>serviceImmediately</h4>
<pre>public&nbsp;boolean&nbsp;serviceImmediately()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/services/daemon/Serviceable.html#serviceImmediately--">Serviceable</a></code></span></div>
<div class="block">If this work should be done immediately on the user thread then return true.  
                If it doesn't make any difference if this work is done on a the user thread
                immediately or if it is performed by another thread asynchronously
                later, then return false.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/services/daemon/Serviceable.html#serviceImmediately--">serviceImmediately</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/services/daemon/Serviceable.html" title="interface in org.apache.derby.iapi.services.daemon">Serviceable</a></code></dd>
</dl>
</li>
</ul>
<a name="getLogFactoryProperties-org.apache.derby.iapi.services.property.PersistentSet-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLogFactoryProperties</h4>
<pre>public&nbsp;void&nbsp;getLogFactoryProperties(<a href="../../../../../../../org/apache/derby/iapi/services/property/PersistentSet.html" title="interface in org.apache.derby.iapi.services.property">PersistentSet</a>&nbsp;set)
                             throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#getLogFactoryProperties-org.apache.derby.iapi.services.property.PersistentSet-">LogFactory</a></code></span></div>
<div class="block">Get JBMS properties relevant to the log factory</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#getLogFactoryProperties-org.apache.derby.iapi.services.property.PersistentSet-">getLogFactoryProperties</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby Error Policy</dd>
</dl>
</li>
</ul>
<a name="performWork-org.apache.derby.iapi.services.context.ContextManager-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>performWork</h4>
<pre>public&nbsp;int&nbsp;performWork(<a href="../../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&nbsp;context)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/services/daemon/Serviceable.html#performWork-org.apache.derby.iapi.services.context.ContextManager-">Serviceable</a></code></span></div>
<div class="block">Do whatever it is that you want the daemon to do for you. There may be
                multiple daemon objects on different thread calling performWork at the
                same time. 

                The DaemonService will always call performWork with a context manager
                set up.  the DaemonService will clean up the context if an exception is
                thrown.  However, it is up to performWork to manage its own
                transaction.  If you start a transaction in performWork, you
                <B>must</B> commit or abort it at the end.  You may leave the
                transaction open so that other serviceable may use the transaction and
                context without starting a new one.  On the same token, there may
                already be an opened transaction on the context.  Serviceable
                performWork should always check the state of the context before use.

                A Serviceable object should be well behaved while it is performing the
                daemon work, i.e., it should not take too many resources or hog the CPU
                for too long or deadlock with anyone else.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/services/daemon/Serviceable.html#performWork-org.apache.derby.iapi.services.context.ContextManager-">performWork</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/services/daemon/Serviceable.html" title="interface in org.apache.derby.iapi.services.daemon">Serviceable</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the contextManager set up by the DaemonService.  There
                may or may not be the necessary context on it, depending on which other
                Serviceable object it has done work for.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the return status is only significant if the Serviceable client
                was enqueued instead of subscribed.  For subscribed client, the return
                status is ignored.  For enqueue client, it returns DONE or REQUEUE.  If
                a REQUEUEd is returned, it would be desirable if this should not be
                serviceASAP, although no harm is done if this still maintains that this
                should be serviced ASAP ...</dd>
</dl>
</li>
</ul>
<a name="appendLogRecord-byte:A-int-int-byte:A-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>appendLogRecord</h4>
<pre>public&nbsp;long&nbsp;appendLogRecord(byte[]&nbsp;data,
                            int&nbsp;offset,
                            int&nbsp;length,
                            byte[]&nbsp;optionalData,
                            int&nbsp;optionalDataOffset,
                            int&nbsp;optionalDataLength)
                     throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Append length bytes of data to the log prepended by a long log instant
                and followed by 4 bytes of length information.

                <P>
                This method is synchronized to ensure log records are added sequentially
                to the end of the log.

                <P>MT- single threaded through this log factory.  Log records are
                appended one at a time.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Log Full.</dd>
</dl>
</li>
</ul>
<a name="currentInstant--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>currentInstant</h4>
<pre>protected&nbsp;long&nbsp;currentInstant()</pre>
<div class="block">Get the current log instant - this is the log instant of the Next log
                record to be written out
                <P> MT - This method is synchronized to ensure that it always points to
                the end of a log record, not the middle of one.</div>
</li>
</ul>
<a name="endPosition--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>endPosition</h4>
<pre>protected&nbsp;long&nbsp;endPosition()</pre>
</li>
</ul>
<a name="getLogFileNumber--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLogFileNumber</h4>
<pre>private&nbsp;long&nbsp;getLogFileNumber()</pre>
<div class="block">Return the current log file number.

                <P> MT - this method is synchronized so that
                it is not in the middle of being changed by swithLogFile</div>
</li>
</ul>
<a name="firstLogInstant--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>firstLogInstant</h4>
<pre>private&nbsp;long&nbsp;firstLogInstant()</pre>
<div class="block">Get the first valid log instant - this is the beginning of the first
                log file

                <P>MT- synchronized on this</div>
</li>
</ul>
<a name="flush-long-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flush</h4>
<pre>protected&nbsp;void&nbsp;flush(long&nbsp;fileNumber,
                     long&nbsp;wherePosition)
              throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Flush the log such that the log record written with the instant 
        wherePosition is guaranteed to be on disk.

                <P>MT - only one flush is allowed to be taking place at any given time 
                (RESOLVE: right now it single thread thru the log factory while the log
                is frozen)</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - cannot sync log file</dd>
</dl>
</li>
</ul>
<a name="syncFile-org.apache.derby.io.StorageRandomAccessFile-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>syncFile</h4>
<pre>private&nbsp;void&nbsp;syncFile(<a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a>&nbsp;raf)
               throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Utility routine to call sync() on the input file descriptor.
 <p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="openForwardsFlushedScan-org.apache.derby.iapi.store.raw.log.LogInstant-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openForwardsFlushedScan</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogScan.html" title="interface in org.apache.derby.iapi.store.raw.log">LogScan</a>&nbsp;openForwardsFlushedScan(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;startAt)
                                throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Open a forward scan of the transaction log.

          <P> MT- read only</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#openForwardsFlushedScan-org.apache.derby.iapi.store.raw.log.LogInstant-">openForwardsFlushedScan</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>startAt</code> - - the LogInstant where we start our scan. null means
                start at the beginning of the log. This function raises an error
                if startAt is a LogInstant which is not in the log.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the LogScan.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby exception policy</dd>
</dl>
</li>
</ul>
<a name="openForwardsScan-org.apache.derby.iapi.store.raw.log.LogInstant-org.apache.derby.iapi.store.raw.log.LogInstant-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openForwardsScan</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogScan.html" title="interface in org.apache.derby.iapi.store.raw.log">LogScan</a>&nbsp;openForwardsScan(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;startAt,
                                <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;stopAt)
                         throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Get a forwards scan</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#openForwardsScan-org.apache.derby.iapi.store.raw.log.LogInstant-org.apache.derby.iapi.store.raw.log.LogInstant-">openForwardsScan</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>startAt</code> - - the LogInstant where we start our scan. null means
                start at the beginning of the log. This function raises an error
                if startAt is a LogInstant which is not in the log.</dd>
<dd><code>stopAt</code> - - the LogInstant where we stop our scan. null means
                stop at the end of the log. This function raises an error
                if stopAt is a LogInstant which is not in the log.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the LogScan.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="databaseEncrypted--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>databaseEncrypted</h4>
<pre>public final&nbsp;boolean&nbsp;databaseEncrypted()</pre>
</li>
</ul>
<a name="setDatabaseEncrypted-boolean-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDatabaseEncrypted</h4>
<pre>public&nbsp;void&nbsp;setDatabaseEncrypted(boolean&nbsp;isEncrypted,
                                 boolean&nbsp;flushLog)
                          throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Sets whether the database is encrypted, all the transaction log has
 to be encrypted, and flush the log if requested.
 <p>
 Log needs to be flushed first if the cryptographic state of the database
 changes (for instance re-encryption with a new key).</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#setDatabaseEncrypted-boolean-boolean-">setDatabaseEncrypted</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>isEncrypted</code> - <code>true</code> if the database is encrypted,
      <code>false</code> if not</dd>
<dd><code>flushLog</code> - <code>true</code> if log needs to be flushed,
      <code>false</code> otherwise</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="startNewLogFile--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startNewLogFile</h4>
<pre>public&nbsp;void&nbsp;startNewLogFile()
                     throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#startNewLogFile--">startNewLogFile</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="isCheckpointInLastLogFile--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isCheckpointInLastLogFile</h4>
<pre>public&nbsp;boolean&nbsp;isCheckpointInLastLogFile()
                                  throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#isCheckpointInLastLogFile--">isCheckpointInLastLogFile</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="deleteLogFileAfterCheckpointLogFile--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteLogFileAfterCheckpointLogFile</h4>
<pre>public&nbsp;void&nbsp;deleteLogFileAfterCheckpointLogFile()
                                         throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#deleteLogFileAfterCheckpointLogFile--">deleteLogFileAfterCheckpointLogFile</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="encrypt-byte:A-int-int-byte:A-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>encrypt</h4>
<pre>public&nbsp;int&nbsp;encrypt(byte[]&nbsp;cleartext,
                   int&nbsp;offset,
                   int&nbsp;length,
                   byte[]&nbsp;ciphertext,
                   int&nbsp;outputOffset)
            throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby Error Policy</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/iapi/store/raw/RawStoreFactory.html#encrypt-byte:A-int-int-byte:A-int-boolean-"><code>RawStoreFactory.encrypt(byte[], int, int, byte[], int, boolean)</code></a></dd>
</dl>
</li>
</ul>
<a name="decrypt-byte:A-int-int-byte:A-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>decrypt</h4>
<pre>public&nbsp;int&nbsp;decrypt(byte[]&nbsp;ciphertext,
                   int&nbsp;offset,
                   int&nbsp;length,
                   byte[]&nbsp;cleartext,
                   int&nbsp;outputOffset)
            throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby Error Policy</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/iapi/store/raw/RawStoreFactory.html#decrypt-byte:A-int-int-byte:A-int-"><code>RawStoreFactory.decrypt(byte[], int, int, byte[], int)</code></a></dd>
</dl>
</li>
</ul>
<a name="getEncryptionBlockSize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEncryptionBlockSize</h4>
<pre>public&nbsp;int&nbsp;getEncryptionBlockSize()</pre>
<div class="block">return the encryption block size used during encrypted db creation</div>
</li>
</ul>
<a name="getEncryptedDataLength-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEncryptedDataLength</h4>
<pre>public&nbsp;int&nbsp;getEncryptedDataLength(int&nbsp;length)</pre>
<div class="block">returns the length that will make the data to be multiple of encryption
           block size based on the given length. Block cipher algorithms like DES 
           and Blowfish ..etc  require their input to be an exact multiple of the block size.</div>
</li>
</ul>
<a name="getFirstUnflushedInstant--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFirstUnflushedInstant</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;getFirstUnflushedInstant()</pre>
<div class="block">Get the instant of the first record which was not
          flushed.

          <P>This only works after running recovery the first time.
          <P>MT - RESOLVE:</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#getFirstUnflushedInstant--">getFirstUnflushedInstant</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
</dl>
</li>
</ul>
<a name="getFirstUnflushedInstantAsLong--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFirstUnflushedInstantAsLong</h4>
<pre>public&nbsp;long&nbsp;getFirstUnflushedInstantAsLong()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#getFirstUnflushedInstantAsLong--">LogFactory</a></code></span></div>
<div class="block">Get the log instant long value of the first log record that has not 
 been flushed. Only works after recover() has finished, or (if in slave 
 replication mode) after calling initializeReplicationSlaveRole.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#getFirstUnflushedInstantAsLong--">getFirstUnflushedInstantAsLong</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the log instant long value of the first log record that has not 
 been flushed</dd>
</dl>
</li>
</ul>
<a name="freezePersistentStore--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>freezePersistentStore</h4>
<pre>public&nbsp;void&nbsp;freezePersistentStore()
                           throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Backup restore - stop sending log record to the log stream</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#freezePersistentStore--">freezePersistentStore</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="unfreezePersistentStore--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unfreezePersistentStore</h4>
<pre>public&nbsp;void&nbsp;unfreezePersistentStore()
                             throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Backup restore - start sending log record to the log stream</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#unfreezePersistentStore--">unfreezePersistentStore</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="logArchived--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logArchived</h4>
<pre>public&nbsp;boolean&nbsp;logArchived()</pre>
<div class="block">Backup restore - is the log being archived to some directory?
 if log archive mode is enabled return true else false</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#logArchived--">logArchived</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the log is being archived.</dd>
</dl>
</li>
</ul>
<a name="checkVersion-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkVersion</h4>
<pre>boolean&nbsp;checkVersion(int&nbsp;requiredMajorVersion,
                     int&nbsp;requiredMinorVersion)</pre>
<div class="block">Check to see if a database has been upgraded to the required
           level in order to use a store feature.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>requiredMajorVersion</code> - required database Engine major version</dd>
<dd><code>requiredMinorVersion</code> - required database Engine minor version</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True if the database has been upgraded to the required level, false otherwise.</dd>
</dl>
</li>
</ul>
<a name="checkVersion-int-int-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkVersion</h4>
<pre>public&nbsp;boolean&nbsp;checkVersion(int&nbsp;requiredMajorVersion,
                            int&nbsp;requiredMinorVersion,
                            java.lang.String&nbsp;feature)
                     throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Check to see if a database has been upgraded to the required
  level in order to use a store feature.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#checkVersion-int-int-java.lang.String-">checkVersion</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>requiredMajorVersion</code> - required database Engine major version</dd>
<dd><code>requiredMinorVersion</code> - required database Engine minor version</dd>
<dd><code>feature</code> - Non-null to throw an exception, null to return the 
                state of the version match.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code> true </code> if the database has been upgraded to 
         the required level, <code> false </code> otherwise.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - if the database is not at the require version 
             when <code>feature</code> feature is 
             not <code> null </code>.</dd>
</dl>
</li>
</ul>
<a name="logErrMsg-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logErrMsg</h4>
<pre>protected&nbsp;void&nbsp;logErrMsg(java.lang.String&nbsp;msg)</pre>
<div class="block">Print error message to user about the log
                MT - not needed, informational only</div>
</li>
</ul>
<a name="logErrMsg-java.lang.Throwable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logErrMsg</h4>
<pre>protected&nbsp;void&nbsp;logErrMsg(java.lang.Throwable&nbsp;t)</pre>
<div class="block">Print error message to user about the log
                MT - not needed, informational only</div>
</li>
</ul>
<a name="logErrMsgForDurabilityTestModeNoSync--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logErrMsgForDurabilityTestModeNoSync</h4>
<pre>private&nbsp;void&nbsp;logErrMsgForDurabilityTestModeNoSync()</pre>
<div class="block">In case of boot errors, and if database is either booted
 with derby.system.durability=test or was previously at any time booted in
 this mode, mention in the error message that the error is probably 
 because the derby.system.durability was set. 
 Dont want to waste time to resolve issues in such
 cases
 <p>
 MT - not needed, informational only</div>
</li>
</ul>
<a name="printErrorStack-java.lang.Throwable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>printErrorStack</h4>
<pre>private&nbsp;void&nbsp;printErrorStack(java.lang.Throwable&nbsp;t)</pre>
<div class="block">print stack trace from the Throwable including
 its nested exceptions</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>t</code> - trace starts from this error</dd>
</dl>
</li>
</ul>
<a name="logtest_appendPartialLogRecord-byte:A-int-int-byte:A-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logtest_appendPartialLogRecord</h4>
<pre>private&nbsp;long&nbsp;logtest_appendPartialLogRecord(byte[]&nbsp;data,
                                            int&nbsp;offset,
                                            int&nbsp;length,
                                            byte[]&nbsp;optionalData,
                                            int&nbsp;optionalDataOffset,
                                            int&nbsp;optionalDataLength)
                                     throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Writes out a partial log record - takes the appendLogRecord.
                Need to shutdown the database before another log record gets written,
                or the database is not recoverable.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="testLogFull--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>testLogFull</h4>
<pre>protected&nbsp;void&nbsp;testLogFull()
                    throws java.io.IOException</pre>
<div class="block">Simulate a log full condition

                if TEST_LOG_FULL is set to true, then the property
                TEST_RECORD_TO_FILL_LOG indicates the number of times this function is
                call before an IOException simulating a log full condition is raised.

                If TEST_RECORD_TO_FILL_LOG is not set, it defaults to 100 log record</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="getLogFileToSimulateCorruption-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLogFileToSimulateCorruption</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a>&nbsp;getLogFileToSimulateCorruption(long&nbsp;filenum)
                                                       throws java.io.IOException,
                                                              <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Get the log file to Simulate a log corruption 
 FOR UNIT TESTING USAGE ONLY</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="inReplicationMasterMode--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inReplicationMasterMode</h4>
<pre>public&nbsp;boolean&nbsp;inReplicationMasterMode()</pre>
<div class="block">Used to determine if the replication master mode has been started,
 and the logging for unlogged operations needs to be enabled.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#inReplicationMasterMode--">inReplicationMasterMode</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true If the master replication mode is turned on and the 
              unlogged operations need to be logged.
         false If the master replication mode is turned off and the 
               unlogged operations need not be logged.</dd>
</dl>
</li>
</ul>
<a name="enableLogArchiveMode--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enableLogArchiveMode</h4>
<pre>public&nbsp;void&nbsp;enableLogArchiveMode()
                          throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#enableLogArchiveMode--">enableLogArchiveMode</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="disableLogArchiveMode--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disableLogArchiveMode</h4>
<pre>public&nbsp;void&nbsp;disableLogArchiveMode()
                           throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#disableLogArchiveMode--">disableLogArchiveMode</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="deleteOnlineArchivedLogFiles--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteOnlineArchivedLogFiles</h4>
<pre>public&nbsp;void&nbsp;deleteOnlineArchivedLogFiles()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#deleteOnlineArchivedLogFiles--">deleteOnlineArchivedLogFiles</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
</dl>
</li>
</ul>
<a name="startLogBackup-java.io.File-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startLogBackup</h4>
<pre>public&nbsp;void&nbsp;startLogBackup(java.io.File&nbsp;toDir)
                    throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#startLogBackup-java.io.File-">startLogBackup</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="backupLogFiles-java.io.File-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>backupLogFiles</h4>
<pre>private&nbsp;void&nbsp;backupLogFiles(java.io.File&nbsp;toDir,
                            long&nbsp;lastLogFileToBackup)
                     throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="endLogBackup-java.io.File-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>endLogBackup</h4>
<pre>public&nbsp;void&nbsp;endLogBackup(java.io.File&nbsp;toDir)
                  throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#endLogBackup-java.io.File-">endLogBackup</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="abortLogBackup--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>abortLogBackup</h4>
<pre>public&nbsp;void&nbsp;abortLogBackup()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#abortLogBackup--">abortLogBackup</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
</dl>
</li>
</ul>
<a name="inRFR--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inRFR</h4>
<pre>public&nbsp;boolean&nbsp;inRFR()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#inRFR--">inRFR</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
</dl>
</li>
</ul>
<a name="checkpointInRFR-org.apache.derby.iapi.store.raw.log.LogInstant-long-long-org.apache.derby.iapi.store.raw.data.DataFactory-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkpointInRFR</h4>
<pre>public&nbsp;void&nbsp;checkpointInRFR(<a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;cinstant,
                            long&nbsp;redoLWM,
                            long&nbsp;undoLWM,
                            <a href="../../../../../../../org/apache/derby/iapi/store/raw/data/DataFactory.html" title="interface in org.apache.derby.iapi.store.raw.data">DataFactory</a>&nbsp;df)
                     throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">redo a checkpoint during rollforward recovery</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#checkpointInRFR-org.apache.derby.iapi.store.raw.log.LogInstant-long-long-org.apache.derby.iapi.store.raw.data.DataFactory-">checkpointInRFR</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>cinstant</code> - The LogInstant of the checkpoint</dd>
<dd><code>redoLWM</code> - Redo Low Water Mark in the check point record</dd>
<dd><code>undoLWM</code> - Undo Low Water Mark in the checkpoint</dd>
<dd><code>df</code> - - the data factory</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="startReplicationMasterRole-org.apache.derby.iapi.store.replication.master.MasterFactory-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startReplicationMasterRole</h4>
<pre>public&nbsp;void&nbsp;startReplicationMasterRole(<a href="../../../../../../../org/apache/derby/iapi/store/replication/master/MasterFactory.html" title="interface in org.apache.derby.iapi.store.replication.master">MasterFactory</a>&nbsp;masterFactory)
                                throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Make this LogFactory pass log records to the MasterFactory
 every time a log record is appended to the log on disk, and
 notify the MasterFactory when a log disk flush has taken place.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#startReplicationMasterRole-org.apache.derby.iapi.store.replication.master.MasterFactory-">startReplicationMasterRole</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>masterFactory</code> - The MasterFactory service responsible for
 controlling the master side replication behaviour.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby exception policy,
 thrown on replication startup error. Will only be thrown if
 replication is attempted started on a readonly database, i.e,
 never thrown here.</dd>
</dl>
</li>
</ul>
<a name="stopReplicationMasterRole--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stopReplicationMasterRole</h4>
<pre>public&nbsp;void&nbsp;stopReplicationMasterRole()</pre>
<div class="block">Stop this LogFactory from passing log records to the
 MasterFactory and from notifying the MasterFactory when a log
 disk flush has taken place.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html#stopReplicationMasterRole--">stopReplicationMasterRole</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogFactory.html" title="interface in org.apache.derby.iapi.store.raw.log">LogFactory</a></code></dd>
</dl>
</li>
</ul>
<a name="stopReplicationSlaveRole--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stopReplicationSlaveRole</h4>
<pre>public&nbsp;void&nbsp;stopReplicationSlaveRole()
                              throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Stop the slave functionality for this LogFactory. Calling this
 method causes the thread currently doing recovery to stop the
 recovery process and throw a StandardException with SQLState
 SHUTDOWN_DATABASE. This should only be done when the database
 will be shutdown.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby exception policy</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/impl/db/SlaveDatabase.html" title="class in org.apache.derby.impl.db"><code>SlaveDatabase</code></a></dd>
</dl>
</li>
</ul>
<a name="checkForReplication-org.apache.derby.impl.store.raw.log.LogAccessFile-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkForReplication</h4>
<pre>protected&nbsp;void&nbsp;checkForReplication(<a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogAccessFile.html" title="class in org.apache.derby.impl.store.raw.log">LogAccessFile</a>&nbsp;log)</pre>
<div class="block">Used by LogAccessFile to check if it should take the
 replication master role, and thereby send log records to the
 MasterFactory.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>log</code> - The LogAccessFile that will take the replication
 master role iff this database is master.</dd>
</dl>
</li>
</ul>
<a name="initializeReplicationSlaveRole--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initializeReplicationSlaveRole</h4>
<pre>public&nbsp;void&nbsp;initializeReplicationSlaveRole()
                                    throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Initializes logOut so that log received from the replication
 master can be appended to the log file.

 Normally, logOut (the file log records are appended to) is set
 up as part of the recovery process. When the database is booted
 in replication slave mode, however, recovery will not get to
 the point where logOut is initialized until this database is no
 longer in slave mode. Since logOut is needed to append log
 records received from the master, logOut needs to be set up for
 replication slave mode.

 This method finds the last log record in the log file with the
 highest number. logOut is set up so that log records will be
 appended to the end of that file, and the endPosition and
 lastFlush variables are set to point to the end of the same
 file. All this is normally done as part of recovery.

 After the first log file switch resulting from applying log
 received from the master, recovery will be allowed to read up
 to, but not including, the current log file which is the file
 numbered logFileNumber.

 Note that this method must not be called until LogToFile#boot()
 has completed. Currently, this is ensured because RawStore#boot
 starts the SlaveFactory (in turn calling this method) after
 LogFactory.boot() has completed. Race conditions for
 logFileNumber may occur if this is changed.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="failoverSlave--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>failoverSlave</h4>
<pre>public&nbsp;void&nbsp;failoverSlave()</pre>
<div class="block">Used to make the slave stop appending log records, complete recovery 
 and boot the database.</div>
</li>
</ul>
<a name="restoreLogs-java.util.Properties-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreLogs</h4>
<pre>private&nbsp;boolean&nbsp;restoreLogs(java.util.Properties&nbsp;properties)
                     throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">This function restores logs based on the  following attributes
 are specified on connection URL:
 Attribute.CREATE_FROM (Create database from backup if it does not exist)
 Attribute.RESTORE_FROM (Delete the whole database if it exists and then 
 restore it from backup)
 Attribute.ROLL_FORWARD_RECOVERY_FROM:(Perform Rollforward Recovery;
 except for the log directory everything else is replaced by the copy from
 backup. log files in the backup are copied to the existing online log 
 directory.

 In case of RESTORE_FROM, the whole database directory
 is removed in Directory.java while restoring service.properties
 so even the log directory is removed.
 In case of CREATE_FROM, log directory will not exist if
 we came so far because it should fail if a database already exists.
 In case ROLL_FORWARD_RECOVERY_FROM log directory should not be removed.
 So only thing that needs to be done here is create a
 a log directory if it does not exists and copy the 
 log files(including control files) that exists in the backup from which 
 we are are trying to restore the database to the online log directory.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="preAllocateNewLogFile-org.apache.derby.io.StorageRandomAccessFile-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>preAllocateNewLogFile</h4>
<pre>private&nbsp;void&nbsp;preAllocateNewLogFile(<a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a>&nbsp;log)
                            throws java.io.IOException,
                                   <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="openLogFileInWriteMode-org.apache.derby.io.StorageFile-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openLogFileInWriteMode</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a>&nbsp;openLogFileInWriteMode(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;logFile)
                                                throws java.io.IOException</pre>
<div class="block">open the given log file name for writes; if file can not be 
 be opened in write sync mode then disable the write sync mode and 
 open the file in "rw" mode.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="getLogDirPath-org.apache.derby.io.StorageFile-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLogDirPath</h4>
<pre>private&nbsp;java.lang.String&nbsp;getLogDirPath(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;logDir)</pre>
</li>
</ul>
<a name="checkJvmSyncError-org.apache.derby.io.StorageFile-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkJvmSyncError</h4>
<pre>private&nbsp;boolean&nbsp;checkJvmSyncError(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;logFile)
                           throws java.io.IOException</pre>
<div class="block">In Java 1.4.2 and newer rws and rwd modes for RandomAccessFile
 are supported. Still, on some JVMs (e.g. early versions of 1.4.2
 and 1.5 on Mac OS and FreeBSD) the support for rws and rwd is
 not working. This method attempts to detect this by opening an
 existing file in "rws" mode. If this fails, Derby should fall
 back to use "rw" mode for the log files followed by explicit
 syncing of the log.

 Note: it is important to use "rws" for the test. If "rwd" is used, no
 exception is thrown when opening the file, but the syncing does not
 take place.

 For more details see DERBY-1 (and DERBY-2020).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>logFile</code> - information about the log file to be opened</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if a JVM error is detected, false otherwise</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby exception</dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="privExists-org.apache.derby.io.StorageFile-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>privExists</h4>
<pre>protected&nbsp;boolean&nbsp;privExists(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)</pre>
</li>
</ul>
<a name="privDelete-org.apache.derby.io.StorageFile-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>privDelete</h4>
<pre>protected&nbsp;boolean&nbsp;privDelete(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)</pre>
</li>
</ul>
<a name="privRandomAccessFile-org.apache.derby.io.StorageFile-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>privRandomAccessFile</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/io/StorageRandomAccessFile.html" title="interface in org.apache.derby.io">StorageRandomAccessFile</a>&nbsp;privRandomAccessFile(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file,
                                                     java.lang.String&nbsp;perms)
                                              throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="privGetOutputStreamWriter-org.apache.derby.io.StorageFile-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>privGetOutputStreamWriter</h4>
<pre>private&nbsp;java.io.OutputStreamWriter&nbsp;privGetOutputStreamWriter(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)
                                                      throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="privCanWrite-org.apache.derby.io.StorageFile-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>privCanWrite</h4>
<pre>protected&nbsp;boolean&nbsp;privCanWrite(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)</pre>
</li>
</ul>
<a name="privMkdirs-org.apache.derby.io.StorageFile-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>privMkdirs</h4>
<pre>protected&nbsp;boolean&nbsp;privMkdirs(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)
                      throws java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="privList-java.io.File-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>privList</h4>
<pre>private&nbsp;java.lang.String[]&nbsp;privList(java.io.File&nbsp;file)</pre>
</li>
</ul>
<a name="privList-org.apache.derby.io.StorageFile-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>privList</h4>
<pre>private&nbsp;java.lang.String[]&nbsp;privList(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)</pre>
</li>
</ul>
<a name="privCopyFile-org.apache.derby.io.StorageFile-java.io.File-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>privCopyFile</h4>
<pre>private&nbsp;boolean&nbsp;privCopyFile(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;from,
                             java.io.File&nbsp;to)
                      throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="privCopyFile-java.io.File-org.apache.derby.io.StorageFile-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>privCopyFile</h4>
<pre>private&nbsp;boolean&nbsp;privCopyFile(java.io.File&nbsp;from,
                             <a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;to)</pre>
</li>
</ul>
<a name="privRemoveDirectory-org.apache.derby.io.StorageFile-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>privRemoveDirectory</h4>
<pre>private&nbsp;boolean&nbsp;privRemoveDirectory(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)</pre>
</li>
</ul>
<a name="runBooleanAction-int-org.apache.derby.io.StorageFile-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runBooleanAction</h4>
<pre>private&nbsp;boolean&nbsp;runBooleanAction(int&nbsp;action,
                                 <a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)</pre>
</li>
</ul>
<a name="setEndPosition-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setEndPosition</h4>
<pre>private&nbsp;void&nbsp;setEndPosition(long&nbsp;newPosition)</pre>
<div class="block">set the endPosition of the log and make sure the new position won't spill off the end of the log</div>
</li>
</ul>
<a name="run--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre>public final&nbsp;java.lang.Object&nbsp;run()
                           throws java.io.IOException,
                                  <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.security.PrivilegedExceptionAction&lt;java.lang.Object&gt;</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;java.lang.String&nbsp;toString()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</li>
</ul>
<a name="getContextService--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getContextService</h4>
<pre>private static&nbsp;<a href="../../../../../../../org/apache/derby/iapi/services/context/ContextService.html" title="class in org.apache.derby.iapi.services.context">ContextService</a>&nbsp;getContextService()</pre>
<div class="block">Privileged lookup of the ContextService. Must be private so that user code
 can't call this entry point.</div>
</li>
</ul>
<a name="getMonitor--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMonitor</h4>
<pre>private static&nbsp;<a href="../../../../../../../org/apache/derby/iapi/services/monitor/ModuleFactory.html" title="interface in org.apache.derby.iapi.services.monitor">ModuleFactory</a>&nbsp;getMonitor()</pre>
<div class="block">Privileged Monitor lookup. Must be private so that user code
 can't call this entry point.</div>
</li>
</ul>
<a name="findServiceModule-java.lang.Object-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findServiceModule</h4>
<pre>private static&nbsp;java.lang.Object&nbsp;findServiceModule(java.lang.Object&nbsp;serviceModule,
                                                  java.lang.String&nbsp;factoryInterface)
                                           throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Privileged startup. Must be private so that user code
 can't call this entry point.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="getServiceModule-java.lang.Object-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getServiceModule</h4>
<pre>private static&nbsp;java.lang.Object&nbsp;getServiceModule(java.lang.Object&nbsp;serviceModule,
                                                 java.lang.String&nbsp;factoryInterface)</pre>
<div class="block">Privileged module lookup. Must be private so that user code
 can't call this entry point.</div>
</li>
</ul>
<a name="isFullUpgrade-java.util.Properties-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isFullUpgrade</h4>
<pre>private static&nbsp;boolean&nbsp;isFullUpgrade(java.util.Properties&nbsp;startParams,
                                     java.lang.String&nbsp;oldVersionInfo)
                              throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Privileged startup. Must be private so that user code
 can't call this entry point.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/log/LogRecord.html" title="class in org.apache.derby.impl.store.raw.log"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/log/ReadOnly.html" title="class in org.apache.derby.impl.store.raw.log"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/impl/store/raw/log/LogToFile.html" target="_top">Frames</a></li>
<li><a href="LogToFile.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
