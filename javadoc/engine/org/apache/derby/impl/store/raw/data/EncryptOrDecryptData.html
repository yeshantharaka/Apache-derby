<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:05:18 IST 2017 -->
<title>EncryptOrDecryptData (Apache Derby V10.13 Internals)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="EncryptOrDecryptData (Apache Derby V10.13 Internals)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptContainerUndoOperation.html" title="class in org.apache.derby.impl.store.raw.data"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html" title="class in org.apache.derby.impl.store.raw.data"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html" target="_top">Frames</a></li>
<li><a href="EncryptOrDecryptData.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derby.impl.store.raw.data</div>
<h2 title="Class EncryptOrDecryptData" class="title">Class EncryptOrDecryptData</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.derby.impl.store.raw.data.EncryptOrDecryptData</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.security.PrivilegedAction&lt;java.lang.Boolean&gt;</dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">EncryptOrDecryptData</span>
extends java.lang.Object
implements java.security.PrivilegedAction&lt;java.lang.Boolean&gt;</pre>
<div class="block">This class is used to encrypt all the containers in the data segment with a
 new encryption key when password/key is changed or when an existing database
 is reconfigured for encryption.

 Encryption of existing data in the data segments is done by doing the
 following:
  Find all the containers in data segment (seg0) and encrypt all of them
  with the new  encryption key, the process for each container is:
   1.Write a log record to indicate that the container is getting encrypted.
   2.Read all the pages of the container through the page cache and
       encrypt each page with new encryption key and then write to a
       temporary file(n<cid>.dat) in the data segment itself.
   3. Rename the current container file (c<cid>.dat) to
                                         another file (o<cid>.dat)
   4. Rename the new encrypted version of the file (n&lt;cid).dat) to be
                                    the current container file (c<cid>.dat).
   5. All the old version of  the container (o<cid>.dat) files are removed
      after a successful checkpoint with a new key or on a rollback.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#actionCode">actionCode</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#actionDestStorageFile">actionDestStorageFile</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#actionStorageFile">actionStorageFile</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseDataFileFactory.html" title="class in org.apache.derby.impl.store.raw.data">BaseDataFileFactory</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#dataFactory">dataFactory</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#STORAGE_FILE_DELETE_ACTION">STORAGE_FILE_DELETE_ACTION</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#STORAGE_FILE_EXISTS_ACTION">STORAGE_FILE_EXISTS_ACTION</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#STORAGE_FILE_RENAME_ACTION">STORAGE_FILE_RENAME_ACTION</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/io/StorageFactory.html" title="interface in org.apache.derby.io">StorageFactory</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#storageFactory">storageFactory</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#EncryptOrDecryptData-org.apache.derby.impl.store.raw.data.BaseDataFileFactory-">EncryptOrDecryptData</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseDataFileFactory.html" title="class in org.apache.derby.impl.store.raw.data">BaseDataFileFactory</a>&nbsp;dataFactory)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#decryptAllContainers-org.apache.derby.iapi.store.raw.xact.RawTransaction-">decryptAllContainers</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/RawTransaction.html" title="class in org.apache.derby.iapi.store.raw.xact">RawTransaction</a>&nbsp;t)</code>
<div class="block">Finds all the all the containers stored in the data directory and
 decrypts them.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#encryptAllContainers-org.apache.derby.iapi.store.raw.xact.RawTransaction-">encryptAllContainers</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/RawTransaction.html" title="class in org.apache.derby.iapi.store.raw.xact">RawTransaction</a>&nbsp;t)</code>
<div class="block">Find all the all the containers stored in the data directory and
 encrypt them.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#encryptOrDecryptAllContainers-org.apache.derby.iapi.store.raw.xact.RawTransaction-boolean-">encryptOrDecryptAllContainers</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/RawTransaction.html" title="class in org.apache.derby.iapi.store.raw.xact">RawTransaction</a>&nbsp;t,
                             boolean&nbsp;doEncrypt)</code>
<div class="block">Encrypts or decrypts all containers in the database data directory.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#encryptOrDecryptContainer-org.apache.derby.iapi.store.raw.xact.RawTransaction-org.apache.derby.iapi.store.raw.ContainerKey-boolean-">encryptOrDecryptContainer</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/RawTransaction.html" title="class in org.apache.derby.iapi.store.raw.xact">RawTransaction</a>&nbsp;t,
                         <a href="../../../../../../../org/apache/derby/iapi/store/raw/ContainerKey.html" title="class in org.apache.derby.iapi.store.raw">ContainerKey</a>&nbsp;ckey,
                         boolean&nbsp;doEncrypt)</code>
<div class="block">Encrypts or decrypts the specified container.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#getFile-org.apache.derby.iapi.store.raw.ContainerKey-boolean-">getFile</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/ContainerKey.html" title="class in org.apache.derby.iapi.store.raw">ContainerKey</a>&nbsp;containerId,
       boolean&nbsp;old)</code>
<div class="block">Get file handle to a container file that is used to keep
 temporary versions of the container file.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#getFile-java.lang.String-">getFile</a></span>(java.lang.String&nbsp;ctrFileName)</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#getFilePath-org.apache.derby.iapi.store.raw.ContainerKey-boolean-">getFilePath</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/ContainerKey.html" title="class in org.apache.derby.iapi.store.raw">ContainerKey</a>&nbsp;containerId,
           boolean&nbsp;old)</code>
<div class="block">Get path to a container file that is used to keep temporary versions of
 the container file.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#isOldContainerFile-java.lang.String-">isOldContainerFile</a></span>(java.lang.String&nbsp;fileName)</code>&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#privDelete-org.apache.derby.io.StorageFile-">privDelete</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#privExists-org.apache.derby.io.StorageFile-">privExists</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)</code>&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#privRename-org.apache.derby.io.StorageFile-org.apache.derby.io.StorageFile-">privRename</a></span>(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;fromFile,
          <a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;destFile)</code>&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#removeOldVersionOfContainers--">removeOldVersionOfContainers</a></span>()</code>
<div class="block">Removes old versions of the containers after a cryptographic operation
 on the database.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#restoreContainer-org.apache.derby.iapi.store.raw.ContainerKey-">restoreContainer</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/ContainerKey.html" title="class in org.apache.derby.iapi.store.raw">ContainerKey</a>&nbsp;containerId)</code>&nbsp;</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>java.lang.Boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html#run--">run</a></span>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="dataFactory">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataFactory</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseDataFileFactory.html" title="class in org.apache.derby.impl.store.raw.data">BaseDataFileFactory</a> dataFactory</pre>
</li>
</ul>
<a name="storageFactory">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storageFactory</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/io/StorageFactory.html" title="interface in org.apache.derby.io">StorageFactory</a> storageFactory</pre>
</li>
</ul>
<a name="STORAGE_FILE_EXISTS_ACTION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>STORAGE_FILE_EXISTS_ACTION</h4>
<pre>private static final&nbsp;int STORAGE_FILE_EXISTS_ACTION</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.data.EncryptOrDecryptData.STORAGE_FILE_EXISTS_ACTION">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="STORAGE_FILE_DELETE_ACTION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>STORAGE_FILE_DELETE_ACTION</h4>
<pre>private static final&nbsp;int STORAGE_FILE_DELETE_ACTION</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.data.EncryptOrDecryptData.STORAGE_FILE_DELETE_ACTION">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="STORAGE_FILE_RENAME_ACTION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>STORAGE_FILE_RENAME_ACTION</h4>
<pre>private static final&nbsp;int STORAGE_FILE_RENAME_ACTION</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.raw.data.EncryptOrDecryptData.STORAGE_FILE_RENAME_ACTION">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="actionCode">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>actionCode</h4>
<pre>private&nbsp;int actionCode</pre>
</li>
</ul>
<a name="actionStorageFile">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>actionStorageFile</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a> actionStorageFile</pre>
</li>
</ul>
<a name="actionDestStorageFile">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>actionDestStorageFile</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a> actionDestStorageFile</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="EncryptOrDecryptData-org.apache.derby.impl.store.raw.data.BaseDataFileFactory-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>EncryptOrDecryptData</h4>
<pre>public&nbsp;EncryptOrDecryptData(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BaseDataFileFactory.html" title="class in org.apache.derby.impl.store.raw.data">BaseDataFileFactory</a>&nbsp;dataFactory)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="decryptAllContainers-org.apache.derby.iapi.store.raw.xact.RawTransaction-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>decryptAllContainers</h4>
<pre>public&nbsp;void&nbsp;decryptAllContainers(<a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/RawTransaction.html" title="class in org.apache.derby.iapi.store.raw.xact">RawTransaction</a>&nbsp;t)
                          throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Finds all the all the containers stored in the data directory and
 decrypts them.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>t</code> - the transaction that is used for the decryption operation</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="encryptAllContainers-org.apache.derby.iapi.store.raw.xact.RawTransaction-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>encryptAllContainers</h4>
<pre>public&nbsp;void&nbsp;encryptAllContainers(<a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/RawTransaction.html" title="class in org.apache.derby.iapi.store.raw.xact">RawTransaction</a>&nbsp;t)
                          throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Find all the all the containers stored in the data directory and
 encrypt them.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>t</code> - the transaction that is used for the encryption operation</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="encryptOrDecryptAllContainers-org.apache.derby.iapi.store.raw.xact.RawTransaction-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>encryptOrDecryptAllContainers</h4>
<pre>private&nbsp;void&nbsp;encryptOrDecryptAllContainers(<a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/RawTransaction.html" title="class in org.apache.derby.iapi.store.raw.xact">RawTransaction</a>&nbsp;t,
                                           boolean&nbsp;doEncrypt)
                                    throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Encrypts or decrypts all containers in the database data directory.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>t</code> - transaction used for the cryptographic operation</dd>
<dd><code>doEncrypt</code> - tells whether to encrypt or decrypt</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="encryptOrDecryptContainer-org.apache.derby.iapi.store.raw.xact.RawTransaction-org.apache.derby.iapi.store.raw.ContainerKey-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>encryptOrDecryptContainer</h4>
<pre>private&nbsp;void&nbsp;encryptOrDecryptContainer(<a href="../../../../../../../org/apache/derby/iapi/store/raw/xact/RawTransaction.html" title="class in org.apache.derby.iapi.store.raw.xact">RawTransaction</a>&nbsp;t,
                                       <a href="../../../../../../../org/apache/derby/iapi/store/raw/ContainerKey.html" title="class in org.apache.derby.iapi.store.raw">ContainerKey</a>&nbsp;ckey,
                                       boolean&nbsp;doEncrypt)
                                throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Encrypts or decrypts the specified container.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>t</code> - transaction that used to perform the cryptographic operation</dd>
<dd><code>ckey</code> - the key of the container that is being encrypted/decrypted</dd>
<dd><code>doEncrypt</code> - tells whether to encrypt or decrypt</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby error policy</dd>
</dl>
</li>
</ul>
<a name="getFile-org.apache.derby.iapi.store.raw.ContainerKey-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFile</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;getFile(<a href="../../../../../../../org/apache/derby/iapi/store/raw/ContainerKey.html" title="class in org.apache.derby.iapi.store.raw">ContainerKey</a>&nbsp;containerId,
                            boolean&nbsp;old)</pre>
<div class="block">Get file handle to a container file that is used to keep
 temporary versions of the container file.</div>
</li>
</ul>
<a name="getFilePath-org.apache.derby.iapi.store.raw.ContainerKey-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFilePath</h4>
<pre>private&nbsp;java.lang.String&nbsp;getFilePath(<a href="../../../../../../../org/apache/derby/iapi/store/raw/ContainerKey.html" title="class in org.apache.derby.iapi.store.raw">ContainerKey</a>&nbsp;containerId,
                                     boolean&nbsp;old)</pre>
<div class="block">Get path to a container file that is used to keep temporary versions of
 the container file.</div>
</li>
</ul>
<a name="isOldContainerFile-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isOldContainerFile</h4>
<pre>private&nbsp;boolean&nbsp;isOldContainerFile(java.lang.String&nbsp;fileName)</pre>
</li>
</ul>
<a name="getFile-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFile</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;getFile(java.lang.String&nbsp;ctrFileName)</pre>
</li>
</ul>
<a name="restoreContainer-org.apache.derby.iapi.store.raw.ContainerKey-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreContainer</h4>
<pre>void&nbsp;restoreContainer(<a href="../../../../../../../org/apache/derby/iapi/store/raw/ContainerKey.html" title="class in org.apache.derby.iapi.store.raw">ContainerKey</a>&nbsp;containerId)
               throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="removeOldVersionOfContainers--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeOldVersionOfContainers</h4>
<pre>public&nbsp;void&nbsp;removeOldVersionOfContainers()
                                  throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Removes old versions of the containers after a cryptographic operation
 on the database.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="privExists-org.apache.derby.io.StorageFile-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>privExists</h4>
<pre>private&nbsp;boolean&nbsp;privExists(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)</pre>
</li>
</ul>
<a name="privDelete-org.apache.derby.io.StorageFile-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>privDelete</h4>
<pre>private&nbsp;boolean&nbsp;privDelete(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;file)</pre>
</li>
</ul>
<a name="privRename-org.apache.derby.io.StorageFile-org.apache.derby.io.StorageFile-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>privRename</h4>
<pre>private&nbsp;boolean&nbsp;privRename(<a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;fromFile,
                           <a href="../../../../../../../org/apache/derby/io/StorageFile.html" title="interface in org.apache.derby.io">StorageFile</a>&nbsp;destFile)</pre>
</li>
</ul>
<a name="run--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>run</h4>
<pre>public&nbsp;java.lang.Boolean&nbsp;run()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.security.PrivilegedAction&lt;java.lang.Boolean&gt;</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/EncryptContainerUndoOperation.html" title="class in org.apache.derby.impl.store.raw.data"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/FileContainer.html" title="class in org.apache.derby.impl.store.raw.data"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.html" target="_top">Frames</a></li>
<li><a href="EncryptOrDecryptData.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
