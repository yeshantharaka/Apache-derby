<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:05:19 IST 2017 -->
<title>PhysicalUndoOperation (Apache Derby V10.13 Internals)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PhysicalUndoOperation (Apache Derby V10.13 Internals)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PhysicalPageOperation.html" title="class in org.apache.derby.impl.store.raw.data"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PurgeOperation.html" title="class in org.apache.derby.impl.store.raw.data"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/impl/store/raw/data/PhysicalUndoOperation.html" target="_top">Frames</a></li>
<li><a href="PhysicalUndoOperation.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derby.impl.store.raw.data</div>
<h2 title="Class PhysicalUndoOperation" class="title">Class PhysicalUndoOperation</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html" title="class in org.apache.derby.impl.store.raw.data">org.apache.derby.impl.store.raw.data.PageBasicOperation</a></li>
<li>
<ul class="inheritance">
<li>org.apache.derby.impl.store.raw.data.PhysicalUndoOperation</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.io.Externalizable, java.io.Serializable, <a href="../../../../../../../org/apache/derby/iapi/services/io/Formatable.html" title="interface in org.apache.derby.iapi.services.io">Formatable</a>, <a href="../../../../../../../org/apache/derby/iapi/services/io/TypedFormat.html" title="interface in org.apache.derby.iapi.services.io">TypedFormat</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Compensation.html" title="interface in org.apache.derby.iapi.store.raw">Compensation</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html" title="interface in org.apache.derby.iapi.store.raw">Loggable</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/RePreparable.html" title="interface in org.apache.derby.iapi.store.raw">RePreparable</a></dd>
</dl>
<hr>
<br>
<pre>public final class <span class="typeNameLabel">PhysicalUndoOperation</span>
extends <a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html" title="class in org.apache.derby.impl.store.raw.data">PageBasicOperation</a>
implements <a href="../../../../../../../org/apache/derby/iapi/store/raw/Compensation.html" title="interface in org.apache.derby.iapi.store.raw">Compensation</a></pre>
<div class="block">PhysicalUndoOperation is a compensation operation that rolls back the change of
        an Undo-able operation.  A PhysicalUndoOperation itself is not undo-able, i.e,
        it is loggable but not undoable.

        <PRE></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../serialized-form.html#org.apache.derby.impl.store.raw.data.PhysicalUndoOperation">Serialized Form</a></dd>
<table cellpadding=2 cellspacing=2><tr><td>Format ID</td><td>LOGOP_PAGE_PHYSICAL_UNDO
		the formatId is written by FormatIdOutputStream when this object is
		written out by writeObject</td></tr>
<tr><td>Purpose</td><td>update a physical log operation</td></tr>
<tr><td>Upgrade</td><td></td></tr>
<tr><td>Disk Layout</td><td>PageBasicOperation	the super class
		OptionalData	none (compensation operation never have optional data)</td></tr></table></dt>

</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/impl/store/raw/data/PhysicalPageOperation.html" title="class in org.apache.derby.impl.store.raw.data">PhysicalPageOperation</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PhysicalUndoOperation.html#undoOp">undoOp</a></span></code>
<div class="block">The operation to be rolled back</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.derby.impl.store.raw.data.PageBasicOperation">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.derby.impl.store.raw.data.<a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html" title="class in org.apache.derby.impl.store.raw.data">PageBasicOperation</a></h3>
<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#containerHdl">containerHdl</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#foundHere">foundHere</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#page">page</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.derby.iapi.store.raw.Loggable">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;org.apache.derby.iapi.store.raw.<a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html" title="interface in org.apache.derby.iapi.store.raw">Loggable</a></h3>
<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#ABORT">ABORT</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#BI_LOG">BI_LOG</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#CHECKSUM">CHECKSUM</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#COMMIT">COMMIT</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#COMPENSATION">COMPENSATION</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#FILE_RESOURCE">FILE_RESOURCE</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#FIRST">FIRST</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#LAST">LAST</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#PREPARE">PREPARE</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#RAWSTORE">RAWSTORE</a>, <a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#XA_NEEDLOCK">XA_NEEDLOCK</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PhysicalUndoOperation.html#PhysicalUndoOperation--">PhysicalUndoOperation</a></span>()</code>
<div class="block">Return my format identifier.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PhysicalUndoOperation.html#PhysicalUndoOperation-org.apache.derby.impl.store.raw.data.BasePage-">PhysicalUndoOperation</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a>&nbsp;page)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PhysicalUndoOperation.html#PhysicalUndoOperation-org.apache.derby.impl.store.raw.data.BasePage-org.apache.derby.impl.store.raw.data.PhysicalPageOperation-">PhysicalUndoOperation</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a>&nbsp;page,
                     <a href="../../../../../../../org/apache/derby/impl/store/raw/data/PhysicalPageOperation.html" title="class in org.apache.derby.impl.store.raw.data">PhysicalPageOperation</a>&nbsp;op)</code>
<div class="block">Set up a compensation operation during run time rollback</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PhysicalUndoOperation.html#doMe-org.apache.derby.iapi.store.raw.Transaction-org.apache.derby.iapi.store.raw.log.LogInstant-org.apache.derby.iapi.services.io.LimitObjectInput-">doMe</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a>&nbsp;xact,
    <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant,
    <a href="../../../../../../../org/apache/derby/iapi/services/io/LimitObjectInput.html" title="interface in org.apache.derby.iapi.services.io">LimitObjectInput</a>&nbsp;in)</code>
<div class="block">Apply the undo operation, in this implementation of the
                RawStore, it can only call the undoMe method of undoOp</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/iapi/util/ByteArray.html" title="class in org.apache.derby.iapi.util">ByteArray</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PhysicalUndoOperation.html#getPreparedLog--">getPreparedLog</a></span>()</code>
<div class="block">the default for optional data is set to null.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PhysicalUndoOperation.html#getTypeFormatId--">getTypeFormatId</a></span>()</code>
<div class="block">Get a universally unique identifier for the type of
          this object.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PhysicalUndoOperation.html#group--">group</a></span>()</code>
<div class="block">A page operation is a RAWSTORE log record</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PhysicalUndoOperation.html#releaseResource-org.apache.derby.iapi.store.raw.Transaction-">releaseResource</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a>&nbsp;xact)</code>
<div class="block">Release latched page and any other resources acquired during a previous
                findpage, safe to call multiple times.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PhysicalUndoOperation.html#restoreMe-org.apache.derby.iapi.store.raw.Transaction-org.apache.derby.impl.store.raw.data.BasePage-org.apache.derby.iapi.store.raw.log.LogInstant-org.apache.derby.iapi.services.io.LimitObjectInput-">restoreMe</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a>&nbsp;xact,
         <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a>&nbsp;undoPage,
         <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;CLRinstant,
         <a href="../../../../../../../org/apache/derby/iapi/services/io/LimitObjectInput.html" title="interface in org.apache.derby.iapi.services.io">LimitObjectInput</a>&nbsp;in)</code>
<div class="block">Undo the change indicated by this log operation and optional data.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PhysicalUndoOperation.html#setUndoOp-org.apache.derby.iapi.store.raw.Undoable-">setUndoOp</a></span>(<a href="../../../../../../../org/apache/derby/iapi/store/raw/Undoable.html" title="interface in org.apache.derby.iapi.store.raw">Undoable</a>&nbsp;op)</code>
<div class="block">Set up a PageUndoOperation during recovery redo.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PhysicalUndoOperation.html#toString--">toString</a></span>()</code>
<div class="block">DEBUG: Print self.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.derby.impl.store.raw.data.PageBasicOperation">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.derby.impl.store.raw.data.<a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html" title="class in org.apache.derby.impl.store.raw.data">PageBasicOperation</a></h3>
<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#findpage-org.apache.derby.iapi.store.raw.Transaction-">findpage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#getPage--">getPage</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#getPageForRedoRecovery-org.apache.derby.iapi.store.raw.Transaction-">getPageForRedoRecovery</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#getPageId--">getPageId</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#getPageVersion--">getPageVersion</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#needsRedo-org.apache.derby.iapi.store.raw.Transaction-">needsRedo</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#readExternal-java.io.ObjectInput-">readExternal</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#reclaimPrepareLocks-org.apache.derby.iapi.store.raw.Transaction-org.apache.derby.iapi.store.raw.LockingPolicy-">reclaimPrepareLocks</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#resetPageNumber-long-">resetPageNumber</a>, <a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#writeExternal-java.io.ObjectOutput-">writeExternal</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.derby.iapi.store.raw.Loggable">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.apache.derby.iapi.store.raw.<a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html" title="interface in org.apache.derby.iapi.store.raw">Loggable</a></h3>
<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#needsRedo-org.apache.derby.iapi.store.raw.Transaction-">needsRedo</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.io.Externalizable">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;java.io.Externalizable</h3>
<code>readExternal, writeExternal</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="undoOp">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>undoOp</h4>
<pre>private transient&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/raw/data/PhysicalPageOperation.html" title="class in org.apache.derby.impl.store.raw.data">PhysicalPageOperation</a> undoOp</pre>
<div class="block">The operation to be rolled back</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="PhysicalUndoOperation-org.apache.derby.impl.store.raw.data.BasePage-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PhysicalUndoOperation</h4>
<pre>PhysicalUndoOperation(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a>&nbsp;page)</pre>
</li>
</ul>
<a name="PhysicalUndoOperation-org.apache.derby.impl.store.raw.data.BasePage-org.apache.derby.impl.store.raw.data.PhysicalPageOperation-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PhysicalUndoOperation</h4>
<pre>PhysicalUndoOperation(<a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a>&nbsp;page,
                      <a href="../../../../../../../org/apache/derby/impl/store/raw/data/PhysicalPageOperation.html" title="class in org.apache.derby.impl.store.raw.data">PhysicalPageOperation</a>&nbsp;op)</pre>
<div class="block">Set up a compensation operation during run time rollback</div>
</li>
</ul>
<a name="PhysicalUndoOperation--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>PhysicalUndoOperation</h4>
<pre>public&nbsp;PhysicalUndoOperation()</pre>
<div class="block">Return my format identifier.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getTypeFormatId--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTypeFormatId</h4>
<pre>public&nbsp;int&nbsp;getTypeFormatId()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/services/io/TypedFormat.html#getTypeFormatId--">TypedFormat</a></code></span></div>
<div class="block">Get a universally unique identifier for the type of
          this object.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/services/io/TypedFormat.html#getTypeFormatId--">getTypeFormatId</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/services/io/TypedFormat.html" title="interface in org.apache.derby.iapi.services.io">TypedFormat</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The identifier. (A UUID stuffed in an array
          of 16 bytes).</dd>
</dl>
</li>
</ul>
<a name="setUndoOp-org.apache.derby.iapi.store.raw.Undoable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setUndoOp</h4>
<pre>public&nbsp;void&nbsp;setUndoOp(<a href="../../../../../../../org/apache/derby/iapi/store/raw/Undoable.html" title="interface in org.apache.derby.iapi.store.raw">Undoable</a>&nbsp;op)</pre>
<div class="block">Set up a PageUndoOperation during recovery redo.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Compensation.html#setUndoOp-org.apache.derby.iapi.store.raw.Undoable-">setUndoOp</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Compensation.html" title="interface in org.apache.derby.iapi.store.raw">Compensation</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>op</code> - the Undoable operation</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#needsRedo-org.apache.derby.iapi.store.raw.Transaction-"><code>Loggable.needsRedo(org.apache.derby.iapi.store.raw.Transaction)</code></a></dd>
</dl>
</li>
</ul>
<a name="doMe-org.apache.derby.iapi.store.raw.Transaction-org.apache.derby.iapi.store.raw.log.LogInstant-org.apache.derby.iapi.services.io.LimitObjectInput-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doMe</h4>
<pre>public final&nbsp;void&nbsp;doMe(<a href="../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a>&nbsp;xact,
                       <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;instant,
                       <a href="../../../../../../../org/apache/derby/iapi/services/io/LimitObjectInput.html" title="interface in org.apache.derby.iapi.services.io">LimitObjectInput</a>&nbsp;in)
                throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                       java.io.IOException</pre>
<div class="block">Apply the undo operation, in this implementation of the
                RawStore, it can only call the undoMe method of undoOp</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#doMe-org.apache.derby.iapi.store.raw.Transaction-org.apache.derby.iapi.store.raw.log.LogInstant-org.apache.derby.iapi.services.io.LimitObjectInput-">doMe</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html" title="interface in org.apache.derby.iapi.store.raw">Loggable</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>xact</code> - the Transaction that is doing the rollback</dd>
<dd><code>instant</code> - the log instant of this undo operation</dd>
<dd><code>in</code> - optional data</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - Can be thrown by any of the methods of InputStream.</dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard Derby policy.</dd>
</dl>
</li>
</ul>
<a name="releaseResource-org.apache.derby.iapi.store.raw.Transaction-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>releaseResource</h4>
<pre>public&nbsp;void&nbsp;releaseResource(<a href="../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a>&nbsp;xact)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#releaseResource-org.apache.derby.iapi.store.raw.Transaction-">PageBasicOperation</a></code></span></div>
<div class="block">Release latched page and any other resources acquired during a previous
                findpage, safe to call multiple times.

                In this RawStore implementataion, resource is acquired by a log
                operation in one of two places
                <nl>
                <li> during runtime or recovery undo in PageOperation.generateUndo()
                <li> during recovery redo in PageBasicOperation.needsRedo()
                </nl></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#releaseResource-org.apache.derby.iapi.store.raw.Transaction-">releaseResource</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html" title="interface in org.apache.derby.iapi.store.raw">Loggable</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#releaseResource-org.apache.derby.iapi.store.raw.Transaction-">releaseResource</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html" title="class in org.apache.derby.impl.store.raw.data">PageBasicOperation</a></code></dd>
</dl>
</li>
</ul>
<a name="group--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>group</h4>
<pre>public&nbsp;int&nbsp;group()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#group--">PageBasicOperation</a></code></span></div>
<div class="block">A page operation is a RAWSTORE log record</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#group--">group</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html" title="interface in org.apache.derby.iapi.store.raw">Loggable</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#group--">group</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html" title="class in org.apache.derby.impl.store.raw.data">PageBasicOperation</a></code></dd>
</dl>
</li>
</ul>
<a name="getPreparedLog--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPreparedLog</h4>
<pre>public final&nbsp;<a href="../../../../../../../org/apache/derby/iapi/util/ByteArray.html" title="class in org.apache.derby.iapi.util">ByteArray</a>&nbsp;getPreparedLog()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#getPreparedLog--">PageBasicOperation</a></code></span></div>
<div class="block">the default for optional data is set to null.  If an operation has optional data,
                the operation need to prepare the optional data for this method.

                WARNING: If a log operation extends this class, and the operation has optional data,
                it MUST overwrite this method to return a ByteArray that contains the optional data.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html#getPreparedLog--">getPreparedLog</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/derby/iapi/store/raw/Loggable.html" title="interface in org.apache.derby.iapi.store.raw">Loggable</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#getPreparedLog--">getPreparedLog</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html" title="class in org.apache.derby.impl.store.raw.data">PageBasicOperation</a></code></dd>
</dl>
</li>
</ul>
<a name="restoreMe-org.apache.derby.iapi.store.raw.Transaction-org.apache.derby.impl.store.raw.data.BasePage-org.apache.derby.iapi.store.raw.log.LogInstant-org.apache.derby.iapi.services.io.LimitObjectInput-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreMe</h4>
<pre>public&nbsp;void&nbsp;restoreMe(<a href="../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a>&nbsp;xact,
                      <a href="../../../../../../../org/apache/derby/impl/store/raw/data/BasePage.html" title="class in org.apache.derby.impl.store.raw.data">BasePage</a>&nbsp;undoPage,
                      <a href="../../../../../../../org/apache/derby/iapi/store/raw/log/LogInstant.html" title="interface in org.apache.derby.iapi.store.raw.log">LogInstant</a>&nbsp;CLRinstant,
                      <a href="../../../../../../../org/apache/derby/iapi/services/io/LimitObjectInput.html" title="interface in org.apache.derby.iapi.services.io">LimitObjectInput</a>&nbsp;in)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#restoreMe-org.apache.derby.iapi.store.raw.Transaction-org.apache.derby.impl.store.raw.data.BasePage-org.apache.derby.iapi.store.raw.log.LogInstant-org.apache.derby.iapi.services.io.LimitObjectInput-">PageBasicOperation</a></code></span></div>
<div class="block">Undo the change indicated by this log operation and optional data.
                The page the undo should apply to is the latched undoPage.
                The undoPage must be the same page as the doMe page and the undo
                operation must restore the before image of the row that changed.  

                <BR> this can only be used under special circumstances: namely
                table level locking, and no internal or nested transaction, and all
                operations are rollec back with restoreMe instead of undoMe.

                <BR><B>This method is here to support BeforeImageLogging</B></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#restoreMe-org.apache.derby.iapi.store.raw.Transaction-org.apache.derby.impl.store.raw.data.BasePage-org.apache.derby.iapi.store.raw.log.LogInstant-org.apache.derby.iapi.services.io.LimitObjectInput-">restoreMe</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html" title="class in org.apache.derby.impl.store.raw.data">PageBasicOperation</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>xact</code> - the Transaction doing the rollback</dd>
<dd><code>undoPage</code> - the page to rollback changes on</dd>
<dd><code>CLRinstant</code> - the log instant of this (PageUndo) operation</dd>
<dd><code>in</code> - optional data for the rollback operation</dd>
</dl>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;java.lang.String&nbsp;toString()</pre>
<div class="block">DEBUG: Print self.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html#toString--">toString</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PageBasicOperation.html" title="class in org.apache.derby.impl.store.raw.data">PageBasicOperation</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PhysicalPageOperation.html" title="class in org.apache.derby.impl.store.raw.data"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/derby/impl/store/raw/data/PurgeOperation.html" title="class in org.apache.derby.impl.store.raw.data"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/impl/store/raw/data/PhysicalUndoOperation.html" target="_top">Frames</a></li>
<li><a href="PhysicalUndoOperation.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
