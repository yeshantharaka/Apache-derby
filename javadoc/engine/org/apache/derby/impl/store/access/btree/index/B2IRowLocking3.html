<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:05:30 IST 2017 -->
<title>B2IRowLocking3 (Apache Derby V10.13 Internals)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="B2IRowLocking3 (Apache Derby V10.13 Internals)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/index/B2IRowLocking2.html" title="class in org.apache.derby.impl.store.access.btree.index"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/index/B2IRowLockingRR.html" title="class in org.apache.derby.impl.store.access.btree.index"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../index.html?org/apache/derby/impl/store/access/btree/index/B2IRowLocking3.html" target="_top">Frames</a></li>
<li><a href="B2IRowLocking3.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derby.impl.store.access.btree.index</div>
<h2 title="Class B2IRowLocking3" class="title">Class B2IRowLocking3</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.derby.impl.store.access.btree.index.B2IRowLocking3</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeLockingPolicy.html" title="interface in org.apache.derby.impl.store.access.btree">BTreeLockingPolicy</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/index/B2IRowLockingRR.html" title="class in org.apache.derby.impl.store.access.btree.index">B2IRowLockingRR</a></dd>
</dl>
<hr>
<br>
<pre>class <span class="typeNameLabel">B2IRowLocking3</span>
extends java.lang.Object
implements <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeLockingPolicy.html" title="interface in org.apache.derby.impl.store.access.btree">BTreeLockingPolicy</a></pre>
<div class="block">Implements the jdbc serializable isolation level using row locks.
<p>
Holds read and write locks until end of transaction.
Obtains previous key locks to protect from phantom reads.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../../../../org/apache/derby/iapi/store/access/ConglomerateController.html" title="interface in org.apache.derby.iapi.store.access">ConglomerateController</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/index/B2IRowLocking3.html#base_cc">base_cc</a></span></code>
<div class="block">The container id of the base container for this index.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/OpenBTree.html" title="class in org.apache.derby.impl.store.access.btree">OpenBTree</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/index/B2IRowLocking3.html#open_btree">open_btree</a></span></code>
<div class="block">The OpenBtree to use if we have to lock anything in the btree vs.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/index/B2IRowLocking3.html#rawtran">rawtran</a></span></code>
<div class="block">The transaction to associate lock requests with.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/index/B2IRowLocking3.html#B2IRowLocking3-org.apache.derby.iapi.store.raw.Transaction-int-org.apache.derby.iapi.store.raw.LockingPolicy-org.apache.derby.iapi.store.access.ConglomerateController-org.apache.derby.impl.store.access.btree.OpenBTree-">B2IRowLocking3</a></span>(<a href="../../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a>&nbsp;rawtran,
              int&nbsp;lock_level,
              <a href="../../../../../../../../org/apache/derby/iapi/store/raw/LockingPolicy.html" title="interface in org.apache.derby.iapi.store.raw">LockingPolicy</a>&nbsp;locking_policy,
              <a href="../../../../../../../../org/apache/derby/iapi/store/access/ConglomerateController.html" title="interface in org.apache.derby.iapi.store.access">ConglomerateController</a>&nbsp;base_cc,
              <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/OpenBTree.html" title="class in org.apache.derby.impl.store.access.btree">OpenBTree</a>&nbsp;open_btree)</code>
<div class="block">Constructors for This class:</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/index/B2IRowLocking3.html#Z:Z_lockScanRow-org.apache.derby.impl.store.access.btree.OpenBTree-org.apache.derby.impl.store.access.btree.BTreeRowPosition-boolean-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-boolean-boolean-int-">_lockScanRow</a></span>(<a href="../../../../../../../../org/apache/derby/impl/store/access/btree/OpenBTree.html" title="class in org.apache.derby.impl.store.access.btree">OpenBTree</a>&nbsp;open_btree,
            <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeRowPosition.html" title="class in org.apache.derby.impl.store.access.btree">BTreeRowPosition</a>&nbsp;pos,
            boolean&nbsp;request_row_lock,
            <a href="../../../../../../../../org/apache/derby/iapi/store/raw/FetchDescriptor.html" title="class in org.apache.derby.iapi.store.raw">FetchDescriptor</a>&nbsp;lock_fetch_desc,
            <a href="../../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;lock_template,
            <a href="../../../../../../../../org/apache/derby/iapi/types/RowLocation.html" title="interface in org.apache.derby.iapi.types">RowLocation</a>&nbsp;lock_row_loc,
            boolean&nbsp;previous_key_lock,
            boolean&nbsp;forUpdate,
            int&nbsp;lock_operation)</code>
<div class="block">Lock a row as part of doing the scan.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/index/B2IRowLocking3.html#lockNonScanPreviousRow-org.apache.derby.impl.store.access.btree.LeafControlRow-int-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-org.apache.derby.impl.store.access.btree.OpenBTree-int-int-">lockNonScanPreviousRow</a></span>(<a href="../../../../../../../../org/apache/derby/impl/store/access/btree/LeafControlRow.html" title="class in org.apache.derby.impl.store.access.btree">LeafControlRow</a>&nbsp;current_leaf,
                      int&nbsp;current_slot,
                      <a href="../../../../../../../../org/apache/derby/iapi/store/raw/FetchDescriptor.html" title="class in org.apache.derby.iapi.store.raw">FetchDescriptor</a>&nbsp;lock_fetch_desc,
                      <a href="../../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;lock_template,
                      <a href="../../../../../../../../org/apache/derby/iapi/types/RowLocation.html" title="interface in org.apache.derby.iapi.types">RowLocation</a>&nbsp;lock_row_loc,
                      <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/OpenBTree.html" title="class in org.apache.derby.impl.store.access.btree">OpenBTree</a>&nbsp;open_btree,
                      int&nbsp;lock_operation,
                      int&nbsp;lock_duration)</code>
<div class="block">Lock the row previous to the input row.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/index/B2IRowLocking3.html#lockNonScanRow-org.apache.derby.impl.store.access.btree.BTree-org.apache.derby.impl.store.access.btree.LeafControlRow-org.apache.derby.impl.store.access.btree.LeafControlRow-org.apache.derby.iapi.types.DataValueDescriptor:A-int-">lockNonScanRow</a></span>(<a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTree.html" title="class in org.apache.derby.impl.store.access.btree">BTree</a>&nbsp;btree,
              <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/LeafControlRow.html" title="class in org.apache.derby.impl.store.access.btree">LeafControlRow</a>&nbsp;current_leaf,
              <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/LeafControlRow.html" title="class in org.apache.derby.impl.store.access.btree">LeafControlRow</a>&nbsp;aux_leaf,
              <a href="../../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;current_row,
              int&nbsp;lock_operation)</code>
<div class="block">Lock the in memory row.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/index/B2IRowLocking3.html#lockNonScanRowOnPage-org.apache.derby.impl.store.access.btree.LeafControlRow-int-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-int-">lockNonScanRowOnPage</a></span>(<a href="../../../../../../../../org/apache/derby/impl/store/access/btree/LeafControlRow.html" title="class in org.apache.derby.impl.store.access.btree">LeafControlRow</a>&nbsp;current_leaf,
                    int&nbsp;current_slot,
                    <a href="../../../../../../../../org/apache/derby/iapi/store/raw/FetchDescriptor.html" title="class in org.apache.derby.iapi.store.raw">FetchDescriptor</a>&nbsp;lock_fetch_desc,
                    <a href="../../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;lock_template,
                    <a href="../../../../../../../../org/apache/derby/iapi/types/RowLocation.html" title="interface in org.apache.derby.iapi.types">RowLocation</a>&nbsp;lock_row_loc,
                    int&nbsp;lock_operation)</code>
<div class="block">Lock the row at the given slot.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/index/B2IRowLocking3.html#lockPreviousToFirstKey-org.apache.derby.impl.store.access.btree.LeafControlRow-org.apache.derby.impl.store.access.btree.LeafControlRow-int-int-">lockPreviousToFirstKey</a></span>(<a href="../../../../../../../../org/apache/derby/impl/store/access/btree/LeafControlRow.html" title="class in org.apache.derby.impl.store.access.btree">LeafControlRow</a>&nbsp;current_leaf,
                      <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/LeafControlRow.html" title="class in org.apache.derby.impl.store.access.btree">LeafControlRow</a>&nbsp;aux_leaf,
                      int&nbsp;lock_operation,
                      int&nbsp;lock_duration)</code>
<div class="block">Lock key previous to first key in btree.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/index/B2IRowLocking3.html#lockRowOnPage-org.apache.derby.impl.store.access.btree.LeafControlRow-org.apache.derby.impl.store.access.btree.LeafControlRow-int-org.apache.derby.impl.store.access.btree.BTreeRowPosition-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-int-int-">lockRowOnPage</a></span>(<a href="../../../../../../../../org/apache/derby/impl/store/access/btree/LeafControlRow.html" title="class in org.apache.derby.impl.store.access.btree">LeafControlRow</a>&nbsp;current_leaf,
             <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/LeafControlRow.html" title="class in org.apache.derby.impl.store.access.btree">LeafControlRow</a>&nbsp;aux_leaf,
             int&nbsp;current_slot,
             <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeRowPosition.html" title="class in org.apache.derby.impl.store.access.btree">BTreeRowPosition</a>&nbsp;position,
             <a href="../../../../../../../../org/apache/derby/iapi/store/raw/FetchDescriptor.html" title="class in org.apache.derby.iapi.store.raw">FetchDescriptor</a>&nbsp;lock_fetch_desc,
             <a href="../../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;lock_template,
             <a href="../../../../../../../../org/apache/derby/iapi/types/RowLocation.html" title="interface in org.apache.derby.iapi.types">RowLocation</a>&nbsp;lock_row_loc,
             int&nbsp;lock_operation,
             int&nbsp;lock_duration)</code>
<div class="block">Lock a btree row (row is at given slot in page).</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/index/B2IRowLocking3.html#lockScanCommittedDeletedRow-org.apache.derby.impl.store.access.btree.OpenBTree-org.apache.derby.impl.store.access.btree.LeafControlRow-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.store.raw.FetchDescriptor-int-">lockScanCommittedDeletedRow</a></span>(<a href="../../../../../../../../org/apache/derby/impl/store/access/btree/OpenBTree.html" title="class in org.apache.derby.impl.store.access.btree">OpenBTree</a>&nbsp;open_btree,
                           <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/LeafControlRow.html" title="class in org.apache.derby.impl.store.access.btree">LeafControlRow</a>&nbsp;leaf,
                           <a href="../../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;template,
                           <a href="../../../../../../../../org/apache/derby/iapi/store/raw/FetchDescriptor.html" title="class in org.apache.derby.iapi.store.raw">FetchDescriptor</a>&nbsp;lock_fetch_desc,
                           int&nbsp;slot_no)</code>
<div class="block">Lock a btree row to determine if it is a committed deleted row.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/index/B2IRowLocking3.html#lockScanRow-org.apache.derby.impl.store.access.btree.OpenBTree-org.apache.derby.impl.store.access.btree.BTreeRowPosition-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-boolean-boolean-int-">lockScanRow</a></span>(<a href="../../../../../../../../org/apache/derby/impl/store/access/btree/OpenBTree.html" title="class in org.apache.derby.impl.store.access.btree">OpenBTree</a>&nbsp;open_btree,
           <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeRowPosition.html" title="class in org.apache.derby.impl.store.access.btree">BTreeRowPosition</a>&nbsp;pos,
           <a href="../../../../../../../../org/apache/derby/iapi/store/raw/FetchDescriptor.html" title="class in org.apache.derby.iapi.store.raw">FetchDescriptor</a>&nbsp;lock_fetch_desc,
           <a href="../../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;lock_template,
           <a href="../../../../../../../../org/apache/derby/iapi/types/RowLocation.html" title="interface in org.apache.derby.iapi.types">RowLocation</a>&nbsp;lock_row_loc,
           boolean&nbsp;previous_key_lock,
           boolean&nbsp;forUpdate,
           int&nbsp;lock_operation)</code>
<div class="block">Lock a row as part of doing the scan.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/index/B2IRowLocking3.html#searchLeftAndLockPreviousKey-org.apache.derby.impl.store.access.btree.LeafControlRow-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-org.apache.derby.impl.store.access.btree.OpenBTree-int-int-">searchLeftAndLockPreviousKey</a></span>(<a href="../../../../../../../../org/apache/derby/impl/store/access/btree/LeafControlRow.html" title="class in org.apache.derby.impl.store.access.btree">LeafControlRow</a>&nbsp;current_leaf,
                            <a href="../../../../../../../../org/apache/derby/iapi/store/raw/FetchDescriptor.html" title="class in org.apache.derby.iapi.store.raw">FetchDescriptor</a>&nbsp;lock_fetch_desc,
                            <a href="../../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;lock_template,
                            <a href="../../../../../../../../org/apache/derby/iapi/types/RowLocation.html" title="interface in org.apache.derby.iapi.types">RowLocation</a>&nbsp;lock_row_loc,
                            <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/OpenBTree.html" title="class in org.apache.derby.impl.store.access.btree">OpenBTree</a>&nbsp;open_btree,
                            int&nbsp;lock_operation,
                            int&nbsp;lock_duration)</code>
<div class="block">move left in btree and lock previous key.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/index/B2IRowLocking3.html#unlockScanRecordAfterRead-org.apache.derby.impl.store.access.btree.BTreeRowPosition-boolean-">unlockScanRecordAfterRead</a></span>(<a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeRowPosition.html" title="class in org.apache.derby.impl.store.access.btree">BTreeRowPosition</a>&nbsp;pos,
                         boolean&nbsp;forUpdate)</code>
<div class="block">Release read lock on a row.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="base_cc">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>base_cc</h4>
<pre>protected&nbsp;<a href="../../../../../../../../org/apache/derby/iapi/store/access/ConglomerateController.html" title="interface in org.apache.derby.iapi.store.access">ConglomerateController</a> base_cc</pre>
<div class="block">The container id of the base container for this index.  Used to build
 record handles to make lock calls on.</div>
</li>
</ul>
<a name="open_btree">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>open_btree</h4>
<pre>protected&nbsp;<a href="../../../../../../../../org/apache/derby/impl/store/access/btree/OpenBTree.html" title="class in org.apache.derby.impl.store.access.btree">OpenBTree</a> open_btree</pre>
<div class="block">The OpenBtree to use if we have to lock anything in the btree vs.
 base row locking.</div>
</li>
</ul>
<a name="rawtran">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>rawtran</h4>
<pre>private&nbsp;<a href="../../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a> rawtran</pre>
<div class="block">The transaction to associate lock requests with.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="B2IRowLocking3-org.apache.derby.iapi.store.raw.Transaction-int-org.apache.derby.iapi.store.raw.LockingPolicy-org.apache.derby.iapi.store.access.ConglomerateController-org.apache.derby.impl.store.access.btree.OpenBTree-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>B2IRowLocking3</h4>
<pre>B2IRowLocking3(<a href="../../../../../../../../org/apache/derby/iapi/store/raw/Transaction.html" title="interface in org.apache.derby.iapi.store.raw">Transaction</a>&nbsp;rawtran,
               int&nbsp;lock_level,
               <a href="../../../../../../../../org/apache/derby/iapi/store/raw/LockingPolicy.html" title="interface in org.apache.derby.iapi.store.raw">LockingPolicy</a>&nbsp;locking_policy,
               <a href="../../../../../../../../org/apache/derby/iapi/store/access/ConglomerateController.html" title="interface in org.apache.derby.iapi.store.access">ConglomerateController</a>&nbsp;base_cc,
               <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/OpenBTree.html" title="class in org.apache.derby.impl.store.access.btree">OpenBTree</a>&nbsp;open_btree)</pre>
<div class="block">Constructors for This class:</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="lockPreviousToFirstKey-org.apache.derby.impl.store.access.btree.LeafControlRow-org.apache.derby.impl.store.access.btree.LeafControlRow-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockPreviousToFirstKey</h4>
<pre>private&nbsp;boolean&nbsp;lockPreviousToFirstKey(<a href="../../../../../../../../org/apache/derby/impl/store/access/btree/LeafControlRow.html" title="class in org.apache.derby.impl.store.access.btree">LeafControlRow</a>&nbsp;current_leaf,
                                       <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/LeafControlRow.html" title="class in org.apache.derby.impl.store.access.btree">LeafControlRow</a>&nbsp;aux_leaf,
                                       int&nbsp;lock_operation,
                                       int&nbsp;lock_duration)
                                throws <a href="../../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Lock key previous to first key in btree.
 <p>
 In the previous key locking protocol repeatable read and phantom 
 protection is guaranteed by locking a range of keys in the btree.
 The range is defined by the key previous to the first key you look
 at and all subsequent keys you look at.  The first key in the index
 is a special case, as there are no keys previous to it.  In that
 case a special key is declared the "previous key" to the first key
 in the btree and is locked instead.
 <p>
 In this implementation that first key is defined to be in the base
 container, page ContainerHandle.FIRST_PAGE_NUMBER, record id 
 PREVIOUS_KEY_HANDLE.
 <p>
 Note that the previous key is the same for all indexes on a given
 conglomerate.  It seemed better for all locks on a base table to have
 the same containerid, rather than having some locks generated from 
 a btree have a containerid from base table and some having a containerid
 from the btree.  If this turns out to be a problem we could either
 have 2 different containerid's, be more creative with the record id, or
 even add more to the lock key.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>aux_leaf</code> - If non-null, this leaf is unlatched if the 
                          routine has to wait on the lock.</dd>
<dd><code>lock_operation</code> - Whether to lock exclusive or share.</dd>
<dd><code>lock_duration</code> - For what duration should the lock be held,
                          if INSTANT_DURATION, then the routine will
                          guarantee that lock was acquired while holding
                          the latch, but then immediately release the
                          lock.  If COMMIT_DURATION or MANUAL_DURATION
                          then the lock be held when routine returns
                          successfully.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="lockRowOnPage-org.apache.derby.impl.store.access.btree.LeafControlRow-org.apache.derby.impl.store.access.btree.LeafControlRow-int-org.apache.derby.impl.store.access.btree.BTreeRowPosition-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockRowOnPage</h4>
<pre>private&nbsp;boolean&nbsp;lockRowOnPage(<a href="../../../../../../../../org/apache/derby/impl/store/access/btree/LeafControlRow.html" title="class in org.apache.derby.impl.store.access.btree">LeafControlRow</a>&nbsp;current_leaf,
                              <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/LeafControlRow.html" title="class in org.apache.derby.impl.store.access.btree">LeafControlRow</a>&nbsp;aux_leaf,
                              int&nbsp;current_slot,
                              <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeRowPosition.html" title="class in org.apache.derby.impl.store.access.btree">BTreeRowPosition</a>&nbsp;position,
                              <a href="../../../../../../../../org/apache/derby/iapi/store/raw/FetchDescriptor.html" title="class in org.apache.derby.iapi.store.raw">FetchDescriptor</a>&nbsp;lock_fetch_desc,
                              <a href="../../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;lock_template,
                              <a href="../../../../../../../../org/apache/derby/iapi/types/RowLocation.html" title="interface in org.apache.derby.iapi.types">RowLocation</a>&nbsp;lock_row_loc,
                              int&nbsp;lock_operation,
                              int&nbsp;lock_duration)
                       throws <a href="../../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Lock a btree row (row is at given slot in page).
 <p>
 Lock the row at the given slot in the page.  Meant to be used if caller 
 only has the slot on the page to be locked, and has not read the row
 yet.  This routine fetches the row location field from the page, and then
 locks that rowlocation in the base container.
 <p>
 Lock a btree row, enforcing the standard lock/latch protocol.  
 On return the row is locked.  Return status indicates if the lock
 was waited for, which will mean a latch was dropped while waiting.
 In general a false status means that the caller will either have 
 to research the tree unless some protocol has been implemented that
 insures that the row will not have moved while the latch was dropped.
 <p>
 This routine request a row lock NOWAIT on the in-memory row 
 "current_row.".  If the lock is granted the routine will return true.
 If the lock cannot be granted NOWAIT, then the routine will release
 the latch on "current_leaf" and "aux_leaf" (if aux_leaf is non-null),
 and then it will request a WAIT lock on the row.  
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>current_leaf</code> - Latched current leaf where "current" key is.</dd>
<dd><code>aux_leaf</code> - If non-null, this leaf is unlatched if the 
                          routine has to wait on the lock.</dd>
<dd><code>current_slot</code> - Slot of row to lock.</dd>
<dd><code>lock_fetch_desc</code> - Descriptor for fetching just the RowLocation,
                          used for locking.</dd>
<dd><code>position</code> - The position to lock if the lock is requested
                          while performing a scan, null otherwise.</dd>
<dd><code>lock_operation</code> - Whether lock is for key prev to insert or not.</dd>
<dd><code>lock_duration</code> - For what duration should the lock be held,
                          if INSTANT_DURATION, then the routine will
                          guarantee that lock was acquired while holding
                          the latch, but then immediately release the
                          lock.  If COMMIT_DURATION or MANUAL_DURATION
                          then the lock be held when routine returns
                          successfully.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="searchLeftAndLockPreviousKey-org.apache.derby.impl.store.access.btree.LeafControlRow-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-org.apache.derby.impl.store.access.btree.OpenBTree-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>searchLeftAndLockPreviousKey</h4>
<pre>private&nbsp;boolean&nbsp;searchLeftAndLockPreviousKey(<a href="../../../../../../../../org/apache/derby/impl/store/access/btree/LeafControlRow.html" title="class in org.apache.derby.impl.store.access.btree">LeafControlRow</a>&nbsp;current_leaf,
                                             <a href="../../../../../../../../org/apache/derby/iapi/store/raw/FetchDescriptor.html" title="class in org.apache.derby.iapi.store.raw">FetchDescriptor</a>&nbsp;lock_fetch_desc,
                                             <a href="../../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;lock_template,
                                             <a href="../../../../../../../../org/apache/derby/iapi/types/RowLocation.html" title="interface in org.apache.derby.iapi.types">RowLocation</a>&nbsp;lock_row_loc,
                                             <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/OpenBTree.html" title="class in org.apache.derby.impl.store.access.btree">OpenBTree</a>&nbsp;open_btree,
                                             int&nbsp;lock_operation,
                                             int&nbsp;lock_duration)
                                      throws <a href="../../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">move left in btree and lock previous key.
 <p>
 Enter routine with "current_leaf" latched.  This routine implements
 the left travel ladder locking protocol to search the leaf pages from
 right to left for the previous key to 1st key on current_leaf.

 There are 2 cases:
 1) the previous page has keys, in which case the last key on that
    page is locked, other wise search continues on the next page to
    the left.
 2) there are no keys on the current page and there is no page to the
    left.  In this case the special "leftmost key" lock is gotten by
    calling lockPreviousToFirstKey().

 Left laddar locking is used if all latches can be obtained immediately
 with NOWAIT.  This means that current latch is held while asking for
 left latch NOWAIT, and if left latch is granted then subsequently 
 current latch can be released.  If this protocol is followed and 
 all latches are granted then caller is guaranteed that the correct
 previous key has been locked and current_page latch remains.  The
 NOWAIT protocol is used to avoid latch/latch deadlocks.  The overall
 protocol is that one never holds a latch while waiting on another unless
 the direction of travel is down and to the right.
 <p>
 If along the search a latch has to be waited on then latches are
 released and a wait is performed, and "false" status is returned to
 caller.  In this case the routine can no longer be sure of it's current
 position and may have to retry the whole operation.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if previous key found without ever waiting on a latch, 
         false if latch released in order to wait for other latch.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="Z:Z_lockScanRow-org.apache.derby.impl.store.access.btree.OpenBTree-org.apache.derby.impl.store.access.btree.BTreeRowPosition-boolean-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-boolean-boolean-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_lockScanRow</h4>
<pre>protected&nbsp;boolean&nbsp;_lockScanRow(<a href="../../../../../../../../org/apache/derby/impl/store/access/btree/OpenBTree.html" title="class in org.apache.derby.impl.store.access.btree">OpenBTree</a>&nbsp;open_btree,
                               <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeRowPosition.html" title="class in org.apache.derby.impl.store.access.btree">BTreeRowPosition</a>&nbsp;pos,
                               boolean&nbsp;request_row_lock,
                               <a href="../../../../../../../../org/apache/derby/iapi/store/raw/FetchDescriptor.html" title="class in org.apache.derby.iapi.store.raw">FetchDescriptor</a>&nbsp;lock_fetch_desc,
                               <a href="../../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;lock_template,
                               <a href="../../../../../../../../org/apache/derby/iapi/types/RowLocation.html" title="interface in org.apache.derby.iapi.types">RowLocation</a>&nbsp;lock_row_loc,
                               boolean&nbsp;previous_key_lock,
                               boolean&nbsp;forUpdate,
                               int&nbsp;lock_operation)
                        throws <a href="../../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Lock a row as part of doing the scan.
 <p>
 Lock the row at the given slot (or the previous row if slot is 0).
 <p>
 If this routine returns true all locks were acquired while maintaining
 the latch on leaf.  If this routine returns false, locks may or may
 not have been acquired, and the routine should be called again after
 the client has researched the tree to reget the latch on the 
 appropriate page.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>open_btree</code> - The open_btree to associate latches with - 
                          used if routine has to scan backward.</dd>
<dd><code>pos</code> - The position of the row to lock.</dd>
<dd><code>request_row_lock</code> - Whether to request the row lock, should
                          only be requested once per page in the scan.</dd>
<dd><code>lock_fetch_desc</code> - The fetch descriptor to use to fetch the
                          row location for the lock request.</dd>
<dd><code>lock_template</code> - A scratch area to use to read in rows.</dd>
<dd><code>previous_key_lock</code> - Is this a previous key lock call?</dd>
<dd><code>forUpdate</code> - Is the scan for update or for read only.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Whether locks were acquired without releasing latch on leaf.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="lockScanCommittedDeletedRow-org.apache.derby.impl.store.access.btree.OpenBTree-org.apache.derby.impl.store.access.btree.LeafControlRow-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.store.raw.FetchDescriptor-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockScanCommittedDeletedRow</h4>
<pre>public&nbsp;boolean&nbsp;lockScanCommittedDeletedRow(<a href="../../../../../../../../org/apache/derby/impl/store/access/btree/OpenBTree.html" title="class in org.apache.derby.impl.store.access.btree">OpenBTree</a>&nbsp;open_btree,
                                           <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/LeafControlRow.html" title="class in org.apache.derby.impl.store.access.btree">LeafControlRow</a>&nbsp;leaf,
                                           <a href="../../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;template,
                                           <a href="../../../../../../../../org/apache/derby/iapi/store/raw/FetchDescriptor.html" title="class in org.apache.derby.iapi.store.raw">FetchDescriptor</a>&nbsp;lock_fetch_desc,
                                           int&nbsp;slot_no)
                                    throws <a href="../../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Lock a btree row to determine if it is a committed deleted row.
 <p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeLockingPolicy.html#lockScanCommittedDeletedRow-org.apache.derby.impl.store.access.btree.OpenBTree-org.apache.derby.impl.store.access.btree.LeafControlRow-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.store.raw.FetchDescriptor-int-">lockScanCommittedDeletedRow</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeLockingPolicy.html" title="interface in org.apache.derby.impl.store.access.btree">BTreeLockingPolicy</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>open_btree</code> - The conglomerate we are locking.</dd>
<dd><code>leaf</code> - The leaf page with the row to lock.</dd>
<dd><code>template</code> - Empty full template row, to read row into.</dd>
<dd><code>slot_no</code> - The slot of row on "current_leaf"</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeLockingPolicy.html#lockScanCommittedDeletedRow-org.apache.derby.impl.store.access.btree.OpenBTree-org.apache.derby.impl.store.access.btree.LeafControlRow-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.store.raw.FetchDescriptor-int-"><code>BTreeLockingPolicy.lockScanCommittedDeletedRow(org.apache.derby.impl.store.access.btree.OpenBTree, org.apache.derby.impl.store.access.btree.LeafControlRow, org.apache.derby.iapi.types.DataValueDescriptor[], org.apache.derby.iapi.store.raw.FetchDescriptor, int)</code></a></dd>
</dl>
</li>
</ul>
<a name="lockScanRow-org.apache.derby.impl.store.access.btree.OpenBTree-org.apache.derby.impl.store.access.btree.BTreeRowPosition-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-boolean-boolean-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockScanRow</h4>
<pre>public&nbsp;boolean&nbsp;lockScanRow(<a href="../../../../../../../../org/apache/derby/impl/store/access/btree/OpenBTree.html" title="class in org.apache.derby.impl.store.access.btree">OpenBTree</a>&nbsp;open_btree,
                           <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeRowPosition.html" title="class in org.apache.derby.impl.store.access.btree">BTreeRowPosition</a>&nbsp;pos,
                           <a href="../../../../../../../../org/apache/derby/iapi/store/raw/FetchDescriptor.html" title="class in org.apache.derby.iapi.store.raw">FetchDescriptor</a>&nbsp;lock_fetch_desc,
                           <a href="../../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;lock_template,
                           <a href="../../../../../../../../org/apache/derby/iapi/types/RowLocation.html" title="interface in org.apache.derby.iapi.types">RowLocation</a>&nbsp;lock_row_loc,
                           boolean&nbsp;previous_key_lock,
                           boolean&nbsp;forUpdate,
                           int&nbsp;lock_operation)
                    throws <a href="../../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Lock a row as part of doing the scan.
 <p>
 Lock the row at the given slot (or the previous row if slot is 0).
 <p>
 If this routine returns true all locks were acquired while maintaining
 the latch on leaf.  If this routine returns false, locks may or may
 not have been acquired, and the routine should be called again after
 the client has researched the tree to reget the latch on the 
 appropriate page.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeLockingPolicy.html#lockScanRow-org.apache.derby.impl.store.access.btree.OpenBTree-org.apache.derby.impl.store.access.btree.BTreeRowPosition-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-boolean-boolean-int-">lockScanRow</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeLockingPolicy.html" title="interface in org.apache.derby.impl.store.access.btree">BTreeLockingPolicy</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>open_btree</code> - The open_btree to associate latches with - 
                          used if routine has to scan backward.</dd>
<dd><code>pos</code> - The position of the row to lock.</dd>
<dd><code>lock_template</code> - A scratch area to use to read in rows.</dd>
<dd><code>previous_key_lock</code> - Is this a previous key lock call?</dd>
<dd><code>forUpdate</code> - Is the scan for update or for read only.</dd>
<dd><code>lock_operation</code> - For what operation are we requesting the lock, 
                          this should be one of the following 4 options:
                          LOCK_READ [read lock], 
                          (LOCK_INS | LOCK_UPD) [ lock for insert], 
                          (LOCK_INSERT_PREVKEY | LOCK_UPD) [lock for 
                          previous key to insert],
                          (LOCK_UPD) [lock for delete or replace]</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Whether locks were acquired without releasing latch on leaf.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="unlockScanRecordAfterRead-org.apache.derby.impl.store.access.btree.BTreeRowPosition-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlockScanRecordAfterRead</h4>
<pre>public&nbsp;void&nbsp;unlockScanRecordAfterRead(<a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeRowPosition.html" title="class in org.apache.derby.impl.store.access.btree">BTreeRowPosition</a>&nbsp;pos,
                                      boolean&nbsp;forUpdate)
                               throws <a href="../../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Release read lock on a row.

 For serializable, there is no work to do.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeLockingPolicy.html#unlockScanRecordAfterRead-org.apache.derby.impl.store.access.btree.BTreeRowPosition-boolean-">unlockScanRecordAfterRead</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeLockingPolicy.html" title="interface in org.apache.derby.impl.store.access.btree">BTreeLockingPolicy</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pos</code> - Data structure that defines the current position
                          in the scan to be unlocked.</dd>
<dd><code>forUpdate</code> - Is the scan for update or for read only.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="lockNonScanPreviousRow-org.apache.derby.impl.store.access.btree.LeafControlRow-int-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-org.apache.derby.impl.store.access.btree.OpenBTree-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockNonScanPreviousRow</h4>
<pre>public&nbsp;boolean&nbsp;lockNonScanPreviousRow(<a href="../../../../../../../../org/apache/derby/impl/store/access/btree/LeafControlRow.html" title="class in org.apache.derby.impl.store.access.btree">LeafControlRow</a>&nbsp;current_leaf,
                                      int&nbsp;current_slot,
                                      <a href="../../../../../../../../org/apache/derby/iapi/store/raw/FetchDescriptor.html" title="class in org.apache.derby.iapi.store.raw">FetchDescriptor</a>&nbsp;lock_fetch_desc,
                                      <a href="../../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;lock_template,
                                      <a href="../../../../../../../../org/apache/derby/iapi/types/RowLocation.html" title="interface in org.apache.derby.iapi.types">RowLocation</a>&nbsp;lock_row_loc,
                                      <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/OpenBTree.html" title="class in org.apache.derby.impl.store.access.btree">OpenBTree</a>&nbsp;open_btree,
                                      int&nbsp;lock_operation,
                                      int&nbsp;lock_duration)
                               throws <a href="../../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Lock the row previous to the input row.
 <p>
 See BTreeLockingPolicy.lockNonScanPreviousRow</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeLockingPolicy.html#lockNonScanPreviousRow-org.apache.derby.impl.store.access.btree.LeafControlRow-int-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-org.apache.derby.impl.store.access.btree.OpenBTree-int-int-">lockNonScanPreviousRow</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeLockingPolicy.html" title="interface in org.apache.derby.impl.store.access.btree">BTreeLockingPolicy</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>current_leaf</code> - Latched current leaf where "current" key is.</dd>
<dd><code>current_slot</code> - The slot of row on "current_leaf"</dd>
<dd><code>lock_template</code> - Empty full template row, to read row into.</dd>
<dd><code>open_btree</code> - The open_btree to associate latches with - 
                          used if routine has to scan backward.</dd>
<dd><code>lock_operation</code> - For what operation are we requesting the lock, 
                          this should be one of the following 4 options:
                          LOCK_READ [read lock], 
                          (LOCK_INS | LOCK_UPD) [ lock for insert], 
                          (LOCK_INSERT_PREVKEY | LOCK_UPD) [lock for 
                          previous key to insert],
                          (LOCK_UPD) [lock for delete or replace]</dd>
<dd><code>lock_duration</code> - For what duration should the lock be held,
                          if INSTANT_DURATION, then the routine will
                          guarantee that lock was acquired while holding
                          the latch, but then immediately release the
                          lock.  If COMMIT_DURATION or MANUAL_DURATION
                          then the lock be held when routine returns
                          successfully.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="lockNonScanRow-org.apache.derby.impl.store.access.btree.BTree-org.apache.derby.impl.store.access.btree.LeafControlRow-org.apache.derby.impl.store.access.btree.LeafControlRow-org.apache.derby.iapi.types.DataValueDescriptor:A-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockNonScanRow</h4>
<pre>public&nbsp;boolean&nbsp;lockNonScanRow(<a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTree.html" title="class in org.apache.derby.impl.store.access.btree">BTree</a>&nbsp;btree,
                              <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/LeafControlRow.html" title="class in org.apache.derby.impl.store.access.btree">LeafControlRow</a>&nbsp;current_leaf,
                              <a href="../../../../../../../../org/apache/derby/impl/store/access/btree/LeafControlRow.html" title="class in org.apache.derby.impl.store.access.btree">LeafControlRow</a>&nbsp;aux_leaf,
                              <a href="../../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;current_row,
                              int&nbsp;lock_operation)
                       throws <a href="../../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Lock the in memory row.
 <p>
 See BTree.lockRow() for more info.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeLockingPolicy.html#lockNonScanRow-org.apache.derby.impl.store.access.btree.BTree-org.apache.derby.impl.store.access.btree.LeafControlRow-org.apache.derby.impl.store.access.btree.LeafControlRow-org.apache.derby.iapi.types.DataValueDescriptor:A-int-">lockNonScanRow</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeLockingPolicy.html" title="interface in org.apache.derby.impl.store.access.btree">BTreeLockingPolicy</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>btree</code> - The conglomerate we are locking.</dd>
<dd><code>current_leaf</code> - If non-null, this leaf is unlatched if the 
                          routine has to wait on the lock.</dd>
<dd><code>aux_leaf</code> - If non-null, this leaf is unlatched if the 
                          routine has to wait on the lock.</dd>
<dd><code>current_row</code> - In memory, objectified "current" row.</dd>
<dd><code>lock_operation</code> - For what operation are we requesting the lock, 
                          this should be one of the following 4 options:
                          LOCK_READ [read lock], 
                          (LOCK_INS | LOCK_UPD) [ lock for insert], 
                          (LOCK_INSERT_PREVKEY | LOCK_UPD) [lock for 
                          previous key to insert],
                          (LOCK_UPD) [lock for delete or replace]</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
<a name="lockNonScanRowOnPage-org.apache.derby.impl.store.access.btree.LeafControlRow-int-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>lockNonScanRowOnPage</h4>
<pre>public&nbsp;boolean&nbsp;lockNonScanRowOnPage(<a href="../../../../../../../../org/apache/derby/impl/store/access/btree/LeafControlRow.html" title="class in org.apache.derby.impl.store.access.btree">LeafControlRow</a>&nbsp;current_leaf,
                                    int&nbsp;current_slot,
                                    <a href="../../../../../../../../org/apache/derby/iapi/store/raw/FetchDescriptor.html" title="class in org.apache.derby.iapi.store.raw">FetchDescriptor</a>&nbsp;lock_fetch_desc,
                                    <a href="../../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;lock_template,
                                    <a href="../../../../../../../../org/apache/derby/iapi/types/RowLocation.html" title="interface in org.apache.derby.iapi.types">RowLocation</a>&nbsp;lock_row_loc,
                                    int&nbsp;lock_operation)
                             throws <a href="../../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeLockingPolicy.html#lockNonScanRowOnPage-org.apache.derby.impl.store.access.btree.LeafControlRow-int-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-int-">BTreeLockingPolicy</a></code></span></div>
<div class="block">Lock the row at the given slot.
 <p>
 If this routine returns true all locks were acquired while maintaining
 the latch on leaf.  If this routine returns false, locks may or may
 not have been acquired, and the routine should be called again after
 the client has researched the tree to reget the latch on the 
 appropriate page.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeLockingPolicy.html#lockNonScanRowOnPage-org.apache.derby.impl.store.access.btree.LeafControlRow-int-org.apache.derby.iapi.store.raw.FetchDescriptor-org.apache.derby.iapi.types.DataValueDescriptor:A-org.apache.derby.iapi.types.RowLocation-int-">lockNonScanRowOnPage</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/BTreeLockingPolicy.html" title="interface in org.apache.derby.impl.store.access.btree">BTreeLockingPolicy</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>current_leaf</code> - The control row of the current leaf to lock.</dd>
<dd><code>current_slot</code> - The slot position of the row to lock.</dd>
<dd><code>lock_template</code> - A scratch area to use to read in rows.</dd>
<dd><code>lock_operation</code> - For what operation are we requesting the lock, 
                          this should be one of the following 4 options:
                          LOCK_READ [read lock], 
                          (LOCK_INS | LOCK_UPD) [ lock for insert], 
                          (LOCK_INSERT_PREVKEY | LOCK_UPD) [lock for 
                          previous key to insert],
                          (LOCK_UPD) [lock for delete or replace]</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Whether locks were acquired without releasing latch on leaf.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - Standard exception policy.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/index/B2IRowLocking2.html" title="class in org.apache.derby.impl.store.access.btree.index"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../../org/apache/derby/impl/store/access/btree/index/B2IRowLockingRR.html" title="class in org.apache.derby.impl.store.access.btree.index"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../index.html?org/apache/derby/impl/store/access/btree/index/B2IRowLocking3.html" target="_top">Frames</a></li>
<li><a href="B2IRowLocking3.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
