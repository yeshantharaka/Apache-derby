<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:05:06 IST 2017 -->
<title>SortBuffer (Apache Derby V10.13 Internals)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SortBuffer (Apache Derby V10.13 Internals)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/derby/impl/store/access/sort/Scan.html" title="class in org.apache.derby.impl.store.access.sort"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBufferRowSource.html" title="class in org.apache.derby.impl.store.access.sort"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/impl/store/access/sort/SortBuffer.html" target="_top">Frames</a></li>
<li><a href="SortBuffer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derby.impl.store.access.sort</div>
<h2 title="Class SortBuffer" class="title">Class SortBuffer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.derby.impl.store.access.sort.SortBuffer</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>class <span class="typeNameLabel">SortBuffer</span>
extends java.lang.Object</pre>
<div class="block">This class implements an in-memory ordered set
  based on the balanced binary tree algorithm from
  Knuth Vol. 3, Sec. 6.2.3, pp. 451-471.
  Nodes are always maintained in order,
  so that inserts and deletes can be intermixed.
  <P>
  This algorithm will insert/delete N elements
  in O(N log(N)) time using O(N) space.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/impl/store/access/sort/NodeAllocator.html" title="class in org.apache.derby.impl.store.access.sort">NodeAllocator</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#allocator">allocator</a></span></code>
<div class="block">Where to allocate nodes from.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#deletedKey">deletedKey</a></span></code>
<div class="block">Set, as a side effect of deleteLeftMost (only), to the
        key from the node that was deleted from the tree.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/impl/store/access/sort/Node.html" title="class in org.apache.derby.impl.store.access.sort">Node</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#head">head</a></span></code>
<div class="block">Special head node for the tree.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#height">height</a></span></code>
<div class="block">The current height of the tree.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#INSERT_DUPLICATE">INSERT_DUPLICATE</a></span></code>
<div class="block">Returned from insert when the row which was
        inserted was a duplicate.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#INSERT_FULL">INSERT_FULL</a></span></code>
<div class="block">Returned from insert when the row was not able to be
        inserted because the set was full.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#INSERT_OK">INSERT_OK</a></span></code>
<div class="block">Returned from insert when the row was inserted
        without incident.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#lastAux">lastAux</a></span></code>
<div class="block">Read by the getLastAux() method.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#nextAux">nextAux</a></span></code>
<div class="block">Set by the setNextAux() method.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/impl/store/access/sort/MergeSort.html" title="class in org.apache.derby.impl.store.access.sort">MergeSort</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#sort">sort</a></span></code>
<div class="block">The sort this set is associated with.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#subtreeShrunk">subtreeShrunk</a></span></code>
<div class="block">Set, as a side effect of deleteLeftMost and rotateRight,
        if the subtree they're working on decreased in height.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#SortBuffer-org.apache.derby.impl.store.access.sort.MergeSort-">SortBuffer</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/access/sort/MergeSort.html" title="class in org.apache.derby.impl.store.access.sort">MergeSort</a>&nbsp;sort)</code>
<div class="block">Construct doesn't do anything, callers must call init
        and check its return code.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#capacity--">capacity</a></span>()</code>
<div class="block">Return the number of elements this sorter can sort.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#check--">check</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#checkNode-org.apache.derby.impl.store.access.sort.Node-">checkNode</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/access/sort/Node.html" title="class in org.apache.derby.impl.store.access.sort">Node</a>&nbsp;n)</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#close--">close</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#debug-java.lang.String-">debug</a></span>(java.lang.String&nbsp;s)</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/impl/store/access/sort/Node.html" title="class in org.apache.derby.impl.store.access.sort">Node</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#deleteLeftmost-org.apache.derby.impl.store.access.sort.Node-">deleteLeftmost</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/access/sort/Node.html" title="class in org.apache.derby.impl.store.access.sort">Node</a>&nbsp;thisNode)</code>
<div class="block">Delete the node with the lowest key from the subtree defined
        by 'thisNode', maintaining balance in the subtree.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#depth-org.apache.derby.impl.store.access.sort.Node-">depth</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/access/sort/Node.html" title="class in org.apache.derby.impl.store.access.sort">Node</a>&nbsp;n)</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#getLastAux--">getLastAux</a></span>()</code>
<div class="block">Retrieve the aux value from the last node deallocated
        from the tree.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#grow-int-">grow</a></span>(int&nbsp;percent)</code>
<div class="block">Grow by a certain percent if we can</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#init--">init</a></span>()</code>
<div class="block">Initialize.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#insert-org.apache.derby.iapi.types.DataValueDescriptor:A-">insert</a></span>(<a href="../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;k)</code>
<div class="block">Insert a key k into the tree.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#print--">print</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#printRecursive-org.apache.derby.impl.store.access.sort.Node-int-">printRecursive</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/access/sort/Node.html" title="class in org.apache.derby.impl.store.access.sort">Node</a>&nbsp;n,
              int&nbsp;depth)</code>&nbsp;</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#removeFirst--">removeFirst</a></span>()</code>
<div class="block">Return the lowest key and delete it from 
        the tree, preserving the balance of the tree.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#reset--">reset</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/impl/store/access/sort/Node.html" title="class in org.apache.derby.impl.store.access.sort">Node</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#rotateRight-org.apache.derby.impl.store.access.sort.Node-">rotateRight</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/access/sort/Node.html" title="class in org.apache.derby.impl.store.access.sort">Node</a>&nbsp;thisNode)</code>
<div class="block">Perform either a single or double rotation, as appropriate, 
        to get the subtree 'thisNode' back in balance, assuming
        that the right subtree of 'thisNode' is higher than the
        left subtree.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBuffer.html#setNextAux-int-">setNextAux</a></span>(int&nbsp;aux)</code>
<div class="block">Arrange that the next node allocated in the tree have
        it's aux field set to the argument.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="INSERT_OK">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>INSERT_OK</h4>
<pre>public static final&nbsp;int INSERT_OK</pre>
<div class="block">Returned from insert when the row was inserted
        without incident.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.access.sort.SortBuffer.INSERT_OK">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="INSERT_DUPLICATE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>INSERT_DUPLICATE</h4>
<pre>public static final&nbsp;int INSERT_DUPLICATE</pre>
<div class="block">Returned from insert when the row which was
        inserted was a duplicate.  The set will have
        aggregated it in.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.access.sort.SortBuffer.INSERT_DUPLICATE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="INSERT_FULL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>INSERT_FULL</h4>
<pre>public static final&nbsp;int INSERT_FULL</pre>
<div class="block">Returned from insert when the row was not able to be
        inserted because the set was full.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.access.sort.SortBuffer.INSERT_FULL">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="sort">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sort</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/access/sort/MergeSort.html" title="class in org.apache.derby.impl.store.access.sort">MergeSort</a> sort</pre>
<div class="block">The sort this set is associated with.</div>
</li>
</ul>
<a name="allocator">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocator</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/access/sort/NodeAllocator.html" title="class in org.apache.derby.impl.store.access.sort">NodeAllocator</a> allocator</pre>
<div class="block">Where to allocate nodes from.</div>
</li>
</ul>
<a name="head">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>head</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/access/sort/Node.html" title="class in org.apache.derby.impl.store.access.sort">Node</a> head</pre>
<div class="block">Special head node for the tree.  Head.rightLink is the
        root of the tree.</div>
</li>
</ul>
<a name="height">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>height</h4>
<pre>private&nbsp;int height</pre>
<div class="block">The current height of the tree.</div>
</li>
</ul>
<a name="deletedKey">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deletedKey</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[] deletedKey</pre>
<div class="block">Set, as a side effect of deleteLeftMost (only), to the
        key from the node that was deleted from the tree.  This
        field is only valid after a call to deleteLeftMost.</div>
</li>
</ul>
<a name="subtreeShrunk">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>subtreeShrunk</h4>
<pre>private&nbsp;boolean subtreeShrunk</pre>
<div class="block">Set, as a side effect of deleteLeftMost and rotateRight,
        if the subtree they're working on decreased in height.
        This field is only valid after a call to deleteLeftMost
        or rotateRight.</div>
</li>
</ul>
<a name="nextAux">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nextAux</h4>
<pre>private&nbsp;int nextAux</pre>
<div class="block">Set by the setNextAux() method.  This value is stuffed
        into the aux field of the next node that's allocated.</div>
</li>
</ul>
<a name="lastAux">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>lastAux</h4>
<pre>private&nbsp;int lastAux</pre>
<div class="block">Read by the getLastAux() method.  This value is read out
        of the last node that was deallocated from the tree.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="SortBuffer-org.apache.derby.impl.store.access.sort.MergeSort-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SortBuffer</h4>
<pre>SortBuffer(<a href="../../../../../../../org/apache/derby/impl/store/access/sort/MergeSort.html" title="class in org.apache.derby.impl.store.access.sort">MergeSort</a>&nbsp;sort)</pre>
<div class="block">Construct doesn't do anything, callers must call init
        and check its return code.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setNextAux-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setNextAux</h4>
<pre>void&nbsp;setNextAux(int&nbsp;aux)</pre>
<div class="block">Arrange that the next node allocated in the tree have
        it's aux field set to the argument.</div>
</li>
</ul>
<a name="getLastAux--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastAux</h4>
<pre>int&nbsp;getLastAux()</pre>
<div class="block">Retrieve the aux value from the last node deallocated
        from the tree.</div>
</li>
</ul>
<a name="init--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre>boolean&nbsp;init()</pre>
<div class="block">Initialize.  Returns false if the allocator
        couldn't be initialized.</div>
</li>
</ul>
<a name="reset--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reset</h4>
<pre>void&nbsp;reset()</pre>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>void&nbsp;close()</pre>
</li>
</ul>
<a name="grow-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>grow</h4>
<pre>void&nbsp;grow(int&nbsp;percent)</pre>
<div class="block">Grow by a certain percent if we can</div>
</li>
</ul>
<a name="capacity--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>capacity</h4>
<pre>int&nbsp;capacity()</pre>
<div class="block">Return the number of elements this sorter can sort.
        It's the capacity of the node allocator minus one
        because the sorter uses one node for the head.</div>
</li>
</ul>
<a name="insert-org.apache.derby.iapi.types.DataValueDescriptor:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insert</h4>
<pre>int&nbsp;insert(<a href="../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;k)
    throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Insert a key k into the tree. Returns true if the
        key was inserted, false if the tree is full.  Silently
        ignores duplicate keys.
        <P>
        See Knuth Vol. 3, Sec. 6.2.3, pp. 455-457 for the algorithm.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="removeFirst--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeFirst</h4>
<pre><a href="../../../../../../../org/apache/derby/iapi/types/DataValueDescriptor.html" title="interface in org.apache.derby.iapi.types">DataValueDescriptor</a>[]&nbsp;removeFirst()</pre>
<div class="block">Return the lowest key and delete it from 
        the tree, preserving the balance of the tree.</div>
</li>
</ul>
<a name="deleteLeftmost-org.apache.derby.impl.store.access.sort.Node-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteLeftmost</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/access/sort/Node.html" title="class in org.apache.derby.impl.store.access.sort">Node</a>&nbsp;deleteLeftmost(<a href="../../../../../../../org/apache/derby/impl/store/access/sort/Node.html" title="class in org.apache.derby.impl.store.access.sort">Node</a>&nbsp;thisNode)</pre>
<div class="block">Delete the node with the lowest key from the subtree defined
        by 'thisNode', maintaining balance in the subtree.  Returns
        the node that should be the new root of the subtree.  This
        method sets this.subtreeShrunk if the subtree of thisNode
        decreased in height. Saves the key that was in the deleted
        node in 'deletedKey'.</div>
</li>
</ul>
<a name="rotateRight-org.apache.derby.impl.store.access.sort.Node-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rotateRight</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/access/sort/Node.html" title="class in org.apache.derby.impl.store.access.sort">Node</a>&nbsp;rotateRight(<a href="../../../../../../../org/apache/derby/impl/store/access/sort/Node.html" title="class in org.apache.derby.impl.store.access.sort">Node</a>&nbsp;thisNode)</pre>
<div class="block">Perform either a single or double rotation, as appropriate, 
        to get the subtree 'thisNode' back in balance, assuming
        that the right subtree of 'thisNode' is higher than the
        left subtree.  Returns the node that should be the new
        root of the subtree.
        <P>
        These are the cases depicted in diagrams (1) and (2) of
        Knuth (p. 454), and the node names reflect these diagrams.
        However, in deletion, the single rotation may encounter
        a case where the "beta" and "gamma" subtrees are the same
        height (b.balance == 0), so the resulting does not always
        shrink.
        <P>
    Note: This code will not do the "mirror image" cases.
        It only works when the right subtree is the higher one
        (this is the only case encountered when deleting leftmost
        nodes from the tree).</div>
</li>
</ul>
<a name="check--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>check</h4>
<pre>public&nbsp;void&nbsp;check()</pre>
</li>
</ul>
<a name="checkNode-org.apache.derby.impl.store.access.sort.Node-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkNode</h4>
<pre>private&nbsp;java.lang.String&nbsp;checkNode(<a href="../../../../../../../org/apache/derby/impl/store/access/sort/Node.html" title="class in org.apache.derby.impl.store.access.sort">Node</a>&nbsp;n)</pre>
</li>
</ul>
<a name="depth-org.apache.derby.impl.store.access.sort.Node-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>depth</h4>
<pre>private&nbsp;int&nbsp;depth(<a href="../../../../../../../org/apache/derby/impl/store/access/sort/Node.html" title="class in org.apache.derby.impl.store.access.sort">Node</a>&nbsp;n)</pre>
</li>
</ul>
<a name="print--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>print</h4>
<pre>public&nbsp;void&nbsp;print()</pre>
</li>
</ul>
<a name="printRecursive-org.apache.derby.impl.store.access.sort.Node-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>printRecursive</h4>
<pre>private&nbsp;void&nbsp;printRecursive(<a href="../../../../../../../org/apache/derby/impl/store/access/sort/Node.html" title="class in org.apache.derby.impl.store.access.sort">Node</a>&nbsp;n,
                            int&nbsp;depth)</pre>
</li>
</ul>
<a name="debug-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>debug</h4>
<pre>private&nbsp;void&nbsp;debug(java.lang.String&nbsp;s)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/derby/impl/store/access/sort/Scan.html" title="class in org.apache.derby.impl.store.access.sort"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/derby/impl/store/access/sort/SortBufferRowSource.html" title="class in org.apache.derby.impl.store.access.sort"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/impl/store/access/sort/SortBuffer.html" target="_top">Frames</a></li>
<li><a href="SortBuffer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
