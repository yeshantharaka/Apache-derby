<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:04:44 IST 2017 -->
<title>ReplicationLogBuffer (Apache Derby V10.13 Internals)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ReplicationLogBuffer (Apache Derby V10.13 Internals)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/LogBufferFullException.html" title="class in org.apache.derby.impl.store.replication.buffer"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html" target="_top">Frames</a></li>
<li><a href="ReplicationLogBuffer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derby.impl.store.replication.buffer</div>
<h2 title="Class ReplicationLogBuffer" class="title">Class ReplicationLogBuffer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.derby.impl.store.replication.buffer.ReplicationLogBuffer</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">ReplicationLogBuffer</span>
extends java.lang.Object</pre>
<div class="block">Used for the replication master role only. When a Derby instance
 has the replication master role for a database 'x', all log records
 that are written to the local log file are also appended to this
 log buffer. The replication master service will consume chunks of
 log from this buffer and send it to the Derby instance with the
 slave role for 'x'.

 ReplicationLogBuffer consists of a number of LogBufferElements.
 Elements that are not in use are in the freeBuffers list, while
 elements that contains dirty log are in dirtyBuffers. Chunks of log records
 are appended to the buffer element in currentDirtyBuffer. Hence,
 the life cycle of buffer elements is:
 freeBuffers -&gt; currentDirtyBuffer -&gt; dirtyBuffers -&gt; freeBuffers

 To append chunks of log records to the buffer, use appendLog(...)

 To consume chunks of log records, use next() followed by getData(),
 getLastInstant() and getSize(). These get-methods throw
 NoSuchElementException if next() returned false, meaning that there
 were no dirty log at the time next() was called.

 Threads: ReplicationLogBuffer is threadsafe. It can be used by a
 logger (LogToFile) and a log consumer (LogShipping service)
 concurrently without further synchronization.
 
 Important: If methods in this class calls methods outside this package
 (e.g. MasterFactory#workToDo), make sure that deadlocks are not 
 introduced. If possible, a call to any method in another package should be 
 done without holding latches in this class.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/LogBufferElement.html" title="class in org.apache.derby.impl.store.replication.buffer">LogBufferElement</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html#currentDirtyBuffer">currentDirtyBuffer</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html#DEFAULT_NUMBER_LOG_BUFFERS">DEFAULT_NUMBER_LOG_BUFFERS</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html#defaultBufferSize">defaultBufferSize</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.LinkedList&lt;<a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/LogBufferElement.html" title="class in org.apache.derby.impl.store.replication.buffer">LogBufferElement</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html#dirtyBuffers">dirtyBuffers</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.LinkedList&lt;<a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/LogBufferElement.html" title="class in org.apache.derby.impl.store.replication.buffer">LogBufferElement</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html#freeBuffers">freeBuffers</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html#listLatch">listLatch</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/iapi/store/replication/master/MasterFactory.html" title="interface in org.apache.derby.iapi.store.replication.master">MasterFactory</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html#mf">mf</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private byte[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html#outBufferData">outBufferData</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html#outBufferLastInstant">outBufferLastInstant</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html#outBufferStored">outBufferStored</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html#outputLatch">outputLatch</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html#validOutBuffer">validOutBuffer</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html#ReplicationLogBuffer-int-org.apache.derby.iapi.store.replication.master.MasterFactory-">ReplicationLogBuffer</a></span>(int&nbsp;bufferSize,
                    <a href="../../../../../../../org/apache/derby/iapi/store/replication/master/MasterFactory.html" title="interface in org.apache.derby.iapi.store.replication.master">MasterFactory</a>&nbsp;mf)</code>
<div class="block">Class constructor specifies the number of buffer elements
 and the master controller that creates this replication log
 buffer.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html#appendLog-long-byte:A-int-int-">appendLog</a></span>(long&nbsp;greatestInstant,
         byte[]&nbsp;log,
         int&nbsp;logOffset,
         int&nbsp;logLength)</code>
<div class="block">Append a chunk of log records to the log buffer.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html#getData--">getData</a></span>()</code>
<div class="block">Returns a byte[] containing a chunk of serialized log records.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html#getFillInformation--">getFillInformation</a></span>()</code>
<div class="block">Used to calculate the Fill Information.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html#getLastInstant--">getLastInstant</a></span>()</code>
<div class="block">Can be used so that only the necessary log records are sent
 when a flush(LogInstant flush_to_this) is called in the log
 factory.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html#getSize--">getSize</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html#next--">next</a></span>()</code>
<div class="block">Sets the output data to that of the next (oldest) buffer
 element in dirtyBuffers so that getData(), getLastInstant() and
 getSize() return values from the next oldest chunk of log.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html#switchDirtyBuffer--">switchDirtyBuffer</a></span>()</code>
<div class="block">Appends the currentDirtyBuffer to dirtyBuffers, and makes a
 fresh buffer element from freeBuffers the currentDirtyBuffer.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html#validData--">validData</a></span>()</code>
<div class="block">Method to determine whether or not the buffer had any log records
 the last time next() was called.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="DEFAULT_NUMBER_LOG_BUFFERS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_NUMBER_LOG_BUFFERS</h4>
<pre>public static final&nbsp;int DEFAULT_NUMBER_LOG_BUFFERS</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.replication.buffer.ReplicationLogBuffer.DEFAULT_NUMBER_LOG_BUFFERS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="dirtyBuffers">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dirtyBuffers</h4>
<pre>private final&nbsp;java.util.LinkedList&lt;<a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/LogBufferElement.html" title="class in org.apache.derby.impl.store.replication.buffer">LogBufferElement</a>&gt; dirtyBuffers</pre>
</li>
</ul>
<a name="freeBuffers">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>freeBuffers</h4>
<pre>private final&nbsp;java.util.LinkedList&lt;<a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/LogBufferElement.html" title="class in org.apache.derby.impl.store.replication.buffer">LogBufferElement</a>&gt; freeBuffers</pre>
</li>
</ul>
<a name="currentDirtyBuffer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>currentDirtyBuffer</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/LogBufferElement.html" title="class in org.apache.derby.impl.store.replication.buffer">LogBufferElement</a> currentDirtyBuffer</pre>
</li>
</ul>
<a name="validOutBuffer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>validOutBuffer</h4>
<pre>private&nbsp;boolean validOutBuffer</pre>
</li>
</ul>
<a name="outBufferData">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>outBufferData</h4>
<pre>private&nbsp;byte[] outBufferData</pre>
</li>
</ul>
<a name="outBufferStored">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>outBufferStored</h4>
<pre>private&nbsp;int outBufferStored</pre>
</li>
</ul>
<a name="outBufferLastInstant">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>outBufferLastInstant</h4>
<pre>private&nbsp;long outBufferLastInstant</pre>
</li>
</ul>
<a name="listLatch">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>listLatch</h4>
<pre>private final&nbsp;java.lang.Object listLatch</pre>
</li>
</ul>
<a name="outputLatch">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>outputLatch</h4>
<pre>private final&nbsp;java.lang.Object outputLatch</pre>
</li>
</ul>
<a name="defaultBufferSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>defaultBufferSize</h4>
<pre>private&nbsp;int defaultBufferSize</pre>
</li>
</ul>
<a name="mf">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>mf</h4>
<pre>private final&nbsp;<a href="../../../../../../../org/apache/derby/iapi/store/replication/master/MasterFactory.html" title="interface in org.apache.derby.iapi.store.replication.master">MasterFactory</a> mf</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ReplicationLogBuffer-int-org.apache.derby.iapi.store.replication.master.MasterFactory-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ReplicationLogBuffer</h4>
<pre>public&nbsp;ReplicationLogBuffer(int&nbsp;bufferSize,
                            <a href="../../../../../../../org/apache/derby/iapi/store/replication/master/MasterFactory.html" title="interface in org.apache.derby.iapi.store.replication.master">MasterFactory</a>&nbsp;mf)</pre>
<div class="block">Class constructor specifies the number of buffer elements
 and the master controller that creates this replication log
 buffer.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>bufferSize</code> - the default number of buffer elements</dd>
<dd><code>mf</code> - Used to notify the master controller that a log buffer
                   element is full and work needs to be done.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="appendLog-long-byte:A-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>appendLog</h4>
<pre>public&nbsp;void&nbsp;appendLog(long&nbsp;greatestInstant,
                      byte[]&nbsp;log,
                      int&nbsp;logOffset,
                      int&nbsp;logLength)
               throws <a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/LogBufferFullException.html" title="class in org.apache.derby.impl.store.replication.buffer">LogBufferFullException</a></pre>
<div class="block">Append a chunk of log records to the log buffer.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>greatestInstant</code> - the instant of the log record that was
                          added last to this chunk of log</dd>
<dd><code>log</code> - the chunk of log records</dd>
<dd><code>logOffset</code> - offset in log to start copy from</dd>
<dd><code>logLength</code> - number of bytes to copy, starting
                          from logOffset</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/LogBufferFullException.html" title="class in org.apache.derby.impl.store.replication.buffer">LogBufferFullException</a></code> - - thrown if there is not enough
 free space in the buffer to store the chunk of log.</dd>
</dl>
</li>
</ul>
<a name="next--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>next</h4>
<pre>public&nbsp;boolean&nbsp;next()</pre>
<div class="block">Sets the output data to that of the next (oldest) buffer
 element in dirtyBuffers so that getData(), getLastInstant() and
 getSize() return values from the next oldest chunk of log. Used
 by the log consumer (the LogShipping service) to move to the
 next chunk of log in the buffer.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if there is log in the buffer, resulting in valid
 data for the get-methods</dd>
</dl>
</li>
</ul>
<a name="getData--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getData</h4>
<pre>public&nbsp;byte[]&nbsp;getData()
               throws java.util.NoSuchElementException</pre>
<div class="block">Returns a byte[] containing a chunk of serialized log records.
 Always returns the log that was oldest at the time next() was
 called last time. Use next() to move to the next chunk of log
 records.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A copy of the current byte[], which is a chunk of log</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.util.NoSuchElementException</code> - if there was no log in the
 buffer the last time next() was called.</dd>
</dl>
</li>
</ul>
<a name="validData--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>validData</h4>
<pre>public&nbsp;boolean&nbsp;validData()</pre>
<div class="block">Method to determine whether or not the buffer had any log records
 the last time next() was called.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the buffer contained log records the last time
 next() was called. False if not, or if next() has not been
 called yet.</dd>
</dl>
</li>
</ul>
<a name="getSize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSize</h4>
<pre>public&nbsp;int&nbsp;getSize()
            throws java.util.NoSuchElementException</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of bytes returned by getData</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.util.NoSuchElementException</code> - if there was no log in the
 buffer the last time next() was called.</dd>
</dl>
</li>
</ul>
<a name="getLastInstant--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastInstant</h4>
<pre>public&nbsp;long&nbsp;getLastInstant()
                    throws java.util.NoSuchElementException</pre>
<div class="block">Can be used so that only the necessary log records are sent
 when a flush(LogInstant flush_to_this) is called in the log
 factory. Returns the highest log instant in the chunk of log that can 
 be read with getData().</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The highest log instant in the chunk of log returned by
 getData().</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.util.NoSuchElementException</code> - if there was no log in the
 buffer the last time next() was called.</dd>
</dl>
</li>
</ul>
<a name="switchDirtyBuffer--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>switchDirtyBuffer</h4>
<pre>private&nbsp;void&nbsp;switchDirtyBuffer()
                        throws <a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/LogBufferFullException.html" title="class in org.apache.derby.impl.store.replication.buffer">LogBufferFullException</a></pre>
<div class="block">Appends the currentDirtyBuffer to dirtyBuffers, and makes a
 fresh buffer element from freeBuffers the currentDirtyBuffer.
 Note: this method is not synchronized since all uses of it is
 inside synchronized(listLatch) code blocks.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/LogBufferFullException.html" title="class in org.apache.derby.impl.store.replication.buffer">LogBufferFullException</a></code> - if the freeBuffers list is empty</dd>
</dl>
</li>
</ul>
<a name="getFillInformation--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getFillInformation</h4>
<pre>public&nbsp;int&nbsp;getFillInformation()</pre>
<div class="block">Used to calculate the Fill Information. The fill information
 is a indicator of how full the buffer is at any point of time
 fill information = (full buffers/Total Buffers)*100. The Fill
 information ranges between 0-100 (both 0 and 100 inclusive).</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an integer value between 0-100 representing the fill
         information.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/derby/impl/store/replication/buffer/LogBufferFullException.html" title="class in org.apache.derby.impl.store.replication.buffer"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.html" target="_top">Frames</a></li>
<li><a href="ReplicationLogBuffer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
