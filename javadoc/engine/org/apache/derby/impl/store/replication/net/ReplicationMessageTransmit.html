<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:05:29 IST 2017 -->
<title>ReplicationMessageTransmit (Apache Derby V10.13 Internals)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ReplicationMessageTransmit (Apache Derby V10.13 Internals)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessageReceive.SlavePingThread.html" title="class in org.apache.derby.impl.store.replication.net"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.MasterReceiverThread.html" title="class in org.apache.derby.impl.store.replication.net"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.html" target="_top">Frames</a></li>
<li><a href="ReplicationMessageTransmit.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derby.impl.store.replication.net</div>
<h2 title="Class ReplicationMessageTransmit" class="title">Class ReplicationMessageTransmit</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.derby.impl.store.replication.net.ReplicationMessageTransmit</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">ReplicationMessageTransmit</span>
extends java.lang.Object</pre>
<div class="block">Used to send replication messages to the slave. Called by the
 Master controller to transmit replication messages wrapped in
 a <code>ReplicationMessage</code> object to a receiver. The
 receiver is implemented by the <code>ReplicationMessageReceive</code>
 class.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.MasterReceiverThread.html" title="class in org.apache.derby.impl.store.replication.net">ReplicationMessageTransmit.MasterReceiverThread</a></span></code>
<div class="block">Thread that listens for messages from the slave.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.html#dbname">dbname</a></span></code>
<div class="block">The name of the replicated database</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.html#DEFAULT_MESSAGE_RESPONSE_TIMEOUT">DEFAULT_MESSAGE_RESPONSE_TIMEOUT</a></span></code>
<div class="block">Number of millis to wait for a response message before timing out</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessage.html" title="class in org.apache.derby.impl.store.replication.net">ReplicationMessage</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.html#receivedMsg">receivedMsg</a></span></code>
<div class="block">The message received from the slave as a response to sending a
 message.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.html#receiveSemaphore">receiveSemaphore</a></span></code>
<div class="block">Used to synchronize when waiting for a response message from the slave</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/impl/store/replication/net/SlaveAddress.html" title="class in org.apache.derby.impl.store.replication.net">SlaveAddress</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.html#slaveAddress">slaveAddress</a></span></code>
<div class="block">Contains the address (hostname and port number) of the slave
 to replicate to.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../org/apache/derby/impl/store/replication/net/SocketConnection.html" title="class in org.apache.derby.impl.store.replication.net">SocketConnection</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.html#socketConn">socketConn</a></span></code>
<div class="block">Used to write/read message objects to/from a connection.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.html#stopMessageReceiver">stopMessageReceiver</a></span></code>
<div class="block">Whether or not to keep the message receiver thread alive.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.html#ReplicationMessageTransmit-org.apache.derby.impl.store.replication.net.SlaveAddress-">ReplicationMessageTransmit</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/replication/net/SlaveAddress.html" title="class in org.apache.derby.impl.store.replication.net">SlaveAddress</a>&nbsp;slaveAddress)</code>
<div class="block">Constructor initializes the slave address used in replication.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.html#brokerConnection-long-">brokerConnection</a></span>(long&nbsp;synchOnInstant)</code>
<div class="block">Used to send initiator messages to the slave and receive
 information about the compatibility of the slave with the
 master.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.html#checkSocketConnection--">checkSocketConnection</a></span>()</code>
<div class="block">Verifies if the <code>SocketConnection</code> is valid.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.html#initConnection-int-long-">initConnection</a></span>(int&nbsp;timeout,
              long&nbsp;synchOnInstant)</code>
<div class="block">Used to create a <code>Socket</code> connection to the slave and
 establish compatibility with the database version of the slave by
 comparing the UID's of the <code>ReplicationMessage</code> classes
 of the master and the slave.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.html#sendMessage-org.apache.derby.impl.store.replication.net.ReplicationMessage-">sendMessage</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessage.html" title="class in org.apache.derby.impl.store.replication.net">ReplicationMessage</a>&nbsp;message)</code>
<div class="block">Used to send a replication message to the slave.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessage.html" title="class in org.apache.derby.impl.store.replication.net">ReplicationMessage</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.html#sendMessageWaitForReply-org.apache.derby.impl.store.replication.net.ReplicationMessage-">sendMessageWaitForReply</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessage.html" title="class in org.apache.derby.impl.store.replication.net">ReplicationMessage</a>&nbsp;message)</code>
<div class="block">Send a replication message to the slave and return the
 message received as a response.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.html#startMessageReceiverThread-java.lang.String-">startMessageReceiverThread</a></span>(java.lang.String&nbsp;dbname)</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.html#tearDown--">tearDown</a></span>()</code>
<div class="block">Tear down the network connection established with the
 other replication peer</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.html#verifyMessageType-org.apache.derby.impl.store.replication.net.ReplicationMessage-int-">verifyMessageType</a></span>(<a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessage.html" title="class in org.apache.derby.impl.store.replication.net">ReplicationMessage</a>&nbsp;message,
                 int&nbsp;expectedType)</code>
<div class="block">Used to parse a message received from the slave.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="DEFAULT_MESSAGE_RESPONSE_TIMEOUT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_MESSAGE_RESPONSE_TIMEOUT</h4>
<pre>private final&nbsp;int DEFAULT_MESSAGE_RESPONSE_TIMEOUT</pre>
<div class="block">Number of millis to wait for a response message before timing out</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../../constant-values.html#org.apache.derby.impl.store.replication.net.ReplicationMessageTransmit.DEFAULT_MESSAGE_RESPONSE_TIMEOUT">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="receiveSemaphore">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receiveSemaphore</h4>
<pre>private final&nbsp;java.lang.Object receiveSemaphore</pre>
<div class="block">Used to synchronize when waiting for a response message from the slave</div>
</li>
</ul>
<a name="receivedMsg">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receivedMsg</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessage.html" title="class in org.apache.derby.impl.store.replication.net">ReplicationMessage</a> receivedMsg</pre>
<div class="block">The message received from the slave as a response to sending a
 message.</div>
</li>
</ul>
<a name="stopMessageReceiver">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stopMessageReceiver</h4>
<pre>private volatile&nbsp;boolean stopMessageReceiver</pre>
<div class="block">Whether or not to keep the message receiver thread alive. Set to true
 to terminate the thread</div>
</li>
</ul>
<a name="slaveAddress">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>slaveAddress</h4>
<pre>private final&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/replication/net/SlaveAddress.html" title="class in org.apache.derby.impl.store.replication.net">SlaveAddress</a> slaveAddress</pre>
<div class="block">Contains the address (hostname and port number) of the slave
 to replicate to.</div>
</li>
</ul>
<a name="socketConn">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>socketConn</h4>
<pre>private&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/replication/net/SocketConnection.html" title="class in org.apache.derby.impl.store.replication.net">SocketConnection</a> socketConn</pre>
<div class="block">Used to write/read message objects to/from a connection.</div>
</li>
</ul>
<a name="dbname">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>dbname</h4>
<pre>private&nbsp;java.lang.String dbname</pre>
<div class="block">The name of the replicated database</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ReplicationMessageTransmit-org.apache.derby.impl.store.replication.net.SlaveAddress-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ReplicationMessageTransmit</h4>
<pre>public&nbsp;ReplicationMessageTransmit(<a href="../../../../../../../org/apache/derby/impl/store/replication/net/SlaveAddress.html" title="class in org.apache.derby.impl.store.replication.net">SlaveAddress</a>&nbsp;slaveAddress)</pre>
<div class="block">Constructor initializes the slave address used in replication.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slaveAddress</code> - contains the address (host name and port number)
                     of the slave to connect to.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="initConnection-int-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initConnection</h4>
<pre>public&nbsp;void&nbsp;initConnection(int&nbsp;timeout,
                           long&nbsp;synchOnInstant)
                    throws java.io.IOException,
                           <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                           java.lang.ClassNotFoundException</pre>
<div class="block">Used to create a <code>Socket</code> connection to the slave and
 establish compatibility with the database version of the slave by
 comparing the UID's of the <code>ReplicationMessage</code> classes
 of the master and the slave.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>timeout</code> - the amount of time for which the connection should
                block before being established.</dd>
<dd><code>synchOnInstant</code> - the master log instant, used to check
 that the master and slave log files are in synch. If no chunks
 of log records have been shipped to the slave yet, this is the
 end position in the current log file. If a chunk of log has
 been shipped, this is the instant of the log record shipped
 last. Note that there is a difference!</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an exception occurs while trying to create the
         <code>SocketConnection</code> class or open a connection.</dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - If an error message is received from the
         server indicating incompatible software versions of master
         and slave.</dd>
<dd><code>java.lang.ClassNotFoundException</code> - Class of a serialized object cannot
         be found.</dd>
</dl>
</li>
</ul>
<a name="tearDown--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tearDown</h4>
<pre>public&nbsp;void&nbsp;tearDown()
              throws java.io.IOException</pre>
<div class="block">Tear down the network connection established with the
 other replication peer</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an exception occurs while trying to tear
                     down the network connection</dd>
</dl>
</li>
</ul>
<a name="sendMessage-org.apache.derby.impl.store.replication.net.ReplicationMessage-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendMessage</h4>
<pre>public&nbsp;void&nbsp;sendMessage(<a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessage.html" title="class in org.apache.derby.impl.store.replication.net">ReplicationMessage</a>&nbsp;message)
                 throws java.io.IOException</pre>
<div class="block">Used to send a replication message to the slave.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>message</code> - a <code>ReplicationMessage</code> object that contains
                the message to be transmitted.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - 1) if an exception occurs while transmitting
                        the message.
                     2) if the connection handle is invalid.</dd>
</dl>
</li>
</ul>
<a name="sendMessageWaitForReply-org.apache.derby.impl.store.replication.net.ReplicationMessage-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendMessageWaitForReply</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessage.html" title="class in org.apache.derby.impl.store.replication.net">ReplicationMessage</a>&nbsp;sendMessageWaitForReply(<a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessage.html" title="class in org.apache.derby.impl.store.replication.net">ReplicationMessage</a>&nbsp;message)
                                           throws java.io.IOException,
                                                  <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Send a replication message to the slave and return the
 message received as a response. Will only wait
 DEFAULT_MESSAGE_RESPONSE_TIMEOUT millis for the response
 message. If not received when the wait times out, no message is
 returned. The method is synchronized to guarantee that only one
 thread will be waiting for a response message at any time.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>message</code> - a ReplicationMessage object that contains the message to
 be transmitted.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the response message</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - 1) if an exception occurs while sending or receiving
                        a message.
                     2) if the connection handle is invalid.</dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - if the response message has not been received
 after DEFAULT_MESSAGE_RESPONSE_TIMEOUT millis</dd>
</dl>
</li>
</ul>
<a name="brokerConnection-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>brokerConnection</h4>
<pre>private&nbsp;void&nbsp;brokerConnection(long&nbsp;synchOnInstant)
                       throws java.io.IOException,
                              <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>,
                              java.lang.ClassNotFoundException</pre>
<div class="block">Used to send initiator messages to the slave and receive
 information about the compatibility of the slave with the
 master. One message is used to check that the slave and master
 have the same software versions. A second message is used to
 check that the master and slave log files are in synch.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>synchOnInstant</code> - the master log instant, used to check
 that the master and slave log files are in synch. If no chunks
 of log records have been shipped to the slave yet, this is the
 end position in the current log file. If a chunk of log has
 been shipped, this is the instant of the log record shipped
 last. Note that there is a difference!</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an exception occurs during the sending or
                     reading of the message.</dd>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - If an error message is received from the
                           server indicating a mis-match in
                           serialVersionUID or log files out of synch.</dd>
<dd><code>java.lang.ClassNotFoundException</code> - Class of a serialized object cannot
                                be found.</dd>
</dl>
</li>
</ul>
<a name="verifyMessageType-org.apache.derby.impl.store.replication.net.ReplicationMessage-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifyMessageType</h4>
<pre>private&nbsp;boolean&nbsp;verifyMessageType(<a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessage.html" title="class in org.apache.derby.impl.store.replication.net">ReplicationMessage</a>&nbsp;message,
                                  int&nbsp;expectedType)
                           throws <a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Used to parse a message received from the slave. If the message
 is an ack of the last shipped message, this method terminates
 quietly. Otherwise, it throws the exception received in the
 message from the slave describing why the last message could
 not be acked.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - If an error message is received from
                           the server</dd>
<dd><code>java.lang.ClassNotFoundException</code> - Class of a serialized object cannot
                                be found.</dd>
</dl>
</li>
</ul>
<a name="checkSocketConnection--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkSocketConnection</h4>
<pre>private&nbsp;void&nbsp;checkSocketConnection()
                            throws java.io.IOException</pre>
<div class="block">Verifies if the <code>SocketConnection</code> is valid.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If the socket connection object is not
                     valid (is null).</dd>
</dl>
</li>
</ul>
<a name="startMessageReceiverThread-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>startMessageReceiverThread</h4>
<pre>private&nbsp;void&nbsp;startMessageReceiverThread(java.lang.String&nbsp;dbname)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessageReceive.SlavePingThread.html" title="class in org.apache.derby.impl.store.replication.net"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.MasterReceiverThread.html" title="class in org.apache.derby.impl.store.replication.net"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.html" target="_top">Frames</a></li>
<li><a href="ReplicationMessageTransmit.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
