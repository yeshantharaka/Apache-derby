<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:05:07 IST 2017 -->
<title>SequenceGenerator (Apache Derby V10.13 Internals)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SequenceGenerator (Apache Derby V10.13 Internals)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/derby/impl/sql/catalog/RoleClosureIteratorImpl.html" title="class in org.apache.derby.impl.sql.catalog"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceRange.html" title="class in org.apache.derby.impl.sql.catalog"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/derby/impl/sql/catalog/SequenceGenerator.html" target="_top">Frames</a></li>
<li><a href="SequenceGenerator.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derby.impl.sql.catalog</div>
<h2 title="Class SequenceGenerator" class="title">Class SequenceGenerator</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.derby.impl.sql.catalog.SequenceGenerator</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">SequenceGenerator</span>
extends java.lang.Object</pre>
<div class="block"><p>
 This is a generic machine for pre-allocating ranges of sequence numbers in order
 to improve concurrency. The public methods are synchronized and should be brief.
 The caller of the methods in this class is responsible for updating values on disk
 when the generator is exhausted or when it needs to allocate a new range of values.
 </p>

 <p>
 The most used method in this class is getCurrentValueAndAdvance(). This method
 returns the next number in the range managed by the sequence generator. This
 method will raise an exception if the sequence generator is exhausted. Otherwise
 getCurrentValueAndAdvance() hands back a tuple of return values:
 </p>

 <blockquote>
 ( <i>status, currentValue, lastAllocatedValue, numberOfValuesAllocated</i> )
 </blockquote>

 <p>
 The <i>status</i> field takes the following values:
 </p>

 <ul>
 <li><b>RET_I_AM_CONFUSED</b> - This value should never be returned. If this value comes back,
 then the sequence generator is confused.</li>
 <li><b>RET_OK</b> - This means that the generator has successfully obtained a
 next value. That value is <i>currentValue</i>.</li>
 <li><b>RET_MARK_EXHAUSTED</b> - This means that the generator has reached the end of its
 legal range and is handing back its very last value. The caller must mark the catalogs
 to indicate that the range is exhausted. The very last value being handed back
 is <i>currentValue</i>.</li>
 <li><b>RET_ALLOCATE_NEW_VALUES</b> - This means that the generator has come to the end
 of its pre-allocated values. The caller needs to update the catalog to grab a new range of
 legal values and then call allocateNewRange() to tell the generator that the range was
 successfully allocated. The remaining values in the return tuple have these meanings:
  <ul>
  <li><i>currentValue</i> - This is what is expected to be the current value in the catalog before
   allocating a new range. If, in fact, this is not the value in the catalog, then we are racing with
   another session to drain values from the generator and update the disk. Do not update
   the catalog if the value there is not <i>currentValue</i>. Instead, assume that another session
   got in ahead of us and grabbed a new range of values. Simply call getCurrentValueAndAdvance()
   again.</li>
  <li><i>lastAllocatedValue</i> - This is the next value to write to the catalog.</li>
  <li><i>numberOfValuesAllocated</i> - This is the number of values which were allocated
   if we successfully updated the catalog. If we successfully updated the catalog, then we
   should call allocateNewRange(), handing it this value so that it can reset its range. As a
   sanity check, we also hand allocateNewRange() the <i>currentValue</i> that we were
   given. The allocateNewRange() method will assume we're racing another session and will
   ignore us if its sense of <i>currentValue</i> does not agree with ours.</li>
  </ul>
 </li>
 </ul>


 <p>
 It may happen that getCurrentValueAndAdvance() tells its caller to allocate a new
 range of sequence numbers in the system catalog. If the caller successfully allocates
 a new range, the caller should call allocateNewRange() to tell the generator to update
 its internal memory of that range.
 </p>


 <p>
 The peekAtCurrentValue() method is provided so that unused, pre-allocated values can
 be flushed when the sequence generator is being discarded. The caller updates the
 catalog with the value returned by peekAtCurrentValue(). The peekAtCurrentValue() method
 is also called by the syscs_peek_at_sequence() function which users should call rather
 than try to scan the underlying catalog themselves.
 </p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#Z:Z_CAN_CYCLE">_CAN_CYCLE</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#Z:Z_currentValue">_currentValue</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#Z:Z_INCREMENT">_INCREMENT</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#Z:Z_isExhausted">_isExhausted</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#Z:Z_MAX_VALUE">_MAX_VALUE</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#Z:Z_MIN_VALUE">_MIN_VALUE</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/derby/catalog/SequencePreallocator.html" title="interface in org.apache.derby.catalog">SequencePreallocator</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#Z:Z_PREALLOCATOR">_PREALLOCATOR</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#Z:Z_remainingPreallocatedValues">_remainingPreallocatedValues</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#Z:Z_RESTART_VALUE">_RESTART_VALUE</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#Z:Z_SCHEMA_NAME">_SCHEMA_NAME</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#Z:Z_SEQUENCE_NAME">_SEQUENCE_NAME</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#Z:Z_STEP_INCREASES">_STEP_INCREASES</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#CVAA_CURRENT_VALUE">CVAA_CURRENT_VALUE</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#CVAA_LAST_ALLOCATED_VALUE">CVAA_LAST_ALLOCATED_VALUE</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#CVAA_LENGTH">CVAA_LENGTH</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#CVAA_NUMBER_OF_VALUES_ALLOCATED">CVAA_NUMBER_OF_VALUES_ALLOCATED</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#CVAA_STATUS">CVAA_STATUS</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#PREALLOCATION_THRESHHOLD">PREALLOCATION_THRESHHOLD</a></span></code>
<div class="block">If pre-allocation drops below this level, then we need to grab another chunk of numbers</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#RET_ALLOCATE_NEW_VALUES">RET_ALLOCATE_NEW_VALUES</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#RET_I_AM_CONFUSED">RET_I_AM_CONFUSED</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#RET_MARK_EXHAUSTED">RET_MARK_EXHAUSTED</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#RET_OK">RET_OK</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#SequenceGenerator-java.lang.Long-boolean-long-long-long-long-java.lang.String-java.lang.String-org.apache.derby.catalog.SequencePreallocator-">SequenceGenerator</a></span>(java.lang.Long&nbsp;currentValue,
                 boolean&nbsp;canCycle,
                 long&nbsp;increment,
                 long&nbsp;maxValue,
                 long&nbsp;minValue,
                 long&nbsp;restartValue,
                 java.lang.String&nbsp;schemaName,
                 java.lang.String&nbsp;sequenceName,
                 <a href="../../../../../../org/apache/derby/catalog/SequencePreallocator.html" title="interface in org.apache.derby.catalog">SequencePreallocator</a>&nbsp;sequencePreallocator)</code>
<div class="block">Normal constructor</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#advanceValue-long:A-">advanceValue</a></span>(long[]&nbsp;retval)</code>
<div class="block">
 Advance the sequence generator.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#allocateNewRange-long-long-">allocateNewRange</a></span>(long&nbsp;expectedCurrentValue,
                long&nbsp;numberOfAllocatedValues)</code>
<div class="block">
 Allocate a new range.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html" title="class in org.apache.derby.impl.sql.catalog">SequenceGenerator</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#clone-boolean-">clone</a></span>(boolean&nbsp;restart)</code>
<div class="block">
 Clone this sequence generator.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html" title="class in org.apache.derby.impl.sql.catalog">SequenceGenerator</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#clone-java.lang.Long-">clone</a></span>(java.lang.Long&nbsp;newStartValue)</code>
<div class="block">
 Clone this sequence generator.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#computeNewAllocation-long-long:A-">computeNewAllocation</a></span>(long&nbsp;oldCurrentValue,
                    long[]&nbsp;retval)</code>
<div class="block">
 Compute the number of values to allocate.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#computePreAllocationCount--">computePreAllocationCount</a></span>()</code>
<div class="block">
 This method returns the number of values to pre-allocate when we
 grab a new chunk of values.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#computeRemainingValues-long-">computeRemainingValues</a></span>(long&nbsp;oldCurrentValue)</code>
<div class="block">
 Get the number of values remaining until we bump against an endpoint of the legal range of values.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>long[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#getCurrentValueAndAdvance--">getCurrentValueAndAdvance</a></span>()</code>
<div class="block">
 Get the next sequence number managed by this generator and advance the number.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#getName--">getName</a></span>()</code>
<div class="block">
 Get the name of this sequence generator.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#getSchemaName--">getSchemaName</a></span>()</code>
<div class="block">
 Get the name of the schema of this sequence generator.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#markExhausted-long:A-">markExhausted</a></span>(long[]&nbsp;retval)</code>
<div class="block">
 Mark the generator as exhausted.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#overflowed-long-long-">overflowed</a></span>(long&nbsp;originalValue,
          long&nbsp;incrementedValue)</code>
<div class="block">
 Return true if an overflow/underflow occurred.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>java.lang.Long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html#peekAtCurrentValue--">peekAtCurrentValue</a></span>()</code>
<div class="block">
 Peek at the current value of the sequence generator without advancing the
 generator.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="PREALLOCATION_THRESHHOLD">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PREALLOCATION_THRESHHOLD</h4>
<pre>private static final&nbsp;int PREALLOCATION_THRESHHOLD</pre>
<div class="block">If pre-allocation drops below this level, then we need to grab another chunk of numbers</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.derby.impl.sql.catalog.SequenceGenerator.PREALLOCATION_THRESHHOLD">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="RET_I_AM_CONFUSED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>RET_I_AM_CONFUSED</h4>
<pre>public static final&nbsp;int RET_I_AM_CONFUSED</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.derby.impl.sql.catalog.SequenceGenerator.RET_I_AM_CONFUSED">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="RET_OK">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>RET_OK</h4>
<pre>public static final&nbsp;int RET_OK</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.derby.impl.sql.catalog.SequenceGenerator.RET_OK">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="RET_MARK_EXHAUSTED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>RET_MARK_EXHAUSTED</h4>
<pre>public static final&nbsp;int RET_MARK_EXHAUSTED</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.derby.impl.sql.catalog.SequenceGenerator.RET_MARK_EXHAUSTED">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="RET_ALLOCATE_NEW_VALUES">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>RET_ALLOCATE_NEW_VALUES</h4>
<pre>public static final&nbsp;int RET_ALLOCATE_NEW_VALUES</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.derby.impl.sql.catalog.SequenceGenerator.RET_ALLOCATE_NEW_VALUES">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="CVAA_STATUS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CVAA_STATUS</h4>
<pre>public static final&nbsp;int CVAA_STATUS</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.derby.impl.sql.catalog.SequenceGenerator.CVAA_STATUS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="CVAA_CURRENT_VALUE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CVAA_CURRENT_VALUE</h4>
<pre>public static final&nbsp;int CVAA_CURRENT_VALUE</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.derby.impl.sql.catalog.SequenceGenerator.CVAA_CURRENT_VALUE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="CVAA_LAST_ALLOCATED_VALUE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CVAA_LAST_ALLOCATED_VALUE</h4>
<pre>public static final&nbsp;int CVAA_LAST_ALLOCATED_VALUE</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.derby.impl.sql.catalog.SequenceGenerator.CVAA_LAST_ALLOCATED_VALUE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="CVAA_NUMBER_OF_VALUES_ALLOCATED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CVAA_NUMBER_OF_VALUES_ALLOCATED</h4>
<pre>public static final&nbsp;int CVAA_NUMBER_OF_VALUES_ALLOCATED</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.derby.impl.sql.catalog.SequenceGenerator.CVAA_NUMBER_OF_VALUES_ALLOCATED">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="CVAA_LENGTH">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CVAA_LENGTH</h4>
<pre>public static final&nbsp;int CVAA_LENGTH</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.derby.impl.sql.catalog.SequenceGenerator.CVAA_LENGTH">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="Z:Z_CAN_CYCLE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_CAN_CYCLE</h4>
<pre>private final&nbsp;boolean _CAN_CYCLE</pre>
</li>
</ul>
<a name="Z:Z_STEP_INCREASES">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_STEP_INCREASES</h4>
<pre>private final&nbsp;boolean _STEP_INCREASES</pre>
</li>
</ul>
<a name="Z:Z_INCREMENT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_INCREMENT</h4>
<pre>private final&nbsp;long _INCREMENT</pre>
</li>
</ul>
<a name="Z:Z_MAX_VALUE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_MAX_VALUE</h4>
<pre>private final&nbsp;long _MAX_VALUE</pre>
</li>
</ul>
<a name="Z:Z_MIN_VALUE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_MIN_VALUE</h4>
<pre>private final&nbsp;long _MIN_VALUE</pre>
</li>
</ul>
<a name="Z:Z_RESTART_VALUE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_RESTART_VALUE</h4>
<pre>private final&nbsp;long _RESTART_VALUE</pre>
</li>
</ul>
<a name="Z:Z_SCHEMA_NAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_SCHEMA_NAME</h4>
<pre>private final&nbsp;java.lang.String _SCHEMA_NAME</pre>
</li>
</ul>
<a name="Z:Z_SEQUENCE_NAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_SEQUENCE_NAME</h4>
<pre>private final&nbsp;java.lang.String _SEQUENCE_NAME</pre>
</li>
</ul>
<a name="Z:Z_PREALLOCATOR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_PREALLOCATOR</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/derby/catalog/SequencePreallocator.html" title="interface in org.apache.derby.catalog">SequencePreallocator</a> _PREALLOCATOR</pre>
</li>
</ul>
<a name="Z:Z_isExhausted">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_isExhausted</h4>
<pre>private&nbsp;boolean _isExhausted</pre>
</li>
</ul>
<a name="Z:Z_currentValue">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_currentValue</h4>
<pre>private&nbsp;long _currentValue</pre>
</li>
</ul>
<a name="Z:Z_remainingPreallocatedValues">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>_remainingPreallocatedValues</h4>
<pre>private&nbsp;long _remainingPreallocatedValues</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="SequenceGenerator-java.lang.Long-boolean-long-long-long-long-java.lang.String-java.lang.String-org.apache.derby.catalog.SequencePreallocator-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SequenceGenerator</h4>
<pre>public&nbsp;SequenceGenerator(java.lang.Long&nbsp;currentValue,
                         boolean&nbsp;canCycle,
                         long&nbsp;increment,
                         long&nbsp;maxValue,
                         long&nbsp;minValue,
                         long&nbsp;restartValue,
                         java.lang.String&nbsp;schemaName,
                         java.lang.String&nbsp;sequenceName,
                         <a href="../../../../../../org/apache/derby/catalog/SequencePreallocator.html" title="interface in org.apache.derby.catalog">SequencePreallocator</a>&nbsp;sequencePreallocator)</pre>
<div class="block">Normal constructor</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="clone-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clone</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html" title="class in org.apache.derby.impl.sql.catalog">SequenceGenerator</a>&nbsp;clone(boolean&nbsp;restart)</pre>
<div class="block"><p>
 Clone this sequence generator. This method supports the special bulk-insert optimization in
 InsertResultSet.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>restart</code> - True if the clone should be reset to start at the beginning instead of at the current value.</dd>
</dl>
</li>
</ul>
<a name="clone-java.lang.Long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clone</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceGenerator.html" title="class in org.apache.derby.impl.sql.catalog">SequenceGenerator</a>&nbsp;clone(java.lang.Long&nbsp;newStartValue)</pre>
<div class="block"><p>
 Clone this sequence generator. This method supports the special bulk-insert optimization in
 InsertResultSet.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newStartValue</code> - New value to start with.</dd>
</dl>
</li>
</ul>
<a name="getSchemaName--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSchemaName</h4>
<pre>public&nbsp;java.lang.String&nbsp;getSchemaName()</pre>
<div class="block"><p>
 Get the name of the schema of this sequence generator. Technically, this doesn't need to be
 synchronized. But it is simpler to just maintain a rule that all public methods
 should be synchronized.
 </p></div>
</li>
</ul>
<a name="getName--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getName</h4>
<pre>public&nbsp;java.lang.String&nbsp;getName()</pre>
<div class="block"><p>
 Get the name of this sequence generator. Technically, this doesn't need to be
 synchronized. But it is simpler to just maintain a rule that all public methods
 should be synchronized.
 </p></div>
</li>
</ul>
<a name="allocateNewRange-long-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocateNewRange</h4>
<pre>public&nbsp;void&nbsp;allocateNewRange(long&nbsp;expectedCurrentValue,
                             long&nbsp;numberOfAllocatedValues)</pre>
<div class="block"><p>
 Allocate a new range. Is a NOP if the current value is not what we expected. See the
 class header comment for more information on how this method is used.
 </p></div>
</li>
</ul>
<a name="peekAtCurrentValue--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>peekAtCurrentValue</h4>
<pre>public&nbsp;java.lang.Long&nbsp;peekAtCurrentValue()</pre>
<div class="block"><p>
 Peek at the current value of the sequence generator without advancing the
 generator. Returns null if the generator is exhausted.
 </p></div>
</li>
</ul>
<a name="getCurrentValueAndAdvance--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentValueAndAdvance</h4>
<pre>public&nbsp;long[]&nbsp;getCurrentValueAndAdvance()
                                 throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block"><p>
 Get the next sequence number managed by this generator and advance the number. Could raise an
 exception if the legal range is exhausted and wrap-around is not allowed--that is,
 if NO CYCLE was specified when the sequence was defined. See the class header comment
 for a description of how this method operates.
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns an array of longs indexed by the CVAA_* constants.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="advanceValue-long:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>advanceValue</h4>
<pre>private&nbsp;void&nbsp;advanceValue(long[]&nbsp;retval)
                   throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block"><p>
 Advance the sequence generator. Pre-allocate a range of new values if
 necessary.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>retval</code> - Array of return values to fill in: see CVAA_* constants</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code></dd>
</dl>
</li>
</ul>
<a name="markExhausted-long:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markExhausted</h4>
<pre>private&nbsp;void&nbsp;markExhausted(long[]&nbsp;retval)</pre>
<div class="block"><p>
 Mark the generator as exhausted.
 </p></div>
</li>
</ul>
<a name="overflowed-long-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>overflowed</h4>
<pre>private&nbsp;boolean&nbsp;overflowed(long&nbsp;originalValue,
                           long&nbsp;incrementedValue)</pre>
<div class="block"><p>
 Return true if an overflow/underflow occurred. This happens if
 the originalValue and incrementedValue have opposite sign. Overflow
 also occurs if the incrementedValue falls outside the range of the
 sequence.
 </p></div>
</li>
</ul>
<a name="computeNewAllocation-long-long:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeNewAllocation</h4>
<pre>private&nbsp;void&nbsp;computeNewAllocation(long&nbsp;oldCurrentValue,
                                  long[]&nbsp;retval)
                           throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block"><p>
 Compute the number of values to allocate. The range may wrap around.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>oldCurrentValue</code> - INPUT Used to compute how many values need to be allocated</dd>
<dd><code>retval</code> - OUTPUT Array of values to fill in (see CVAA_* constants)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - if any error occurs.</dd>
</dl>
</li>
</ul>
<a name="computeRemainingValues-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeRemainingValues</h4>
<pre>private&nbsp;long&nbsp;computeRemainingValues(long&nbsp;oldCurrentValue)</pre>
<div class="block"><p>
 Get the number of values remaining until we bump against an endpoint of the legal range of values.
 This is a positive number and so may understate the number of remaining values if the datatype is BIGINT.
 </p></div>
</li>
</ul>
<a name="computePreAllocationCount--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>computePreAllocationCount</h4>
<pre>private&nbsp;int&nbsp;computePreAllocationCount()</pre>
<div class="block"><p>
 This method returns the number of values to pre-allocate when we
 grab a new chunk of values. This is a bit of defensive coding to cover
 the case when the sequence's parameters are absurdly large.
 </p></div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/derby/impl/sql/catalog/RoleClosureIteratorImpl.html" title="class in org.apache.derby.impl.sql.catalog"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/derby/impl/sql/catalog/SequenceRange.html" title="class in org.apache.derby.impl.sql.catalog"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/derby/impl/sql/catalog/SequenceGenerator.html" target="_top">Frames</a></li>
<li><a href="SequenceGenerator.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
