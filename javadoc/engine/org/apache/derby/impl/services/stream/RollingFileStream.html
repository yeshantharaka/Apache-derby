<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:05:16 IST 2017 -->
<title>RollingFileStream (Apache Derby V10.13 Internals)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="RollingFileStream (Apache Derby V10.13 Internals)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/derby/impl/services/stream/BasicHeaderPrintWriter.html" title="class in org.apache.derby.impl.services.stream"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.MeteredStream.html" title="class in org.apache.derby.impl.services.stream"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/derby/impl/services/stream/RollingFileStream.html" target="_top">Frames</a></li>
<li><a href="RollingFileStream.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derby.impl.services.stream</div>
<h2 title="Class RollingFileStream" class="title">Class RollingFileStream</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>java.io.OutputStream</li>
<li>
<ul class="inheritance">
<li>org.apache.derby.impl.services.stream.RollingFileStream</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.io.Closeable, java.io.Flushable, java.lang.AutoCloseable</dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">RollingFileStream</span>
extends java.io.OutputStream</pre>
<div class="block">This class provides rolling file OutputStream.  The file pattern, file size,
 and number of files can be customized.
 <p>
 This class borrows extensively from the java.util.logger.FileHandler class for its
 file handling ability and instead of handling logger messages it extends 
 java.io.OutputStream.
 <p>
 A pattern consists of a string that includes the following special
 components that will be replaced at runtime:
 <ul>
 <li>    "/"    the local pathname separator 
 <li>     "%t"   the system temporary directory
 <li>     "%h"   the value of the "user.home" system property
 <li>     "%d"   the value of the "derby.system.home" system property
 <li>     "%g"   the generation number to distinguish rotated logs
 <li>     "%u"   a unique number to resolve conflicts
 <li>     "%%"   translates to a single percent sign "%"
 </ul>
 If no "%g" field has been specified and the file count is greater
 than one, then the generation number will be added to the end of
 the generated filename, after a dot.
 <p> 
 Thus for example a pattern of "%t/java%g.log" with a count of 2
 would typically cause files to be written on Solaris to 
 /var/tmp/java0.log and /var/tmp/java1.log whereas on Windows 95 they
 would be typically written to C:\TEMP\java0.log and C:\TEMP\java1.log
 <p> 
 Generation numbers follow the sequence 0, 1, 2, etc.
 <p>
 Normally the "%u" unique field is set to 0.  However, if the <tt>FileHandler</tt>
 tries to open the filename and finds the file is currently in use by
 another process it will increment the unique number field and try
 again.  This will be repeated until <tt>FileHandler</tt> finds a file name that
 is  not currently in use. If there is a conflict and no "%u" field has
 been specified, it will be added at the end of the filename after a dot.
 (This will be after any automatically added generation number.)
 <p>
 Thus if three processes were all trying to output to fred%u.%g.txt then 
 they  might end up using fred0.0.txt, fred1.0.txt, fred2.0.txt as
 the first file in their rotating sequences.
 <p>
 Note that the use of unique ids to avoid conflicts is only guaranteed
 to work reliably when using a local disk file system.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.MeteredStream.html" title="class in org.apache.derby.impl.services.stream">RollingFileStream.MeteredStream</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#append">append</a></span></code>
<div class="block">The append flag which indicates at creation time to append to an existing
 file or to always create a new one</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#count">count</a></span></code>
<div class="block">The rolling file count.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.io.File[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#files">files</a></span></code>
<div class="block">The array of File instance representing the rolling files</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#limit">limit</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#lockFileName">lockFileName</a></span></code>
<div class="block">The lockfile name</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.util.HashMap&lt;java.lang.String,java.lang.String&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#locks">locks</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.io.FileOutputStream</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#lockStream">lockStream</a></span></code>
<div class="block">The output stream that is used as a lock</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#MAX_LOCKS">MAX_LOCKS</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.MeteredStream.html" title="class in org.apache.derby.impl.services.stream">RollingFileStream.MeteredStream</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#meter">meter</a></span></code>
<div class="block">The underlying stream being written to that keeps track of how much
 has been written</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#pattern">pattern</a></span></code>
<div class="block">The filename pattern.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#RollingFileStream--">RollingFileStream</a></span>()</code>
<div class="block">Construct a default <tt>RollingFileStream</tt>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#RollingFileStream-java.lang.String-int-int-boolean-">RollingFileStream</a></span>(java.lang.String&nbsp;pattern,
                 int&nbsp;limit,
                 int&nbsp;count,
                 boolean&nbsp;append)</code>
<div class="block">Initialize a <tt>RollingFileStream</tt> to write to a set of files with optional append.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#checkMeter--">checkMeter</a></span>()</code>
<div class="block">Invoked by the metered OutputStream</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#close--">close</a></span>()</code>
<div class="block">Close all the files.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#fileDelete-java.io.File-">fileDelete</a></span>(java.io.File&nbsp;file)</code>
<div class="block">Delete a file in a privilege block</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#fileExists-java.io.File-">fileExists</a></span>(java.io.File&nbsp;file)</code>
<div class="block">Check to see if a file exists in a privilege block</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#fileLength-java.io.File-">fileLength</a></span>(java.io.File&nbsp;file)</code>
<div class="block">Get the length of a file in a privilege block</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#fileRename-java.io.File-java.io.File-">fileRename</a></span>(java.io.File&nbsp;file1,
          java.io.File&nbsp;file2)</code>
<div class="block">Rename a file in a privilege block</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>private java.io.File</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#generate-java.lang.String-int-int-">generate</a></span>(java.lang.String&nbsp;pattern,
        int&nbsp;generation,
        int&nbsp;unique)</code>
<div class="block">Generates and returns File from a pattern</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#getSystemProperty-java.lang.String-">getSystemProperty</a></span>(java.lang.String&nbsp;property)</code>
<div class="block">Gets a system property in a privileged block</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#open-java.io.File-boolean-">open</a></span>(java.io.File&nbsp;fname,
    boolean&nbsp;append)</code>
<div class="block">Opens a new file that and delegates it to a MeteredStream</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>private java.io.FileOutputStream</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#openFile-java.lang.String-boolean-">openFile</a></span>(java.lang.String&nbsp;filename,
        boolean&nbsp;append)</code>
<div class="block">Opens a file in the privileged block</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#openFiles--">openFiles</a></span>()</code>
<div class="block">Opens the output files files based on the configured pattern, limit, count,
 and append mode.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#rotate--">rotate</a></span>()</code>
<div class="block">Rotates the log files.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.html#write-int-">write</a></span>(int&nbsp;b)</code>
<div class="block">Implements the write method of the OutputStream.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.io.OutputStream">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.io.OutputStream</h3>
<code>flush, write, write</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="meter">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>meter</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.MeteredStream.html" title="class in org.apache.derby.impl.services.stream">RollingFileStream.MeteredStream</a> meter</pre>
<div class="block">The underlying stream being written to that keeps track of how much
 has been written</div>
</li>
</ul>
<a name="append">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>append</h4>
<pre>private&nbsp;boolean append</pre>
<div class="block">The append flag which indicates at creation time to append to an existing
 file or to always create a new one</div>
</li>
</ul>
<a name="limit">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>limit</h4>
<pre>private&nbsp;int limit</pre>
</li>
</ul>
<a name="count">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>count</h4>
<pre>private&nbsp;int count</pre>
<div class="block">The rolling file count.  This many files will be created before the
 oldest is removed and the files rolled.</div>
</li>
</ul>
<a name="pattern">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pattern</h4>
<pre>private&nbsp;java.lang.String pattern</pre>
<div class="block">The filename pattern.</div>
</li>
</ul>
<a name="lockFileName">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockFileName</h4>
<pre>private&nbsp;java.lang.String lockFileName</pre>
<div class="block">The lockfile name</div>
</li>
</ul>
<a name="lockStream">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockStream</h4>
<pre>private&nbsp;java.io.FileOutputStream lockStream</pre>
<div class="block">The output stream that is used as a lock</div>
</li>
</ul>
<a name="files">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>files</h4>
<pre>private&nbsp;java.io.File[] files</pre>
<div class="block">The array of File instance representing the rolling files</div>
</li>
</ul>
<a name="MAX_LOCKS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAX_LOCKS</h4>
<pre>private static final&nbsp;int MAX_LOCKS</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.derby.impl.services.stream.RollingFileStream.MAX_LOCKS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="locks">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>locks</h4>
<pre>private static&nbsp;java.util.HashMap&lt;java.lang.String,java.lang.String&gt; locks</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="RollingFileStream--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>RollingFileStream</h4>
<pre>public&nbsp;RollingFileStream()
                  throws java.io.IOException,
                         java.lang.SecurityException</pre>
<div class="block">Construct a default <tt>RollingFileStream</tt>. This will be configured entirely with default values: 
 <ul>
 <li>pattern - %d/derby-%g.log (DERBY_HOME/derby-0.log)</li>
 <li>limit - 0 (unlimited)</li>
 <li>count - 1 (one file)</li>
 <li>append - false (overwrite and not append)</li>
 </ul></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if there are IO problems opening the files.</dd>
<dd><code>java.lang.SecurityException</code> - if a security manager exists and if the caller does not have
 <tt>LoggingPermission("control"))</tt>.</dd>
<dd><code>java.lang.NullPointerException</code> - if pattern property is an empty String.</dd>
</dl>
</li>
</ul>
<a name="RollingFileStream-java.lang.String-int-int-boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>RollingFileStream</h4>
<pre>public&nbsp;RollingFileStream(java.lang.String&nbsp;pattern,
                         int&nbsp;limit,
                         int&nbsp;count,
                         boolean&nbsp;append)
                  throws java.io.IOException,
                         java.lang.SecurityException</pre>
<div class="block">Initialize a <tt>RollingFileStream</tt> to write to a set of files with optional append. When (approximately) the
 given limit has been written to one file, another file will be opened. The output will cycle through a set of
 count files.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pattern</code> - the pattern for naming the output file</dd>
<dd><code>limit</code> - the maximum number of bytes to write to any one file</dd>
<dd><code>count</code> - the number of files to use</dd>
<dd><code>append</code> - specifies append mode</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if there are IO problems opening the files.</dd>
<dd><code>java.lang.SecurityException</code> - if a security manager exists and if the caller does not have
 <tt>LoggingPermission("control")</tt>.</dd>
<dd><code>java.lang.IllegalArgumentException</code> - if limit &lt; 0, or count &lt; 1.</dd>
<dd><code>java.lang.IllegalArgumentException</code> - if pattern is an empty string</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="write-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>write</h4>
<pre>public&nbsp;void&nbsp;write(int&nbsp;b)
           throws java.io.IOException</pre>
<div class="block">Implements the write method of the OutputStream.  This writes the value
 to the metered stream.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>write</code>&nbsp;in class&nbsp;<code>java.io.OutputStream</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>b</code> - The value to write</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="openFiles--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openFiles</h4>
<pre>private&nbsp;void&nbsp;openFiles()
                throws java.io.IOException</pre>
<div class="block">Opens the output files files based on the configured pattern, limit, count,
 and append mode.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="generate-java.lang.String-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generate</h4>
<pre>private&nbsp;java.io.File&nbsp;generate(java.lang.String&nbsp;pattern,
                              int&nbsp;generation,
                              int&nbsp;unique)
                       throws java.io.IOException</pre>
<div class="block">Generates and returns File from a pattern</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pattern</code> - The filename pattern</dd>
<dd><code>generation</code> - The generation number used if there is a conflict</dd>
<dd><code>unique</code> - The unique number to append to the filename</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The File</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="rotate--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rotate</h4>
<pre>private&nbsp;void&nbsp;rotate()
             throws java.io.IOException</pre>
<div class="block">Rotates the log files.  The metered OutputStream is closed,the log files
 are rotated and then a new metered OutputStream is created.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()
           throws java.lang.SecurityException</pre>
<div class="block">Close all the files.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.io.Closeable</code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.lang.AutoCloseable</code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>close</code>&nbsp;in class&nbsp;<code>java.io.OutputStream</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.SecurityException</code> - if a security manager exists and if the caller does not have
 <tt>LoggingPermission("control")</tt>.</dd>
</dl>
</li>
</ul>
<a name="getSystemProperty-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSystemProperty</h4>
<pre>private&nbsp;java.lang.String&nbsp;getSystemProperty(java.lang.String&nbsp;property)</pre>
<div class="block">Gets a system property in a privileged block</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>property</code> - The propety to get</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The property value</dd>
</dl>
</li>
</ul>
<a name="openFile-java.lang.String-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openFile</h4>
<pre>private&nbsp;java.io.FileOutputStream&nbsp;openFile(java.lang.String&nbsp;filename,
                                          boolean&nbsp;append)
                                   throws java.io.IOException</pre>
<div class="block">Opens a file in the privileged block</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>filename</code> - The name of the file to open</dd>
<dd><code>append</code> - if <code>true</code> open the file in append mode</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The FileOutputStream for the file</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="fileExists-java.io.File-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fileExists</h4>
<pre>private&nbsp;boolean&nbsp;fileExists(java.io.File&nbsp;file)</pre>
<div class="block">Check to see if a file exists in a privilege block</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>file</code> - The file to check</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the file exists or <code>false</code> otherwise</dd>
</dl>
</li>
</ul>
<a name="fileDelete-java.io.File-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fileDelete</h4>
<pre>private&nbsp;void&nbsp;fileDelete(java.io.File&nbsp;file)</pre>
<div class="block">Delete a file in a privilege block</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>file</code> - The file to delete</dd>
</dl>
</li>
</ul>
<a name="fileRename-java.io.File-java.io.File-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fileRename</h4>
<pre>private&nbsp;boolean&nbsp;fileRename(java.io.File&nbsp;file1,
                           java.io.File&nbsp;file2)</pre>
<div class="block">Rename a file in a privilege block</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>file1</code> - The file to rename</dd>
<dd><code>file2</code> - The file to rename it to</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the file was renamed or </code>false</code> otherwise</dd>
</dl>
</li>
</ul>
<a name="fileLength-java.io.File-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fileLength</h4>
<pre>private&nbsp;long&nbsp;fileLength(java.io.File&nbsp;file)</pre>
<div class="block">Get the length of a file in a privilege block</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>file</code> - The file to get the length of</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The length of the file</dd>
</dl>
</li>
</ul>
<a name="open-java.io.File-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>open</h4>
<pre>private&nbsp;void&nbsp;open(java.io.File&nbsp;fname,
                  boolean&nbsp;append)
           throws java.io.IOException</pre>
<div class="block">Opens a new file that and delegates it to a MeteredStream</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>fname</code> - The name of the file</dd>
<dd><code>append</code> - If <code>true</code> append to the existing file</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="checkMeter--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>checkMeter</h4>
<pre>private&nbsp;void&nbsp;checkMeter()
                 throws java.io.IOException</pre>
<div class="block">Invoked by the metered OutputStream</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/derby/impl/services/stream/BasicHeaderPrintWriter.html" title="class in org.apache.derby.impl.services.stream"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/derby/impl/services/stream/RollingFileStream.MeteredStream.html" title="class in org.apache.derby.impl.services.stream"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/derby/impl/services/stream/RollingFileStream.html" target="_top">Frames</a></li>
<li><a href="RollingFileStream.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
