<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66) on Mon Jul 03 23:04:43 IST 2017 -->
<title>IndexStatisticsDaemonImpl (Apache Derby V10.13 Internals)</title>
<meta name="date" content="2017-07-03">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="IndexStatisticsDaemonImpl (Apache Derby V10.13 Internals)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":9,"i3":10,"i4":9,"i5":9,"i6":10,"i7":9,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":9,"i22":10,"i23":10,"i24":10,"i25":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/derby/impl/services/daemon/BasicDaemon.html" title="class in org.apache.derby.impl.services.daemon"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.KeyComparator.html" title="class in org.apache.derby.impl.services.daemon"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html" target="_top">Frames</a></li>
<li><a href="IndexStatisticsDaemonImpl.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.derby.impl.services.daemon</div>
<h2 title="Class IndexStatisticsDaemonImpl" class="title">Class IndexStatisticsDaemonImpl</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.derby.impl.services.daemon.IndexStatisticsDaemonImpl</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.lang.Runnable, <a href="../../../../../../org/apache/derby/iapi/services/daemon/IndexStatisticsDaemon.html" title="interface in org.apache.derby.iapi.services.daemon">IndexStatisticsDaemon</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">IndexStatisticsDaemonImpl</span>
extends java.lang.Object
implements <a href="../../../../../../org/apache/derby/iapi/services/daemon/IndexStatisticsDaemon.html" title="interface in org.apache.derby.iapi.services.daemon">IndexStatisticsDaemon</a>, java.lang.Runnable</pre>
<div class="block">Daemon acting as a coordinator for creating and updating index cardinality
 statistics.
 <p>
 The need for updated statistics is currently determined when compiling a
 SELECT query. The unit of work is then scheduled with this daemon, and the
 work itself will be carried out in a separate thread. If the worker thread
 doesn't exist it is created, if it is idle the unit of work will be
 processed immediately, and if it is busy the unit of work has to wait in the
 queue.
 <p>
 The daemon code has a notion of a background task. If the update is run as a
 background task, it will try to affect other activity in the Derby database
 as little as possible. As far as possible, it will not set locks on the
 conglomerates it scans, and if it needs to take locks it will give up
 immediately if the locks cannot be obtained. In some cases it will also roll
 back to release locks already taken, ad then retry. Since we are accessing
 shared structures the background work may still interfere with the user
 activity in the database due to locking, but all such operations carried out
 by the daemon are of short duration.
 <p>
 The high level flow of an update to index statistics is:
 <ol>
      <li>schedule update (the only action carried out by the user thread)<li>
      <li>for each index:</li>
      <ol>
          <li>scan index</li>
          <li>invalidate statements dependent on current statistics</li>
          <li>drop existing statistics</li>
          <li>add new statistics</li>
      </ol>
 </ol>
 <p>
 List of possible improvements:
 <ol>
      <li>Reduce potential impact of multiple invalidations (per table),
          probably by finding a way to invalidate only once after all indexes
          for a table have had their statistics updated. So far invalidation
          has proven to be the most difficult piece of the puzzle due to the
          interaction with the data dictionary and sensitivity to concurrent
          activity for the table.</li>
 </ol>
 <p>
 <em>Implementation notes:</em> List of potential cleanups before going into
 a release:
 <ol>
      <li>Consider removing all tracing code. May involve improving logging
          if parts of the trace output is valuable enough.</li>
 </ol></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.KeyComparator.html" title="class in org.apache.derby.impl.services.daemon">IndexStatisticsDaemonImpl.KeyComparator</a></span></code>
<div class="block">Support class used to compare keys when scanning indexes.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#AS_BACKGROUND_TASK">AS_BACKGROUND_TASK</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#AS_EXPLICIT_TASK">AS_EXPLICIT_TASK</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#ctxMgr">ctxMgr</a></span></code>
<div class="block">The context manager for the worker thread.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#daemonDisabled">daemonDisabled</a></span></code>
<div class="block">Tells if the daemon has been disabled.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/derby/iapi/sql/conn/LanguageConnectionContext.html" title="interface in org.apache.derby.iapi.sql.conn">LanguageConnectionContext</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#daemonLCC">daemonLCC</a></span></code>
<div class="block">The language connection context for the worker thread.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#databaseName">databaseName</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/derby/iapi/db/Database.html" title="interface in org.apache.derby.iapi.db">Database</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#db">db</a></span></code>
<div class="block">The database object for the database we are handling automatic index
 statistics update for.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#dbOwner">dbOwner</a></span></code>
<div class="block">The name of the database owner.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#doLog">doLog</a></span></code>
<div class="block">Tells if logging is enabled.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#doTrace">doTrace</a></span></code>
<div class="block">Tells if tracing is enabled.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#errorsConsecutive">errorsConsecutive</a></span></code>
<div class="block">Number of consecutive errors, used as a metric to decide if the damoen
 should be automatically shut down.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#errorsKnown">errorsKnown</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#errorsUnknown">errorsUnknown</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../org/apache/derby/iapi/services/stream/HeaderPrintWriter.html" title="interface in org.apache.derby.iapi.services.stream">HeaderPrintWriter</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#logStream">logStream</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#MAX_QUEUE_LENGTH">MAX_QUEUE_LENGTH</a></span></code>
<div class="block">Maximum number of work units allowed in the queue.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.ArrayList&lt;<a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#queue">queue</a></span></code>
<div class="block">A list of tables that shall have their index statistics updated.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.Thread</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#runningThread">runningThread</a></span></code>
<div class="block">The thread in which the index statistics refresh operation is being
 executed, if any.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#runTime">runTime</a></span></code>
<div class="block">The period of time (ms) for which the daemon has been doing active work.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#skipDisposableStats">skipDisposableStats</a></span></code>
<div class="block">Tells if disposable stats should be generated, which will happen in
 soft-upgrade mode or when the user asks us to revert to the old behavior.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#timeOfCreation">timeOfCreation</a></span></code>
<div class="block">Specifies when the daemon was created.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#traceToDerbyLog">traceToDerbyLog</a></span></code>
<div class="block">Tells if traces are written to the Derby log file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#traceToStdOut">traceToStdOut</a></span></code>
<div class="block">Tells if traces are written to standard out.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.StringBuffer</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#tsb">tsb</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#wuProcessed">wuProcessed</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#wuRejectedDup">wuRejectedDup</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#wuRejectedFQ">wuRejectedFQ</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#wuRejectedOther">wuRejectedOther</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#wuScheduled">wuScheduled</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#IndexStatisticsDaemonImpl-org.apache.derby.iapi.services.stream.HeaderPrintWriter-boolean-java.lang.String-org.apache.derby.iapi.db.Database-java.lang.String-java.lang.String-">IndexStatisticsDaemonImpl</a></span>(<a href="../../../../../../org/apache/derby/iapi/services/stream/HeaderPrintWriter.html" title="interface in org.apache.derby.iapi.services.stream">HeaderPrintWriter</a>&nbsp;log,
                         boolean&nbsp;doLog,
                         java.lang.String&nbsp;traceLevel,
                         <a href="../../../../../../org/apache/derby/iapi/db/Database.html" title="interface in org.apache.derby.iapi.db">Database</a>&nbsp;db,
                         java.lang.String&nbsp;userName,
                         java.lang.String&nbsp;databaseName)</code>
<div class="block">Creates a new daemon.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#acceptWork-org.apache.derby.iapi.sql.dictionary.TableDescriptor-">acceptWork</a></span>(<a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td)</code>
<div class="block">Determines if the given work can be accepted.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#appendRunStats-java.lang.StringBuffer-">appendRunStats</a></span>(java.lang.StringBuffer&nbsp;sb)</code>
<div class="block">Appends runtime statistics to the given string buffer.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#cardToStr-long:A-">cardToStr</a></span>(long[]&nbsp;cardinality)</code>
<div class="block">Produces a textual representation of the cardinality numbers.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#dbAtLeast10_9-org.apache.derby.iapi.db.Database-">dbAtLeast10_9</a></span>(<a href="../../../../../../org/apache/derby/iapi/db/Database.html" title="interface in org.apache.derby.iapi.db">Database</a>&nbsp;db)</code>
<div class="block">Tells if the database is 10.9 or newer.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#extractIstatInfo-java.lang.Throwable-">extractIstatInfo</a></span>(java.lang.Throwable&nbsp;t)</code>
<div class="block">Purely for debugging, to avoid printing too much info.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#fmtScanTimes-long:A:A-">fmtScanTimes</a></span>(long[][]&nbsp;timings)</code>
<div class="block">Format array of scan durations as a string.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#generateStatistics-org.apache.derby.iapi.sql.conn.LanguageConnectionContext-org.apache.derby.iapi.sql.dictionary.TableDescriptor-">generateStatistics</a></span>(<a href="../../../../../../org/apache/derby/iapi/sql/conn/LanguageConnectionContext.html" title="interface in org.apache.derby.iapi.sql.conn">LanguageConnectionContext</a>&nbsp;lcc,
                  <a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td)</code>
<div class="block">Generates index statistics for all indexes associated with the given
 table descriptor.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>private static <a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html" title="class in org.apache.derby.iapi.services.context">ContextService</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#getContextService--">getContextService</a></span>()</code>
<div class="block">Privileged lookup of the ContextService.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#handleExpectedErrors-org.apache.derby.iapi.sql.dictionary.TableDescriptor-org.apache.derby.iapi.error.StandardException-">handleExpectedErrors</a></span>(<a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td,
                    <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>&nbsp;se)</code>
<div class="block">Handles expected errors.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#handleFatalErrors-org.apache.derby.iapi.services.context.ContextManager-org.apache.derby.iapi.error.StandardException-">handleFatalErrors</a></span>(<a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&nbsp;cm,
                 <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>&nbsp;se)</code>
<div class="block">Handles fatal errors that will cause the daemon to be shut down.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#handleUnexpectedErrors-org.apache.derby.iapi.sql.dictionary.TableDescriptor-org.apache.derby.iapi.error.StandardException-">handleUnexpectedErrors</a></span>(<a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td,
                      <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>&nbsp;se)</code>
<div class="block">Handles unexpected errors.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#invalidateStatements-org.apache.derby.iapi.sql.conn.LanguageConnectionContext-org.apache.derby.iapi.sql.dictionary.TableDescriptor-boolean-">invalidateStatements</a></span>(<a href="../../../../../../org/apache/derby/iapi/sql/conn/LanguageConnectionContext.html" title="interface in org.apache.derby.iapi.sql.conn">LanguageConnectionContext</a>&nbsp;lcc,
                    <a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td,
                    boolean&nbsp;asBackgroundTask)</code>
<div class="block">Performs an invalidation action for the given table (the event being
 statistics update).</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#isShuttingDown--">isShuttingDown</a></span>()</code>
<div class="block">Return true if we are being shutdown</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#log-boolean-org.apache.derby.iapi.sql.dictionary.TableDescriptor-java.lang.String-">log</a></span>(boolean&nbsp;asBackgroundTask,
   <a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td,
   java.lang.String&nbsp;msg)</code>&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#log-boolean-org.apache.derby.iapi.sql.dictionary.TableDescriptor-java.lang.Throwable-java.lang.String-">log</a></span>(boolean&nbsp;asBackgroundTask,
   <a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td,
   java.lang.Throwable&nbsp;t,
   java.lang.String&nbsp;msg)</code>
<div class="block">Logs the information given.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#logAlways-org.apache.derby.iapi.sql.dictionary.TableDescriptor-java.lang.Throwable-java.lang.String-">logAlways</a></span>(<a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td,
         java.lang.Throwable&nbsp;t,
         java.lang.String&nbsp;msg)</code>
<div class="block">Logs the information given.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#processingLoop--">processingLoop</a></span>()</code>
<div class="block">Main processing loop which will compute statistics until the queue
 of scheduled work units has been drained.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#run--">run</a></span>()</code>
<div class="block">Drives the statistics generation.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#runExplicitly-org.apache.derby.iapi.sql.conn.LanguageConnectionContext-org.apache.derby.iapi.sql.dictionary.TableDescriptor-org.apache.derby.iapi.sql.dictionary.ConglomerateDescriptor:A-java.lang.String-">runExplicitly</a></span>(<a href="../../../../../../org/apache/derby/iapi/sql/conn/LanguageConnectionContext.html" title="interface in org.apache.derby.iapi.sql.conn">LanguageConnectionContext</a>&nbsp;lcc,
             <a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td,
             <a href="../../../../../../org/apache/derby/iapi/sql/dictionary/ConglomerateDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">ConglomerateDescriptor</a>[]&nbsp;cds,
             java.lang.String&nbsp;runContext)</code>
<div class="block">Runs the statistics update sequence explicitly as requested by the user.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#schedule-org.apache.derby.iapi.sql.dictionary.TableDescriptor-">schedule</a></span>(<a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td)</code>
<div class="block">Schedules an update of the index statistics for the specified table.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#setHeapRowEstimate-org.apache.derby.iapi.store.access.TransactionController-long-long-">setHeapRowEstimate</a></span>(<a href="../../../../../../org/apache/derby/iapi/store/access/TransactionController.html" title="interface in org.apache.derby.iapi.store.access">TransactionController</a>&nbsp;tc,
                  long&nbsp;tableId,
                  long&nbsp;rowEstimate)</code>
<div class="block">Sets the row estimate for the heap conglomerate.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#sleep-long-">sleep</a></span>(long&nbsp;ms)</code>
<div class="block">Puts the current thread to sleep for maximum <code>ms</code> milliseconds.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#stop--">stop</a></span>()</code>
<div class="block">Stops the daemon.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#trace-int-java.lang.String-">trace</a></span>(int&nbsp;indentLevel,
     java.lang.String&nbsp;msg)</code>&nbsp;</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#updateIndexStatsMinion-org.apache.derby.iapi.sql.conn.LanguageConnectionContext-org.apache.derby.iapi.sql.dictionary.TableDescriptor-org.apache.derby.iapi.sql.dictionary.ConglomerateDescriptor:A-boolean-">updateIndexStatsMinion</a></span>(<a href="../../../../../../org/apache/derby/iapi/sql/conn/LanguageConnectionContext.html" title="interface in org.apache.derby.iapi.sql.conn">LanguageConnectionContext</a>&nbsp;lcc,
                      <a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td,
                      <a href="../../../../../../org/apache/derby/iapi/sql/dictionary/ConglomerateDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">ConglomerateDescriptor</a>[]&nbsp;cds,
                      boolean&nbsp;asBackgroundTask)</code>
<div class="block">Updates the index statistics for the given table and the specified
 indexes.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#writeUpdatedStats-org.apache.derby.iapi.sql.conn.LanguageConnectionContext-org.apache.derby.iapi.sql.dictionary.TableDescriptor-org.apache.derby.catalog.UUID-long-long:A-boolean-">writeUpdatedStats</a></span>(<a href="../../../../../../org/apache/derby/iapi/sql/conn/LanguageConnectionContext.html" title="interface in org.apache.derby.iapi.sql.conn">LanguageConnectionContext</a>&nbsp;lcc,
                 <a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td,
                 <a href="../../../../../../org/apache/derby/catalog/UUID.html" title="interface in org.apache.derby.catalog">UUID</a>&nbsp;index,
                 long&nbsp;numRows,
                 long[]&nbsp;cardinality,
                 boolean&nbsp;asBackgroundTask)</code>
<div class="block">Writes updated statistics for the specified index to the data dictionary.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="AS_BACKGROUND_TASK">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>AS_BACKGROUND_TASK</h4>
<pre>private static final&nbsp;boolean AS_BACKGROUND_TASK</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.derby.impl.services.daemon.IndexStatisticsDaemonImpl.AS_BACKGROUND_TASK">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="AS_EXPLICIT_TASK">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>AS_EXPLICIT_TASK</h4>
<pre>private static final&nbsp;boolean AS_EXPLICIT_TASK</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#org.apache.derby.impl.services.daemon.IndexStatisticsDaemonImpl.AS_EXPLICIT_TASK">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="MAX_QUEUE_LENGTH">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAX_QUEUE_LENGTH</h4>
<pre>private static final&nbsp;int MAX_QUEUE_LENGTH</pre>
<div class="block">Maximum number of work units allowed in the queue.</div>
</li>
</ul>
<a name="logStream">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logStream</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/derby/iapi/services/stream/HeaderPrintWriter.html" title="interface in org.apache.derby.iapi.services.stream">HeaderPrintWriter</a> logStream</pre>
</li>
</ul>
<a name="doLog">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doLog</h4>
<pre>private final&nbsp;boolean doLog</pre>
<div class="block">Tells if logging is enabled.</div>
</li>
</ul>
<a name="doTrace">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doTrace</h4>
<pre>private final&nbsp;boolean doTrace</pre>
<div class="block">Tells if tracing is enabled.</div>
</li>
</ul>
<a name="traceToDerbyLog">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>traceToDerbyLog</h4>
<pre>private final&nbsp;boolean traceToDerbyLog</pre>
<div class="block">Tells if traces are written to the Derby log file.</div>
</li>
</ul>
<a name="traceToStdOut">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>traceToStdOut</h4>
<pre>private final&nbsp;boolean traceToStdOut</pre>
<div class="block">Tells if traces are written to standard out.</div>
</li>
</ul>
<a name="daemonDisabled">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>daemonDisabled</h4>
<pre>private&nbsp;boolean daemonDisabled</pre>
<div class="block">Tells if the daemon has been disabled.</div>
</li>
</ul>
<a name="ctxMgr">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ctxMgr</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a> ctxMgr</pre>
<div class="block">The context manager for the worker thread.</div>
</li>
</ul>
<a name="skipDisposableStats">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>skipDisposableStats</h4>
<pre>public final&nbsp;boolean skipDisposableStats</pre>
<div class="block">Tells if disposable stats should be generated, which will happen in
 soft-upgrade mode or when the user asks us to revert to the old behavior.
 <p>
 Made public to allow access for CreateIndexConstantAction and
 FromBaseTable, but this is no longer necessary when the debug property
 to keep disposable statistics is removed.</div>
</li>
</ul>
<a name="daemonLCC">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>daemonLCC</h4>
<pre>private&nbsp;<a href="../../../../../../org/apache/derby/iapi/sql/conn/LanguageConnectionContext.html" title="interface in org.apache.derby.iapi.sql.conn">LanguageConnectionContext</a> daemonLCC</pre>
<div class="block">The language connection context for the worker thread.</div>
</li>
</ul>
<a name="db">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>db</h4>
<pre>private final&nbsp;<a href="../../../../../../org/apache/derby/iapi/db/Database.html" title="interface in org.apache.derby.iapi.db">Database</a> db</pre>
<div class="block">The database object for the database we are handling automatic index
 statistics update for.</div>
</li>
</ul>
<a name="dbOwner">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dbOwner</h4>
<pre>private final&nbsp;java.lang.String dbOwner</pre>
<div class="block">The name of the database owner.</div>
</li>
</ul>
<a name="databaseName">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>databaseName</h4>
<pre>private final&nbsp;java.lang.String databaseName</pre>
</li>
</ul>
<a name="queue">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queue</h4>
<pre>private final&nbsp;java.util.ArrayList&lt;<a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&gt; queue</pre>
<div class="block">A list of tables that shall have their index statistics updated.
 Note that the descriptor isn't removed before the work has
 been completed.</div>
</li>
</ul>
<a name="runningThread">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runningThread</h4>
<pre>private&nbsp;java.lang.Thread runningThread</pre>
<div class="block">The thread in which the index statistics refresh operation is being
 executed, if any. Created as needed, but there will only be one
 thread doing the work. The thread is allowed to die since it is assumed
 that index statistics regeneration is rather infrequent.</div>
</li>
</ul>
<a name="errorsConsecutive">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>errorsConsecutive</h4>
<pre>private&nbsp;int errorsConsecutive</pre>
<div class="block">Number of consecutive errors, used as a metric to decide if the damoen
 should be automatically shut down.</div>
</li>
</ul>
<a name="errorsUnknown">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>errorsUnknown</h4>
<pre>private&nbsp;long errorsUnknown</pre>
</li>
</ul>
<a name="errorsKnown">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>errorsKnown</h4>
<pre>private&nbsp;long errorsKnown</pre>
</li>
</ul>
<a name="wuProcessed">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>wuProcessed</h4>
<pre>private&nbsp;long wuProcessed</pre>
</li>
</ul>
<a name="wuScheduled">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>wuScheduled</h4>
<pre>private&nbsp;long wuScheduled</pre>
</li>
</ul>
<a name="wuRejectedDup">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>wuRejectedDup</h4>
<pre>private&nbsp;long wuRejectedDup</pre>
</li>
</ul>
<a name="wuRejectedFQ">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>wuRejectedFQ</h4>
<pre>private&nbsp;long wuRejectedFQ</pre>
</li>
</ul>
<a name="wuRejectedOther">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>wuRejectedOther</h4>
<pre>private&nbsp;long wuRejectedOther</pre>
</li>
</ul>
<a name="timeOfCreation">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>timeOfCreation</h4>
<pre>private final&nbsp;long timeOfCreation</pre>
<div class="block">Specifies when the daemon was created.</div>
</li>
</ul>
<a name="runTime">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runTime</h4>
<pre>private&nbsp;long runTime</pre>
<div class="block">The period of time (ms) for which the daemon has been doing active work.</div>
</li>
</ul>
<a name="tsb">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>tsb</h4>
<pre>private final&nbsp;java.lang.StringBuffer tsb</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="IndexStatisticsDaemonImpl-org.apache.derby.iapi.services.stream.HeaderPrintWriter-boolean-java.lang.String-org.apache.derby.iapi.db.Database-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>IndexStatisticsDaemonImpl</h4>
<pre>public&nbsp;IndexStatisticsDaemonImpl(<a href="../../../../../../org/apache/derby/iapi/services/stream/HeaderPrintWriter.html" title="interface in org.apache.derby.iapi.services.stream">HeaderPrintWriter</a>&nbsp;log,
                                 boolean&nbsp;doLog,
                                 java.lang.String&nbsp;traceLevel,
                                 <a href="../../../../../../org/apache/derby/iapi/db/Database.html" title="interface in org.apache.derby.iapi.db">Database</a>&nbsp;db,
                                 java.lang.String&nbsp;userName,
                                 java.lang.String&nbsp;databaseName)</pre>
<div class="block">Creates a new daemon.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>log</code> - the log to write to</dd>
<dd><code>doLog</code> - whether to log activity information</dd>
<dd><code>traceLevel</code> - whether, and to where, trace information should be
      written ("off|log|stdout|both")</dd>
<dd><code>db</code> - the database ("off|log|stdout|both")</dd>
<dd><code>userName</code> - the name of the database owner</dd>
<dd><code>databaseName</code> - the name of the database (not stored in the db obj)</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="dbAtLeast10_9-org.apache.derby.iapi.db.Database-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dbAtLeast10_9</h4>
<pre>private&nbsp;boolean&nbsp;dbAtLeast10_9(<a href="../../../../../../org/apache/derby/iapi/db/Database.html" title="interface in org.apache.derby.iapi.db">Database</a>&nbsp;db)</pre>
<div class="block">Tells if the database is 10.9 or newer.</div>
</li>
</ul>
<a name="schedule-org.apache.derby.iapi.sql.dictionary.TableDescriptor-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>schedule</h4>
<pre>public&nbsp;void&nbsp;schedule(<a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td)</pre>
<div class="block">Schedules an update of the index statistics for the specified table.
 <p>
 Assume the descriptor will be valid until we get around to generate
 the statistics. If it turns out to be invalid, it will be discarded.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/services/daemon/IndexStatisticsDaemon.html#schedule-org.apache.derby.iapi.sql.dictionary.TableDescriptor-">schedule</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/derby/iapi/services/daemon/IndexStatisticsDaemon.html" title="interface in org.apache.derby.iapi.services.daemon">IndexStatisticsDaemon</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>td</code> - base table descriptor to update index statistics for</dd>
</dl>
</li>
</ul>
<a name="acceptWork-org.apache.derby.iapi.sql.dictionary.TableDescriptor-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acceptWork</h4>
<pre>private&nbsp;boolean&nbsp;acceptWork(<a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td)</pre>
<div class="block">Determines if the given work can be accepted.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>td</code> - the table descriptor to check</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if work can be accepted, <code>false</code> if not.</dd>
</dl>
</li>
</ul>
<a name="generateStatistics-org.apache.derby.iapi.sql.conn.LanguageConnectionContext-org.apache.derby.iapi.sql.dictionary.TableDescriptor-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateStatistics</h4>
<pre>private&nbsp;void&nbsp;generateStatistics(<a href="../../../../../../org/apache/derby/iapi/sql/conn/LanguageConnectionContext.html" title="interface in org.apache.derby.iapi.sql.conn">LanguageConnectionContext</a>&nbsp;lcc,
                                <a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td)
                         throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Generates index statistics for all indexes associated with the given
 table descriptor.
 <p>
 This method is run as a background task.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lcc</code> - connection context to use to perform the work</dd>
<dd><code>td</code> - target base table descriptor</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - if accessing the conglomerates fail</dd>
</dl>
</li>
</ul>
<a name="isShuttingDown--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isShuttingDown</h4>
<pre>private&nbsp;boolean&nbsp;isShuttingDown()</pre>
<div class="block">Return true if we are being shutdown</div>
</li>
</ul>
<a name="updateIndexStatsMinion-org.apache.derby.iapi.sql.conn.LanguageConnectionContext-org.apache.derby.iapi.sql.dictionary.TableDescriptor-org.apache.derby.iapi.sql.dictionary.ConglomerateDescriptor:A-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateIndexStatsMinion</h4>
<pre>private&nbsp;void&nbsp;updateIndexStatsMinion(<a href="../../../../../../org/apache/derby/iapi/sql/conn/LanguageConnectionContext.html" title="interface in org.apache.derby.iapi.sql.conn">LanguageConnectionContext</a>&nbsp;lcc,
                                    <a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td,
                                    <a href="../../../../../../org/apache/derby/iapi/sql/dictionary/ConglomerateDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">ConglomerateDescriptor</a>[]&nbsp;cds,
                                    boolean&nbsp;asBackgroundTask)
                             throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Updates the index statistics for the given table and the specified
 indexes.
 <p>
 <strong>API note</strong>: Using <code>null</code> to update the statistics
 for all conglomerates is preferred over explicitly passing an array with
 all the conglomerates for the table. Doing so allows for some
 optimizations, and will cause a disposable statistics check to be
 performed.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lcc</code> - language connection context used to perform the work</dd>
<dd><code>td</code> - the table to update index stats for</dd>
<dd><code>cds</code> - the conglomerates to update statistics for (non-index
      conglomerates will be ignored), <code>null</code> means all indexes</dd>
<dd><code>asBackgroundTask</code> - whether the updates are done automatically as
      part of a background task or if explicitly invoked by the user</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - if something goes wrong</dd>
</dl>
</li>
</ul>
<a name="writeUpdatedStats-org.apache.derby.iapi.sql.conn.LanguageConnectionContext-org.apache.derby.iapi.sql.dictionary.TableDescriptor-org.apache.derby.catalog.UUID-long-long:A-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeUpdatedStats</h4>
<pre>private&nbsp;void&nbsp;writeUpdatedStats(<a href="../../../../../../org/apache/derby/iapi/sql/conn/LanguageConnectionContext.html" title="interface in org.apache.derby.iapi.sql.conn">LanguageConnectionContext</a>&nbsp;lcc,
                               <a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td,
                               <a href="../../../../../../org/apache/derby/catalog/UUID.html" title="interface in org.apache.derby.catalog">UUID</a>&nbsp;index,
                               long&nbsp;numRows,
                               long[]&nbsp;cardinality,
                               boolean&nbsp;asBackgroundTask)
                        throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Writes updated statistics for the specified index to the data dictionary.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lcc</code> - connection context to use to perform the work</dd>
<dd><code>td</code> - the base table</dd>
<dd><code>index</code> - the index of the base table</dd>
<dd><code>numRows</code> - number of rows in the base table</dd>
<dd><code>cardinality</code> - the number of unique values in the index (per number
      of leading columns)</dd>
<dd><code>asBackgroundTask</code> - whether the update is done automatically as
      part of a background task or if explicitly invoked by the user</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - if updating the data dictionary fails</dd>
</dl>
</li>
</ul>
<a name="invalidateStatements-org.apache.derby.iapi.sql.conn.LanguageConnectionContext-org.apache.derby.iapi.sql.dictionary.TableDescriptor-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>invalidateStatements</h4>
<pre>private&nbsp;void&nbsp;invalidateStatements(<a href="../../../../../../org/apache/derby/iapi/sql/conn/LanguageConnectionContext.html" title="interface in org.apache.derby.iapi.sql.conn">LanguageConnectionContext</a>&nbsp;lcc,
                                  <a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td,
                                  boolean&nbsp;asBackgroundTask)
                           throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Performs an invalidation action for the given table (the event being
 statistics update).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lcc</code> - connection context to use to perform the work</dd>
<dd><code>td</code> - the table to invalidate for</dd>
<dd><code>asBackgroundTask</code> - whether the update is done automatically as
      part of a background task or if explicitly invoked by the user</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - if the invalidation request fails</dd>
</dl>
</li>
</ul>
<a name="setHeapRowEstimate-org.apache.derby.iapi.store.access.TransactionController-long-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setHeapRowEstimate</h4>
<pre>private&nbsp;void&nbsp;setHeapRowEstimate(<a href="../../../../../../org/apache/derby/iapi/store/access/TransactionController.html" title="interface in org.apache.derby.iapi.store.access">TransactionController</a>&nbsp;tc,
                                long&nbsp;tableId,
                                long&nbsp;rowEstimate)
                         throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Sets the row estimate for the heap conglomerate.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tc</code> - transaction to use</dd>
<dd><code>tableId</code> - the heap table</dd>
<dd><code>rowEstimate</code> - estimate of number of rows in the table</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - if accessing the table fails</dd>
</dl>
</li>
</ul>
<a name="run--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre>public&nbsp;void&nbsp;run()</pre>
<div class="block">Drives the statistics generation.
 <p>
 This method will be run in a separate thread, and it will keep working
 as long as there is work to do. When the queue is exhausted, the method
 will exit (the thread dies).</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
</dl>
</li>
</ul>
<a name="processingLoop--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processingLoop</h4>
<pre>private&nbsp;void&nbsp;processingLoop()</pre>
<div class="block">Main processing loop which will compute statistics until the queue
 of scheduled work units has been drained.</div>
</li>
</ul>
<a name="runExplicitly-org.apache.derby.iapi.sql.conn.LanguageConnectionContext-org.apache.derby.iapi.sql.dictionary.TableDescriptor-org.apache.derby.iapi.sql.dictionary.ConglomerateDescriptor:A-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runExplicitly</h4>
<pre>public&nbsp;void&nbsp;runExplicitly(<a href="../../../../../../org/apache/derby/iapi/sql/conn/LanguageConnectionContext.html" title="interface in org.apache.derby.iapi.sql.conn">LanguageConnectionContext</a>&nbsp;lcc,
                          <a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td,
                          <a href="../../../../../../org/apache/derby/iapi/sql/dictionary/ConglomerateDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">ConglomerateDescriptor</a>[]&nbsp;cds,
                          java.lang.String&nbsp;runContext)
                   throws <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></pre>
<div class="block">Runs the statistics update sequence explicitly as requested by the user.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/services/daemon/IndexStatisticsDaemon.html#runExplicitly-org.apache.derby.iapi.sql.conn.LanguageConnectionContext-org.apache.derby.iapi.sql.dictionary.TableDescriptor-org.apache.derby.iapi.sql.dictionary.ConglomerateDescriptor:A-java.lang.String-">runExplicitly</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/derby/iapi/services/daemon/IndexStatisticsDaemon.html" title="interface in org.apache.derby.iapi.services.daemon">IndexStatisticsDaemon</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lcc</code> - connection context to use to perform the work</dd>
<dd><code>td</code> - the base table</dd>
<dd><code>cds</code> - the indexes to update (non-index conglomerates are ignored)</dd>
<dd><code>runContext</code> - the context in which the operation is run (i.e.
      'ALTER TABLE', may be <code>null</code>)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a></code> - if updating the index statistics fails</dd>
</dl>
</li>
</ul>
<a name="stop--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stop</h4>
<pre>public&nbsp;void&nbsp;stop()</pre>
<div class="block">Stops the daemon.
 <p>
 Will also clear the queue and print runtime statistics to the log the
 first time the method is invoked.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/apache/derby/iapi/services/daemon/IndexStatisticsDaemon.html#stop--">stop</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/derby/iapi/services/daemon/IndexStatisticsDaemon.html" title="interface in org.apache.derby.iapi.services.daemon">IndexStatisticsDaemon</a></code></dd>
</dl>
</li>
</ul>
<a name="handleFatalErrors-org.apache.derby.iapi.services.context.ContextManager-org.apache.derby.iapi.error.StandardException-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>handleFatalErrors</h4>
<pre>private&nbsp;boolean&nbsp;handleFatalErrors(<a href="../../../../../../org/apache/derby/iapi/services/context/ContextManager.html" title="class in org.apache.derby.iapi.services.context">ContextManager</a>&nbsp;cm,
                                  <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>&nbsp;se)</pre>
<div class="block">Handles fatal errors that will cause the daemon to be shut down.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>cm</code> - context manager</dd>
<dd><code>se</code> - the exception to handle</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the error was handled, <code>false</code> otherwise</dd>
</dl>
</li>
</ul>
<a name="handleExpectedErrors-org.apache.derby.iapi.sql.dictionary.TableDescriptor-org.apache.derby.iapi.error.StandardException-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>handleExpectedErrors</h4>
<pre>private&nbsp;boolean&nbsp;handleExpectedErrors(<a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td,
                                     <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>&nbsp;se)</pre>
<div class="block">Handles expected errors.
 <p>
 The logging of expected errors is for observability purposes only. The
 daemon is capable of dealing with these errors, and no interaction from
 the user is expected.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>se</code> - the exception to handle</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the error was handled, <code>false</code> otherwise</dd>
</dl>
</li>
</ul>
<a name="handleUnexpectedErrors-org.apache.derby.iapi.sql.dictionary.TableDescriptor-org.apache.derby.iapi.error.StandardException-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>handleUnexpectedErrors</h4>
<pre>private&nbsp;boolean&nbsp;handleUnexpectedErrors(<a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td,
                                       <a href="../../../../../../org/apache/derby/iapi/error/StandardException.html" title="class in org.apache.derby.iapi.error">StandardException</a>&nbsp;se)</pre>
<div class="block">Handles unexpected errors.
 <p>
 Unexpected errors are error conditions the daemon isn't set up to handle
 specifically. For this reason the stack trace will be logged to allow
 for later investigation.
 <p>
 In general it is expected that the daemon will be able to recover by
 dropping the current unit of work and move on to the next one (if any).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>se</code> - the exception to handle</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the error was handled, <code>false</code> otherwise</dd>
</dl>
</li>
</ul>
<a name="sleep-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sleep</h4>
<pre>private static&nbsp;void&nbsp;sleep(long&nbsp;ms)</pre>
<div class="block">Puts the current thread to sleep for maximum <code>ms</code> milliseconds.
 <p>
 No guarantee is provided for the minimum amount of time slept. If
 interrupted, the interrupt flag will be set again.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ms</code> - target sleep time</dd>
</dl>
</li>
</ul>
<a name="fmtScanTimes-long:A:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fmtScanTimes</h4>
<pre>private static&nbsp;java.lang.String&nbsp;fmtScanTimes(long[][]&nbsp;timings)</pre>
<div class="block">Format array of scan durations as a string.</div>
</li>
</ul>
<a name="log-boolean-org.apache.derby.iapi.sql.dictionary.TableDescriptor-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>log</h4>
<pre>private&nbsp;void&nbsp;log(boolean&nbsp;asBackgroundTask,
                 <a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td,
                 java.lang.String&nbsp;msg)</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html#log-boolean-org.apache.derby.iapi.sql.dictionary.TableDescriptor-java.lang.Throwable-java.lang.String-"><code>log(boolean, TableDescriptor, Throwable, String)</code></a></dd>
</dl>
</li>
</ul>
<a name="log-boolean-org.apache.derby.iapi.sql.dictionary.TableDescriptor-java.lang.Throwable-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>log</h4>
<pre>private&nbsp;void&nbsp;log(boolean&nbsp;asBackgroundTask,
                 <a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td,
                 java.lang.Throwable&nbsp;t,
                 java.lang.String&nbsp;msg)</pre>
<div class="block">Logs the information given.
 <p>
 Note that if <code>asBackgroundTask</code> is false, nothing will be logged
 currently.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>asBackgroundTask</code> - <code>true</code> if logging for the background
      daemon automatically updating stats, <code>false</code> if not</dd>
<dd><code>td</code> - current table descriptor being worked on, may be <code>null</code></dd>
<dd><code>t</code> - raised error, may be <code>null</code></dd>
<dd><code>msg</code> - the message to log</dd>
</dl>
</li>
</ul>
<a name="logAlways-org.apache.derby.iapi.sql.dictionary.TableDescriptor-java.lang.Throwable-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logAlways</h4>
<pre>private&nbsp;void&nbsp;logAlways(<a href="../../../../../../org/apache/derby/iapi/sql/dictionary/TableDescriptor.html" title="class in org.apache.derby.iapi.sql.dictionary">TableDescriptor</a>&nbsp;td,
                       java.lang.Throwable&nbsp;t,
                       java.lang.String&nbsp;msg)</pre>
<div class="block">Logs the information given.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>td</code> - current table descriptor being worked on, may be <code>null</code></dd>
<dd><code>t</code> - raised error, may be <code>null</code></dd>
<dd><code>msg</code> - the message to log</dd>
</dl>
</li>
</ul>
<a name="trace-int-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trace</h4>
<pre>private&nbsp;void&nbsp;trace(int&nbsp;indentLevel,
                   java.lang.String&nbsp;msg)</pre>
</li>
</ul>
<a name="appendRunStats-java.lang.StringBuffer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>appendRunStats</h4>
<pre>private&nbsp;void&nbsp;appendRunStats(java.lang.StringBuffer&nbsp;sb)</pre>
<div class="block">Appends runtime statistics to the given string buffer.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sb</code> - the string buffer to append to</dd>
</dl>
</li>
</ul>
<a name="cardToStr-long:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cardToStr</h4>
<pre>private static&nbsp;java.lang.String&nbsp;cardToStr(long[]&nbsp;cardinality)</pre>
<div class="block">Produces a textual representation of the cardinality numbers.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>cardinality</code> - index cardinality</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A string.</dd>
</dl>
</li>
</ul>
<a name="extractIstatInfo-java.lang.Throwable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>extractIstatInfo</h4>
<pre>private static&nbsp;java.lang.String&nbsp;extractIstatInfo(java.lang.Throwable&nbsp;t)</pre>
<div class="block">Purely for debugging, to avoid printing too much info.</div>
</li>
</ul>
<a name="getContextService--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getContextService</h4>
<pre>private static&nbsp;<a href="../../../../../../org/apache/derby/iapi/services/context/ContextService.html" title="class in org.apache.derby.iapi.services.context">ContextService</a>&nbsp;getContextService()</pre>
<div class="block">Privileged lookup of the ContextService. Must be private so that user code
 can't call this entry point.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Built on Mon 2017-07-03 23:03:59+0530, from revision Unversioned directory</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/derby/impl/services/daemon/BasicDaemon.html" title="class in org.apache.derby.impl.services.daemon"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.KeyComparator.html" title="class in org.apache.derby.impl.services.daemon"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.html" target="_top">Frames</a></li>
<li><a href="IndexStatisticsDaemonImpl.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Derby V10.13 Internals - <i>Copyright &copy; 2004,2016 The Apache Software Foundation. All Rights Reserved.</i></small></p>
</body>
</html>
